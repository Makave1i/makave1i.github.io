import{g as qm,b as j_,T as V_,C as It,R as Ma,P as le,G as Ve,c as Xn,S as jn,d as df,f as Vn,h as wa,i as Ym,j as As,k as P_,l as Q_,m as Z_,n as W_,o as K_,p as F_,q as J_,r as Xm,s as $_}from"./pixi-BF8YC6bq.js";import{r as jm,a as tS}from"./react-Dh3zDKDA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var Th={exports:{}},Hl={};var G0;function eS(){if(G0)return Hl;G0=1;var d=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var c in l)c!=="key"&&(o[c]=l[c])}else o=l;return l=o.ref,{$$typeof:d,type:a,key:u,ref:l!==void 0?l:null,props:o}}return Hl.Fragment=e,Hl.jsx=n,Hl.jsxs=n,Hl}var q0;function iS(){return q0||(q0=1,Th.exports=eS()),Th.exports}var Q=iS(),an=jm();const Ts=qm(an);var Mh={exports:{}},zl={},wh={exports:{}},Ch={};var Y0;function nS(){return Y0||(Y0=1,(function(d){function e(R,P){var K=R.length;R.push(P);t:for(;0<K;){var vt=K-1>>>1,mt=R[vt];if(0<l(mt,P))R[vt]=P,R[K]=mt,K=vt;else break t}}function n(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var P=R[0],K=R.pop();if(K!==P){R[0]=K;t:for(var vt=0,mt=R.length,bt=mt>>>1;vt<bt;){var yt=2*(vt+1)-1,at=R[yt],_t=yt+1,Xt=R[_t];if(0>l(at,K))_t<mt&&0>l(Xt,at)?(R[vt]=Xt,R[_t]=K,vt=_t):(R[vt]=at,R[yt]=K,vt=yt);else if(_t<mt&&0>l(Xt,K))R[vt]=Xt,R[_t]=K,vt=_t;else break t}}return P}function l(R,P){var K=R.sortIndex-P.sortIndex;return K!==0?K:R.id-P.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();d.unstable_now=function(){return u.now()-c}}var f=[],g=[],m=1,y=null,_=3,S=!1,T=!1,x=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function B(R){for(var P=n(g);P!==null;){if(P.callback===null)a(g);else if(P.startTime<=R)a(g),P.sortIndex=P.expirationTime,e(f,P);else break;P=n(g)}}function N(R){if(x=!1,B(R),!T)if(n(f)!==null)T=!0,G||(G=!0,et());else{var P=n(g);P!==null&&ot(N,P.startTime-R)}}var G=!1,Y=-1,j=5,I=-1;function F(){return M?!0:!(d.unstable_now()-I<j)}function it(){if(M=!1,G){var R=d.unstable_now();I=R;var P=!0;try{t:{T=!1,x&&(x=!1,E(Y),Y=-1),S=!0;var K=_;try{e:{for(B(R),y=n(f);y!==null&&!(y.expirationTime>R&&F());){var vt=y.callback;if(typeof vt=="function"){y.callback=null,_=y.priorityLevel;var mt=vt(y.expirationTime<=R);if(R=d.unstable_now(),typeof mt=="function"){y.callback=mt,B(R),P=!0;break e}y===n(f)&&a(f),B(R)}else a(f);y=n(f)}if(y!==null)P=!0;else{var bt=n(g);bt!==null&&ot(N,bt.startTime-R),P=!1}}break t}finally{y=null,_=K,S=!1}P=void 0}}finally{P?et():G=!1}}}var et;if(typeof H=="function")et=function(){H(it)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,wt=nt.port2;nt.port1.onmessage=it,et=function(){wt.postMessage(null)}}else et=function(){w(it,0)};function ot(R,P){Y=w(function(){R(d.unstable_now())},P)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(R){R.callback=null},d.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},d.unstable_getCurrentPriorityLevel=function(){return _},d.unstable_next=function(R){switch(_){case 1:case 2:case 3:var P=3;break;default:P=_}var K=_;_=P;try{return R()}finally{_=K}},d.unstable_requestPaint=function(){M=!0},d.unstable_runWithPriority=function(R,P){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var K=_;_=R;try{return P()}finally{_=K}},d.unstable_scheduleCallback=function(R,P,K){var vt=d.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?vt+K:vt):K=vt,R){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=K+mt,R={id:m++,callback:P,priorityLevel:R,startTime:K,expirationTime:mt,sortIndex:-1},K>vt?(R.sortIndex=K,e(g,R),n(f)===null&&R===n(g)&&(x?(E(Y),Y=-1):x=!0,ot(N,K-vt))):(R.sortIndex=mt,e(f,R),T||S||(T=!0,G||(G=!0,et()))),R},d.unstable_shouldYield=F,d.unstable_wrapCallback=function(R){var P=_;return function(){var K=_;_=P;try{return R.apply(this,arguments)}finally{_=K}}}})(Ch)),Ch}var X0;function aS(){return X0||(X0=1,wh.exports=nS()),wh.exports}var j0;function sS(){if(j0)return zl;j0=1;var d=aS(),e=jm(),n=tS();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function o(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function u(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function c(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function f(t){if(o(t)!==t)throw Error(a(188))}function g(t){var i=t.alternate;if(!i){if(i=o(t),i===null)throw Error(a(188));return i!==t?null:t}for(var s=t,r=i;;){var h=s.return;if(h===null)break;var p=h.alternate;if(p===null){if(r=h.return,r!==null){s=r;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===s)return f(h),t;if(p===r)return f(h),i;p=p.sibling}throw Error(a(188))}if(s.return!==r.return)s=h,r=p;else{for(var v=!1,b=h.child;b;){if(b===s){v=!0,s=h,r=p;break}if(b===r){v=!0,r=h,s=p;break}b=b.sibling}if(!v){for(b=p.child;b;){if(b===s){v=!0,s=p,r=h;break}if(b===r){v=!0,r=p,s=h;break}b=b.sibling}if(!v)throw Error(a(189))}}if(s.alternate!==r)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:i}function m(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=m(t),i!==null)return i;t=t.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),H=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function et(t){return t===null||typeof t!="object"?null:(t=it&&t[it]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Symbol.for("react.client.reference");function wt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===nt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case w:return"Profiler";case M:return"StrictMode";case N:return"Suspense";case G:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case H:return t.displayName||"Context";case E:return(t._context.displayName||"Context")+".Consumer";case B:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return i=t.displayName||null,i!==null?i:wt(t.type)||"Memo";case j:i=t._payload,t=t._init;try{return wt(t(i))}catch{}}return null}var ot=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},vt=[],mt=-1;function bt(t){return{current:t}}function yt(t){0>mt||(t.current=vt[mt],vt[mt]=null,mt--)}function at(t,i){mt++,vt[mt]=t.current,t.current=i}var _t=bt(null),Xt=bt(null),Ai=bt(null),Ra=bt(null);function Na(t,i){switch(at(Ai,i),at(Xt,t),at(_t,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?u0(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=u0(i),t=c0(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}yt(_t),at(_t,t)}function cn(){yt(_t),yt(Xt),yt(Ai)}function he(t){t.memoizedState!==null&&at(Ra,t);var i=_t.current,s=c0(i,t.type);i!==s&&(at(Xt,t),at(_t,s))}function ar(t){Xt.current===t&&(yt(_t),yt(Xt)),Ra.current===t&&(yt(Ra),Cl._currentValue=K)}var su,If;function $n(t){if(su===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);su=i&&i[1]||"",If=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+su+t+If}var lu=!1;function ru(t,i){if(!t||lu)return"";lu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(k){var D=k}Reflect.construct(t,[],X)}else{try{X.call()}catch(k){D=k}t.call(X.prototype)}}else{try{throw Error()}catch(k){D=k}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(k){if(k&&D&&typeof k.stack=="string")return[k.stack,D.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=r.DetermineComponentFrameRoot(),v=p[0],b=p[1];if(v&&b){var C=v.split(`
`),U=b.split(`
`);for(h=r=0;r<C.length&&!C[r].includes("DetermineComponentFrameRoot");)r++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(r===C.length||h===U.length)for(r=C.length-1,h=U.length-1;1<=r&&0<=h&&C[r]!==U[h];)h--;for(;1<=r&&0<=h;r--,h--)if(C[r]!==U[h]){if(r!==1||h!==1)do if(r--,h--,0>h||C[r]!==U[h]){var L=`
`+C[r].replace(" at new "," at ");return t.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",t.displayName)),L}while(1<=r&&0<=h);break}}}finally{lu=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?$n(s):""}function xv(t,i){switch(t.tag){case 26:case 27:case 5:return $n(t.type);case 16:return $n("Lazy");case 13:return t.child!==i&&i!==null?$n("Suspense Fallback"):$n("Suspense");case 19:return $n("SuspenseList");case 0:case 15:return ru(t.type,!1);case 11:return ru(t.type.render,!1);case 1:return ru(t.type,!0);case 31:return $n("Activity");default:return""}}function Gf(t){try{var i="",s=null;do i+=xv(t,s),s=t,t=t.return;while(t);return i}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var ou=Object.prototype.hasOwnProperty,uu=d.unstable_scheduleCallback,cu=d.unstable_cancelCallback,bv=d.unstable_shouldYield,Tv=d.unstable_requestPaint,Re=d.unstable_now,Mv=d.unstable_getCurrentPriorityLevel,qf=d.unstable_ImmediatePriority,Yf=d.unstable_UserBlockingPriority,sr=d.unstable_NormalPriority,wv=d.unstable_LowPriority,Xf=d.unstable_IdlePriority,Cv=d.log,Av=d.unstable_setDisableYieldValue,Ls=null,Ne=null;function hn(t){if(typeof Cv=="function"&&Av(t),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Ls,t)}catch{}}var Be=Math.clz32?Math.clz32:Hv,Ev=Math.log,Ov=Math.LN2;function Hv(t){return t>>>=0,t===0?32:31-(Ev(t)/Ov|0)|0}var lr=256,rr=262144,or=4194304;function ta(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ur(t,i,s){var r=t.pendingLanes;if(r===0)return 0;var h=0,p=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=r&134217727;return b!==0?(r=b&~p,r!==0?h=ta(r):(v&=b,v!==0?h=ta(v):s||(s=b&~t,s!==0&&(h=ta(s))))):(b=r&~p,b!==0?h=ta(b):v!==0?h=ta(v):s||(s=r&~t,s!==0&&(h=ta(s)))),h===0?0:i!==0&&i!==h&&(i&p)===0&&(p=h&-h,s=i&-i,p>=s||p===32&&(s&4194048)!==0)?i:h}function Is(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function zv(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jf(){var t=or;return or<<=1,(or&62914560)===0&&(or=4194304),t}function hu(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function Gs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uv(t,i,s,r,h,p){var v=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var b=t.entanglements,C=t.expirationTimes,U=t.hiddenUpdates;for(s=v&~s;0<s;){var L=31-Be(s),X=1<<L;b[L]=0,C[L]=-1;var D=U[L];if(D!==null)for(U[L]=null,L=0;L<D.length;L++){var k=D[L];k!==null&&(k.lane&=-536870913)}s&=~X}r!==0&&Vf(t,r,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(v&~i))}function Vf(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var r=31-Be(i);t.entangledLanes|=i,t.entanglements[r]=t.entanglements[r]|1073741824|s&261930}function Pf(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var r=31-Be(s),h=1<<r;h&i|t[r]&i&&(t[r]|=i),s&=~h}}function Qf(t,i){var s=i&-i;return s=(s&42)!==0?1:fu(s),(s&(t.suspendedLanes|i))!==0?0:s}function fu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function du(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Zf(){var t=P.p;return t!==0?t:(t=window.event,t===void 0?32:D0(t.type))}function Wf(t,i){var s=P.p;try{return P.p=t,i()}finally{P.p=s}}var fn=Math.random().toString(36).slice(2),fe="__reactFiber$"+fn,be="__reactProps$"+fn,Ba="__reactContainer$"+fn,pu="__reactEvents$"+fn,Dv="__reactListeners$"+fn,Rv="__reactHandles$"+fn,Kf="__reactResources$"+fn,qs="__reactMarker$"+fn;function gu(t){delete t[fe],delete t[be],delete t[pu],delete t[Dv],delete t[Rv]}function ka(t){var i=t[fe];if(i)return i;for(var s=t.parentNode;s;){if(i=s[Ba]||s[fe]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=y0(t);t!==null;){if(s=t[fe])return s;t=y0(t)}return i}t=s,s=t.parentNode}return null}function La(t){if(t=t[fe]||t[Ba]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Ys(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function Ia(t){var i=t[Kf];return i||(i=t[Kf]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function re(t){t[qs]=!0}var Ff=new Set,Jf={};function ea(t,i){Ga(t,i),Ga(t+"Capture",i)}function Ga(t,i){for(Jf[t]=i,t=0;t<i.length;t++)Ff.add(i[t])}var Nv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$f={},td={};function Bv(t){return ou.call(td,t)?!0:ou.call($f,t)?!1:Nv.test(t)?td[t]=!0:($f[t]=!0,!1)}function cr(t,i,s){if(Bv(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var r=i.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function hr(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function ki(t,i,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+r)}}function ti(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ed(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function kv(t,i,s){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,p=r.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){s=""+v,p.call(this,v)}}),Object.defineProperty(t,i,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function mu(t){if(!t._valueTracker){var i=ed(t)?"checked":"value";t._valueTracker=kv(t,i,""+t[i])}}function id(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),r="";return t&&(r=ed(t)?t.checked?"true":"false":t.value),t=r,t!==s?(i.setValue(t),!0):!1}function fr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Lv=/[\n"\\]/g;function ei(t){return t.replace(Lv,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function yu(t,i,s,r,h,p,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+ti(i)):t.value!==""+ti(i)&&(t.value=""+ti(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?vu(t,v,ti(i)):s!=null?vu(t,v,ti(s)):r!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+ti(b):t.removeAttribute("name")}function nd(t,i,s,r,h,p,v,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),i!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){mu(t);return}s=s!=null?""+ti(s):"",i=i!=null?""+ti(i):s,b||i===t.value||(t.value=i),t.defaultValue=i}r=r??h,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=b?t.checked:!!r,t.defaultChecked=!!r,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),mu(t)}function vu(t,i,s){i==="number"&&fr(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function qa(t,i,s,r){if(t=t.options,i){i={};for(var h=0;h<s.length;h++)i["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=i.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&r&&(t[s].defaultSelected=!0)}else{for(s=""+ti(s),i=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,r&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function ad(t,i,s){if(i!=null&&(i=""+ti(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+ti(s):""}function sd(t,i,s,r){if(i==null){if(r!=null){if(s!=null)throw Error(a(92));if(ot(r)){if(1<r.length)throw Error(a(93));r=r[0]}s=r}s==null&&(s=""),i=s}s=ti(i),t.defaultValue=s,r=t.textContent,r===s&&r!==""&&r!==null&&(t.value=r),mu(t)}function Ya(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var Iv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ld(t,i,s){var r=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?r?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":r?t.setProperty(i,s):typeof s!="number"||s===0||Iv.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function rd(t,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,s!=null){for(var r in s)!s.hasOwnProperty(r)||i!=null&&i.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var h in i)r=i[h],i.hasOwnProperty(h)&&s[h]!==r&&ld(t,h,r)}else for(var p in i)i.hasOwnProperty(p)&&ld(t,p,i[p])}function _u(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dr(t){return qv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Li(){}var Su=null;function xu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xa=null,ja=null;function od(t){var i=La(t);if(i&&(t=i.stateNode)){var s=t[be]||null;t:switch(t=i.stateNode,i.type){case"input":if(yu(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ei(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var r=s[i];if(r!==t&&r.form===t.form){var h=r[be]||null;if(!h)throw Error(a(90));yu(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<s.length;i++)r=s[i],r.form===t.form&&id(r)}break t;case"textarea":ad(t,s.value,s.defaultValue);break t;case"select":i=s.value,i!=null&&qa(t,!!s.multiple,i,!1)}}}var bu=!1;function ud(t,i,s){if(bu)return t(i,s);bu=!0;try{var r=t(i);return r}finally{if(bu=!1,(Xa!==null||ja!==null)&&(to(),Xa&&(i=Xa,t=ja,ja=Xa=null,od(i),t)))for(i=0;i<t.length;i++)od(t[i])}}function Xs(t,i){var s=t.stateNode;if(s===null)return null;var r=s[be]||null;if(r===null)return null;s=r[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=!1;if(Ii)try{var js={};Object.defineProperty(js,"passive",{get:function(){Tu=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Tu=!1}var dn=null,Mu=null,pr=null;function cd(){if(pr)return pr;var t,i=Mu,s=i.length,r,h="value"in dn?dn.value:dn.textContent,p=h.length;for(t=0;t<s&&i[t]===h[t];t++);var v=s-t;for(r=1;r<=v&&i[s-r]===h[p-r];r++);return pr=h.slice(t,1<r?1-r:void 0)}function gr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function mr(){return!0}function hd(){return!1}function Te(t){function i(s,r,h,p,v){this._reactName=s,this._targetInst=h,this.type=r,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(s=t[b],this[b]=s?s(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?mr:hd,this.isPropagationStopped=hd,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),i}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yr=Te(ia),Vs=y({},ia,{view:0,detail:0}),Yv=Te(Vs),wu,Cu,Ps,vr=y({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(wu=t.screenX-Ps.screenX,Cu=t.screenY-Ps.screenY):Cu=wu=0,Ps=t),wu)},movementY:function(t){return"movementY"in t?t.movementY:Cu}}),fd=Te(vr),Xv=y({},vr,{dataTransfer:0}),jv=Te(Xv),Vv=y({},Vs,{relatedTarget:0}),Au=Te(Vv),Pv=y({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Qv=Te(Pv),Zv=y({},ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wv=Te(Zv),Kv=y({},ia,{data:0}),dd=Te(Kv),Fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$v={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t1(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=$v[t])?!!i[t]:!1}function Eu(){return t1}var e1=y({},Vs,{key:function(t){if(t.key){var i=Fv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=gr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(t){return t.type==="keypress"?gr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),i1=Te(e1),n1=y({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pd=Te(n1),a1=y({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),s1=Te(a1),l1=y({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),r1=Te(l1),o1=y({},vr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),u1=Te(o1),c1=y({},ia,{newState:0,oldState:0}),h1=Te(c1),f1=[9,13,27,32],Ou=Ii&&"CompositionEvent"in window,Qs=null;Ii&&"documentMode"in document&&(Qs=document.documentMode);var d1=Ii&&"TextEvent"in window&&!Qs,gd=Ii&&(!Ou||Qs&&8<Qs&&11>=Qs),md=" ",yd=!1;function vd(t,i){switch(t){case"keyup":return f1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _d(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Va=!1;function p1(t,i){switch(t){case"compositionend":return _d(i);case"keypress":return i.which!==32?null:(yd=!0,md);case"textInput":return t=i.data,t===md&&yd?null:t;default:return null}}function g1(t,i){if(Va)return t==="compositionend"||!Ou&&vd(t,i)?(t=cd(),pr=Mu=dn=null,Va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return gd&&i.locale!=="ko"?null:i.data;default:return null}}var m1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!m1[t.type]:i==="textarea"}function xd(t,i,s,r){Xa?ja?ja.push(r):ja=[r]:Xa=r,i=ro(i,"onChange"),0<i.length&&(s=new yr("onChange","change",null,s,r),t.push({event:s,listeners:i}))}var Zs=null,Ws=null;function y1(t){n0(t,0)}function _r(t){var i=Ys(t);if(id(i))return t}function bd(t,i){if(t==="change")return i}var Td=!1;if(Ii){var Hu;if(Ii){var zu="oninput"in document;if(!zu){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),zu=typeof Md.oninput=="function"}Hu=zu}else Hu=!1;Td=Hu&&(!document.documentMode||9<document.documentMode)}function wd(){Zs&&(Zs.detachEvent("onpropertychange",Cd),Ws=Zs=null)}function Cd(t){if(t.propertyName==="value"&&_r(Ws)){var i=[];xd(i,Ws,t,xu(t)),ud(y1,i)}}function v1(t,i,s){t==="focusin"?(wd(),Zs=i,Ws=s,Zs.attachEvent("onpropertychange",Cd)):t==="focusout"&&wd()}function _1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _r(Ws)}function S1(t,i){if(t==="click")return _r(i)}function x1(t,i){if(t==="input"||t==="change")return _r(i)}function b1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ke=typeof Object.is=="function"?Object.is:b1;function Ks(t,i){if(ke(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),r=Object.keys(i);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var h=s[r];if(!ou.call(i,h)||!ke(t[h],i[h]))return!1}return!0}function Ad(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ed(t,i){var s=Ad(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=i&&r>=i)return{node:s,offset:i-t};t=r}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Ad(s)}}function Od(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Od(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Hd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=fr(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=fr(t.document)}return i}function Uu(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var T1=Ii&&"documentMode"in document&&11>=document.documentMode,Pa=null,Du=null,Fs=null,Ru=!1;function zd(t,i,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ru||Pa==null||Pa!==fr(r)||(r=Pa,"selectionStart"in r&&Uu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fs&&Ks(Fs,r)||(Fs=r,r=ro(Du,"onSelect"),0<r.length&&(i=new yr("onSelect","select",null,i,s),t.push({event:i,listeners:r}),i.target=Pa)))}function na(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var Qa={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},Nu={},Ud={};Ii&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function aa(t){if(Nu[t])return Nu[t];if(!Qa[t])return t;var i=Qa[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ud)return Nu[t]=i[s];return t}var Dd=aa("animationend"),Rd=aa("animationiteration"),Nd=aa("animationstart"),M1=aa("transitionrun"),w1=aa("transitionstart"),C1=aa("transitioncancel"),Bd=aa("transitionend"),kd=new Map,Bu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bu.push("scrollEnd");function xi(t,i){kd.set(t,i),ea(i,[t])}var Sr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ii=[],Za=0,ku=0;function xr(){for(var t=Za,i=ku=Za=0;i<t;){var s=ii[i];ii[i++]=null;var r=ii[i];ii[i++]=null;var h=ii[i];ii[i++]=null;var p=ii[i];if(ii[i++]=null,r!==null&&h!==null){var v=r.pending;v===null?h.next=h:(h.next=v.next,v.next=h),r.pending=h}p!==0&&Ld(s,h,p)}}function br(t,i,s,r){ii[Za++]=t,ii[Za++]=i,ii[Za++]=s,ii[Za++]=r,ku|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Lu(t,i,s,r){return br(t,i,s,r),Tr(t)}function sa(t,i){return br(t,null,null,i),Tr(t)}function Ld(t,i,s){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s);for(var h=!1,p=t.return;p!==null;)p.childLanes|=s,r=p.alternate,r!==null&&(r.childLanes|=s),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&i!==null&&(h=31-Be(s),t=p.hiddenUpdates,r=t[h],r===null?t[h]=[i]:r.push(i),i.lane=s|536870912),p):null}function Tr(t){if(50<_l)throw _l=0,Qc=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Wa={};function A1(t,i,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Le(t,i,s,r){return new A1(t,i,s,r)}function Iu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gi(t,i){var s=t.alternate;return s===null?(s=Le(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Id(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Mr(t,i,s,r,h,p){var v=0;if(r=t,typeof t=="function")Iu(t)&&(v=1);else if(typeof t=="string")v=U_(t,s,_t.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case I:return t=Le(31,s,i,h),t.elementType=I,t.lanes=p,t;case x:return la(s.children,h,p,i);case M:v=8,h|=24;break;case w:return t=Le(12,s,i,h|2),t.elementType=w,t.lanes=p,t;case N:return t=Le(13,s,i,h),t.elementType=N,t.lanes=p,t;case G:return t=Le(19,s,i,h),t.elementType=G,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H:v=10;break t;case E:v=9;break t;case B:v=11;break t;case Y:v=14;break t;case j:v=16,r=null;break t}v=29,s=Error(a(130,t===null?"null":typeof t,"")),r=null}return i=Le(v,s,i,h),i.elementType=t,i.type=r,i.lanes=p,i}function la(t,i,s,r){return t=Le(7,t,r,i),t.lanes=s,t}function Gu(t,i,s){return t=Le(6,t,null,i),t.lanes=s,t}function Gd(t){var i=Le(18,null,null,0);return i.stateNode=t,i}function qu(t,i,s){return i=Le(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var qd=new WeakMap;function ni(t,i){if(typeof t=="object"&&t!==null){var s=qd.get(t);return s!==void 0?s:(i={value:t,source:i,stack:Gf(i)},qd.set(t,i),i)}return{value:t,source:i,stack:Gf(i)}}var Ka=[],Fa=0,wr=null,Js=0,ai=[],si=0,pn=null,Ei=1,Oi="";function qi(t,i){Ka[Fa++]=Js,Ka[Fa++]=wr,wr=t,Js=i}function Yd(t,i,s){ai[si++]=Ei,ai[si++]=Oi,ai[si++]=pn,pn=t;var r=Ei;t=Oi;var h=32-Be(r)-1;r&=~(1<<h),s+=1;var p=32-Be(i)+h;if(30<p){var v=h-h%5;p=(r&(1<<v)-1).toString(32),r>>=v,h-=v,Ei=1<<32-Be(i)+h|s<<h|r,Oi=p+t}else Ei=1<<p|s<<h|r,Oi=t}function Yu(t){t.return!==null&&(qi(t,1),Yd(t,1,0))}function Xu(t){for(;t===wr;)wr=Ka[--Fa],Ka[Fa]=null,Js=Ka[--Fa],Ka[Fa]=null;for(;t===pn;)pn=ai[--si],ai[si]=null,Oi=ai[--si],ai[si]=null,Ei=ai[--si],ai[si]=null}function Xd(t,i){ai[si++]=Ei,ai[si++]=Oi,ai[si++]=pn,Ei=i.id,Oi=i.overflow,pn=t}var de=null,kt=null,dt=!1,gn=null,li=!1,ju=Error(a(519));function mn(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $s(ni(i,t)),ju}function jd(t){var i=t.stateNode,s=t.type,r=t.memoizedProps;switch(i[fe]=t,i[be]=r,s){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(s=0;s<xl.length;s++)ct(xl[s],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),nd(i,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),sd(i,r.value,r.defaultValue,r.children)}s=r.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||r.suppressHydrationWarning===!0||r0(i.textContent,s)?(r.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),r.onScroll!=null&&ct("scroll",i),r.onScrollEnd!=null&&ct("scrollend",i),r.onClick!=null&&(i.onclick=Li),i=!0):i=!1,i||mn(t,!0)}function Vd(t){for(de=t.return;de;)switch(de.tag){case 5:case 31:case 13:li=!1;return;case 27:case 3:li=!0;return;default:de=de.return}}function Ja(t){if(t!==de)return!1;if(!dt)return Vd(t),dt=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||oh(t.type,t.memoizedProps)),s=!s),s&&kt&&mn(t),Vd(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));kt=m0(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));kt=m0(t)}else i===27?(i=kt,Hn(t.type)?(t=dh,dh=null,kt=t):kt=i):kt=de?oi(t.stateNode.nextSibling):null;return!0}function ra(){kt=de=null,dt=!1}function Vu(){var t=gn;return t!==null&&(Ae===null?Ae=t:Ae.push.apply(Ae,t),gn=null),t}function $s(t){gn===null?gn=[t]:gn.push(t)}var Pu=bt(null),oa=null,Yi=null;function yn(t,i,s){at(Pu,i._currentValue),i._currentValue=s}function Xi(t){t._currentValue=Pu.current,yt(Pu)}function Qu(t,i,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,r!==null&&(r.childLanes|=i)):r!==null&&(r.childLanes&i)!==i&&(r.childLanes|=i),t===s)break;t=t.return}}function Zu(t,i,s,r){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var v=h.child;p=p.firstContext;t:for(;p!==null;){var b=p;p=h;for(var C=0;C<i.length;C++)if(b.context===i[C]){p.lanes|=s,b=p.alternate,b!==null&&(b.lanes|=s),Qu(p.return,s,t),r||(v=null);break t}p=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(a(341));v.lanes|=s,p=v.alternate,p!==null&&(p.lanes|=s),Qu(v,s,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function $a(t,i,s,r){t=null;for(var h=i,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var b=h.type;ke(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===Ra.current){if(v=h.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Cl):t=[Cl])}h=h.return}t!==null&&Zu(i,t,s,r),i.flags|=262144}function Cr(t){for(t=t.firstContext;t!==null;){if(!ke(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ua(t){oa=t,Yi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function pe(t){return Pd(oa,t)}function Ar(t,i){return oa===null&&ua(t),Pd(t,i)}function Pd(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Yi===null){if(t===null)throw Error(a(308));Yi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Yi=Yi.next=i;return s}var E1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,r){t.push(r)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},O1=d.unstable_scheduleCallback,H1=d.unstable_NormalPriority,$t={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wu(){return{controller:new E1,data:new Map,refCount:0}}function tl(t){t.refCount--,t.refCount===0&&O1(H1,function(){t.controller.abort()})}var el=null,Ku=0,ts=0,es=null;function z1(t,i){if(el===null){var s=el=[];Ku=0,ts=$c(),es={status:"pending",value:void 0,then:function(r){s.push(r)}}}return Ku++,i.then(Qd,Qd),i}function Qd(){if(--Ku===0&&el!==null){es!==null&&(es.status="fulfilled");var t=el;el=null,ts=0,es=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function U1(t,i){var s=[],r={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return t.then(function(){r.status="fulfilled",r.value=i;for(var h=0;h<s.length;h++)(0,s[h])(i)},function(h){for(r.status="rejected",r.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),r}var Zd=R.S;R.S=function(t,i){zg=Re(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&z1(t,i),Zd!==null&&Zd(t,i)};var ca=bt(null);function Fu(){var t=ca.current;return t!==null?t:Dt.pooledCache}function Er(t,i){i===null?at(ca,ca.current):at(ca,i.pool)}function Wd(){var t=Fu();return t===null?null:{parent:$t._currentValue,pool:t}}var is=Error(a(460)),Ju=Error(a(474)),Or=Error(a(542)),Hr={then:function(){}};function Kd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fd(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(Li,Li),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$d(t),t;default:if(typeof i.status=="string")i.then(Li,Li);else{if(t=Dt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(r){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=r}},function(r){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=r}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$d(t),t}throw fa=i,is}}function ha(t){try{var i=t._init;return i(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(fa=s,is):s}}var fa=null;function Jd(){if(fa===null)throw Error(a(459));var t=fa;return fa=null,t}function $d(t){if(t===is||t===Or)throw Error(a(483))}var ns=null,il=0;function zr(t){var i=il;return il+=1,ns===null&&(ns=[]),Fd(ns,t,i)}function nl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ur(t,i){throw i.$$typeof===_?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function tp(t){function i(O,A){if(t){var z=O.deletions;z===null?(O.deletions=[A],O.flags|=16):z.push(A)}}function s(O,A){if(!t)return null;for(;A!==null;)i(O,A),A=A.sibling;return null}function r(O){for(var A=new Map;O!==null;)O.key!==null?A.set(O.key,O):A.set(O.index,O),O=O.sibling;return A}function h(O,A){return O=Gi(O,A),O.index=0,O.sibling=null,O}function p(O,A,z){return O.index=z,t?(z=O.alternate,z!==null?(z=z.index,z<A?(O.flags|=67108866,A):z):(O.flags|=67108866,A)):(O.flags|=1048576,A)}function v(O){return t&&O.alternate===null&&(O.flags|=67108866),O}function b(O,A,z,q){return A===null||A.tag!==6?(A=Gu(z,O.mode,q),A.return=O,A):(A=h(A,z),A.return=O,A)}function C(O,A,z,q){var $=z.type;return $===x?L(O,A,z.props.children,q,z.key):A!==null&&(A.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===j&&ha($)===A.type)?(A=h(A,z.props),nl(A,z),A.return=O,A):(A=Mr(z.type,z.key,z.props,null,O.mode,q),nl(A,z),A.return=O,A)}function U(O,A,z,q){return A===null||A.tag!==4||A.stateNode.containerInfo!==z.containerInfo||A.stateNode.implementation!==z.implementation?(A=qu(z,O.mode,q),A.return=O,A):(A=h(A,z.children||[]),A.return=O,A)}function L(O,A,z,q,$){return A===null||A.tag!==7?(A=la(z,O.mode,q,$),A.return=O,A):(A=h(A,z),A.return=O,A)}function X(O,A,z){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Gu(""+A,O.mode,z),A.return=O,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case S:return z=Mr(A.type,A.key,A.props,null,O.mode,z),nl(z,A),z.return=O,z;case T:return A=qu(A,O.mode,z),A.return=O,A;case j:return A=ha(A),X(O,A,z)}if(ot(A)||et(A))return A=la(A,O.mode,z,null),A.return=O,A;if(typeof A.then=="function")return X(O,zr(A),z);if(A.$$typeof===H)return X(O,Ar(O,A),z);Ur(O,A)}return null}function D(O,A,z,q){var $=A!==null?A.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return $!==null?null:b(O,A,""+z,q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===$?C(O,A,z,q):null;case T:return z.key===$?U(O,A,z,q):null;case j:return z=ha(z),D(O,A,z,q)}if(ot(z)||et(z))return $!==null?null:L(O,A,z,q,null);if(typeof z.then=="function")return D(O,A,zr(z),q);if(z.$$typeof===H)return D(O,A,Ar(O,z),q);Ur(O,z)}return null}function k(O,A,z,q,$){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return O=O.get(z)||null,b(A,O,""+q,$);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return O=O.get(q.key===null?z:q.key)||null,C(A,O,q,$);case T:return O=O.get(q.key===null?z:q.key)||null,U(A,O,q,$);case j:return q=ha(q),k(O,A,z,q,$)}if(ot(q)||et(q))return O=O.get(z)||null,L(A,O,q,$,null);if(typeof q.then=="function")return k(O,A,z,zr(q),$);if(q.$$typeof===H)return k(O,A,z,Ar(A,q),$);Ur(A,q)}return null}function W(O,A,z,q){for(var $=null,St=null,J=A,lt=A=0,ft=null;J!==null&&lt<z.length;lt++){J.index>lt?(ft=J,J=null):ft=J.sibling;var xt=D(O,J,z[lt],q);if(xt===null){J===null&&(J=ft);break}t&&J&&xt.alternate===null&&i(O,J),A=p(xt,A,lt),St===null?$=xt:St.sibling=xt,St=xt,J=ft}if(lt===z.length)return s(O,J),dt&&qi(O,lt),$;if(J===null){for(;lt<z.length;lt++)J=X(O,z[lt],q),J!==null&&(A=p(J,A,lt),St===null?$=J:St.sibling=J,St=J);return dt&&qi(O,lt),$}for(J=r(J);lt<z.length;lt++)ft=k(J,O,lt,z[lt],q),ft!==null&&(t&&ft.alternate!==null&&J.delete(ft.key===null?lt:ft.key),A=p(ft,A,lt),St===null?$=ft:St.sibling=ft,St=ft);return t&&J.forEach(function(Nn){return i(O,Nn)}),dt&&qi(O,lt),$}function tt(O,A,z,q){if(z==null)throw Error(a(151));for(var $=null,St=null,J=A,lt=A=0,ft=null,xt=z.next();J!==null&&!xt.done;lt++,xt=z.next()){J.index>lt?(ft=J,J=null):ft=J.sibling;var Nn=D(O,J,xt.value,q);if(Nn===null){J===null&&(J=ft);break}t&&J&&Nn.alternate===null&&i(O,J),A=p(Nn,A,lt),St===null?$=Nn:St.sibling=Nn,St=Nn,J=ft}if(xt.done)return s(O,J),dt&&qi(O,lt),$;if(J===null){for(;!xt.done;lt++,xt=z.next())xt=X(O,xt.value,q),xt!==null&&(A=p(xt,A,lt),St===null?$=xt:St.sibling=xt,St=xt);return dt&&qi(O,lt),$}for(J=r(J);!xt.done;lt++,xt=z.next())xt=k(J,O,lt,xt.value,q),xt!==null&&(t&&xt.alternate!==null&&J.delete(xt.key===null?lt:xt.key),A=p(xt,A,lt),St===null?$=xt:St.sibling=xt,St=xt);return t&&J.forEach(function(X_){return i(O,X_)}),dt&&qi(O,lt),$}function zt(O,A,z,q){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:t:{for(var $=z.key;A!==null;){if(A.key===$){if($=z.type,$===x){if(A.tag===7){s(O,A.sibling),q=h(A,z.props.children),q.return=O,O=q;break t}}else if(A.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===j&&ha($)===A.type){s(O,A.sibling),q=h(A,z.props),nl(q,z),q.return=O,O=q;break t}s(O,A);break}else i(O,A);A=A.sibling}z.type===x?(q=la(z.props.children,O.mode,q,z.key),q.return=O,O=q):(q=Mr(z.type,z.key,z.props,null,O.mode,q),nl(q,z),q.return=O,O=q)}return v(O);case T:t:{for($=z.key;A!==null;){if(A.key===$)if(A.tag===4&&A.stateNode.containerInfo===z.containerInfo&&A.stateNode.implementation===z.implementation){s(O,A.sibling),q=h(A,z.children||[]),q.return=O,O=q;break t}else{s(O,A);break}else i(O,A);A=A.sibling}q=qu(z,O.mode,q),q.return=O,O=q}return v(O);case j:return z=ha(z),zt(O,A,z,q)}if(ot(z))return W(O,A,z,q);if(et(z)){if($=et(z),typeof $!="function")throw Error(a(150));return z=$.call(z),tt(O,A,z,q)}if(typeof z.then=="function")return zt(O,A,zr(z),q);if(z.$$typeof===H)return zt(O,A,Ar(O,z),q);Ur(O,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,A!==null&&A.tag===6?(s(O,A.sibling),q=h(A,z),q.return=O,O=q):(s(O,A),q=Gu(z,O.mode,q),q.return=O,O=q),v(O)):s(O,A)}return function(O,A,z,q){try{il=0;var $=zt(O,A,z,q);return ns=null,$}catch(J){if(J===is||J===Or)throw J;var St=Le(29,J,null,O.mode);return St.lanes=q,St.return=O,St}}}var da=tp(!0),ep=tp(!1),vn=!1;function $u(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tc(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _n(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Sn(t,i,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Tt&2)!==0){var h=r.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),r.pending=i,i=Tr(t),Ld(t,null,s),i}return br(t,r,i,s),Tr(t)}function al(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var r=i.lanes;r&=t.pendingLanes,s|=r,i.lanes=s,Pf(t,s)}}function ec(t,i){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var h=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var v={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?h=p=v:p=p.next=v,s=s.next}while(s!==null);p===null?h=p=i:p=p.next=i}else h=p=i;s={baseState:r.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:r.shared,callbacks:r.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var ic=!1;function sl(){if(ic){var t=es;if(t!==null)throw t}}function ll(t,i,s,r){ic=!1;var h=t.updateQueue;vn=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var C=b,U=C.next;C.next=null,v===null?p=U:v.next=U,v=C;var L=t.alternate;L!==null&&(L=L.updateQueue,b=L.lastBaseUpdate,b!==v&&(b===null?L.firstBaseUpdate=U:b.next=U,L.lastBaseUpdate=C))}if(p!==null){var X=h.baseState;v=0,L=U=C=null,b=p;do{var D=b.lane&-536870913,k=D!==b.lane;if(k?(ht&D)===D:(r&D)===D){D!==0&&D===ts&&(ic=!0),L!==null&&(L=L.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var W=t,tt=b;D=i;var zt=s;switch(tt.tag){case 1:if(W=tt.payload,typeof W=="function"){X=W.call(zt,X,D);break t}X=W;break t;case 3:W.flags=W.flags&-65537|128;case 0:if(W=tt.payload,D=typeof W=="function"?W.call(zt,X,D):W,D==null)break t;X=y({},X,D);break t;case 2:vn=!0}}D=b.callback,D!==null&&(t.flags|=64,k&&(t.flags|=8192),k=h.callbacks,k===null?h.callbacks=[D]:k.push(D))}else k={lane:D,tag:b.tag,payload:b.payload,callback:b.callback,next:null},L===null?(U=L=k,C=X):L=L.next=k,v|=D;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;k=b,b=k.next,k.next=null,h.lastBaseUpdate=k,h.shared.pending=null}}while(!0);L===null&&(C=X),h.baseState=C,h.firstBaseUpdate=U,h.lastBaseUpdate=L,p===null&&(h.shared.lanes=0),wn|=v,t.lanes=v,t.memoizedState=X}}function ip(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function np(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)ip(s[t],i)}var as=bt(null),Dr=bt(0);function ap(t,i){t=Ji,at(Dr,t),at(as,i),Ji=t|i.baseLanes}function nc(){at(Dr,Ji),at(as,as.current)}function ac(){Ji=Dr.current,yt(as),yt(Dr)}var Ie=bt(null),ri=null;function xn(t){var i=t.alternate;at(Kt,Kt.current&1),at(Ie,t),ri===null&&(i===null||as.current!==null||i.memoizedState!==null)&&(ri=t)}function sc(t){at(Kt,Kt.current),at(Ie,t),ri===null&&(ri=t)}function sp(t){t.tag===22?(at(Kt,Kt.current),at(Ie,t),ri===null&&(ri=t)):bn()}function bn(){at(Kt,Kt.current),at(Ie,Ie.current)}function Ge(t){yt(Ie),ri===t&&(ri=null),yt(Kt)}var Kt=bt(0);function Rr(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||hh(s)||fh(s)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ji=0,st=null,Ot=null,te=null,Nr=!1,ss=!1,pa=!1,Br=0,rl=0,ls=null,D1=0;function Qt(){throw Error(a(321))}function lc(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!ke(t[s],i[s]))return!1;return!0}function rc(t,i,s,r,h,p){return ji=p,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=t===null||t.memoizedState===null?Yp:bc,pa=!1,p=s(r,h),pa=!1,ss&&(p=rp(i,s,r,h)),lp(t),p}function lp(t){R.H=cl;var i=Ot!==null&&Ot.next!==null;if(ji=0,te=Ot=st=null,Nr=!1,rl=0,ls=null,i)throw Error(a(300));t===null||ee||(t=t.dependencies,t!==null&&Cr(t)&&(ee=!0))}function rp(t,i,s,r){st=t;var h=0;do{if(ss&&(ls=null),rl=0,ss=!1,25<=h)throw Error(a(301));if(h+=1,te=Ot=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}R.H=Xp,p=i(s,r)}while(ss);return p}function R1(){var t=R.H,i=t.useState()[0];return i=typeof i.then=="function"?ol(i):i,t=t.useState()[0],(Ot!==null?Ot.memoizedState:null)!==t&&(st.flags|=1024),i}function oc(){var t=Br!==0;return Br=0,t}function uc(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function cc(t){if(Nr){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Nr=!1}ji=0,te=Ot=st=null,ss=!1,rl=Br=0,ls=null}function Se(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return te===null?st.memoizedState=te=t:te=te.next=t,te}function Ft(){if(Ot===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var i=te===null?st.memoizedState:te.next;if(i!==null)te=i,Ot=t;else{if(t===null)throw st.alternate===null?Error(a(467)):Error(a(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},te===null?st.memoizedState=te=t:te=te.next=t}return te}function kr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(t){var i=rl;return rl+=1,ls===null&&(ls=[]),t=Fd(ls,t,i),i=st,(te===null?i.memoizedState:te.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?Yp:bc),t}function Lr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ol(t);if(t.$$typeof===H)return pe(t)}throw Error(a(438,String(t)))}function hc(t){var i=null,s=st.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var r=st.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(i={data:r.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=kr(),st.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),r=0;r<t;r++)s[r]=F;return i.index++,s}function Vi(t,i){return typeof i=="function"?i(t):i}function Ir(t){var i=Ft();return fc(i,Ot,t)}function fc(t,i,s){var r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=s;var h=t.baseQueue,p=r.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}i.baseQueue=h=p,r.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{i=h.next;var b=v=null,C=null,U=i,L=!1;do{var X=U.lane&-536870913;if(X!==U.lane?(ht&X)===X:(ji&X)===X){var D=U.revertLane;if(D===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),X===ts&&(L=!0);else if((ji&D)===D){U=U.next,D===ts&&(L=!0);continue}else X={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(b=C=X,v=p):C=C.next=X,st.lanes|=D,wn|=D;X=U.action,pa&&s(p,X),p=U.hasEagerState?U.eagerState:s(p,X)}else D={lane:X,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(b=C=D,v=p):C=C.next=D,st.lanes|=X,wn|=X;U=U.next}while(U!==null&&U!==i);if(C===null?v=p:C.next=b,!ke(p,t.memoizedState)&&(ee=!0,L&&(s=es,s!==null)))throw s;t.memoizedState=p,t.baseState=v,t.baseQueue=C,r.lastRenderedState=p}return h===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function dc(t){var i=Ft(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var r=s.dispatch,h=s.pending,p=i.memoizedState;if(h!==null){s.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);ke(p,i.memoizedState)||(ee=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),s.lastRenderedState=p}return[p,r]}function op(t,i,s){var r=st,h=Ft(),p=dt;if(p){if(s===void 0)throw Error(a(407));s=s()}else s=i();var v=!ke((Ot||h).memoizedState,s);if(v&&(h.memoizedState=s,ee=!0),h=h.queue,mc(hp.bind(null,r,h,t),[t]),h.getSnapshot!==i||v||te!==null&&te.memoizedState.tag&1){if(r.flags|=2048,rs(9,{destroy:void 0},cp.bind(null,r,h,s,i),null),Dt===null)throw Error(a(349));p||(ji&127)!==0||up(r,i,s)}return s}function up(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=st.updateQueue,i===null?(i=kr(),st.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function cp(t,i,s,r){i.value=s,i.getSnapshot=r,fp(i)&&dp(t)}function hp(t,i,s){return s(function(){fp(i)&&dp(t)})}function fp(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!ke(t,s)}catch{return!0}}function dp(t){var i=sa(t,2);i!==null&&Ee(i,t,2)}function pc(t){var i=Se();if(typeof t=="function"){var s=t;if(t=s(),pa){hn(!0);try{s()}finally{hn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},i}function pp(t,i,s,r){return t.baseState=s,fc(t,Ot,typeof r=="function"?r:Vi)}function N1(t,i,s,r,h){if(Yr(t))throw Error(a(485));if(t=i.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};R.T!==null?s(!0):p.isTransition=!1,r(p),s=i.pending,s===null?(p.next=i.pending=p,gp(i,p)):(p.next=s.next,i.pending=s.next=p)}}function gp(t,i){var s=i.action,r=i.payload,h=t.state;if(i.isTransition){var p=R.T,v={};R.T=v;try{var b=s(h,r),C=R.S;C!==null&&C(v,b),mp(t,i,b)}catch(U){gc(t,i,U)}finally{p!==null&&v.types!==null&&(p.types=v.types),R.T=p}}else try{p=s(h,r),mp(t,i,p)}catch(U){gc(t,i,U)}}function mp(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(r){yp(t,i,r)},function(r){return gc(t,i,r)}):yp(t,i,s)}function yp(t,i,s){i.status="fulfilled",i.value=s,vp(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,gp(t,s)))}function gc(t,i,s){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do i.status="rejected",i.reason=s,vp(i),i=i.next;while(i!==r)}t.action=null}function vp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function _p(t,i){return i}function Sp(t,i){if(dt){var s=Dt.formState;if(s!==null){t:{var r=st;if(dt){if(kt){e:{for(var h=kt,p=li;h.nodeType!==8;){if(!p){h=null;break e}if(h=oi(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){kt=oi(h.nextSibling),r=h.data==="F!";break t}}mn(r)}r=!1}r&&(i=s[0])}}return s=Se(),s.memoizedState=s.baseState=i,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_p,lastRenderedState:i},s.queue=r,s=Ip.bind(null,st,r),r.dispatch=s,r=pc(!1),p=xc.bind(null,st,!1,r.queue),r=Se(),h={state:i,dispatch:null,action:t,pending:null},r.queue=h,s=N1.bind(null,st,h,p,s),h.dispatch=s,r.memoizedState=t,[i,s,!1]}function xp(t){var i=Ft();return bp(i,Ot,t)}function bp(t,i,s){if(i=fc(t,i,_p)[0],t=Ir(Vi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var r=ol(i)}catch(v){throw v===is?Or:v}else r=i;i=Ft();var h=i.queue,p=h.dispatch;return s!==i.memoizedState&&(st.flags|=2048,rs(9,{destroy:void 0},B1.bind(null,h,s),null)),[r,p,t]}function B1(t,i){t.action=i}function Tp(t){var i=Ft(),s=Ot;if(s!==null)return bp(i,s,t);Ft(),i=i.memoizedState,s=Ft();var r=s.queue.dispatch;return s.memoizedState=t,[i,r,!1]}function rs(t,i,s,r){return t={tag:t,create:s,deps:r,inst:i,next:null},i=st.updateQueue,i===null&&(i=kr(),st.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,i.lastEffect=t),t}function Mp(){return Ft().memoizedState}function Gr(t,i,s,r){var h=Se();st.flags|=t,h.memoizedState=rs(1|i,{destroy:void 0},s,r===void 0?null:r)}function qr(t,i,s,r){var h=Ft();r=r===void 0?null:r;var p=h.memoizedState.inst;Ot!==null&&r!==null&&lc(r,Ot.memoizedState.deps)?h.memoizedState=rs(i,p,s,r):(st.flags|=t,h.memoizedState=rs(1|i,p,s,r))}function wp(t,i){Gr(8390656,8,t,i)}function mc(t,i){qr(2048,8,t,i)}function k1(t){st.flags|=4;var i=st.updateQueue;if(i===null)i=kr(),st.updateQueue=i,i.events=[t];else{var s=i.events;s===null?i.events=[t]:s.push(t)}}function Cp(t){var i=Ft().memoizedState;return k1({ref:i,nextImpl:t}),function(){if((Tt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Ap(t,i){return qr(4,2,t,i)}function Ep(t,i){return qr(4,4,t,i)}function Op(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Hp(t,i,s){s=s!=null?s.concat([t]):null,qr(4,4,Op.bind(null,i,t),s)}function yc(){}function zp(t,i){var s=Ft();i=i===void 0?null:i;var r=s.memoizedState;return i!==null&&lc(i,r[1])?r[0]:(s.memoizedState=[t,i],t)}function Up(t,i){var s=Ft();i=i===void 0?null:i;var r=s.memoizedState;if(i!==null&&lc(i,r[1]))return r[0];if(r=t(),pa){hn(!0);try{t()}finally{hn(!1)}}return s.memoizedState=[r,i],r}function vc(t,i,s){return s===void 0||(ji&1073741824)!==0&&(ht&261930)===0?t.memoizedState=i:(t.memoizedState=s,t=Dg(),st.lanes|=t,wn|=t,s)}function Dp(t,i,s,r){return ke(s,i)?s:as.current!==null?(t=vc(t,s,r),ke(t,i)||(ee=!0),t):(ji&42)===0||(ji&1073741824)!==0&&(ht&261930)===0?(ee=!0,t.memoizedState=s):(t=Dg(),st.lanes|=t,wn|=t,i)}function Rp(t,i,s,r,h){var p=P.p;P.p=p!==0&&8>p?p:8;var v=R.T,b={};R.T=b,xc(t,!1,i,s);try{var C=h(),U=R.S;if(U!==null&&U(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var L=U1(C,r);ul(t,i,L,Xe(t))}else ul(t,i,r,Xe(t))}catch(X){ul(t,i,{then:function(){},status:"rejected",reason:X},Xe())}finally{P.p=p,v!==null&&b.types!==null&&(v.types=b.types),R.T=v}}function L1(){}function _c(t,i,s,r){if(t.tag!==5)throw Error(a(476));var h=Np(t).queue;Rp(t,h,i,K,s===null?L1:function(){return Bp(t),s(r)})}function Np(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:K},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Bp(t){var i=Np(t);i.next===null&&(i=t.alternate.memoizedState),ul(t,i.next.queue,{},Xe())}function Sc(){return pe(Cl)}function kp(){return Ft().memoizedState}function Lp(){return Ft().memoizedState}function I1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=Xe();t=_n(s);var r=Sn(i,t,s);r!==null&&(Ee(r,i,s),al(r,i,s)),i={cache:Wu()},t.payload=i;return}i=i.return}}function G1(t,i,s){var r=Xe();s={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Yr(t)?Gp(i,s):(s=Lu(t,i,s,r),s!==null&&(Ee(s,t,r),qp(s,i,r)))}function Ip(t,i,s){var r=Xe();ul(t,i,s,r)}function ul(t,i,s,r){var h={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Yr(t))Gp(i,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,b=p(v,s);if(h.hasEagerState=!0,h.eagerState=b,ke(b,v))return br(t,i,h,0),Dt===null&&xr(),!1}catch{}if(s=Lu(t,i,h,r),s!==null)return Ee(s,t,r),qp(s,i,r),!0}return!1}function xc(t,i,s,r){if(r={lane:2,revertLane:$c(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Yr(t)){if(i)throw Error(a(479))}else i=Lu(t,s,r,2),i!==null&&Ee(i,t,2)}function Yr(t){var i=t.alternate;return t===st||i!==null&&i===st}function Gp(t,i){ss=Nr=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function qp(t,i,s){if((s&4194048)!==0){var r=i.lanes;r&=t.pendingLanes,s|=r,i.lanes=s,Pf(t,s)}}var cl={readContext:pe,use:Lr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};cl.useEffectEvent=Qt;var Yp={readContext:pe,use:Lr,useCallback:function(t,i){return Se().memoizedState=[t,i===void 0?null:i],t},useContext:pe,useEffect:wp,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,Gr(4194308,4,Op.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Gr(4194308,4,t,i)},useInsertionEffect:function(t,i){Gr(4,2,t,i)},useMemo:function(t,i){var s=Se();i=i===void 0?null:i;var r=t();if(pa){hn(!0);try{t()}finally{hn(!1)}}return s.memoizedState=[r,i],r},useReducer:function(t,i,s){var r=Se();if(s!==void 0){var h=s(i);if(pa){hn(!0);try{s(i)}finally{hn(!1)}}}else h=i;return r.memoizedState=r.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},r.queue=t,t=t.dispatch=G1.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var i=Se();return t={current:t},i.memoizedState=t},useState:function(t){t=pc(t);var i=t.queue,s=Ip.bind(null,st,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:yc,useDeferredValue:function(t,i){var s=Se();return vc(s,t,i)},useTransition:function(){var t=pc(!1);return t=Rp.bind(null,st,t.queue,!0,!1),Se().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var r=st,h=Se();if(dt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),Dt===null)throw Error(a(349));(ht&127)!==0||up(r,i,s)}h.memoizedState=s;var p={value:s,getSnapshot:i};return h.queue=p,wp(hp.bind(null,r,p,t),[t]),r.flags|=2048,rs(9,{destroy:void 0},cp.bind(null,r,p,s,i),null),s},useId:function(){var t=Se(),i=Dt.identifierPrefix;if(dt){var s=Oi,r=Ei;s=(r&~(1<<32-Be(r)-1)).toString(32)+s,i="_"+i+"R_"+s,s=Br++,0<s&&(i+="H"+s.toString(32)),i+="_"}else s=D1++,i="_"+i+"r_"+s.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Sc,useFormState:Sp,useActionState:Sp,useOptimistic:function(t){var i=Se();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=xc.bind(null,st,!0,s),s.dispatch=i,[t,i]},useMemoCache:hc,useCacheRefresh:function(){return Se().memoizedState=I1.bind(null,st)},useEffectEvent:function(t){var i=Se(),s={impl:t};return i.memoizedState=s,function(){if((Tt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},bc={readContext:pe,use:Lr,useCallback:zp,useContext:pe,useEffect:mc,useImperativeHandle:Hp,useInsertionEffect:Ap,useLayoutEffect:Ep,useMemo:Up,useReducer:Ir,useRef:Mp,useState:function(){return Ir(Vi)},useDebugValue:yc,useDeferredValue:function(t,i){var s=Ft();return Dp(s,Ot.memoizedState,t,i)},useTransition:function(){var t=Ir(Vi)[0],i=Ft().memoizedState;return[typeof t=="boolean"?t:ol(t),i]},useSyncExternalStore:op,useId:kp,useHostTransitionStatus:Sc,useFormState:xp,useActionState:xp,useOptimistic:function(t,i){var s=Ft();return pp(s,Ot,t,i)},useMemoCache:hc,useCacheRefresh:Lp};bc.useEffectEvent=Cp;var Xp={readContext:pe,use:Lr,useCallback:zp,useContext:pe,useEffect:mc,useImperativeHandle:Hp,useInsertionEffect:Ap,useLayoutEffect:Ep,useMemo:Up,useReducer:dc,useRef:Mp,useState:function(){return dc(Vi)},useDebugValue:yc,useDeferredValue:function(t,i){var s=Ft();return Ot===null?vc(s,t,i):Dp(s,Ot.memoizedState,t,i)},useTransition:function(){var t=dc(Vi)[0],i=Ft().memoizedState;return[typeof t=="boolean"?t:ol(t),i]},useSyncExternalStore:op,useId:kp,useHostTransitionStatus:Sc,useFormState:Tp,useActionState:Tp,useOptimistic:function(t,i){var s=Ft();return Ot!==null?pp(s,Ot,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:hc,useCacheRefresh:Lp};Xp.useEffectEvent=Cp;function Tc(t,i,s,r){i=t.memoizedState,s=s(r,i),s=s==null?i:y({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Mc={enqueueSetState:function(t,i,s){t=t._reactInternals;var r=Xe(),h=_n(r);h.payload=i,s!=null&&(h.callback=s),i=Sn(t,h,r),i!==null&&(Ee(i,t,r),al(i,t,r))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var r=Xe(),h=_n(r);h.tag=1,h.payload=i,s!=null&&(h.callback=s),i=Sn(t,h,r),i!==null&&(Ee(i,t,r),al(i,t,r))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Xe(),r=_n(s);r.tag=2,i!=null&&(r.callback=i),i=Sn(t,r,s),i!==null&&(Ee(i,t,s),al(i,t,s))}};function jp(t,i,s,r,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,p,v):i.prototype&&i.prototype.isPureReactComponent?!Ks(s,r)||!Ks(h,p):!0}function Vp(t,i,s,r){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,r),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,r),i.state!==t&&Mc.enqueueReplaceState(i,i.state,null)}function ga(t,i){var s=i;if("ref"in i){s={};for(var r in i)r!=="ref"&&(s[r]=i[r])}if(t=t.defaultProps){s===i&&(s=y({},s));for(var h in t)s[h]===void 0&&(s[h]=t[h])}return s}function Pp(t){Sr(t)}function Qp(t){console.error(t)}function Zp(t){Sr(t)}function Xr(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(r){setTimeout(function(){throw r})}}function Wp(t,i,s){try{var r=t.onCaughtError;r(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function wc(t,i,s){return s=_n(s),s.tag=3,s.payload={element:null},s.callback=function(){Xr(t,i)},s}function Kp(t){return t=_n(t),t.tag=3,t}function Fp(t,i,s,r){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var p=r.value;t.payload=function(){return h(p)},t.callback=function(){Wp(i,s,r)}}var v=s.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Wp(i,s,r),typeof h!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})})}function q1(t,i,s,r,h){if(s.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(i=s.alternate,i!==null&&$a(i,s,h,!0),s=Ie.current,s!==null){switch(s.tag){case 31:case 13:return ri===null?eo():s.alternate===null&&Zt===0&&(Zt=3),s.flags&=-257,s.flags|=65536,s.lanes=h,r===Hr?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([r]):i.add(r),Kc(t,r,h)),!1;case 22:return s.flags|=65536,r===Hr?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([r]):s.add(r)),Kc(t,r,h)),!1}throw Error(a(435,s.tag))}return Kc(t,r,h),eo(),!1}if(dt)return i=Ie.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,r!==ju&&(t=Error(a(422),{cause:r}),$s(ni(t,s)))):(r!==ju&&(i=Error(a(423),{cause:r}),$s(ni(i,s))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,r=ni(r,s),h=wc(t.stateNode,r,h),ec(t,h),Zt!==4&&(Zt=2)),!1;var p=Error(a(520),{cause:r});if(p=ni(p,s),vl===null?vl=[p]:vl.push(p),Zt!==4&&(Zt=2),i===null)return!0;r=ni(r,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=h&-h,s.lanes|=t,t=wc(s.stateNode,r,t),ec(s,t),!1;case 1:if(i=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Cn===null||!Cn.has(p))))return s.flags|=65536,h&=-h,s.lanes|=h,h=Kp(h),Fp(h,t,s,r),ec(s,h),!1}s=s.return}while(s!==null);return!1}var Cc=Error(a(461)),ee=!1;function ge(t,i,s,r){i.child=t===null?ep(i,null,s,r):da(i,t.child,s,r)}function Jp(t,i,s,r,h){s=s.render;var p=i.ref;if("ref"in r){var v={};for(var b in r)b!=="ref"&&(v[b]=r[b])}else v=r;return ua(i),r=rc(t,i,s,v,p,h),b=oc(),t!==null&&!ee?(uc(t,i,h),Pi(t,i,h)):(dt&&b&&Yu(i),i.flags|=1,ge(t,i,r,h),i.child)}function $p(t,i,s,r,h){if(t===null){var p=s.type;return typeof p=="function"&&!Iu(p)&&p.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=p,tg(t,i,p,r,h)):(t=Mr(s.type,null,r,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,!Rc(t,h)){var v=p.memoizedProps;if(s=s.compare,s=s!==null?s:Ks,s(v,r)&&t.ref===i.ref)return Pi(t,i,h)}return i.flags|=1,t=Gi(p,r),t.ref=i.ref,t.return=i,i.child=t}function tg(t,i,s,r,h){if(t!==null){var p=t.memoizedProps;if(Ks(p,r)&&t.ref===i.ref)if(ee=!1,i.pendingProps=r=p,Rc(t,h))(t.flags&131072)!==0&&(ee=!0);else return i.lanes=t.lanes,Pi(t,i,h)}return Ac(t,i,s,r,h)}function eg(t,i,s,r){var h=r.children,p=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|s:s,t!==null){for(r=i.child=t.child,h=0;r!==null;)h=h|r.lanes|r.childLanes,r=r.sibling;r=h&~p}else r=0,i.child=null;return ig(t,i,p,s,r)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Er(i,p!==null?p.cachePool:null),p!==null?ap(i,p):nc(),sp(i);else return r=i.lanes=536870912,ig(t,i,p!==null?p.baseLanes|s:s,s,r)}else p!==null?(Er(i,p.cachePool),ap(i,p),bn(),i.memoizedState=null):(t!==null&&Er(i,null),nc(),bn());return ge(t,i,h,s),i.child}function hl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function ig(t,i,s,r,h){var p=Fu();return p=p===null?null:{parent:$t._currentValue,pool:p},i.memoizedState={baseLanes:s,cachePool:p},t!==null&&Er(i,null),nc(),sp(i),t!==null&&$a(t,i,r,!0),i.childLanes=h,null}function jr(t,i){return i=Pr({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function ng(t,i,s){return da(i,t.child,null,s),t=jr(i,i.pendingProps),t.flags|=2,Ge(i),i.memoizedState=null,t}function Y1(t,i,s){var r=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(dt){if(r.mode==="hidden")return t=jr(i,r),i.lanes=536870912,hl(null,t);if(sc(i),(t=kt)?(t=g0(t,li),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:pn!==null?{id:Ei,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},s=Gd(t),s.return=i,i.child=s,de=i,kt=null)):t=null,t===null)throw mn(i);return i.lanes=536870912,null}return jr(i,r)}var p=t.memoizedState;if(p!==null){var v=p.dehydrated;if(sc(i),h)if(i.flags&256)i.flags&=-257,i=ng(t,i,s);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(ee||$a(t,i,s,!1),h=(s&t.childLanes)!==0,ee||h){if(r=Dt,r!==null&&(v=Qf(r,s),v!==0&&v!==p.retryLane))throw p.retryLane=v,sa(t,v),Ee(r,t,v),Cc;eo(),i=ng(t,i,s)}else t=p.treeContext,kt=oi(v.nextSibling),de=i,dt=!0,gn=null,li=!1,t!==null&&Xd(i,t),i=jr(i,r),i.flags|=4096;return i}return t=Gi(t.child,{mode:r.mode,children:r.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Vr(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function Ac(t,i,s,r,h){return ua(i),s=rc(t,i,s,r,void 0,h),r=oc(),t!==null&&!ee?(uc(t,i,h),Pi(t,i,h)):(dt&&r&&Yu(i),i.flags|=1,ge(t,i,s,h),i.child)}function ag(t,i,s,r,h,p){return ua(i),i.updateQueue=null,s=rp(i,r,s,h),lp(t),r=oc(),t!==null&&!ee?(uc(t,i,p),Pi(t,i,p)):(dt&&r&&Yu(i),i.flags|=1,ge(t,i,s,p),i.child)}function sg(t,i,s,r,h){if(ua(i),i.stateNode===null){var p=Wa,v=s.contextType;typeof v=="object"&&v!==null&&(p=pe(v)),p=new s(r,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Mc,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=r,p.state=i.memoizedState,p.refs={},$u(i),v=s.contextType,p.context=typeof v=="object"&&v!==null?pe(v):Wa,p.state=i.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Tc(i,s,v,r),p.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&Mc.enqueueReplaceState(p,p.state,null),ll(i,r,p,h),sl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),r=!0}else if(t===null){p=i.stateNode;var b=i.memoizedProps,C=ga(s,b);p.props=C;var U=p.context,L=s.contextType;v=Wa,typeof L=="object"&&L!==null&&(v=pe(L));var X=s.getDerivedStateFromProps;L=typeof X=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,L||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||U!==v)&&Vp(i,p,r,v),vn=!1;var D=i.memoizedState;p.state=D,ll(i,r,p,h),sl(),U=i.memoizedState,b||D!==U||vn?(typeof X=="function"&&(Tc(i,s,X,r),U=i.memoizedState),(C=vn||jp(i,s,C,r,D,U,v))?(L||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=r,i.memoizedState=U),p.props=r,p.state=U,p.context=v,r=C):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),r=!1)}else{p=i.stateNode,tc(t,i),v=i.memoizedProps,L=ga(s,v),p.props=L,X=i.pendingProps,D=p.context,U=s.contextType,C=Wa,typeof U=="object"&&U!==null&&(C=pe(U)),b=s.getDerivedStateFromProps,(U=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==X||D!==C)&&Vp(i,p,r,C),vn=!1,D=i.memoizedState,p.state=D,ll(i,r,p,h),sl();var k=i.memoizedState;v!==X||D!==k||vn||t!==null&&t.dependencies!==null&&Cr(t.dependencies)?(typeof b=="function"&&(Tc(i,s,b,r),k=i.memoizedState),(L=vn||jp(i,s,L,r,D,k,C)||t!==null&&t.dependencies!==null&&Cr(t.dependencies))?(U||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,k,C),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,k,C)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&D===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&D===t.memoizedState||(i.flags|=1024),i.memoizedProps=r,i.memoizedState=k),p.props=r,p.state=k,p.context=C,r=L):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&D===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&D===t.memoizedState||(i.flags|=1024),r=!1)}return p=r,Vr(t,i),r=(i.flags&128)!==0,p||r?(p=i.stateNode,s=r&&typeof s.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,t!==null&&r?(i.child=da(i,t.child,null,h),i.child=da(i,null,s,h)):ge(t,i,s,h),i.memoizedState=p.state,t=i.child):t=Pi(t,i,h),t}function lg(t,i,s,r){return ra(),i.flags|=256,ge(t,i,s,r),i.child}var Ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oc(t){return{baseLanes:t,cachePool:Wd()}}function Hc(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=Ye),t}function rg(t,i,s){var r=i.pendingProps,h=!1,p=(i.flags&128)!==0,v;if((v=p)||(v=t!==null&&t.memoizedState===null?!1:(Kt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(dt){if(h?xn(i):bn(),(t=kt)?(t=g0(t,li),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:pn!==null?{id:Ei,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},s=Gd(t),s.return=i,i.child=s,de=i,kt=null)):t=null,t===null)throw mn(i);return fh(t)?i.lanes=32:i.lanes=536870912,null}var b=r.children;return r=r.fallback,h?(bn(),h=i.mode,b=Pr({mode:"hidden",children:b},h),r=la(r,h,s,null),b.return=i,r.return=i,b.sibling=r,i.child=b,r=i.child,r.memoizedState=Oc(s),r.childLanes=Hc(t,v,s),i.memoizedState=Ec,hl(null,r)):(xn(i),zc(i,b))}var C=t.memoizedState;if(C!==null&&(b=C.dehydrated,b!==null)){if(p)i.flags&256?(xn(i),i.flags&=-257,i=Uc(t,i,s)):i.memoizedState!==null?(bn(),i.child=t.child,i.flags|=128,i=null):(bn(),b=r.fallback,h=i.mode,r=Pr({mode:"visible",children:r.children},h),b=la(b,h,s,null),b.flags|=2,r.return=i,b.return=i,r.sibling=b,i.child=r,da(i,t.child,null,s),r=i.child,r.memoizedState=Oc(s),r.childLanes=Hc(t,v,s),i.memoizedState=Ec,i=hl(null,r));else if(xn(i),fh(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var U=v.dgst;v=U,r=Error(a(419)),r.stack="",r.digest=v,$s({value:r,source:null,stack:null}),i=Uc(t,i,s)}else if(ee||$a(t,i,s,!1),v=(s&t.childLanes)!==0,ee||v){if(v=Dt,v!==null&&(r=Qf(v,s),r!==0&&r!==C.retryLane))throw C.retryLane=r,sa(t,r),Ee(v,t,r),Cc;hh(b)||eo(),i=Uc(t,i,s)}else hh(b)?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,kt=oi(b.nextSibling),de=i,dt=!0,gn=null,li=!1,t!==null&&Xd(i,t),i=zc(i,r.children),i.flags|=4096);return i}return h?(bn(),b=r.fallback,h=i.mode,C=t.child,U=C.sibling,r=Gi(C,{mode:"hidden",children:r.children}),r.subtreeFlags=C.subtreeFlags&65011712,U!==null?b=Gi(U,b):(b=la(b,h,s,null),b.flags|=2),b.return=i,r.return=i,r.sibling=b,i.child=r,hl(null,r),r=i.child,b=t.child.memoizedState,b===null?b=Oc(s):(h=b.cachePool,h!==null?(C=$t._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=Wd(),b={baseLanes:b.baseLanes|s,cachePool:h}),r.memoizedState=b,r.childLanes=Hc(t,v,s),i.memoizedState=Ec,hl(t.child,r)):(xn(i),s=t.child,t=s.sibling,s=Gi(s,{mode:"visible",children:r.children}),s.return=i,s.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=s,i.memoizedState=null,s)}function zc(t,i){return i=Pr({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Pr(t,i){return t=Le(22,t,null,i),t.lanes=0,t}function Uc(t,i,s){return da(i,t.child,null,s),t=zc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function og(t,i,s){t.lanes|=i;var r=t.alternate;r!==null&&(r.lanes|=i),Qu(t.return,i,s)}function Dc(t,i,s,r,h,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:h,treeForkCount:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=r,v.tail=s,v.tailMode=h,v.treeForkCount=p)}function ug(t,i,s){var r=i.pendingProps,h=r.revealOrder,p=r.tail;r=r.children;var v=Kt.current,b=(v&2)!==0;if(b?(v=v&1|2,i.flags|=128):v&=1,at(Kt,v),ge(t,i,r,s),r=dt?Js:0,!b&&t!==null&&(t.flags&128)!==0)t:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&og(t,s,i);else if(t.tag===19)og(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break t;for(;t.sibling===null;){if(t.return===null||t.return===i)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(s=i.child,h=null;s!==null;)t=s.alternate,t!==null&&Rr(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=i.child,i.child=null):(h=s.sibling,s.sibling=null),Dc(i,!1,h,s,p,r);break;case"backwards":case"unstable_legacy-backwards":for(s=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Rr(t)===null){i.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}Dc(i,!0,s,null,p,r);break;case"together":Dc(i,!1,null,null,void 0,r);break;default:i.memoizedState=null}return i.child}function Pi(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),wn|=i.lanes,(s&i.childLanes)===0)if(t!==null){if($a(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,s=Gi(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Gi(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Rc(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Cr(t)))}function X1(t,i,s){switch(i.tag){case 3:Na(i,i.stateNode.containerInfo),yn(i,$t,t.memoizedState.cache),ra();break;case 27:case 5:he(i);break;case 4:Na(i,i.stateNode.containerInfo);break;case 10:yn(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,sc(i),null;break;case 13:var r=i.memoizedState;if(r!==null)return r.dehydrated!==null?(xn(i),i.flags|=128,null):(s&i.child.childLanes)!==0?rg(t,i,s):(xn(i),t=Pi(t,i,s),t!==null?t.sibling:null);xn(i);break;case 19:var h=(t.flags&128)!==0;if(r=(s&i.childLanes)!==0,r||($a(t,i,s,!1),r=(s&i.childLanes)!==0),h){if(r)return ug(t,i,s);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),at(Kt,Kt.current),r)break;return null;case 22:return i.lanes=0,eg(t,i,s,i.pendingProps);case 24:yn(i,$t,t.memoizedState.cache)}return Pi(t,i,s)}function cg(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)ee=!0;else{if(!Rc(t,s)&&(i.flags&128)===0)return ee=!1,X1(t,i,s);ee=(t.flags&131072)!==0}else ee=!1,dt&&(i.flags&1048576)!==0&&Yd(i,Js,i.index);switch(i.lanes=0,i.tag){case 16:t:{var r=i.pendingProps;if(t=ha(i.elementType),i.type=t,typeof t=="function")Iu(t)?(r=ga(t,r),i.tag=1,i=sg(null,i,t,r,s)):(i.tag=0,i=Ac(null,i,t,r,s));else{if(t!=null){var h=t.$$typeof;if(h===B){i.tag=11,i=Jp(null,i,t,r,s);break t}else if(h===Y){i.tag=14,i=$p(null,i,t,r,s);break t}}throw i=wt(t)||t,Error(a(306,i,""))}}return i;case 0:return Ac(t,i,i.type,i.pendingProps,s);case 1:return r=i.type,h=ga(r,i.pendingProps),sg(t,i,r,h,s);case 3:t:{if(Na(i,i.stateNode.containerInfo),t===null)throw Error(a(387));r=i.pendingProps;var p=i.memoizedState;h=p.element,tc(t,i),ll(i,r,null,s);var v=i.memoizedState;if(r=v.cache,yn(i,$t,r),r!==p.cache&&Zu(i,[$t],s,!0),sl(),r=v.element,p.isDehydrated)if(p={element:r,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=lg(t,i,r,s);break t}else if(r!==h){h=ni(Error(a(424)),i),$s(h),i=lg(t,i,r,s);break t}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,kt=oi(t.firstChild),de=i,dt=!0,gn=null,li=!0,s=ep(i,null,r,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ra(),r===h){i=Pi(t,i,s);break t}ge(t,i,r,s)}i=i.child}return i;case 26:return Vr(t,i),t===null?(s=x0(i.type,null,i.pendingProps,null))?i.memoizedState=s:dt||(s=i.type,t=i.pendingProps,r=oo(Ai.current).createElement(s),r[fe]=i,r[be]=t,me(r,s,t),re(r),i.stateNode=r):i.memoizedState=x0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return he(i),t===null&&dt&&(r=i.stateNode=v0(i.type,i.pendingProps,Ai.current),de=i,li=!0,h=kt,Hn(i.type)?(dh=h,kt=oi(r.firstChild)):kt=h),ge(t,i,i.pendingProps.children,s),Vr(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&dt&&((h=r=kt)&&(r=__(r,i.type,i.pendingProps,li),r!==null?(i.stateNode=r,de=i,kt=oi(r.firstChild),li=!1,h=!0):h=!1),h||mn(i)),he(i),h=i.type,p=i.pendingProps,v=t!==null?t.memoizedProps:null,r=p.children,oh(h,p)?r=null:v!==null&&oh(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=rc(t,i,R1,null,null,s),Cl._currentValue=h),Vr(t,i),ge(t,i,r,s),i.child;case 6:return t===null&&dt&&((t=s=kt)&&(s=S_(s,i.pendingProps,li),s!==null?(i.stateNode=s,de=i,kt=null,t=!0):t=!1),t||mn(i)),null;case 13:return rg(t,i,s);case 4:return Na(i,i.stateNode.containerInfo),r=i.pendingProps,t===null?i.child=da(i,null,r,s):ge(t,i,r,s),i.child;case 11:return Jp(t,i,i.type,i.pendingProps,s);case 7:return ge(t,i,i.pendingProps,s),i.child;case 8:return ge(t,i,i.pendingProps.children,s),i.child;case 12:return ge(t,i,i.pendingProps.children,s),i.child;case 10:return r=i.pendingProps,yn(i,i.type,r.value),ge(t,i,r.children,s),i.child;case 9:return h=i.type._context,r=i.pendingProps.children,ua(i),h=pe(h),r=r(h),i.flags|=1,ge(t,i,r,s),i.child;case 14:return $p(t,i,i.type,i.pendingProps,s);case 15:return tg(t,i,i.type,i.pendingProps,s);case 19:return ug(t,i,s);case 31:return Y1(t,i,s);case 22:return eg(t,i,s,i.pendingProps);case 24:return ua(i),r=pe($t),t===null?(h=Fu(),h===null&&(h=Dt,p=Wu(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=s),h=p),i.memoizedState={parent:r,cache:h},$u(i),yn(i,$t,h)):((t.lanes&s)!==0&&(tc(t,i),ll(i,null,null,s),sl()),h=t.memoizedState,p=i.memoizedState,h.parent!==r?(h={parent:r,cache:r},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),yn(i,$t,r)):(r=p.cache,yn(i,$t,r),r!==h.cache&&Zu(i,[$t],s,!0))),ge(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Qi(t){t.flags|=4}function Nc(t,i,s,r,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(kg())t.flags|=8192;else throw fa=Hr,Ju}else t.flags&=-16777217}function hg(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!C0(i))if(kg())t.flags|=8192;else throw fa=Hr,Ju}function Qr(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?jf():536870912,t.lanes|=i,hs|=i)}function fl(t,i){if(!dt)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(i)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,r|=h.subtreeFlags&65011712,r|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,r|=h.subtreeFlags,r|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=r,t.childLanes=s,i}function j1(t,i,s){var r=i.pendingProps;switch(Xu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(i),null;case 1:return Lt(i),null;case 3:return s=i.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Xi($t),cn(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ja(i)?Qi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vu())),Lt(i),null;case 26:var h=i.type,p=i.memoizedState;return t===null?(Qi(i),p!==null?(Lt(i),hg(i,p)):(Lt(i),Nc(i,h,null,r,s))):p?p!==t.memoizedState?(Qi(i),Lt(i),hg(i,p)):(Lt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==r&&Qi(i),Lt(i),Nc(i,h,t,r,s)),null;case 27:if(ar(i),s=Ai.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==r&&Qi(i);else{if(!r){if(i.stateNode===null)throw Error(a(166));return Lt(i),null}t=_t.current,Ja(i)?jd(i):(t=v0(h,r,s),i.stateNode=t,Qi(i))}return Lt(i),null;case 5:if(ar(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==r&&Qi(i);else{if(!r){if(i.stateNode===null)throw Error(a(166));return Lt(i),null}if(p=_t.current,Ja(i))jd(i);else{var v=oo(Ai.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof r.is=="string"?v.createElement("select",{is:r.is}):v.createElement("select"),r.multiple?p.multiple=!0:r.size&&(p.size=r.size);break;default:p=typeof r.is=="string"?v.createElement(h,{is:r.is}):v.createElement(h)}}p[fe]=i,p[be]=r;t:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break t;for(;v.sibling===null;){if(v.return===null||v.return===i)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=p;t:switch(me(p,h,r),h){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Qi(i)}}return Lt(i),Nc(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,s),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==r&&Qi(i);else{if(typeof r!="string"&&i.stateNode===null)throw Error(a(166));if(t=Ai.current,Ja(i)){if(t=i.stateNode,s=i.memoizedProps,r=null,h=de,h!==null)switch(h.tag){case 27:case 5:r=h.memoizedProps}t[fe]=i,t=!!(t.nodeValue===s||r!==null&&r.suppressHydrationWarning===!0||r0(t.nodeValue,s)),t||mn(i,!0)}else t=oo(t).createTextNode(r),t[fe]=i,i.stateNode=t}return Lt(i),null;case 31:if(s=i.memoizedState,t===null||t.memoizedState!==null){if(r=Ja(i),s!==null){if(t===null){if(!r)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[fe]=i}else ra(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Lt(i),t=!1}else s=Vu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return i.flags&256?(Ge(i),i):(Ge(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Lt(i),null;case 13:if(r=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ja(i),r!==null&&r.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[fe]=i}else ra(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Lt(i),h=!1}else h=Vu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Ge(i),i):(Ge(i),null)}return Ge(i),(i.flags&128)!==0?(i.lanes=s,i):(s=r!==null,t=t!==null&&t.memoizedState!==null,s&&(r=i.child,h=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(h=r.alternate.memoizedState.cachePool.pool),p=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),p!==h&&(r.flags|=2048)),s!==t&&s&&(i.child.flags|=8192),Qr(i,i.updateQueue),Lt(i),null);case 4:return cn(),t===null&&nh(i.stateNode.containerInfo),Lt(i),null;case 10:return Xi(i.type),Lt(i),null;case 19:if(yt(Kt),r=i.memoizedState,r===null)return Lt(i),null;if(h=(i.flags&128)!==0,p=r.rendering,p===null)if(h)fl(r,!1);else{if(Zt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(p=Rr(t),p!==null){for(i.flags|=128,fl(r,!1),t=p.updateQueue,i.updateQueue=t,Qr(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)Id(s,t),s=s.sibling;return at(Kt,Kt.current&1|2),dt&&qi(i,r.treeForkCount),i.child}t=t.sibling}r.tail!==null&&Re()>Jr&&(i.flags|=128,h=!0,fl(r,!1),i.lanes=4194304)}else{if(!h)if(t=Rr(p),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Qr(i,t),fl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!p.alternate&&!dt)return Lt(i),null}else 2*Re()-r.renderingStartTime>Jr&&s!==536870912&&(i.flags|=128,h=!0,fl(r,!1),i.lanes=4194304);r.isBackwards?(p.sibling=i.child,i.child=p):(t=r.last,t!==null?t.sibling=p:i.child=p,r.last=p)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Re(),t.sibling=null,s=Kt.current,at(Kt,h?s&1|2:s&1),dt&&qi(i,r.treeForkCount),t):(Lt(i),null);case 22:case 23:return Ge(i),ac(),r=i.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(i.flags|=8192):r&&(i.flags|=8192),r?(s&536870912)!==0&&(i.flags&128)===0&&(Lt(i),i.subtreeFlags&6&&(i.flags|=8192)):Lt(i),s=i.updateQueue,s!==null&&Qr(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048),t!==null&&yt(ca),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Xi($t),Lt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function V1(t,i){switch(Xu(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Xi($t),cn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ar(i),null;case 31:if(i.memoizedState!==null){if(Ge(i),i.alternate===null)throw Error(a(340));ra()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Ge(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));ra()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return yt(Kt),null;case 4:return cn(),null;case 10:return Xi(i.type),null;case 22:case 23:return Ge(i),ac(),t!==null&&yt(ca),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Xi($t),null;case 25:return null;default:return null}}function fg(t,i){switch(Xu(i),i.tag){case 3:Xi($t),cn();break;case 26:case 27:case 5:ar(i);break;case 4:cn();break;case 31:i.memoizedState!==null&&Ge(i);break;case 13:Ge(i);break;case 19:yt(Kt);break;case 10:Xi(i.type);break;case 22:case 23:Ge(i),ac(),t!==null&&yt(ca);break;case 24:Xi($t)}}function dl(t,i){try{var s=i.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var h=r.next;s=h;do{if((s.tag&t)===t){r=void 0;var p=s.create,v=s.inst;r=p(),v.destroy=r}s=s.next}while(s!==h)}}catch(b){At(i,i.return,b)}}function Tn(t,i,s){try{var r=i.updateQueue,h=r!==null?r.lastEffect:null;if(h!==null){var p=h.next;r=p;do{if((r.tag&t)===t){var v=r.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=i;var C=s,U=b;try{U()}catch(L){At(h,C,L)}}}r=r.next}while(r!==p)}}catch(L){At(i,i.return,L)}}function dg(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{np(i,s)}catch(r){At(t,t.return,r)}}}function pg(t,i,s){s.props=ga(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(r){At(t,i,r)}}function pl(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof s=="function"?t.refCleanup=s(r):s.current=r}}catch(h){At(t,i,h)}}function Hi(t,i){var s=t.ref,r=t.refCleanup;if(s!==null)if(typeof r=="function")try{r()}catch(h){At(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){At(t,i,h)}else s.current=null}function gg(t){var i=t.type,s=t.memoizedProps,r=t.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break t;case"img":s.src?r.src=s.src:s.srcSet&&(r.srcset=s.srcSet)}}catch(h){At(t,t.return,h)}}function Bc(t,i,s){try{var r=t.stateNode;d_(r,t.type,s,i),r[be]=i}catch(h){At(t,t.return,h)}}function mg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hn(t.type)||t.tag===4}function kc(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||mg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hn(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lc(t,i,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Li));else if(r!==4&&(r===27&&Hn(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(Lc(t,i,s),t=t.sibling;t!==null;)Lc(t,i,s),t=t.sibling}function Zr(t,i,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(r!==4&&(r===27&&Hn(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Zr(t,i,s),t=t.sibling;t!==null;)Zr(t,i,s),t=t.sibling}function yg(t){var i=t.stateNode,s=t.memoizedProps;try{for(var r=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);me(i,r,s),i[fe]=t,i[be]=s}catch(p){At(t,t.return,p)}}var Zi=!1,ie=!1,Ic=!1,vg=typeof WeakSet=="function"?WeakSet:Set,oe=null;function P1(t,i){if(t=t.containerInfo,lh=mo,t=Hd(t),Uu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var h=r.anchorOffset,p=r.focusNode;r=r.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break t}var v=0,b=-1,C=-1,U=0,L=0,X=t,D=null;e:for(;;){for(var k;X!==s||h!==0&&X.nodeType!==3||(b=v+h),X!==p||r!==0&&X.nodeType!==3||(C=v+r),X.nodeType===3&&(v+=X.nodeValue.length),(k=X.firstChild)!==null;)D=X,X=k;for(;;){if(X===t)break e;if(D===s&&++U===h&&(b=v),D===p&&++L===r&&(C=v),(k=X.nextSibling)!==null)break;X=D,D=X.parentNode}X=k}s=b===-1||C===-1?null:{start:b,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(rh={focusedElem:t,selectionRange:s},mo=!1,oe=i;oe!==null;)if(i=oe,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,oe=t;else for(;oe!==null;){switch(i=oe,p=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)h=t[s],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,s=i,h=p.memoizedProps,p=p.memoizedState,r=s.stateNode;try{var W=ga(s.type,h);t=r.getSnapshotBeforeUpdate(W,p),r.__reactInternalSnapshotBeforeUpdate=t}catch(tt){At(s,s.return,tt)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)ch(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ch(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,oe=t;break}oe=i.return}}function _g(t,i,s){var r=s.flags;switch(s.tag){case 0:case 11:case 15:Ki(t,s),r&4&&dl(5,s);break;case 1:if(Ki(t,s),r&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(v){At(s,s.return,v)}else{var h=ga(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){At(s,s.return,v)}}r&64&&dg(s),r&512&&pl(s,s.return);break;case 3:if(Ki(t,s),r&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{np(t,i)}catch(v){At(s,s.return,v)}}break;case 27:i===null&&r&4&&yg(s);case 26:case 5:Ki(t,s),i===null&&r&4&&gg(s),r&512&&pl(s,s.return);break;case 12:Ki(t,s);break;case 31:Ki(t,s),r&4&&bg(t,s);break;case 13:Ki(t,s),r&4&&Tg(t,s),r&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=e_.bind(null,s),x_(t,s))));break;case 22:if(r=s.memoizedState!==null||Zi,!r){i=i!==null&&i.memoizedState!==null||ie,h=Zi;var p=ie;Zi=r,(ie=i)&&!p?Fi(t,s,(s.subtreeFlags&8772)!==0):Ki(t,s),Zi=h,ie=p}break;case 30:break;default:Ki(t,s)}}function Sg(t){var i=t.alternate;i!==null&&(t.alternate=null,Sg(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&gu(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Gt=null,Me=!1;function Wi(t,i,s){for(s=s.child;s!==null;)xg(t,i,s),s=s.sibling}function xg(t,i,s){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Ls,s)}catch{}switch(s.tag){case 26:ie||Hi(s,i),Wi(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ie||Hi(s,i);var r=Gt,h=Me;Hn(s.type)&&(Gt=s.stateNode,Me=!1),Wi(t,i,s),Tl(s.stateNode),Gt=r,Me=h;break;case 5:ie||Hi(s,i);case 6:if(r=Gt,h=Me,Gt=null,Wi(t,i,s),Gt=r,Me=h,Gt!==null)if(Me)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(s.stateNode)}catch(p){At(s,i,p)}else try{Gt.removeChild(s.stateNode)}catch(p){At(s,i,p)}break;case 18:Gt!==null&&(Me?(t=Gt,d0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),_s(t)):d0(Gt,s.stateNode));break;case 4:r=Gt,h=Me,Gt=s.stateNode.containerInfo,Me=!0,Wi(t,i,s),Gt=r,Me=h;break;case 0:case 11:case 14:case 15:Tn(2,s,i),ie||Tn(4,s,i),Wi(t,i,s);break;case 1:ie||(Hi(s,i),r=s.stateNode,typeof r.componentWillUnmount=="function"&&pg(s,i,r)),Wi(t,i,s);break;case 21:Wi(t,i,s);break;case 22:ie=(r=ie)||s.memoizedState!==null,Wi(t,i,s),ie=r;break;default:Wi(t,i,s)}}function bg(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{_s(t)}catch(s){At(i,i.return,s)}}}function Tg(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{_s(t)}catch(s){At(i,i.return,s)}}function Q1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new vg),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new vg),i;default:throw Error(a(435,t.tag))}}function Wr(t,i){var s=Q1(t);i.forEach(function(r){if(!s.has(r)){s.add(r);var h=i_.bind(null,t,r);r.then(h,h)}})}function we(t,i){var s=i.deletions;if(s!==null)for(var r=0;r<s.length;r++){var h=s[r],p=t,v=i,b=v;t:for(;b!==null;){switch(b.tag){case 27:if(Hn(b.type)){Gt=b.stateNode,Me=!1;break t}break;case 5:Gt=b.stateNode,Me=!1;break t;case 3:case 4:Gt=b.stateNode.containerInfo,Me=!0;break t}b=b.return}if(Gt===null)throw Error(a(160));xg(p,v,h),Gt=null,Me=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Mg(i,t),i=i.sibling}var bi=null;function Mg(t,i){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:we(i,t),Ce(t),r&4&&(Tn(3,t,t.return),dl(3,t),Tn(5,t,t.return));break;case 1:we(i,t),Ce(t),r&512&&(ie||s===null||Hi(s,s.return)),r&64&&Zi&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?r:s.concat(r))));break;case 26:var h=bi;if(we(i,t),Ce(t),r&512&&(ie||s===null||Hi(s,s.return)),r&4){var p=s!==null?s.memoizedState:null;if(r=t.memoizedState,s===null)if(r===null)if(t.stateNode===null){t:{r=t.type,s=t.memoizedProps,h=h.ownerDocument||h;e:switch(r){case"title":p=h.getElementsByTagName("title")[0],(!p||p[qs]||p[fe]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(r),h.head.insertBefore(p,h.querySelector("head > title"))),me(p,r,s),p[fe]=t,re(p),r=p;break t;case"link":var v=M0("link","href",h).get(r+(s.href||""));if(v){for(var b=0;b<v.length;b++)if(p=v[b],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){v.splice(b,1);break e}}p=h.createElement(r),me(p,r,s),h.head.appendChild(p);break;case"meta":if(v=M0("meta","content",h).get(r+(s.content||""))){for(b=0;b<v.length;b++)if(p=v[b],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){v.splice(b,1);break e}}p=h.createElement(r),me(p,r,s),h.head.appendChild(p);break;default:throw Error(a(468,r))}p[fe]=t,re(p),r=p}t.stateNode=r}else w0(h,t.type,t.stateNode);else t.stateNode=T0(h,r,t.memoizedProps);else p!==r?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,r===null?w0(h,t.type,t.stateNode):T0(h,r,t.memoizedProps)):r===null&&t.stateNode!==null&&Bc(t,t.memoizedProps,s.memoizedProps)}break;case 27:we(i,t),Ce(t),r&512&&(ie||s===null||Hi(s,s.return)),s!==null&&r&4&&Bc(t,t.memoizedProps,s.memoizedProps);break;case 5:if(we(i,t),Ce(t),r&512&&(ie||s===null||Hi(s,s.return)),t.flags&32){h=t.stateNode;try{Ya(h,"")}catch(W){At(t,t.return,W)}}r&4&&t.stateNode!=null&&(h=t.memoizedProps,Bc(t,h,s!==null?s.memoizedProps:h)),r&1024&&(Ic=!0);break;case 6:if(we(i,t),Ce(t),r&4){if(t.stateNode===null)throw Error(a(162));r=t.memoizedProps,s=t.stateNode;try{s.nodeValue=r}catch(W){At(t,t.return,W)}}break;case 3:if(ho=null,h=bi,bi=uo(i.containerInfo),we(i,t),bi=h,Ce(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{_s(i.containerInfo)}catch(W){At(t,t.return,W)}Ic&&(Ic=!1,wg(t));break;case 4:r=bi,bi=uo(t.stateNode.containerInfo),we(i,t),Ce(t),bi=r;break;case 12:we(i,t),Ce(t);break;case 31:we(i,t),Ce(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Wr(t,r)));break;case 13:we(i,t),Ce(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Fr=Re()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Wr(t,r)));break;case 22:h=t.memoizedState!==null;var C=s!==null&&s.memoizedState!==null,U=Zi,L=ie;if(Zi=U||h,ie=L||C,we(i,t),ie=L,Zi=U,Ce(t),r&8192)t:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(s===null||C||Zi||ie||ma(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){C=s=i;try{if(p=C.stateNode,h)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=C.stateNode;var X=C.memoizedProps.style,D=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(W){At(C,C.return,W)}}}else if(i.tag===6){if(s===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(W){At(C,C.return,W)}}}else if(i.tag===18){if(s===null){C=i;try{var k=C.stateNode;h?p0(k,!0):p0(C.stateNode,!1)}catch(W){At(C,C.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break t;for(;i.sibling===null;){if(i.return===null||i.return===t)break t;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}r&4&&(r=t.updateQueue,r!==null&&(s=r.retryQueue,s!==null&&(r.retryQueue=null,Wr(t,s))));break;case 19:we(i,t),Ce(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Wr(t,r)));break;case 30:break;case 21:break;default:we(i,t),Ce(t)}}function Ce(t){var i=t.flags;if(i&2){try{for(var s,r=t.return;r!==null;){if(mg(r)){s=r;break}r=r.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,p=kc(t);Zr(t,p,h);break;case 5:var v=s.stateNode;s.flags&32&&(Ya(v,""),s.flags&=-33);var b=kc(t);Zr(t,b,v);break;case 3:case 4:var C=s.stateNode.containerInfo,U=kc(t);Lc(t,U,C);break;default:throw Error(a(161))}}catch(L){At(t,t.return,L)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function wg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;wg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Ki(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)_g(t,i.alternate,i),i=i.sibling}function ma(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Tn(4,i,i.return),ma(i);break;case 1:Hi(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&pg(i,i.return,s),ma(i);break;case 27:Tl(i.stateNode);case 26:case 5:Hi(i,i.return),ma(i);break;case 22:i.memoizedState===null&&ma(i);break;case 30:ma(i);break;default:ma(i)}t=t.sibling}}function Fi(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var r=i.alternate,h=t,p=i,v=p.flags;switch(p.tag){case 0:case 11:case 15:Fi(h,p,s),dl(4,p);break;case 1:if(Fi(h,p,s),r=p,h=r.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){At(r,r.return,U)}if(r=p,h=r.updateQueue,h!==null){var b=r.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)ip(C[h],b)}catch(U){At(r,r.return,U)}}s&&v&64&&dg(p),pl(p,p.return);break;case 27:yg(p);case 26:case 5:Fi(h,p,s),s&&r===null&&v&4&&gg(p),pl(p,p.return);break;case 12:Fi(h,p,s);break;case 31:Fi(h,p,s),s&&v&4&&bg(h,p);break;case 13:Fi(h,p,s),s&&v&4&&Tg(h,p);break;case 22:p.memoizedState===null&&Fi(h,p,s),pl(p,p.return);break;case 30:break;default:Fi(h,p,s)}i=i.sibling}}function Gc(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&tl(s))}function qc(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&tl(t))}function Ti(t,i,s,r){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Cg(t,i,s,r),i=i.sibling}function Cg(t,i,s,r){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ti(t,i,s,r),h&2048&&dl(9,i);break;case 1:Ti(t,i,s,r);break;case 3:Ti(t,i,s,r),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&tl(t)));break;case 12:if(h&2048){Ti(t,i,s,r),t=i.stateNode;try{var p=i.memoizedProps,v=p.id,b=p.onPostCommit;typeof b=="function"&&b(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){At(i,i.return,C)}}else Ti(t,i,s,r);break;case 31:Ti(t,i,s,r);break;case 13:Ti(t,i,s,r);break;case 23:break;case 22:p=i.stateNode,v=i.alternate,i.memoizedState!==null?p._visibility&2?Ti(t,i,s,r):gl(t,i):p._visibility&2?Ti(t,i,s,r):(p._visibility|=2,os(t,i,s,r,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Gc(v,i);break;case 24:Ti(t,i,s,r),h&2048&&qc(i.alternate,i);break;default:Ti(t,i,s,r)}}function os(t,i,s,r,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=t,v=i,b=s,C=r,U=v.flags;switch(v.tag){case 0:case 11:case 15:os(p,v,b,C,h),dl(8,v);break;case 23:break;case 22:var L=v.stateNode;v.memoizedState!==null?L._visibility&2?os(p,v,b,C,h):gl(p,v):(L._visibility|=2,os(p,v,b,C,h)),h&&U&2048&&Gc(v.alternate,v);break;case 24:os(p,v,b,C,h),h&&U&2048&&qc(v.alternate,v);break;default:os(p,v,b,C,h)}i=i.sibling}}function gl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,r=i,h=r.flags;switch(r.tag){case 22:gl(s,r),h&2048&&Gc(r.alternate,r);break;case 24:gl(s,r),h&2048&&qc(r.alternate,r);break;default:gl(s,r)}i=i.sibling}}var ml=8192;function us(t,i,s){if(t.subtreeFlags&ml)for(t=t.child;t!==null;)Ag(t,i,s),t=t.sibling}function Ag(t,i,s){switch(t.tag){case 26:us(t,i,s),t.flags&ml&&t.memoizedState!==null&&D_(s,bi,t.memoizedState,t.memoizedProps);break;case 5:us(t,i,s);break;case 3:case 4:var r=bi;bi=uo(t.stateNode.containerInfo),us(t,i,s),bi=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=ml,ml=16777216,us(t,i,s),ml=r):us(t,i,s));break;default:us(t,i,s)}}function Eg(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function yl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var r=i[s];oe=r,Hg(r,t)}Eg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Og(t),t=t.sibling}function Og(t){switch(t.tag){case 0:case 11:case 15:yl(t),t.flags&2048&&Tn(9,t,t.return);break;case 3:yl(t);break;case 12:yl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Kr(t)):yl(t);break;default:yl(t)}}function Kr(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var r=i[s];oe=r,Hg(r,t)}Eg(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Tn(8,i,i.return),Kr(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Kr(i));break;default:Kr(i)}t=t.sibling}}function Hg(t,i){for(;oe!==null;){var s=oe;switch(s.tag){case 0:case 11:case 15:Tn(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var r=s.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:tl(s.memoizedState.cache)}if(r=s.child,r!==null)r.return=s,oe=r;else t:for(s=t;oe!==null;){r=oe;var h=r.sibling,p=r.return;if(Sg(r),r===s){oe=null;break t}if(h!==null){h.return=p,oe=h;break t}oe=p}}}var Z1={getCacheForType:function(t){var i=pe($t),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s},cacheSignal:function(){return pe($t).controller.signal}},W1=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Dt=null,ut=null,ht=0,Ct=0,qe=null,Mn=!1,cs=!1,Yc=!1,Ji=0,Zt=0,wn=0,ya=0,Xc=0,Ye=0,hs=0,vl=null,Ae=null,jc=!1,Fr=0,zg=0,Jr=1/0,$r=null,Cn=null,ae=0,An=null,fs=null,$i=0,Vc=0,Pc=null,Ug=null,_l=0,Qc=null;function Xe(){return(Tt&2)!==0&&ht!==0?ht&-ht:R.T!==null?$c():Zf()}function Dg(){if(Ye===0)if((ht&536870912)===0||dt){var t=rr;rr<<=1,(rr&3932160)===0&&(rr=262144),Ye=t}else Ye=536870912;return t=Ie.current,t!==null&&(t.flags|=32),Ye}function Ee(t,i,s){(t===Dt&&(Ct===2||Ct===9)||t.cancelPendingCommit!==null)&&(ds(t,0),En(t,ht,Ye,!1)),Gs(t,s),((Tt&2)===0||t!==Dt)&&(t===Dt&&((Tt&2)===0&&(ya|=s),Zt===4&&En(t,ht,Ye,!1)),zi(t))}function Rg(t,i,s){if((Tt&6)!==0)throw Error(a(327));var r=!s&&(i&127)===0&&(i&t.expiredLanes)===0||Is(t,i),h=r?J1(t,i):Wc(t,i,!0),p=r;do{if(h===0){cs&&!r&&En(t,i,0,!1);break}else{if(s=t.current.alternate,p&&!K1(s)){h=Wc(t,i,!1),p=!1;continue}if(h===2){if(p=i,t.errorRecoveryDisabledLanes&p)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var b=t;h=vl;var C=b.current.memoizedState.isDehydrated;if(C&&(ds(b,v).flags|=256),v=Wc(b,v,!1),v!==2){if(Yc&&!C){b.errorRecoveryDisabledLanes|=p,ya|=p,h=4;break t}p=Ae,Ae=h,p!==null&&(Ae===null?Ae=p:Ae.push.apply(Ae,p))}h=v}if(p=!1,h!==2)continue}}if(h===1){ds(t,0),En(t,i,0,!0);break}t:{switch(r=t,p=h,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:En(r,i,Ye,!Mn);break t;case 2:Ae=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=Fr+300-Re(),10<h)){if(En(r,i,Ye,!Mn),ur(r,0,!0)!==0)break t;$i=i,r.timeoutHandle=h0(Ng.bind(null,r,s,Ae,$r,jc,i,Ye,ya,hs,Mn,p,"Throttled",-0,0),h);break t}Ng(r,s,Ae,$r,jc,i,Ye,ya,hs,Mn,p,null,-0,0)}}break}while(!0);zi(t)}function Ng(t,i,s,r,h,p,v,b,C,U,L,X,D,k){if(t.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Li},Ag(i,p,X);var W=(p&62914560)===p?Fr-Re():(p&4194048)===p?zg-Re():0;if(W=R_(X,W),W!==null){$i=p,t.cancelPendingCommit=W(Xg.bind(null,t,i,p,s,r,h,v,b,C,L,X,null,D,k)),En(t,p,v,!U);return}}Xg(t,i,p,s,r,h,v,b,C)}function K1(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var r=0;r<s.length;r++){var h=s[r],p=h.getSnapshot;h=h.value;try{if(!ke(p(),h))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function En(t,i,s,r){i&=~Xc,i&=~ya,t.suspendedLanes|=i,t.pingedLanes&=~i,r&&(t.warmLanes|=i),r=t.expirationTimes;for(var h=i;0<h;){var p=31-Be(h),v=1<<p;r[p]=-1,h&=~v}s!==0&&Vf(t,s,i)}function to(){return(Tt&6)===0?(Sl(0),!1):!0}function Zc(){if(ut!==null){if(Ct===0)var t=ut.return;else t=ut,Yi=oa=null,cc(t),ns=null,il=0,t=ut;for(;t!==null;)fg(t.alternate,t),t=t.return;ut=null}}function ds(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,m_(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),$i=0,Zc(),Dt=t,ut=s=Gi(t.current,null),ht=i,Ct=0,qe=null,Mn=!1,cs=Is(t,i),Yc=!1,hs=Ye=Xc=ya=wn=Zt=0,Ae=vl=null,jc=!1,(i&8)!==0&&(i|=i&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=i;0<r;){var h=31-Be(r),p=1<<h;i|=t[h],r&=~p}return Ji=i,xr(),s}function Bg(t,i){st=null,R.H=cl,i===is||i===Or?(i=Jd(),Ct=3):i===Ju?(i=Jd(),Ct=4):Ct=i===Cc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,qe=i,ut===null&&(Zt=1,Xr(t,ni(i,t.current)))}function kg(){var t=Ie.current;return t===null?!0:(ht&4194048)===ht?ri===null:(ht&62914560)===ht||(ht&536870912)!==0?t===ri:!1}function Lg(){var t=R.H;return R.H=cl,t===null?cl:t}function Ig(){var t=R.A;return R.A=Z1,t}function eo(){Zt=4,Mn||(ht&4194048)!==ht&&Ie.current!==null||(cs=!0),(wn&134217727)===0&&(ya&134217727)===0||Dt===null||En(Dt,ht,Ye,!1)}function Wc(t,i,s){var r=Tt;Tt|=2;var h=Lg(),p=Ig();(Dt!==t||ht!==i)&&($r=null,ds(t,i)),i=!1;var v=Zt;t:do try{if(Ct!==0&&ut!==null){var b=ut,C=qe;switch(Ct){case 8:Zc(),v=6;break t;case 3:case 2:case 9:case 6:Ie.current===null&&(i=!0);var U=Ct;if(Ct=0,qe=null,ps(t,b,C,U),s&&cs){v=0;break t}break;default:U=Ct,Ct=0,qe=null,ps(t,b,C,U)}}F1(),v=Zt;break}catch(L){Bg(t,L)}while(!0);return i&&t.shellSuspendCounter++,Yi=oa=null,Tt=r,R.H=h,R.A=p,ut===null&&(Dt=null,ht=0,xr()),v}function F1(){for(;ut!==null;)Gg(ut)}function J1(t,i){var s=Tt;Tt|=2;var r=Lg(),h=Ig();Dt!==t||ht!==i?($r=null,Jr=Re()+500,ds(t,i)):cs=Is(t,i);t:do try{if(Ct!==0&&ut!==null){i=ut;var p=qe;e:switch(Ct){case 1:Ct=0,qe=null,ps(t,i,p,1);break;case 2:case 9:if(Kd(p)){Ct=0,qe=null,qg(i);break}i=function(){Ct!==2&&Ct!==9||Dt!==t||(Ct=7),zi(t)},p.then(i,i);break t;case 3:Ct=7;break t;case 4:Ct=5;break t;case 7:Kd(p)?(Ct=0,qe=null,qg(i)):(Ct=0,qe=null,ps(t,i,p,7));break;case 5:var v=null;switch(ut.tag){case 26:v=ut.memoizedState;case 5:case 27:var b=ut;if(v?C0(v):b.stateNode.complete){Ct=0,qe=null;var C=b.sibling;if(C!==null)ut=C;else{var U=b.return;U!==null?(ut=U,io(U)):ut=null}break e}}Ct=0,qe=null,ps(t,i,p,5);break;case 6:Ct=0,qe=null,ps(t,i,p,6);break;case 8:Zc(),Zt=6;break t;default:throw Error(a(462))}}$1();break}catch(L){Bg(t,L)}while(!0);return Yi=oa=null,R.H=r,R.A=h,Tt=s,ut!==null?0:(Dt=null,ht=0,xr(),Zt)}function $1(){for(;ut!==null&&!bv();)Gg(ut)}function Gg(t){var i=cg(t.alternate,t,Ji);t.memoizedProps=t.pendingProps,i===null?io(t):ut=i}function qg(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=ag(s,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=ag(s,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:cc(i);default:fg(s,i),i=ut=Id(i,Ji),i=cg(s,i,Ji)}t.memoizedProps=t.pendingProps,i===null?io(t):ut=i}function ps(t,i,s,r){Yi=oa=null,cc(i),ns=null,il=0;var h=i.return;try{if(q1(t,h,i,s,ht)){Zt=1,Xr(t,ni(s,t.current)),ut=null;return}}catch(p){if(h!==null)throw ut=h,p;Zt=1,Xr(t,ni(s,t.current)),ut=null;return}i.flags&32768?(dt||r===1?t=!0:cs||(ht&536870912)!==0?t=!1:(Mn=t=!0,(r===2||r===9||r===3||r===6)&&(r=Ie.current,r!==null&&r.tag===13&&(r.flags|=16384))),Yg(i,t)):io(i)}function io(t){var i=t;do{if((i.flags&32768)!==0){Yg(i,Mn);return}t=i.return;var s=j1(i.alternate,i,Ji);if(s!==null){ut=s;return}if(i=i.sibling,i!==null){ut=i;return}ut=i=t}while(i!==null);Zt===0&&(Zt=5)}function Yg(t,i){do{var s=V1(t.alternate,t);if(s!==null){s.flags&=32767,ut=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){ut=t;return}ut=t=s}while(t!==null);Zt=6,ut=null}function Xg(t,i,s,r,h,p,v,b,C){t.cancelPendingCommit=null;do no();while(ae!==0);if((Tt&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=ku,Uv(t,s,p,v,b,C),t===Dt&&(ut=Dt=null,ht=0),fs=i,An=t,$i=s,Vc=p,Pc=h,Ug=r,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,n_(sr,function(){return Zg(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||r){r=R.T,R.T=null,h=P.p,P.p=2,v=Tt,Tt|=4;try{P1(t,i,s)}finally{Tt=v,P.p=h,R.T=r}}ae=1,jg(),Vg(),Pg()}}function jg(){if(ae===1){ae=0;var t=An,i=fs,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=R.T,R.T=null;var r=P.p;P.p=2;var h=Tt;Tt|=4;try{Mg(i,t);var p=rh,v=Hd(t.containerInfo),b=p.focusedElem,C=p.selectionRange;if(v!==b&&b&&b.ownerDocument&&Od(b.ownerDocument.documentElement,b)){if(C!==null&&Uu(b)){var U=C.start,L=C.end;if(L===void 0&&(L=U),"selectionStart"in b)b.selectionStart=U,b.selectionEnd=Math.min(L,b.value.length);else{var X=b.ownerDocument||document,D=X&&X.defaultView||window;if(D.getSelection){var k=D.getSelection(),W=b.textContent.length,tt=Math.min(C.start,W),zt=C.end===void 0?tt:Math.min(C.end,W);!k.extend&&tt>zt&&(v=zt,zt=tt,tt=v);var O=Ed(b,tt),A=Ed(b,zt);if(O&&A&&(k.rangeCount!==1||k.anchorNode!==O.node||k.anchorOffset!==O.offset||k.focusNode!==A.node||k.focusOffset!==A.offset)){var z=X.createRange();z.setStart(O.node,O.offset),k.removeAllRanges(),tt>zt?(k.addRange(z),k.extend(A.node,A.offset)):(z.setEnd(A.node,A.offset),k.addRange(z))}}}}for(X=[],k=b;k=k.parentNode;)k.nodeType===1&&X.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var q=X[b];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}mo=!!lh,rh=lh=null}finally{Tt=h,P.p=r,R.T=s}}t.current=i,ae=2}}function Vg(){if(ae===2){ae=0;var t=An,i=fs,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=R.T,R.T=null;var r=P.p;P.p=2;var h=Tt;Tt|=4;try{_g(t,i.alternate,i)}finally{Tt=h,P.p=r,R.T=s}}ae=3}}function Pg(){if(ae===4||ae===3){ae=0,Tv();var t=An,i=fs,s=$i,r=Ug;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ae=5:(ae=0,fs=An=null,Qg(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Cn=null),du(s),i=i.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Ls,i,void 0,(i.current.flags&128)===128)}catch{}if(r!==null){i=R.T,h=P.p,P.p=2,R.T=null;try{for(var p=t.onRecoverableError,v=0;v<r.length;v++){var b=r[v];p(b.value,{componentStack:b.stack})}}finally{R.T=i,P.p=h}}($i&3)!==0&&no(),zi(t),h=t.pendingLanes,(s&261930)!==0&&(h&42)!==0?t===Qc?_l++:(_l=0,Qc=t):_l=0,Sl(0)}}function Qg(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,tl(i)))}function no(){return jg(),Vg(),Pg(),Zg()}function Zg(){if(ae!==5)return!1;var t=An,i=Vc;Vc=0;var s=du($i),r=R.T,h=P.p;try{P.p=32>s?32:s,R.T=null,s=Pc,Pc=null;var p=An,v=$i;if(ae=0,fs=An=null,$i=0,(Tt&6)!==0)throw Error(a(331));var b=Tt;if(Tt|=4,Og(p.current),Cg(p,p.current,v,s),Tt=b,Sl(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Ls,p)}catch{}return!0}finally{P.p=h,R.T=r,Qg(t,i)}}function Wg(t,i,s){i=ni(s,i),i=wc(t.stateNode,i,2),t=Sn(t,i,2),t!==null&&(Gs(t,2),zi(t))}function At(t,i,s){if(t.tag===3)Wg(t,t,s);else for(;i!==null;){if(i.tag===3){Wg(i,t,s);break}else if(i.tag===1){var r=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cn===null||!Cn.has(r))){t=ni(s,t),s=Kp(2),r=Sn(i,s,2),r!==null&&(Fp(s,r,i,t),Gs(r,2),zi(r));break}}i=i.return}}function Kc(t,i,s){var r=t.pingCache;if(r===null){r=t.pingCache=new W1;var h=new Set;r.set(i,h)}else h=r.get(i),h===void 0&&(h=new Set,r.set(i,h));h.has(s)||(Yc=!0,h.add(s),t=t_.bind(null,t,i,s),i.then(t,t))}function t_(t,i,s){var r=t.pingCache;r!==null&&r.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Dt===t&&(ht&s)===s&&(Zt===4||Zt===3&&(ht&62914560)===ht&&300>Re()-Fr?(Tt&2)===0&&ds(t,0):Xc|=s,hs===ht&&(hs=0)),zi(t)}function Kg(t,i){i===0&&(i=jf()),t=sa(t,i),t!==null&&(Gs(t,i),zi(t))}function e_(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),Kg(t,s)}function i_(t,i){var s=0;switch(t.tag){case 31:case 13:var r=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(a(314))}r!==null&&r.delete(i),Kg(t,s)}function n_(t,i){return uu(t,i)}var ao=null,gs=null,Fc=!1,so=!1,Jc=!1,On=0;function zi(t){t!==gs&&t.next===null&&(gs===null?ao=gs=t:gs=gs.next=t),so=!0,Fc||(Fc=!0,s_())}function Sl(t,i){if(!Jc&&so){Jc=!0;do for(var s=!1,r=ao;r!==null;){if(t!==0){var h=r.pendingLanes;if(h===0)var p=0;else{var v=r.suspendedLanes,b=r.pingedLanes;p=(1<<31-Be(42|t)+1)-1,p&=h&~(v&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,t0(r,p))}else p=ht,p=ur(r,r===Dt?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(p&3)===0||Is(r,p)||(s=!0,t0(r,p));r=r.next}while(s);Jc=!1}}function a_(){Fg()}function Fg(){so=Fc=!1;var t=0;On!==0&&g_()&&(t=On);for(var i=Re(),s=null,r=ao;r!==null;){var h=r.next,p=Jg(r,i);p===0?(r.next=null,s===null?ao=h:s.next=h,h===null&&(gs=s)):(s=r,(t!==0||(p&3)!==0)&&(so=!0)),r=h}ae!==0&&ae!==5||Sl(t),On!==0&&(On=0)}function Jg(t,i){for(var s=t.suspendedLanes,r=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var v=31-Be(p),b=1<<v,C=h[v];C===-1?((b&s)===0||(b&r)!==0)&&(h[v]=zv(b,i)):C<=i&&(t.expiredLanes|=b),p&=~b}if(i=Dt,s=ht,s=ur(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,s===0||t===i&&(Ct===2||Ct===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&cu(r),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Is(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(r!==null&&cu(r),du(s)){case 2:case 8:s=Yf;break;case 32:s=sr;break;case 268435456:s=Xf;break;default:s=sr}return r=$g.bind(null,t),s=uu(s,r),t.callbackPriority=i,t.callbackNode=s,i}return r!==null&&r!==null&&cu(r),t.callbackPriority=2,t.callbackNode=null,2}function $g(t,i){if(ae!==0&&ae!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(no()&&t.callbackNode!==s)return null;var r=ht;return r=ur(t,t===Dt?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(Rg(t,r,i),Jg(t,Re()),t.callbackNode!=null&&t.callbackNode===s?$g.bind(null,t):null)}function t0(t,i){if(no())return null;Rg(t,i,!0)}function s_(){y_(function(){(Tt&6)!==0?uu(qf,a_):Fg()})}function $c(){if(On===0){var t=ts;t===0&&(t=lr,lr<<=1,(lr&261888)===0&&(lr=256)),On=t}return On}function e0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:dr(""+t)}function i0(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function l_(t,i,s,r,h){if(i==="submit"&&s&&s.stateNode===h){var p=e0((h[be]||null).action),v=r.submitter;v&&(i=(i=v[be]||null)?e0(i.formAction):v.getAttribute("formAction"),i!==null&&(p=i,v=null));var b=new yr("action","action",null,r,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(On!==0){var C=v?i0(h,v):new FormData(h);_c(s,{pending:!0,data:C,method:h.method,action:p},null,C)}}else typeof p=="function"&&(b.preventDefault(),C=v?i0(h,v):new FormData(h),_c(s,{pending:!0,data:C,method:h.method,action:p},p,C))},currentTarget:h}]})}}for(var th=0;th<Bu.length;th++){var eh=Bu[th],r_=eh.toLowerCase(),o_=eh[0].toUpperCase()+eh.slice(1);xi(r_,"on"+o_)}xi(Dd,"onAnimationEnd"),xi(Rd,"onAnimationIteration"),xi(Nd,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(M1,"onTransitionRun"),xi(w1,"onTransitionStart"),xi(C1,"onTransitionCancel"),xi(Bd,"onTransitionEnd"),Ga("onMouseEnter",["mouseout","mouseover"]),Ga("onMouseLeave",["mouseout","mouseover"]),Ga("onPointerEnter",["pointerout","pointerover"]),Ga("onPointerLeave",["pointerout","pointerover"]),ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function n0(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],h=r.event;r=r.listeners;t:{var p=void 0;if(i)for(var v=r.length-1;0<=v;v--){var b=r[v],C=b.instance,U=b.currentTarget;if(b=b.listener,C!==p&&h.isPropagationStopped())break t;p=b,h.currentTarget=U;try{p(h)}catch(L){Sr(L)}h.currentTarget=null,p=C}else for(v=0;v<r.length;v++){if(b=r[v],C=b.instance,U=b.currentTarget,b=b.listener,C!==p&&h.isPropagationStopped())break t;p=b,h.currentTarget=U;try{p(h)}catch(L){Sr(L)}h.currentTarget=null,p=C}}}}function ct(t,i){var s=i[pu];s===void 0&&(s=i[pu]=new Set);var r=t+"__bubble";s.has(r)||(a0(i,t,2,!1),s.add(r))}function ih(t,i,s){var r=0;i&&(r|=4),a0(s,t,r,i)}var lo="_reactListening"+Math.random().toString(36).slice(2);function nh(t){if(!t[lo]){t[lo]=!0,Ff.forEach(function(s){s!=="selectionchange"&&(u_.has(s)||ih(s,!1,t),ih(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[lo]||(i[lo]=!0,ih("selectionchange",!1,i))}}function a0(t,i,s,r){switch(D0(i)){case 2:var h=k_;break;case 8:h=L_;break;default:h=vh}s=h.bind(null,i,s,t),h=void 0,!Tu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),r?h!==void 0?t.addEventListener(i,s,{capture:!0,passive:h}):t.addEventListener(i,s,!0):h!==void 0?t.addEventListener(i,s,{passive:h}):t.addEventListener(i,s,!1)}function ah(t,i,s,r,h){var p=r;if((i&1)===0&&(i&2)===0&&r!==null)t:for(;;){if(r===null)return;var v=r.tag;if(v===3||v===4){var b=r.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=r.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=ka(b),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){r=p=v;continue t}b=b.parentNode}}r=r.return}ud(function(){var U=p,L=xu(s),X=[];t:{var D=kd.get(t);if(D!==void 0){var k=yr,W=t;switch(t){case"keypress":if(gr(s)===0)break t;case"keydown":case"keyup":k=i1;break;case"focusin":W="focus",k=Au;break;case"focusout":W="blur",k=Au;break;case"beforeblur":case"afterblur":k=Au;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=s1;break;case Dd:case Rd:case Nd:k=Qv;break;case Bd:k=r1;break;case"scroll":case"scrollend":k=Yv;break;case"wheel":k=u1;break;case"copy":case"cut":case"paste":k=Wv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=pd;break;case"toggle":case"beforetoggle":k=h1}var tt=(i&4)!==0,zt=!tt&&(t==="scroll"||t==="scrollend"),O=tt?D!==null?D+"Capture":null:D;tt=[];for(var A=U,z;A!==null;){var q=A;if(z=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||z===null||O===null||(q=Xs(A,O),q!=null&&tt.push(bl(A,q,z))),zt)break;A=A.return}0<tt.length&&(D=new k(D,W,null,s,L),X.push({event:D,listeners:tt}))}}if((i&7)===0){t:{if(D=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",D&&s!==Su&&(W=s.relatedTarget||s.fromElement)&&(ka(W)||W[Ba]))break t;if((k||D)&&(D=L.window===L?L:(D=L.ownerDocument)?D.defaultView||D.parentWindow:window,k?(W=s.relatedTarget||s.toElement,k=U,W=W?ka(W):null,W!==null&&(zt=o(W),tt=W.tag,W!==zt||tt!==5&&tt!==27&&tt!==6)&&(W=null)):(k=null,W=U),k!==W)){if(tt=fd,q="onMouseLeave",O="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(tt=pd,q="onPointerLeave",O="onPointerEnter",A="pointer"),zt=k==null?D:Ys(k),z=W==null?D:Ys(W),D=new tt(q,A+"leave",k,s,L),D.target=zt,D.relatedTarget=z,q=null,ka(L)===U&&(tt=new tt(O,A+"enter",W,s,L),tt.target=z,tt.relatedTarget=zt,q=tt),zt=q,k&&W)e:{for(tt=c_,O=k,A=W,z=0,q=O;q;q=tt(q))z++;q=0;for(var $=A;$;$=tt($))q++;for(;0<z-q;)O=tt(O),z--;for(;0<q-z;)A=tt(A),q--;for(;z--;){if(O===A||A!==null&&O===A.alternate){tt=O;break e}O=tt(O),A=tt(A)}tt=null}else tt=null;k!==null&&s0(X,D,k,tt,!1),W!==null&&zt!==null&&s0(X,zt,W,tt,!0)}}t:{if(D=U?Ys(U):window,k=D.nodeName&&D.nodeName.toLowerCase(),k==="select"||k==="input"&&D.type==="file")var St=bd;else if(Sd(D))if(Td)St=x1;else{St=_1;var J=v1}else k=D.nodeName,!k||k.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?U&&_u(U.elementType)&&(St=bd):St=S1;if(St&&(St=St(t,U))){xd(X,St,s,L);break t}J&&J(t,D,U),t==="focusout"&&U&&D.type==="number"&&U.memoizedProps.value!=null&&vu(D,"number",D.value)}switch(J=U?Ys(U):window,t){case"focusin":(Sd(J)||J.contentEditable==="true")&&(Pa=J,Du=U,Fs=null);break;case"focusout":Fs=Du=Pa=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,zd(X,s,L);break;case"selectionchange":if(T1)break;case"keydown":case"keyup":zd(X,s,L)}var lt;if(Ou)t:{switch(t){case"compositionstart":var ft="onCompositionStart";break t;case"compositionend":ft="onCompositionEnd";break t;case"compositionupdate":ft="onCompositionUpdate";break t}ft=void 0}else Va?vd(t,s)&&(ft="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ft="onCompositionStart");ft&&(gd&&s.locale!=="ko"&&(Va||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Va&&(lt=cd()):(dn=L,Mu="value"in dn?dn.value:dn.textContent,Va=!0)),J=ro(U,ft),0<J.length&&(ft=new dd(ft,t,null,s,L),X.push({event:ft,listeners:J}),lt?ft.data=lt:(lt=_d(s),lt!==null&&(ft.data=lt)))),(lt=d1?p1(t,s):g1(t,s))&&(ft=ro(U,"onBeforeInput"),0<ft.length&&(J=new dd("onBeforeInput","beforeinput",null,s,L),X.push({event:J,listeners:ft}),J.data=lt)),l_(X,t,U,s,L)}n0(X,i)})}function bl(t,i,s){return{instance:t,listener:i,currentTarget:s}}function ro(t,i){for(var s=i+"Capture",r=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=Xs(t,s),h!=null&&r.unshift(bl(t,h,p)),h=Xs(t,i),h!=null&&r.push(bl(t,h,p))),t.tag===3)return r;t=t.return}return[]}function c_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function s0(t,i,s,r,h){for(var p=i._reactName,v=[];s!==null&&s!==r;){var b=s,C=b.alternate,U=b.stateNode;if(b=b.tag,C!==null&&C===r)break;b!==5&&b!==26&&b!==27||U===null||(C=U,h?(U=Xs(s,p),U!=null&&v.unshift(bl(s,U,C))):h||(U=Xs(s,p),U!=null&&v.push(bl(s,U,C)))),s=s.return}v.length!==0&&t.push({event:i,listeners:v})}var h_=/\r\n?/g,f_=/\u0000|\uFFFD/g;function l0(t){return(typeof t=="string"?t:""+t).replace(h_,`
`).replace(f_,"")}function r0(t,i){return i=l0(i),l0(t)===i}function Ht(t,i,s,r,h,p){switch(s){case"children":typeof r=="string"?i==="body"||i==="textarea"&&r===""||Ya(t,r):(typeof r=="number"||typeof r=="bigint")&&i!=="body"&&Ya(t,""+r);break;case"className":hr(t,"class",r);break;case"tabIndex":hr(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":hr(t,s,r);break;case"style":rd(t,r,p);break;case"data":if(i!=="object"){hr(t,"data",r);break}case"src":case"href":if(r===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(s);break}r=dr(""+r),t.setAttribute(s,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(i!=="input"&&Ht(t,i,"name",h.name,h,null),Ht(t,i,"formEncType",h.formEncType,h,null),Ht(t,i,"formMethod",h.formMethod,h,null),Ht(t,i,"formTarget",h.formTarget,h,null)):(Ht(t,i,"encType",h.encType,h,null),Ht(t,i,"method",h.method,h,null),Ht(t,i,"target",h.target,h,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(s);break}r=dr(""+r),t.setAttribute(s,r);break;case"onClick":r!=null&&(t.onclick=Li);break;case"onScroll":r!=null&&ct("scroll",t);break;case"onScrollEnd":r!=null&&ct("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(s=r.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}s=dr(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,""+r):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":r===!0?t.setAttribute(s,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,r):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(s,r):t.removeAttribute(s);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(s):t.setAttribute(s,r);break;case"popover":ct("beforetoggle",t),ct("toggle",t),cr(t,"popover",r);break;case"xlinkActuate":ki(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ki(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ki(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ki(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ki(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ki(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ki(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ki(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ki(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":cr(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Gv.get(s)||s,cr(t,s,r))}}function sh(t,i,s,r,h,p){switch(s){case"style":rd(t,r,p);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(s=r.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof r=="string"?Ya(t,r):(typeof r=="number"||typeof r=="bigint")&&Ya(t,""+r);break;case"onScroll":r!=null&&ct("scroll",t);break;case"onScrollEnd":r!=null&&ct("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jf.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),i=s.slice(2,h?s.length-7:void 0),p=t[be]||null,p=p!=null?p[s]:null,typeof p=="function"&&t.removeEventListener(i,p,h),typeof r=="function")){typeof p!="function"&&p!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,r,h);break t}s in t?t[s]=r:r===!0?t.setAttribute(s,""):cr(t,s,r)}}}function me(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",t),ct("load",t);var r=!1,h=!1,p;for(p in s)if(s.hasOwnProperty(p)){var v=s[p];if(v!=null)switch(p){case"src":r=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ht(t,i,p,v,s,null)}}h&&Ht(t,i,"srcSet",s.srcSet,s,null),r&&Ht(t,i,"src",s.src,s,null);return;case"input":ct("invalid",t);var b=p=v=h=null,C=null,U=null;for(r in s)if(s.hasOwnProperty(r)){var L=s[r];if(L!=null)switch(r){case"name":h=L;break;case"type":v=L;break;case"checked":C=L;break;case"defaultChecked":U=L;break;case"value":p=L;break;case"defaultValue":b=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(a(137,i));break;default:Ht(t,i,r,L,s,null)}}nd(t,p,b,C,U,v,h,!1);return;case"select":ct("invalid",t),r=v=p=null;for(h in s)if(s.hasOwnProperty(h)&&(b=s[h],b!=null))switch(h){case"value":p=b;break;case"defaultValue":v=b;break;case"multiple":r=b;default:Ht(t,i,h,b,s,null)}i=p,s=v,t.multiple=!!r,i!=null?qa(t,!!r,i,!1):s!=null&&qa(t,!!r,s,!0);return;case"textarea":ct("invalid",t),p=h=r=null;for(v in s)if(s.hasOwnProperty(v)&&(b=s[v],b!=null))switch(v){case"value":r=b;break;case"defaultValue":h=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:Ht(t,i,v,b,s,null)}sd(t,r,h,p);return;case"option":for(C in s)s.hasOwnProperty(C)&&(r=s[C],r!=null)&&(C==="selected"?t.selected=r&&typeof r!="function"&&typeof r!="symbol":Ht(t,i,C,r,s,null));return;case"dialog":ct("beforetoggle",t),ct("toggle",t),ct("cancel",t),ct("close",t);break;case"iframe":case"object":ct("load",t);break;case"video":case"audio":for(r=0;r<xl.length;r++)ct(xl[r],t);break;case"image":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"embed":case"source":case"link":ct("error",t),ct("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in s)if(s.hasOwnProperty(U)&&(r=s[U],r!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ht(t,i,U,r,s,null)}return;default:if(_u(i)){for(L in s)s.hasOwnProperty(L)&&(r=s[L],r!==void 0&&sh(t,i,L,r,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(r=s[b],r!=null&&Ht(t,i,b,r,s,null))}function d_(t,i,s,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,v=null,b=null,C=null,U=null,L=null;for(k in s){var X=s[k];if(s.hasOwnProperty(k)&&X!=null)switch(k){case"checked":break;case"value":break;case"defaultValue":C=X;default:r.hasOwnProperty(k)||Ht(t,i,k,null,r,X)}}for(var D in r){var k=r[D];if(X=s[D],r.hasOwnProperty(D)&&(k!=null||X!=null))switch(D){case"type":p=k;break;case"name":h=k;break;case"checked":U=k;break;case"defaultChecked":L=k;break;case"value":v=k;break;case"defaultValue":b=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(137,i));break;default:k!==X&&Ht(t,i,D,k,r,X)}}yu(t,v,b,C,U,L,p,h);return;case"select":k=v=b=D=null;for(p in s)if(C=s[p],s.hasOwnProperty(p)&&C!=null)switch(p){case"value":break;case"multiple":k=C;default:r.hasOwnProperty(p)||Ht(t,i,p,null,r,C)}for(h in r)if(p=r[h],C=s[h],r.hasOwnProperty(h)&&(p!=null||C!=null))switch(h){case"value":D=p;break;case"defaultValue":b=p;break;case"multiple":v=p;default:p!==C&&Ht(t,i,h,p,r,C)}i=b,s=v,r=k,D!=null?qa(t,!!s,D,!1):!!r!=!!s&&(i!=null?qa(t,!!s,i,!0):qa(t,!!s,s?[]:"",!1));return;case"textarea":k=D=null;for(b in s)if(h=s[b],s.hasOwnProperty(b)&&h!=null&&!r.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ht(t,i,b,null,r,h)}for(v in r)if(h=r[v],p=s[v],r.hasOwnProperty(v)&&(h!=null||p!=null))switch(v){case"value":D=h;break;case"defaultValue":k=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==p&&Ht(t,i,v,h,r,p)}ad(t,D,k);return;case"option":for(var W in s)D=s[W],s.hasOwnProperty(W)&&D!=null&&!r.hasOwnProperty(W)&&(W==="selected"?t.selected=!1:Ht(t,i,W,null,r,D));for(C in r)D=r[C],k=s[C],r.hasOwnProperty(C)&&D!==k&&(D!=null||k!=null)&&(C==="selected"?t.selected=D&&typeof D!="function"&&typeof D!="symbol":Ht(t,i,C,D,r,k));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in s)D=s[tt],s.hasOwnProperty(tt)&&D!=null&&!r.hasOwnProperty(tt)&&Ht(t,i,tt,null,r,D);for(U in r)if(D=r[U],k=s[U],r.hasOwnProperty(U)&&D!==k&&(D!=null||k!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(a(137,i));break;default:Ht(t,i,U,D,r,k)}return;default:if(_u(i)){for(var zt in s)D=s[zt],s.hasOwnProperty(zt)&&D!==void 0&&!r.hasOwnProperty(zt)&&sh(t,i,zt,void 0,r,D);for(L in r)D=r[L],k=s[L],!r.hasOwnProperty(L)||D===k||D===void 0&&k===void 0||sh(t,i,L,D,r,k);return}}for(var O in s)D=s[O],s.hasOwnProperty(O)&&D!=null&&!r.hasOwnProperty(O)&&Ht(t,i,O,null,r,D);for(X in r)D=r[X],k=s[X],!r.hasOwnProperty(X)||D===k||D==null&&k==null||Ht(t,i,X,D,r,k)}function o0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,s=performance.getEntriesByType("resource"),r=0;r<s.length;r++){var h=s[r],p=h.transferSize,v=h.initiatorType,b=h.duration;if(p&&b&&o0(v)){for(v=0,b=h.responseEnd,r+=1;r<s.length;r++){var C=s[r],U=C.startTime;if(U>b)break;var L=C.transferSize,X=C.initiatorType;L&&o0(X)&&(C=C.responseEnd,v+=L*(C<b?1:(b-U)/(C-U)))}if(--r,i+=8*(p+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var lh=null,rh=null;function oo(t){return t.nodeType===9?t:t.ownerDocument}function u0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c0(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function oh(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var uh=null;function g_(){var t=window.event;return t&&t.type==="popstate"?t===uh?!1:(uh=t,!0):(uh=null,!1)}var h0=typeof setTimeout=="function"?setTimeout:void 0,m_=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,y_=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(t){return f0.resolve(null).then(t).catch(v_)}:h0;function v_(t){setTimeout(function(){throw t})}function Hn(t){return t==="head"}function d0(t,i){var s=i,r=0;do{var h=s.nextSibling;if(t.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"||s==="/&"){if(r===0){t.removeChild(h),_s(i);return}r--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")r++;else if(s==="html")Tl(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Tl(s);for(var p=s.firstChild;p;){var v=p.nextSibling,b=p.nodeName;p[qs]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&p.rel.toLowerCase()==="stylesheet"||s.removeChild(p),p=v}}else s==="body"&&Tl(t.ownerDocument.body);s=h}while(s);_s(i)}function p0(t,i){var s=t;t=0;do{var r=s.nextSibling;if(s.nodeType===1?i?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(i?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=r}while(s)}function ch(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ch(s),gu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function __(t,i,s,r){for(;t.nodeType===1;){var h=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[qs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=oi(t.nextSibling),t===null)break}return null}function S_(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=oi(t.nextSibling),t===null))return null;return t}function g0(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=oi(t.nextSibling),t===null))return null;return t}function hh(t){return t.data==="$?"||t.data==="$~"}function fh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function x_(t,i){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||s.readyState!=="loading")i();else{var r=function(){i(),s.removeEventListener("DOMContentLoaded",r)};s.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function oi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var dh=null;function m0(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(i===0)return oi(t.nextSibling);i--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||i++}t=t.nextSibling}return null}function y0(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(i===0)return t;i--}else s!=="/$"&&s!=="/&"||i++}t=t.previousSibling}return null}function v0(t,i,s){switch(i=oo(s),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Tl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);gu(t)}var ui=new Map,_0=new Set;function uo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var tn=P.d;P.d={f:b_,r:T_,D:M_,C:w_,L:C_,m:A_,X:O_,S:E_,M:H_};function b_(){var t=tn.f(),i=to();return t||i}function T_(t){var i=La(t);i!==null&&i.tag===5&&i.type==="form"?Bp(i):tn.r(t)}var ms=typeof document>"u"?null:document;function S0(t,i,s){var r=ms;if(r&&typeof i=="string"&&i){var h=ei(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),_0.has(h)||(_0.add(h),t={rel:t,crossOrigin:s,href:i},r.querySelector(h)===null&&(i=r.createElement("link"),me(i,"link",t),re(i),r.head.appendChild(i)))}}function M_(t){tn.D(t),S0("dns-prefetch",t,null)}function w_(t,i){tn.C(t,i),S0("preconnect",t,i)}function C_(t,i,s){tn.L(t,i,s);var r=ms;if(r&&t&&i){var h='link[rel="preload"][as="'+ei(i)+'"]';i==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+ei(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+ei(s.imageSizes)+'"]')):h+='[href="'+ei(t)+'"]';var p=h;switch(i){case"style":p=ys(t);break;case"script":p=vs(t)}ui.has(p)||(t=y({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),ui.set(p,t),r.querySelector(h)!==null||i==="style"&&r.querySelector(Ml(p))||i==="script"&&r.querySelector(wl(p))||(i=r.createElement("link"),me(i,"link",t),re(i),r.head.appendChild(i)))}}function A_(t,i){tn.m(t,i);var s=ms;if(s&&t){var r=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ei(r)+'"][href="'+ei(t)+'"]',p=h;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=vs(t)}if(!ui.has(p)&&(t=y({rel:"modulepreload",href:t},i),ui.set(p,t),s.querySelector(h)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(wl(p)))return}r=s.createElement("link"),me(r,"link",t),re(r),s.head.appendChild(r)}}}function E_(t,i,s){tn.S(t,i,s);var r=ms;if(r&&t){var h=Ia(r).hoistableStyles,p=ys(t);i=i||"default";var v=h.get(p);if(!v){var b={loading:0,preload:null};if(v=r.querySelector(Ml(p)))b.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":i},s),(s=ui.get(p))&&ph(t,s);var C=v=r.createElement("link");re(C),me(C,"link",t),C._p=new Promise(function(U,L){C.onload=U,C.onerror=L}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,co(v,i,r)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(p,v)}}}function O_(t,i){tn.X(t,i);var s=ms;if(s&&t){var r=Ia(s).hoistableScripts,h=vs(t),p=r.get(h);p||(p=s.querySelector(wl(h)),p||(t=y({src:t,async:!0},i),(i=ui.get(h))&&gh(t,i),p=s.createElement("script"),re(p),me(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(h,p))}}function H_(t,i){tn.M(t,i);var s=ms;if(s&&t){var r=Ia(s).hoistableScripts,h=vs(t),p=r.get(h);p||(p=s.querySelector(wl(h)),p||(t=y({src:t,async:!0,type:"module"},i),(i=ui.get(h))&&gh(t,i),p=s.createElement("script"),re(p),me(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(h,p))}}function x0(t,i,s,r){var h=(h=Ai.current)?uo(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=ys(s.href),s=Ia(h).hoistableStyles,r=s.get(i),r||(r={type:"style",instance:null,count:0,state:null},s.set(i,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=ys(s.href);var p=Ia(h).hoistableStyles,v=p.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,v),(p=h.querySelector(Ml(t)))&&!p._p&&(v.instance=p,v.state.loading=5),ui.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ui.set(t,s),p||z_(h,t,s,v.state))),i&&r===null)throw Error(a(528,""));return v}if(i&&r!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vs(s),s=Ia(h).hoistableScripts,r=s.get(i),r||(r={type:"script",instance:null,count:0,state:null},s.set(i,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ys(t){return'href="'+ei(t)+'"'}function Ml(t){return'link[rel="stylesheet"]['+t+"]"}function b0(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function z_(t,i,s,r){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?r.loading=1:(i=t.createElement("link"),r.preload=i,i.addEventListener("load",function(){return r.loading|=1}),i.addEventListener("error",function(){return r.loading|=2}),me(i,"link",s),re(i),t.head.appendChild(i))}function vs(t){return'[src="'+ei(t)+'"]'}function wl(t){return"script[async]"+t}function T0(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var r=t.querySelector('style[data-href~="'+ei(s.href)+'"]');if(r)return i.instance=r,re(r),r;var h=y({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),re(r),me(r,"style",h),co(r,s.precedence,t),i.instance=r;case"stylesheet":h=ys(s.href);var p=t.querySelector(Ml(h));if(p)return i.state.loading|=4,i.instance=p,re(p),p;r=b0(s),(h=ui.get(h))&&ph(r,h),p=(t.ownerDocument||t).createElement("link"),re(p);var v=p;return v._p=new Promise(function(b,C){v.onload=b,v.onerror=C}),me(p,"link",r),i.state.loading|=4,co(p,s.precedence,t),i.instance=p;case"script":return p=vs(s.src),(h=t.querySelector(wl(p)))?(i.instance=h,re(h),h):(r=s,(h=ui.get(p))&&(r=y({},s),gh(r,h)),t=t.ownerDocument||t,h=t.createElement("script"),re(h),me(h,"link",r),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(r=i.instance,i.state.loading|=4,co(r,s.precedence,t));return i.instance}function co(t,i,s){for(var r=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=r.length?r[r.length-1]:null,p=h,v=0;v<r.length;v++){var b=r[v];if(b.dataset.precedence===i)p=b;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function ph(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function gh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var ho=null;function M0(t,i,s){if(ho===null){var r=new Map,h=ho=new Map;h.set(s,r)}else h=ho,r=h.get(s),r||(r=new Map,h.set(s,r));if(r.has(t))return r;for(r.set(t,null),s=s.getElementsByTagName(t),h=0;h<s.length;h++){var p=s[h];if(!(p[qs]||p[fe]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(i)||"";v=t+v;var b=r.get(v);b?b.push(p):r.set(v,[p])}}return r}function w0(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function U_(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function C0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function D_(t,i,s,r){if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=ys(r.href),p=i.querySelector(Ml(h));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=fo.bind(t),i.then(t,t)),s.state.loading|=4,s.instance=p,re(p);return}p=i.ownerDocument||i,r=b0(r),(h=ui.get(h))&&ph(r,h),p=p.createElement("link"),re(p);var v=p;v._p=new Promise(function(b,C){v.onload=b,v.onerror=C}),me(p,"link",r),s.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=fo.bind(t),i.addEventListener("load",s),i.addEventListener("error",s))}}var mh=0;function R_(t,i){return t.stylesheets&&t.count===0&&go(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var r=setTimeout(function(){if(t.stylesheets&&go(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+i);0<t.imgBytes&&mh===0&&(mh=62500*p_());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&go(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>mh?50:800)+i);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(h)}}:null}function fo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)go(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var po=null;function go(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,po=new Map,i.forEach(N_,t),po=null,fo.call(t))}function N_(t,i){if(!(i.state.loading&4)){var s=po.get(t);if(s)var r=s.get(null);else{s=new Map,po.set(t,s);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var v=h[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(s.set(v.dataset.precedence,v),r=v)}r&&s.set(null,r)}h=i.instance,v=h.getAttribute("data-precedence"),p=s.get(v)||r,p===r&&s.set(null,h),s.set(v,h),this.count++,r=fo.bind(this),h.addEventListener("load",r),h.addEventListener("error",r),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Cl={$$typeof:H,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function B_(t,i,s,r,h,p,v,b,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.hiddenUpdates=hu(null),this.identifierPrefix=r,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function A0(t,i,s,r,h,p,v,b,C,U,L,X){return t=new B_(t,i,s,v,C,U,L,X,b),i=1,p===!0&&(i|=24),p=Le(3,null,null,i),t.current=p,p.stateNode=t,i=Wu(),i.refCount++,t.pooledCache=i,i.refCount++,p.memoizedState={element:r,isDehydrated:s,cache:i},$u(p),t}function E0(t){return t?(t=Wa,t):Wa}function O0(t,i,s,r,h,p){h=E0(h),r.context===null?r.context=h:r.pendingContext=h,r=_n(i),r.payload={element:s},p=p===void 0?null:p,p!==null&&(r.callback=p),s=Sn(t,r,i),s!==null&&(Ee(s,t,i),al(s,t,i))}function H0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function yh(t,i){H0(t,i),(t=t.alternate)&&H0(t,i)}function z0(t){if(t.tag===13||t.tag===31){var i=sa(t,67108864);i!==null&&Ee(i,t,67108864),yh(t,67108864)}}function U0(t){if(t.tag===13||t.tag===31){var i=Xe();i=fu(i);var s=sa(t,i);s!==null&&Ee(s,t,i),yh(t,i)}}var mo=!0;function k_(t,i,s,r){var h=R.T;R.T=null;var p=P.p;try{P.p=2,vh(t,i,s,r)}finally{P.p=p,R.T=h}}function L_(t,i,s,r){var h=R.T;R.T=null;var p=P.p;try{P.p=8,vh(t,i,s,r)}finally{P.p=p,R.T=h}}function vh(t,i,s,r){if(mo){var h=_h(r);if(h===null)ah(t,i,r,yo,s),R0(t,r);else if(G_(h,t,i,s,r))r.stopPropagation();else if(R0(t,r),i&4&&-1<I_.indexOf(t)){for(;h!==null;){var p=La(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=ta(p.pendingLanes);if(v!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var C=1<<31-Be(v);b.entanglements[1]|=C,v&=~C}zi(p),(Tt&6)===0&&(Jr=Re()+500,Sl(0))}}break;case 31:case 13:b=sa(p,2),b!==null&&Ee(b,p,2),to(),yh(p,2)}if(p=_h(r),p===null&&ah(t,i,r,yo,s),p===h)break;h=p}h!==null&&r.stopPropagation()}else ah(t,i,r,null,s)}}function _h(t){return t=xu(t),Sh(t)}var yo=null;function Sh(t){if(yo=null,t=ka(t),t!==null){var i=o(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=u(i),t!==null)return t;t=null}else if(s===31){if(t=c(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return yo=t,null}function D0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mv()){case qf:return 2;case Yf:return 8;case sr:case wv:return 32;case Xf:return 268435456;default:return 32}default:return 32}}var xh=!1,zn=null,Un=null,Dn=null,Al=new Map,El=new Map,Rn=[],I_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R0(t,i){switch(t){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Al.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(i.pointerId)}}function Ol(t,i,s,r,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:s,eventSystemFlags:r,nativeEvent:p,targetContainers:[h]},i!==null&&(i=La(i),i!==null&&z0(i)),t):(t.eventSystemFlags|=r,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function G_(t,i,s,r,h){switch(i){case"focusin":return zn=Ol(zn,t,i,s,r,h),!0;case"dragenter":return Un=Ol(Un,t,i,s,r,h),!0;case"mouseover":return Dn=Ol(Dn,t,i,s,r,h),!0;case"pointerover":var p=h.pointerId;return Al.set(p,Ol(Al.get(p)||null,t,i,s,r,h)),!0;case"gotpointercapture":return p=h.pointerId,El.set(p,Ol(El.get(p)||null,t,i,s,r,h)),!0}return!1}function N0(t){var i=ka(t.target);if(i!==null){var s=o(i);if(s!==null){if(i=s.tag,i===13){if(i=u(s),i!==null){t.blockedOn=i,Wf(t.priority,function(){U0(s)});return}}else if(i===31){if(i=c(s),i!==null){t.blockedOn=i,Wf(t.priority,function(){U0(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vo(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=_h(t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);Su=r,s.target.dispatchEvent(r),Su=null}else return i=La(s),i!==null&&z0(i),t.blockedOn=s,!1;i.shift()}return!0}function B0(t,i,s){vo(t)&&s.delete(i)}function q_(){xh=!1,zn!==null&&vo(zn)&&(zn=null),Un!==null&&vo(Un)&&(Un=null),Dn!==null&&vo(Dn)&&(Dn=null),Al.forEach(B0),El.forEach(B0)}function _o(t,i){t.blockedOn===i&&(t.blockedOn=null,xh||(xh=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,q_)))}var So=null;function k0(t){So!==t&&(So=t,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){So===t&&(So=null);for(var i=0;i<t.length;i+=3){var s=t[i],r=t[i+1],h=t[i+2];if(typeof r!="function"){if(Sh(r||s)===null)continue;break}var p=La(s);p!==null&&(t.splice(i,3),i-=3,_c(p,{pending:!0,data:h,method:s.method,action:r},r,h))}}))}function _s(t){function i(C){return _o(C,t)}zn!==null&&_o(zn,t),Un!==null&&_o(Un,t),Dn!==null&&_o(Dn,t),Al.forEach(i),El.forEach(i);for(var s=0;s<Rn.length;s++){var r=Rn[s];r.blockedOn===t&&(r.blockedOn=null)}for(;0<Rn.length&&(s=Rn[0],s.blockedOn===null);)N0(s),s.blockedOn===null&&Rn.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(r=0;r<s.length;r+=3){var h=s[r],p=s[r+1],v=h[be]||null;if(typeof p=="function")v||k0(s);else if(v){var b=null;if(p&&p.hasAttribute("formAction")){if(h=p,v=p[be]||null)b=v.formAction;else if(Sh(h)!==null)continue}else b=v.action;typeof b=="function"?s[r+1]=b:(s.splice(r,3),r-=3),k0(s)}}}function L0(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),r||setTimeout(s,20)}function s(){if(!r&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(s,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function bh(t){this._internalRoot=t}xo.prototype.render=bh.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,r=Xe();O0(s,r,t,i,null,null)},xo.prototype.unmount=bh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;O0(t.current,2,null,t,null,null),to(),i[Ba]=null}};function xo(t){this._internalRoot=t}xo.prototype.unstable_scheduleHydration=function(t){if(t){var i=Zf();t={blockedOn:null,target:t,priority:i};for(var s=0;s<Rn.length&&i!==0&&i<Rn[s].priority;s++);Rn.splice(s,0,t),s===0&&N0(t)}};var I0=e.version;if(I0!=="19.2.3")throw Error(a(527,I0,"19.2.3"));P.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(i),t=t!==null?m(t):null,t=t===null?null:t.stateNode,t};var Y_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{Ls=bo.inject(Y_),Ne=bo}catch{}}return zl.createRoot=function(t,i){if(!l(t))throw Error(a(299));var s=!1,r="",h=Pp,p=Qp,v=Zp;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=A0(t,1,!1,null,null,s,r,null,h,p,v,L0),t[Ba]=i.current,nh(t),new bh(i)},zl.hydrateRoot=function(t,i,s){if(!l(t))throw Error(a(299));var r=!1,h="",p=Pp,v=Qp,b=Zp,C=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(C=s.formState)),i=A0(t,1,!0,i,s??null,r,h,C,p,v,b,L0),i.context=E0(null),s=i.current,r=Xe(),r=fu(r),h=_n(r),h.callback=null,Sn(s,h,r),s=r,i.current.lanes=s,Gs(i,s),zi(i),t[Ba]=i.current,nh(t),new xo(i)},zl.version="19.2.3",zl}var V0;function lS(){if(V0)return Mh.exports;V0=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(e){console.error(e)}}return d(),Mh.exports=sS(),Mh.exports}var rS=lS();const oS=qm(rS);function en(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function Vm(d,e){d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.__proto__=e}var Fe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Us={duration:.5,overwrite:!1,delay:0},pf,ye,qt,yi=1e8,Nt=1/yi,qh=Math.PI*2,uS=qh/4,cS=0,Pm=Math.sqrt,hS=Math.cos,fS=Math.sin,ce=function(e){return typeof e=="string"},Wt=function(e){return typeof e=="function"},on=function(e){return typeof e=="number"},gf=function(e){return typeof e>"u"},Bi=function(e){return typeof e=="object"},Oe=function(e){return e!==!1},mf=function(){return typeof window<"u"},To=function(e){return Wt(e)||ce(e)},Qm=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_e=Array.isArray,dS=/random\([^)]+\)/g,pS=/,\s*/g,P0=/(?:-?\.?\d|\.)+/gi,Zm=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ms=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ah=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Wm=/[+-]=-?[.\d]+/,gS=/[^,'"\[\]\s]+/gi,mS=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vt,Ui,Yh,yf,Je={},Ro={},Km,Fm=function(e){return(Ro=Ds(e,Je))&&De},vf=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},Ql=function(e,n){return!n&&console.warn(e)},Jm=function(e,n){return e&&(Je[e]=n)&&Ro&&(Ro[e]=n)||Je},Zl=function(){return 0},yS={suppressEvents:!0,isStart:!0,kill:!1},Oo={suppressEvents:!0,kill:!1},vS={suppressEvents:!0},_f={},Pn=[],Xh={},$m,Pe={},Eh={},Q0=30,Ho=[],Sf="",xf=function(e){var n=e[0],a,l;if(Bi(n)||Wt(n)||(e=[e]),!(a=(n._gsap||{}).harness)){for(l=Ho.length;l--&&!Ho[l].targetTest(n););a=Ho[l]}for(l=e.length;l--;)e[l]&&(e[l]._gsap||(e[l]._gsap=new Ty(e[l],a)))||e.splice(l,1);return e},Ca=function(e){return e._gsap||xf(vi(e))[0]._gsap},ty=function(e,n,a){return(a=e[n])&&Wt(a)?e[n]():gf(a)&&e.getAttribute&&e.getAttribute(n)||a},He=function(e,n){return(e=e.split(",")).forEach(n)||e},Jt=function(e){return Math.round(e*1e5)/1e5||0},jt=function(e){return Math.round(e*1e7)/1e7||0},Es=function(e,n){var a=n.charAt(0),l=parseFloat(n.substr(2));return e=parseFloat(e),a==="+"?e+l:a==="-"?e-l:a==="*"?e*l:e/l},_S=function(e,n){for(var a=n.length,l=0;e.indexOf(n[l])<0&&++l<a;);return l<a},No=function(){var e=Pn.length,n=Pn.slice(0),a,l;for(Xh={},Pn.length=0,a=0;a<e;a++)l=n[a],l&&l._lazy&&(l.render(l._lazy[0],l._lazy[1],!0)._lazy=0)},bf=function(e){return!!(e._initted||e._startAt||e.add)},ey=function(e,n,a,l){Pn.length&&!ye&&No(),e.render(n,a,!!(ye&&n<0&&bf(e))),Pn.length&&!ye&&No()},iy=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(gS).length<2?n:ce(e)?e.trim():e},ny=function(e){return e},$e=function(e,n){for(var a in n)a in e||(e[a]=n[a]);return e},SS=function(e){return function(n,a){for(var l in a)l in n||l==="duration"&&e||l==="ease"||(n[l]=a[l])}},Ds=function(e,n){for(var a in n)e[a]=n[a];return e},Z0=function d(e,n){for(var a in n)a!=="__proto__"&&a!=="constructor"&&a!=="prototype"&&(e[a]=Bi(n[a])?d(e[a]||(e[a]={}),n[a]):n[a]);return e},Bo=function(e,n){var a={},l;for(l in e)l in n||(a[l]=e[l]);return a},ql=function(e){var n=e.parent||Vt,a=e.keyframes?SS(_e(e.keyframes)):$e;if(Oe(e.inherit))for(;n;)a(e,n.vars.defaults),n=n.parent||n._dp;return e},xS=function(e,n){for(var a=e.length,l=a===n.length;l&&a--&&e[a]===n[a];);return a<0},ay=function(e,n,a,l,o){var u=e[l],c;if(o)for(c=n[o];u&&u[o]>c;)u=u._prev;return u?(n._next=u._next,u._next=n):(n._next=e[a],e[a]=n),n._next?n._next._prev=n:e[l]=n,n._prev=u,n.parent=n._dp=e,n},Ko=function(e,n,a,l){a===void 0&&(a="_first"),l===void 0&&(l="_last");var o=n._prev,u=n._next;o?o._next=u:e[a]===n&&(e[a]=u),u?u._prev=o:e[l]===n&&(e[l]=o),n._next=n._prev=n.parent=null},Zn=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Aa=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var a=e;a;)a._dirty=1,a=a.parent;return e},bS=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},jh=function(e,n,a,l){return e._startAt&&(ye?e._startAt.revert(Oo):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,l))},TS=function d(e){return!e||e._ts&&d(e.parent)},W0=function(e){return e._repeat?Rs(e._tTime,e=e.duration()+e._rDelay)*e:0},Rs=function(e,n){var a=Math.floor(e=jt(e/n));return e&&a===e?a-1:a},ko=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Fo=function(e){return e._end=jt(e._start+(e._tDur/Math.abs(e._ts||e._rts||Nt)||0))},Jo=function(e,n){var a=e._dp;return a&&a.smoothChildTiming&&e._ts&&(e._start=jt(a._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),Fo(e),a._dirty||Aa(a,e)),e},sy=function(e,n){var a;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(a=ko(e.rawTime(),n),(!n._dur||nr(0,n.totalDuration(),a)-n._tTime>Nt)&&n.render(a,!0)),Aa(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(a=e;a._dp;)a.rawTime()>=0&&a.totalTime(a._tTime),a=a._dp;e._zTime=-Nt}},Ri=function(e,n,a,l){return n.parent&&Zn(n),n._start=jt((on(a)?a:a||e!==Vt?ci(e,a,n):e._time)+n._delay),n._end=jt(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),ay(e,n,"_first","_last",e._sort?"_start":0),Vh(n)||(e._recent=n),l||sy(e,n),e._ts<0&&Jo(e,e._tTime),e},ly=function(e,n){return(Je.ScrollTrigger||vf("scrollTrigger",n))&&Je.ScrollTrigger.create(n,e)},ry=function(e,n,a,l,o){if(Mf(e,n,o),!e._initted)return 1;if(!a&&e._pt&&!ye&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&$m!==Qe.frame)return Pn.push(e),e._lazy=[o,l],1},MS=function d(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||d(n))},Vh=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},wS=function(e,n,a,l){var o=e.ratio,u=n<0||!n&&(!e._start&&MS(e)&&!(!e._initted&&Vh(e))||(e._ts<0||e._dp._ts<0)&&!Vh(e))?0:1,c=e._rDelay,f=0,g,m,y;if(c&&e._repeat&&(f=nr(0,e._tDur,n),m=Rs(f,c),e._yoyo&&m&1&&(u=1-u),m!==Rs(e._tTime,c)&&(o=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==o||ye||l||e._zTime===Nt||!n&&e._zTime){if(!e._initted&&ry(e,n,l,a,f))return;for(y=e._zTime,e._zTime=n||(a?Nt:0),a||(a=n&&!y),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=f,g=e._pt;g;)g.r(u,g.d),g=g._next;n<0&&jh(e,n,a,!0),e._onUpdate&&!a&&Ze(e,"onUpdate"),f&&e._repeat&&!a&&e.parent&&Ze(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===u&&(u&&Zn(e,1),!a&&!ye&&(Ze(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},CS=function(e,n,a){var l;if(a>n)for(l=e._first;l&&l._start<=a;){if(l.data==="isPause"&&l._start>n)return l;l=l._next}else for(l=e._last;l&&l._start>=a;){if(l.data==="isPause"&&l._start<n)return l;l=l._prev}},Ns=function(e,n,a,l){var o=e._repeat,u=jt(n)||0,c=e._tTime/e._tDur;return c&&!l&&(e._time*=u/e._dur),e._dur=u,e._tDur=o?o<0?1e10:jt(u*(o+1)+e._rDelay*o):u,c>0&&!l&&Jo(e,e._tTime=e._tDur*c),e.parent&&Fo(e),a||Aa(e.parent,e),e},K0=function(e){return e instanceof xe?Aa(e):Ns(e,e._dur)},AS={_start:0,endTime:Zl,totalDuration:Zl},ci=function d(e,n,a){var l=e.labels,o=e._recent||AS,u=e.duration()>=yi?o.endTime(!1):e._dur,c,f,g;return ce(n)&&(isNaN(n)||n in l)?(f=n.charAt(0),g=n.substr(-1)==="%",c=n.indexOf("="),f==="<"||f===">"?(c>=0&&(n=n.replace(/=/,"")),(f==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(n.substr(1))||0)*(g?(c<0?o:a).totalDuration()/100:1)):c<0?(n in l||(l[n]=u),l[n]):(f=parseFloat(n.charAt(c-1)+n.substr(c+1)),g&&a&&(f=f/100*(_e(a)?a[0]:a).totalDuration()),c>1?d(e,n.substr(0,c-1),a)+f:u+f)):n==null?u:+n},Yl=function(e,n,a){var l=on(n[1]),o=(l?2:1)+(e<2?0:1),u=n[o],c,f;if(l&&(u.duration=n[1]),u.parent=a,e){for(c=u,f=a;f&&!("immediateRender"in c);)c=f.vars.defaults||{},f=Oe(f.vars.inherit)&&f.parent;u.immediateRender=Oe(c.immediateRender),e<2?u.runBackwards=1:u.startAt=n[o-1]}return new ne(n[0],u,n[o+1])},Jn=function(e,n){return e||e===0?n(e):n},nr=function(e,n,a){return a<e?e:a>n?n:a},ve=function(e,n){return!ce(e)||!(n=mS.exec(e))?"":n[1]},ES=function(e,n,a){return Jn(a,function(l){return nr(e,n,l)})},Ph=[].slice,oy=function(e,n){return e&&Bi(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&Bi(e[0]))&&!e.nodeType&&e!==Ui},OS=function(e,n,a){return a===void 0&&(a=[]),e.forEach(function(l){var o;return ce(l)&&!n||oy(l,1)?(o=a).push.apply(o,vi(l)):a.push(l)})||a},vi=function(e,n,a){return qt&&!n&&qt.selector?qt.selector(e):ce(e)&&!a&&(Yh||!Bs())?Ph.call((n||yf).querySelectorAll(e),0):_e(e)?OS(e,a):oy(e)?Ph.call(e,0):e?[e]:[]},Qh=function(e){return e=vi(e)[0]||Ql("Invalid scope")||{},function(n){var a=e.current||e.nativeElement||e;return vi(n,a.querySelectorAll?a:a===e?Ql("Invalid scope")||yf.createElement("div"):e)}},uy=function(e){return e.sort(function(){return .5-Math.random()})},cy=function(e){if(Wt(e))return e;var n=Bi(e)?e:{each:e},a=Ea(n.ease),l=n.from||0,o=parseFloat(n.base)||0,u={},c=l>0&&l<1,f=isNaN(l)||c,g=n.axis,m=l,y=l;return ce(l)?m=y={center:.5,edges:.5,end:1}[l]||0:!c&&f&&(m=l[0],y=l[1]),function(_,S,T){var x=(T||n).length,M=u[x],w,E,H,B,N,G,Y,j,I;if(!M){if(I=n.grid==="auto"?0:(n.grid||[1,yi])[1],!I){for(Y=-yi;Y<(Y=T[I++].getBoundingClientRect().left)&&I<x;);I<x&&I--}for(M=u[x]=[],w=f?Math.min(I,x)*m-.5:l%I,E=I===yi?0:f?x*y/I-.5:l/I|0,Y=0,j=yi,G=0;G<x;G++)H=G%I-w,B=E-(G/I|0),M[G]=N=g?Math.abs(g==="y"?B:H):Pm(H*H+B*B),N>Y&&(Y=N),N<j&&(j=N);l==="random"&&uy(M),M.max=Y-j,M.min=j,M.v=x=(parseFloat(n.amount)||parseFloat(n.each)*(I>x?x-1:g?g==="y"?x/I:I:Math.max(I,x/I))||0)*(l==="edges"?-1:1),M.b=x<0?o-x:o,M.u=ve(n.amount||n.each)||0,a=a&&x<0?Sy(a):a}return x=(M[_]-M.min)/M.max||0,jt(M.b+(a?a(x):x)*M.v)+M.u}},Zh=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(a){var l=jt(Math.round(parseFloat(a)/e)*e*n);return(l-l%1)/n+(on(a)?0:ve(a))}},hy=function(e,n){var a=_e(e),l,o;return!a&&Bi(e)&&(l=a=e.radius||yi,e.values?(e=vi(e.values),(o=!on(e[0]))&&(l*=l)):e=Zh(e.increment)),Jn(n,a?Wt(e)?function(u){return o=e(u),Math.abs(o-u)<=l?o:u}:function(u){for(var c=parseFloat(o?u.x:u),f=parseFloat(o?u.y:0),g=yi,m=0,y=e.length,_,S;y--;)o?(_=e[y].x-c,S=e[y].y-f,_=_*_+S*S):_=Math.abs(e[y]-c),_<g&&(g=_,m=y);return m=!l||g<=l?e[m]:u,o||m===u||on(u)?m:m+ve(u)}:Zh(e))},fy=function(e,n,a,l){return Jn(_e(e)?!n:a===!0?!!(a=0):!l,function(){return _e(e)?e[~~(Math.random()*e.length)]:(a=a||1e-5)&&(l=a<1?Math.pow(10,(a+"").length-2):1)&&Math.floor(Math.round((e-a/2+Math.random()*(n-e+a*.99))/a)*a*l)/l})},HS=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return function(l){return n.reduce(function(o,u){return u(o)},l)}},zS=function(e,n){return function(a){return e(parseFloat(a))+(n||ve(a))}},US=function(e,n,a){return py(e,n,0,1,a)},dy=function(e,n,a){return Jn(a,function(l){return e[~~n(l)]})},DS=function d(e,n,a){var l=n-e;return _e(e)?dy(e,d(0,e.length),n):Jn(a,function(o){return(l+(o-e)%l)%l+e})},RS=function d(e,n,a){var l=n-e,o=l*2;return _e(e)?dy(e,d(0,e.length-1),n):Jn(a,function(u){return u=(o+(u-e)%o)%o||0,e+(u>l?o-u:u)})},Wl=function(e){return e.replace(dS,function(n){var a=n.indexOf("[")+1,l=n.substring(a||7,a?n.indexOf("]"):n.length-1).split(pS);return fy(a?l:+l[0],a?0:+l[1],+l[2]||1e-5)})},py=function(e,n,a,l,o){var u=n-e,c=l-a;return Jn(o,function(f){return a+((f-e)/u*c||0)})},NS=function d(e,n,a,l){var o=isNaN(e+n)?0:function(S){return(1-S)*e+S*n};if(!o){var u=ce(e),c={},f,g,m,y,_;if(a===!0&&(l=1)&&(a=null),u)e={p:e},n={p:n};else if(_e(e)&&!_e(n)){for(m=[],y=e.length,_=y-2,g=1;g<y;g++)m.push(d(e[g-1],e[g]));y--,o=function(T){T*=y;var x=Math.min(_,~~T);return m[x](T-x)},a=n}else l||(e=Ds(_e(e)?[]:{},e));if(!m){for(f in n)Tf.call(c,e,f,"get",n[f]);o=function(T){return Af(T,c)||(u?e.p:e)}}}return Jn(a,o)},F0=function(e,n,a){var l=e.labels,o=yi,u,c,f;for(u in l)c=l[u]-n,c<0==!!a&&c&&o>(c=Math.abs(c))&&(f=u,o=c);return f},Ze=function(e,n,a){var l=e.vars,o=l[n],u=qt,c=e._ctx,f,g,m;if(o)return f=l[n+"Params"],g=l.callbackScope||e,a&&Pn.length&&No(),c&&(qt=c),m=f?o.apply(g,f):o.call(g),qt=u,m},kl=function(e){return Zn(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ye),e.progress()<1&&Ze(e,"onInterrupt"),e},ws,gy=[],my=function(e){if(e)if(e=!e.name&&e.default||e,mf()||e.headless){var n=e.name,a=Wt(e),l=n&&!a&&e.init?function(){this._props=[]}:e,o={init:Zl,render:Af,add:Tf,kill:FS,modifier:KS,rawVars:0},u={targetTest:0,get:0,getSetter:Cf,aliases:{},register:0};if(Bs(),e!==l){if(Pe[n])return;$e(l,$e(Bo(e,o),u)),Ds(l.prototype,Ds(o,Bo(e,u))),Pe[l.prop=n]=l,e.targetTest&&(Ho.push(l),_f[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}Jm(n,l),e.register&&e.register(De,l,ze)}else gy.push(e)},Rt=255,Ll={aqua:[0,Rt,Rt],lime:[0,Rt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Rt],navy:[0,0,128],white:[Rt,Rt,Rt],olive:[128,128,0],yellow:[Rt,Rt,0],orange:[Rt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Rt,0,0],pink:[Rt,192,203],cyan:[0,Rt,Rt],transparent:[Rt,Rt,Rt,0]},Oh=function(e,n,a){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(a-n)*e*6:e<.5?a:e*3<2?n+(a-n)*(2/3-e)*6:n)*Rt+.5|0},yy=function(e,n,a){var l=e?on(e)?[e>>16,e>>8&Rt,e&Rt]:0:Ll.black,o,u,c,f,g,m,y,_,S,T;if(!l){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ll[e])l=Ll[e];else if(e.charAt(0)==="#"){if(e.length<6&&(o=e.charAt(1),u=e.charAt(2),c=e.charAt(3),e="#"+o+o+u+u+c+c+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return l=parseInt(e.substr(1,6),16),[l>>16,l>>8&Rt,l&Rt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),l=[e>>16,e>>8&Rt,e&Rt]}else if(e.substr(0,3)==="hsl"){if(l=T=e.match(P0),!n)f=+l[0]%360/360,g=+l[1]/100,m=+l[2]/100,u=m<=.5?m*(g+1):m+g-m*g,o=m*2-u,l.length>3&&(l[3]*=1),l[0]=Oh(f+1/3,o,u),l[1]=Oh(f,o,u),l[2]=Oh(f-1/3,o,u);else if(~e.indexOf("="))return l=e.match(Zm),a&&l.length<4&&(l[3]=1),l}else l=e.match(P0)||Ll.transparent;l=l.map(Number)}return n&&!T&&(o=l[0]/Rt,u=l[1]/Rt,c=l[2]/Rt,y=Math.max(o,u,c),_=Math.min(o,u,c),m=(y+_)/2,y===_?f=g=0:(S=y-_,g=m>.5?S/(2-y-_):S/(y+_),f=y===o?(u-c)/S+(u<c?6:0):y===u?(c-o)/S+2:(o-u)/S+4,f*=60),l[0]=~~(f+.5),l[1]=~~(g*100+.5),l[2]=~~(m*100+.5)),a&&l.length<4&&(l[3]=1),l},vy=function(e){var n=[],a=[],l=-1;return e.split(Qn).forEach(function(o){var u=o.match(Ms)||[];n.push.apply(n,u),a.push(l+=u.length+1)}),n.c=a,n},J0=function(e,n,a){var l="",o=(e+l).match(Qn),u=n?"hsla(":"rgba(",c=0,f,g,m,y;if(!o)return e;if(o=o.map(function(_){return(_=yy(_,n,1))&&u+(n?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),a&&(m=vy(e),f=a.c,f.join(l)!==m.c.join(l)))for(g=e.replace(Qn,"1").split(Ms),y=g.length-1;c<y;c++)l+=g[c]+(~f.indexOf(c)?o.shift()||u+"0,0,0,0)":(m.length?m:o.length?o:a).shift());if(!g)for(g=e.split(Qn),y=g.length-1;c<y;c++)l+=g[c]+o[c];return l+g[y]},Qn=(function(){var d="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ll)d+="|"+e+"\\b";return new RegExp(d+")","gi")})(),BS=/hsl[a]?\(/,_y=function(e){var n=e.join(" "),a;if(Qn.lastIndex=0,Qn.test(n))return a=BS.test(n),e[1]=J0(e[1],a),e[0]=J0(e[0],a,vy(e[1])),!0},Kl,Qe=(function(){var d=Date.now,e=500,n=33,a=d(),l=a,o=1e3/240,u=o,c=[],f,g,m,y,_,S,T=function x(M){var w=d()-l,E=M===!0,H,B,N,G;if((w>e||w<0)&&(a+=w-n),l+=w,N=l-a,H=N-u,(H>0||E)&&(G=++y.frame,_=N-y.time*1e3,y.time=N=N/1e3,u+=H+(H>=o?4:o-H),B=1),E||(f=g(x)),B)for(S=0;S<c.length;S++)c[S](N,_,G,M)};return y={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(M){return _/(1e3/(M||60))},wake:function(){Km&&(!Yh&&mf()&&(Ui=Yh=window,yf=Ui.document||{},Je.gsap=De,(Ui.gsapVersions||(Ui.gsapVersions=[])).push(De.version),Fm(Ro||Ui.GreenSockGlobals||!Ui.gsap&&Ui||{}),gy.forEach(my)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,f&&y.sleep(),g=m||function(M){return setTimeout(M,u-y.time*1e3+1|0)},Kl=1,T(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(f),Kl=0,g=Zl},lagSmoothing:function(M,w){e=M||1/0,n=Math.min(w||33,e)},fps:function(M){o=1e3/(M||240),u=y.time*1e3+o},add:function(M,w,E){var H=w?function(B,N,G,Y){M(B,N,G,Y),y.remove(H)}:M;return y.remove(M),c[E?"unshift":"push"](H),Bs(),H},remove:function(M,w){~(w=c.indexOf(M))&&c.splice(w,1)&&S>=w&&S--},_listeners:c},y})(),Bs=function(){return!Kl&&Qe.wake()},gt={},kS=/^[\d.\-M][\d.\-,\s]/,LS=/["']/g,IS=function(e){for(var n={},a=e.substr(1,e.length-3).split(":"),l=a[0],o=1,u=a.length,c,f,g;o<u;o++)f=a[o],c=o!==u-1?f.lastIndexOf(","):f.length,g=f.substr(0,c),n[l]=isNaN(g)?g.replace(LS,"").trim():+g,l=f.substr(c+1).trim();return n},GS=function(e){var n=e.indexOf("(")+1,a=e.indexOf(")"),l=e.indexOf("(",n);return e.substring(n,~l&&l<a?e.indexOf(")",a+1):a)},qS=function(e){var n=(e+"").split("("),a=gt[n[0]];return a&&n.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[IS(n[1])]:GS(e).split(",").map(iy)):gt._CE&&kS.test(e)?gt._CE("",e):a},Sy=function(e){return function(n){return 1-e(1-n)}},xy=function d(e,n){for(var a=e._first,l;a;)a instanceof xe?d(a,n):a.vars.yoyoEase&&(!a._yoyo||!a._repeat)&&a._yoyo!==n&&(a.timeline?d(a.timeline,n):(l=a._ease,a._ease=a._yEase,a._yEase=l,a._yoyo=n)),a=a._next},Ea=function(e,n){return e&&(Wt(e)?e:gt[e]||qS(e))||n},Da=function(e,n,a,l){a===void 0&&(a=function(f){return 1-n(1-f)}),l===void 0&&(l=function(f){return f<.5?n(f*2)/2:1-n((1-f)*2)/2});var o={easeIn:n,easeOut:a,easeInOut:l},u;return He(e,function(c){gt[c]=Je[c]=o,gt[u=c.toLowerCase()]=a;for(var f in o)gt[u+(f==="easeIn"?".in":f==="easeOut"?".out":".inOut")]=gt[c+"."+f]=o[f]}),o},by=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},Hh=function d(e,n,a){var l=n>=1?n:1,o=(a||(e?.3:.45))/(n<1?n:1),u=o/qh*(Math.asin(1/l)||0),c=function(m){return m===1?1:l*Math.pow(2,-10*m)*fS((m-u)*o)+1},f=e==="out"?c:e==="in"?function(g){return 1-c(1-g)}:by(c);return o=qh/o,f.config=function(g,m){return d(e,g,m)},f},zh=function d(e,n){n===void 0&&(n=1.70158);var a=function(u){return u?--u*u*((n+1)*u+n)+1:0},l=e==="out"?a:e==="in"?function(o){return 1-a(1-o)}:by(a);return l.config=function(o){return d(e,o)},l};He("Linear,Quad,Cubic,Quart,Quint,Strong",function(d,e){var n=e<5?e+1:e;Da(d+",Power"+(n-1),e?function(a){return Math.pow(a,n)}:function(a){return a},function(a){return 1-Math.pow(1-a,n)},function(a){return a<.5?Math.pow(a*2,n)/2:1-Math.pow((1-a)*2,n)/2})});gt.Linear.easeNone=gt.none=gt.Linear.easeIn;Da("Elastic",Hh("in"),Hh("out"),Hh());(function(d,e){var n=1/e,a=2*n,l=2.5*n,o=function(c){return c<n?d*c*c:c<a?d*Math.pow(c-1.5/e,2)+.75:c<l?d*(c-=2.25/e)*c+.9375:d*Math.pow(c-2.625/e,2)+.984375};Da("Bounce",function(u){return 1-o(1-u)},o)})(7.5625,2.75);Da("Expo",function(d){return Math.pow(2,10*(d-1))*d+d*d*d*d*d*d*(1-d)});Da("Circ",function(d){return-(Pm(1-d*d)-1)});Da("Sine",function(d){return d===1?1:-hS(d*uS)+1});Da("Back",zh("in"),zh("out"),zh());gt.SteppedEase=gt.steps=Je.SteppedEase={config:function(e,n){e===void 0&&(e=1);var a=1/e,l=e+(n?0:1),o=n?1:0,u=1-Nt;return function(c){return((l*nr(0,u,c)|0)+o)*a}}};Us.ease=gt["quad.out"];He("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(d){return Sf+=d+","+d+"Params,"});var Ty=function(e,n){this.id=cS++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:ty,this.set=n?n.getSetter:Cf},Fl=(function(){function d(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Ns(this,+n.duration,1,1),this.data=n.data,qt&&(this._ctx=qt,qt.data.push(this)),Kl||Qe.wake()}var e=d.prototype;return e.delay=function(a){return a||a===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+a-this._delay),this._delay=a,this):this._delay},e.duration=function(a){return arguments.length?this.totalDuration(this._repeat>0?a+(a+this._rDelay)*this._repeat:a):this.totalDuration()&&this._dur},e.totalDuration=function(a){return arguments.length?(this._dirty=0,Ns(this,this._repeat<0?a:(a-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(a,l){if(Bs(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(Jo(this,a),!o._dp||o.parent||sy(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&a<this._tDur||this._ts<0&&a>0||!this._tDur&&!a)&&Ri(this._dp,this,this._start-this._delay)}return(this._tTime!==a||!this._dur&&!l||this._initted&&Math.abs(this._zTime)===Nt||!this._initted&&this._dur&&a||!a&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=a),ey(this,a,l)),this},e.time=function(a,l){return arguments.length?this.totalTime(Math.min(this.totalDuration(),a+W0(this))%(this._dur+this._rDelay)||(a?this._dur:0),l):this._time},e.totalProgress=function(a,l){return arguments.length?this.totalTime(this.totalDuration()*a,l):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(a,l){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-a:a)+W0(this),l):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(a,l){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(a-1)*o,l):this._repeat?Rs(this._tTime,o)+1:1},e.timeScale=function(a,l){if(!arguments.length)return this._rts===-Nt?0:this._rts;if(this._rts===a)return this;var o=this.parent&&this._ts?ko(this.parent._time,this):this._tTime;return this._rts=+a||0,this._ts=this._ps||a===-Nt?0:this._rts,this.totalTime(nr(-Math.abs(this._delay),this.totalDuration(),o),l!==!1),Fo(this),bS(this)},e.paused=function(a){return arguments.length?(this._ps!==a&&(this._ps=a,a?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Bs(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Nt&&(this._tTime-=Nt)))),this):this._ps},e.startTime=function(a){if(arguments.length){this._start=jt(a);var l=this.parent||this._dp;return l&&(l._sort||!this.parent)&&Ri(l,this,this._start-this._delay),this}return this._start},e.endTime=function(a){return this._start+(Oe(a)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(a){var l=this.parent||this._dp;return l?a&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ko(l.rawTime(a),this):this._tTime:this._tTime},e.revert=function(a){a===void 0&&(a=vS);var l=ye;return ye=a,bf(this)&&(this.timeline&&this.timeline.revert(a),this.totalTime(-.01,a.suppressEvents)),this.data!=="nested"&&a.kill!==!1&&this.kill(),ye=l,this},e.globalTime=function(a){for(var l=this,o=arguments.length?a:l.rawTime();l;)o=l._start+o/(Math.abs(l._ts)||1),l=l._dp;return!this.parent&&this._sat?this._sat.globalTime(a):o},e.repeat=function(a){return arguments.length?(this._repeat=a===1/0?-2:a,K0(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(a){if(arguments.length){var l=this._time;return this._rDelay=a,K0(this),l?this.time(l):this}return this._rDelay},e.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e.seek=function(a,l){return this.totalTime(ci(this,a),Oe(l))},e.restart=function(a,l){return this.play().totalTime(a?-this._delay:0,Oe(l)),this._dur||(this._zTime=-Nt),this},e.play=function(a,l){return a!=null&&this.seek(a,l),this.reversed(!1).paused(!1)},e.reverse=function(a,l){return a!=null&&this.seek(a||this.totalDuration(),l),this.reversed(!0).paused(!1)},e.pause=function(a,l){return a!=null&&this.seek(a,l),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(a){return arguments.length?(!!a!==this.reversed()&&this.timeScale(-this._rts||(a?-Nt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Nt,this},e.isActive=function(){var a=this.parent||this._dp,l=this._start,o;return!!(!a||this._ts&&this._initted&&a.isActive()&&(o=a.rawTime(!0))>=l&&o<this.endTime(!0)-Nt)},e.eventCallback=function(a,l,o){var u=this.vars;return arguments.length>1?(l?(u[a]=l,o&&(u[a+"Params"]=o),a==="onUpdate"&&(this._onUpdate=l)):delete u[a],this):u[a]},e.then=function(a){var l=this,o=l._prom;return new Promise(function(u){var c=Wt(a)?a:ny,f=function(){var m=l.then;l.then=null,o&&o(),Wt(c)&&(c=c(l))&&(c.then||c===l)&&(l.then=m),u(c),l.then=m};l._initted&&l.totalProgress()===1&&l._ts>=0||!l._tTime&&l._ts<0?f():l._prom=f})},e.kill=function(){kl(this)},d})();$e(Fl.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Nt,_prom:0,_ps:!1,_rts:1});var xe=(function(d){Vm(e,d);function e(a,l){var o;return a===void 0&&(a={}),o=d.call(this,a)||this,o.labels={},o.smoothChildTiming=!!a.smoothChildTiming,o.autoRemoveChildren=!!a.autoRemoveChildren,o._sort=Oe(a.sortChildren),Vt&&Ri(a.parent||Vt,en(o),l),a.reversed&&o.reverse(),a.paused&&o.paused(!0),a.scrollTrigger&&ly(en(o),a.scrollTrigger),o}var n=e.prototype;return n.to=function(l,o,u){return Yl(0,arguments,this),this},n.from=function(l,o,u){return Yl(1,arguments,this),this},n.fromTo=function(l,o,u,c){return Yl(2,arguments,this),this},n.set=function(l,o,u){return o.duration=0,o.parent=this,ql(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new ne(l,o,ci(this,u),1),this},n.call=function(l,o,u){return Ri(this,ne.delayedCall(0,l,o),u)},n.staggerTo=function(l,o,u,c,f,g,m){return u.duration=o,u.stagger=u.stagger||c,u.onComplete=g,u.onCompleteParams=m,u.parent=this,new ne(l,u,ci(this,f)),this},n.staggerFrom=function(l,o,u,c,f,g,m){return u.runBackwards=1,ql(u).immediateRender=Oe(u.immediateRender),this.staggerTo(l,o,u,c,f,g,m)},n.staggerFromTo=function(l,o,u,c,f,g,m,y){return c.startAt=u,ql(c).immediateRender=Oe(c.immediateRender),this.staggerTo(l,o,c,f,g,m,y)},n.render=function(l,o,u){var c=this._time,f=this._dirty?this.totalDuration():this._tDur,g=this._dur,m=l<=0?0:jt(l),y=this._zTime<0!=l<0&&(this._initted||!g),_,S,T,x,M,w,E,H,B,N,G,Y;if(this!==Vt&&m>f&&l>=0&&(m=f),m!==this._tTime||u||y){if(c!==this._time&&g&&(m+=this._time-c,l+=this._time-c),_=m,B=this._start,H=this._ts,w=!H,y&&(g||(c=this._zTime),(l||!o)&&(this._zTime=l)),this._repeat){if(G=this._yoyo,M=g+this._rDelay,this._repeat<-1&&l<0)return this.totalTime(M*100+l,o,u);if(_=jt(m%M),m===f?(x=this._repeat,_=g):(N=jt(m/M),x=~~N,x&&x===N&&(_=g,x--),_>g&&(_=g)),N=Rs(this._tTime,M),!c&&this._tTime&&N!==x&&this._tTime-N*M-this._dur<=0&&(N=x),G&&x&1&&(_=g-_,Y=1),x!==N&&!this._lock){var j=G&&N&1,I=j===(G&&x&1);if(x<N&&(j=!j),c=j?0:m%g?g:m,this._lock=1,this.render(c||(Y?0:jt(x*M)),o,!g)._lock=0,this._tTime=m,!o&&this.parent&&Ze(this,"onRepeat"),this.vars.repeatRefresh&&!Y&&(this.invalidate()._lock=1,N=x),c&&c!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,f=this._tDur,I&&(this._lock=2,c=j?g:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!Y&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;xy(this,Y)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(E=CS(this,jt(c),jt(_)),E&&(m-=_-(_=E._start))),this._tTime=m,this._time=_,this._act=!H,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=l,c=0),!c&&m&&g&&!o&&!N&&(Ze(this,"onStart"),this._tTime!==m))return this;if(_>=c&&l>=0)for(S=this._first;S;){if(T=S._next,(S._act||_>=S._start)&&S._ts&&E!==S){if(S.parent!==this)return this.render(l,o,u);if(S.render(S._ts>0?(_-S._start)*S._ts:(S._dirty?S.totalDuration():S._tDur)+(_-S._start)*S._ts,o,u),_!==this._time||!this._ts&&!w){E=0,T&&(m+=this._zTime=-Nt);break}}S=T}else{S=this._last;for(var F=l<0?l:_;S;){if(T=S._prev,(S._act||F<=S._end)&&S._ts&&E!==S){if(S.parent!==this)return this.render(l,o,u);if(S.render(S._ts>0?(F-S._start)*S._ts:(S._dirty?S.totalDuration():S._tDur)+(F-S._start)*S._ts,o,u||ye&&bf(S)),_!==this._time||!this._ts&&!w){E=0,T&&(m+=this._zTime=F?-Nt:Nt);break}}S=T}}if(E&&!o&&(this.pause(),E.render(_>=c?0:-Nt)._zTime=_>=c?1:-1,this._ts))return this._start=B,Fo(this),this.render(l,o,u);this._onUpdate&&!o&&Ze(this,"onUpdate",!0),(m===f&&this._tTime>=this.totalDuration()||!m&&c)&&(B===this._start||Math.abs(H)!==Math.abs(this._ts))&&(this._lock||((l||!g)&&(m===f&&this._ts>0||!m&&this._ts<0)&&Zn(this,1),!o&&!(l<0&&!c)&&(m||c||!f)&&(Ze(this,m===f&&l>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<f&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(l,o){var u=this;if(on(o)||(o=ci(this,o,l)),!(l instanceof Fl)){if(_e(l))return l.forEach(function(c){return u.add(c,o)}),this;if(ce(l))return this.addLabel(l,o);if(Wt(l))l=ne.delayedCall(0,l);else return this}return this!==l?Ri(this,l,o):this},n.getChildren=function(l,o,u,c){l===void 0&&(l=!0),o===void 0&&(o=!0),u===void 0&&(u=!0),c===void 0&&(c=-yi);for(var f=[],g=this._first;g;)g._start>=c&&(g instanceof ne?o&&f.push(g):(u&&f.push(g),l&&f.push.apply(f,g.getChildren(!0,o,u)))),g=g._next;return f},n.getById=function(l){for(var o=this.getChildren(1,1,1),u=o.length;u--;)if(o[u].vars.id===l)return o[u]},n.remove=function(l){return ce(l)?this.removeLabel(l):Wt(l)?this.killTweensOf(l):(l.parent===this&&Ko(this,l),l===this._recent&&(this._recent=this._last),Aa(this))},n.totalTime=function(l,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=jt(Qe.time-(this._ts>0?l/this._ts:(this.totalDuration()-l)/-this._ts))),d.prototype.totalTime.call(this,l,o),this._forcing=0,this):this._tTime},n.addLabel=function(l,o){return this.labels[l]=ci(this,o),this},n.removeLabel=function(l){return delete this.labels[l],this},n.addPause=function(l,o,u){var c=ne.delayedCall(0,o||Zl,u);return c.data="isPause",this._hasPause=1,Ri(this,c,ci(this,l))},n.removePause=function(l){var o=this._first;for(l=ci(this,l);o;)o._start===l&&o.data==="isPause"&&Zn(o),o=o._next},n.killTweensOf=function(l,o,u){for(var c=this.getTweensOf(l,u),f=c.length;f--;)Ln!==c[f]&&c[f].kill(l,o);return this},n.getTweensOf=function(l,o){for(var u=[],c=vi(l),f=this._first,g=on(o),m;f;)f instanceof ne?_S(f._targets,c)&&(g?(!Ln||f._initted&&f._ts)&&f.globalTime(0)<=o&&f.globalTime(f.totalDuration())>o:!o||f.isActive())&&u.push(f):(m=f.getTweensOf(c,o)).length&&u.push.apply(u,m),f=f._next;return u},n.tweenTo=function(l,o){o=o||{};var u=this,c=ci(u,l),f=o,g=f.startAt,m=f.onStart,y=f.onStartParams,_=f.immediateRender,S,T=ne.to(u,$e({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:o.duration||Math.abs((c-(g&&"time"in g?g.time:u._time))/u.timeScale())||Nt,onStart:function(){if(u.pause(),!S){var M=o.duration||Math.abs((c-(g&&"time"in g?g.time:u._time))/u.timeScale());T._dur!==M&&Ns(T,M,0,1).render(T._time,!0,!0),S=1}m&&m.apply(T,y||[])}},o));return _?T.render(0):T},n.tweenFromTo=function(l,o,u){return this.tweenTo(o,$e({startAt:{time:ci(this,l)}},u))},n.recent=function(){return this._recent},n.nextLabel=function(l){return l===void 0&&(l=this._time),F0(this,ci(this,l))},n.previousLabel=function(l){return l===void 0&&(l=this._time),F0(this,ci(this,l),1)},n.currentLabel=function(l){return arguments.length?this.seek(l,!0):this.previousLabel(this._time+Nt)},n.shiftChildren=function(l,o,u){u===void 0&&(u=0);var c=this._first,f=this.labels,g;for(l=jt(l);c;)c._start>=u&&(c._start+=l,c._end+=l),c=c._next;if(o)for(g in f)f[g]>=u&&(f[g]+=l);return Aa(this)},n.invalidate=function(l){var o=this._first;for(this._lock=0;o;)o.invalidate(l),o=o._next;return d.prototype.invalidate.call(this,l)},n.clear=function(l){l===void 0&&(l=!0);for(var o=this._first,u;o;)u=o._next,this.remove(o),o=u;return this._dp&&(this._time=this._tTime=this._pTime=0),l&&(this.labels={}),Aa(this)},n.totalDuration=function(l){var o=0,u=this,c=u._last,f=yi,g,m,y;if(arguments.length)return u.timeScale((u._repeat<0?u.duration():u.totalDuration())/(u.reversed()?-l:l));if(u._dirty){for(y=u.parent;c;)g=c._prev,c._dirty&&c.totalDuration(),m=c._start,m>f&&u._sort&&c._ts&&!u._lock?(u._lock=1,Ri(u,c,m-c._delay,1)._lock=0):f=m,m<0&&c._ts&&(o-=m,(!y&&!u._dp||y&&y.smoothChildTiming)&&(u._start+=jt(m/u._ts),u._time-=m,u._tTime-=m),u.shiftChildren(-m,!1,-1/0),f=0),c._end>o&&c._ts&&(o=c._end),c=g;Ns(u,u===Vt&&u._time>o?u._time:o,1,1),u._dirty=0}return u._tDur},e.updateRoot=function(l){if(Vt._ts&&(ey(Vt,ko(l,Vt)),$m=Qe.frame),Qe.frame>=Q0){Q0+=Fe.autoSleep||120;var o=Vt._first;if((!o||!o._ts)&&Fe.autoSleep&&Qe._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||Qe.sleep()}}},e})(Fl);$e(xe.prototype,{_lock:0,_hasPause:0,_forcing:0});var YS=function(e,n,a,l,o,u,c){var f=new ze(this._pt,e,n,0,1,Oy,null,o),g=0,m=0,y,_,S,T,x,M,w,E;for(f.b=a,f.e=l,a+="",l+="",(w=~l.indexOf("random("))&&(l=Wl(l)),u&&(E=[a,l],u(E,e,n),a=E[0],l=E[1]),_=a.match(Ah)||[];y=Ah.exec(l);)T=y[0],x=l.substring(g,y.index),S?S=(S+1)%5:x.substr(-5)==="rgba("&&(S=1),T!==_[m++]&&(M=parseFloat(_[m-1])||0,f._pt={_next:f._pt,p:x||m===1?x:",",s:M,c:T.charAt(1)==="="?Es(M,T)-M:parseFloat(T)-M,m:S&&S<4?Math.round:0},g=Ah.lastIndex);return f.c=g<l.length?l.substring(g,l.length):"",f.fp=c,(Wm.test(l)||w)&&(f.e=0),this._pt=f,f},Tf=function(e,n,a,l,o,u,c,f,g,m){Wt(l)&&(l=l(o||0,e,u));var y=e[n],_=a!=="get"?a:Wt(y)?g?e[n.indexOf("set")||!Wt(e["get"+n.substr(3)])?n:"get"+n.substr(3)](g):e[n]():y,S=Wt(y)?g?QS:Ay:wf,T;if(ce(l)&&(~l.indexOf("random(")&&(l=Wl(l)),l.charAt(1)==="="&&(T=Es(_,l)+(ve(_)||0),(T||T===0)&&(l=T))),!m||_!==l||Wh)return!isNaN(_*l)&&l!==""?(T=new ze(this._pt,e,n,+_||0,l-(_||0),typeof y=="boolean"?WS:Ey,0,S),g&&(T.fp=g),c&&T.modifier(c,this,e),this._pt=T):(!y&&!(n in e)&&vf(n,l),YS.call(this,e,n,_,l,S,f||Fe.stringFilter,g))},XS=function(e,n,a,l,o){if(Wt(e)&&(e=Xl(e,o,n,a,l)),!Bi(e)||e.style&&e.nodeType||_e(e)||Qm(e))return ce(e)?Xl(e,o,n,a,l):e;var u={},c;for(c in e)u[c]=Xl(e[c],o,n,a,l);return u},My=function(e,n,a,l,o,u){var c,f,g,m;if(Pe[e]&&(c=new Pe[e]).init(o,c.rawVars?n[e]:XS(n[e],l,o,u,a),a,l,u)!==!1&&(a._pt=f=new ze(a._pt,o,e,0,1,c.render,c,0,c.priority),a!==ws))for(g=a._ptLookup[a._targets.indexOf(o)],m=c._props.length;m--;)g[c._props[m]]=f;return c},Ln,Wh,Mf=function d(e,n,a){var l=e.vars,o=l.ease,u=l.startAt,c=l.immediateRender,f=l.lazy,g=l.onUpdate,m=l.runBackwards,y=l.yoyoEase,_=l.keyframes,S=l.autoRevert,T=e._dur,x=e._startAt,M=e._targets,w=e.parent,E=w&&w.data==="nested"?w.vars.targets:M,H=e._overwrite==="auto"&&!pf,B=e.timeline,N,G,Y,j,I,F,it,et,nt,wt,ot,R,P;if(B&&(!_||!o)&&(o="none"),e._ease=Ea(o,Us.ease),e._yEase=y?Sy(Ea(y===!0?o:y,Us.ease)):0,y&&e._yoyo&&!e._repeat&&(y=e._yEase,e._yEase=e._ease,e._ease=y),e._from=!B&&!!l.runBackwards,!B||_&&!l.stagger){if(et=M[0]?Ca(M[0]).harness:0,R=et&&l[et.prop],N=Bo(l,_f),x&&(x._zTime<0&&x.progress(1),n<0&&m&&c&&!S?x.render(-1,!0):x.revert(m&&T?Oo:yS),x._lazy=0),u){if(Zn(e._startAt=ne.set(M,$e({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!x&&Oe(f),startAt:null,delay:0,onUpdate:g&&function(){return Ze(e,"onUpdate")},stagger:0},u))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ye||!c&&!S)&&e._startAt.revert(Oo),c&&T&&n<=0&&a<=0){n&&(e._zTime=n);return}}else if(m&&T&&!x){if(n&&(c=!1),Y=$e({overwrite:!1,data:"isFromStart",lazy:c&&!x&&Oe(f),immediateRender:c,stagger:0,parent:w},N),R&&(Y[et.prop]=R),Zn(e._startAt=ne.set(M,Y)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ye?e._startAt.revert(Oo):e._startAt.render(-1,!0)),e._zTime=n,!c)d(e._startAt,Nt,Nt);else if(!n)return}for(e._pt=e._ptCache=0,f=T&&Oe(f)||f&&!T,G=0;G<M.length;G++){if(I=M[G],it=I._gsap||xf(M)[G]._gsap,e._ptLookup[G]=wt={},Xh[it.id]&&Pn.length&&No(),ot=E===M?G:E.indexOf(I),et&&(nt=new et).init(I,R||N,e,ot,E)!==!1&&(e._pt=j=new ze(e._pt,I,nt.name,0,1,nt.render,nt,0,nt.priority),nt._props.forEach(function(K){wt[K]=j}),nt.priority&&(F=1)),!et||R)for(Y in N)Pe[Y]&&(nt=My(Y,N,e,ot,I,E))?nt.priority&&(F=1):wt[Y]=j=Tf.call(e,I,Y,"get",N[Y],ot,E,0,l.stringFilter);e._op&&e._op[G]&&e.kill(I,e._op[G]),H&&e._pt&&(Ln=e,Vt.killTweensOf(I,wt,e.globalTime(n)),P=!e.parent,Ln=0),e._pt&&f&&(Xh[it.id]=1)}F&&Hy(e),e._onInit&&e._onInit(e)}e._onUpdate=g,e._initted=(!e._op||e._pt)&&!P,_&&n<=0&&B.render(yi,!0,!0)},jS=function(e,n,a,l,o,u,c,f){var g=(e._pt&&e._ptCache||(e._ptCache={}))[n],m,y,_,S;if(!g)for(g=e._ptCache[n]=[],_=e._ptLookup,S=e._targets.length;S--;){if(m=_[S][n],m&&m.d&&m.d._pt)for(m=m.d._pt;m&&m.p!==n&&m.fp!==n;)m=m._next;if(!m)return Wh=1,e.vars[n]="+=0",Mf(e,c),Wh=0,f?Ql(n+" not eligible for reset"):1;g.push(m)}for(S=g.length;S--;)y=g[S],m=y._pt||y,m.s=(l||l===0)&&!o?l:m.s+(l||0)+u*m.c,m.c=a-m.s,y.e&&(y.e=Jt(a)+ve(y.e)),y.b&&(y.b=m.s+ve(y.b))},VS=function(e,n){var a=e[0]?Ca(e[0]).harness:0,l=a&&a.aliases,o,u,c,f;if(!l)return n;o=Ds({},n);for(u in l)if(u in o)for(f=l[u].split(","),c=f.length;c--;)o[f[c]]=o[u];return o},PS=function(e,n,a,l){var o=n.ease||l||"power1.inOut",u,c;if(_e(n))c=a[e]||(a[e]=[]),n.forEach(function(f,g){return c.push({t:g/(n.length-1)*100,v:f,e:o})});else for(u in n)c=a[u]||(a[u]=[]),u==="ease"||c.push({t:parseFloat(e),v:n[u],e:o})},Xl=function(e,n,a,l,o){return Wt(e)?e.call(n,a,l,o):ce(e)&&~e.indexOf("random(")?Wl(e):e},wy=Sf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Cy={};He(wy+",id,stagger,delay,duration,paused,scrollTrigger",function(d){return Cy[d]=1});var ne=(function(d){Vm(e,d);function e(a,l,o,u){var c;typeof l=="number"&&(o.duration=l,l=o,o=null),c=d.call(this,u?l:ql(l))||this;var f=c.vars,g=f.duration,m=f.delay,y=f.immediateRender,_=f.stagger,S=f.overwrite,T=f.keyframes,x=f.defaults,M=f.scrollTrigger,w=f.yoyoEase,E=l.parent||Vt,H=(_e(a)||Qm(a)?on(a[0]):"length"in l)?[a]:vi(a),B,N,G,Y,j,I,F,it;if(c._targets=H.length?xf(H):Ql("GSAP target "+a+" not found. https://gsap.com",!Fe.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=S,T||_||To(g)||To(m)){if(l=c.vars,B=c.timeline=new xe({data:"nested",defaults:x||{},targets:E&&E.data==="nested"?E.vars.targets:H}),B.kill(),B.parent=B._dp=en(c),B._start=0,_||To(g)||To(m)){if(Y=H.length,F=_&&cy(_),Bi(_))for(j in _)~wy.indexOf(j)&&(it||(it={}),it[j]=_[j]);for(N=0;N<Y;N++)G=Bo(l,Cy),G.stagger=0,w&&(G.yoyoEase=w),it&&Ds(G,it),I=H[N],G.duration=+Xl(g,en(c),N,I,H),G.delay=(+Xl(m,en(c),N,I,H)||0)-c._delay,!_&&Y===1&&G.delay&&(c._delay=m=G.delay,c._start+=m,G.delay=0),B.to(I,G,F?F(N,I,H):0),B._ease=gt.none;B.duration()?g=m=0:c.timeline=0}else if(T){ql($e(B.vars.defaults,{ease:"none"})),B._ease=Ea(T.ease||l.ease||"none");var et=0,nt,wt,ot;if(_e(T))T.forEach(function(R){return B.to(H,R,">")}),B.duration();else{G={};for(j in T)j==="ease"||j==="easeEach"||PS(j,T[j],G,T.easeEach);for(j in G)for(nt=G[j].sort(function(R,P){return R.t-P.t}),et=0,N=0;N<nt.length;N++)wt=nt[N],ot={ease:wt.e,duration:(wt.t-(N?nt[N-1].t:0))/100*g},ot[j]=wt.v,B.to(H,ot,et),et+=ot.duration;B.duration()<g&&B.to({},{duration:g-B.duration()})}}g||c.duration(g=B.duration())}else c.timeline=0;return S===!0&&!pf&&(Ln=en(c),Vt.killTweensOf(H),Ln=0),Ri(E,en(c),o),l.reversed&&c.reverse(),l.paused&&c.paused(!0),(y||!g&&!T&&c._start===jt(E._time)&&Oe(y)&&TS(en(c))&&E.data!=="nested")&&(c._tTime=-Nt,c.render(Math.max(0,-m)||0)),M&&ly(en(c),M),c}var n=e.prototype;return n.render=function(l,o,u){var c=this._time,f=this._tDur,g=this._dur,m=l<0,y=l>f-Nt&&!m?f:l<Nt?0:l,_,S,T,x,M,w,E,H,B;if(!g)wS(this,l,o,u);else if(y!==this._tTime||!l||u||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(_=y,H=this.timeline,this._repeat){if(x=g+this._rDelay,this._repeat<-1&&m)return this.totalTime(x*100+l,o,u);if(_=jt(y%x),y===f?(T=this._repeat,_=g):(M=jt(y/x),T=~~M,T&&T===M?(_=g,T--):_>g&&(_=g)),w=this._yoyo&&T&1,w&&(B=this._yEase,_=g-_),M=Rs(this._tTime,x),_===c&&!u&&this._initted&&T===M)return this._tTime=y,this;T!==M&&(H&&this._yEase&&xy(H,w),this.vars.repeatRefresh&&!w&&!this._lock&&_!==x&&this._initted&&(this._lock=u=1,this.render(jt(x*T),!0).invalidate()._lock=0))}if(!this._initted){if(ry(this,m?l:_,u,o,y))return this._tTime=0,this;if(c!==this._time&&!(u&&this.vars.repeatRefresh&&T!==M))return this;if(g!==this._dur)return this.render(l,o,u)}if(this._tTime=y,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=E=(B||this._ease)(_/g),this._from&&(this.ratio=E=1-E),!c&&y&&!o&&!M&&(Ze(this,"onStart"),this._tTime!==y))return this;for(S=this._pt;S;)S.r(E,S.d),S=S._next;H&&H.render(l<0?l:H._dur*H._ease(_/this._dur),o,u)||this._startAt&&(this._zTime=l),this._onUpdate&&!o&&(m&&jh(this,l,o,u),Ze(this,"onUpdate")),this._repeat&&T!==M&&this.vars.onRepeat&&!o&&this.parent&&Ze(this,"onRepeat"),(y===this._tDur||!y)&&this._tTime===y&&(m&&!this._onUpdate&&jh(this,l,!0,!0),(l||!g)&&(y===this._tDur&&this._ts>0||!y&&this._ts<0)&&Zn(this,1),!o&&!(m&&!c)&&(y||c||w)&&(Ze(this,y===f?"onComplete":"onReverseComplete",!0),this._prom&&!(y<f&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(l){return(!l||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(l),d.prototype.invalidate.call(this,l)},n.resetTo=function(l,o,u,c,f){Kl||Qe.wake(),this._ts||this.play();var g=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||Mf(this,g),m=this._ease(g/this._dur),jS(this,l,o,u,c,m,g,f)?this.resetTo(l,o,u,c,1):(Jo(this,0),this.parent||ay(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(l,o){if(o===void 0&&(o="all"),!l&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?kl(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ye),this;if(this.timeline){var u=this.timeline.totalDuration();return this.timeline.killTweensOf(l,o,Ln&&Ln.vars.overwrite!==!0)._first||kl(this),this.parent&&u!==this.timeline.totalDuration()&&Ns(this,this._dur*this.timeline._tDur/u,0,1),this}var c=this._targets,f=l?vi(l):c,g=this._ptLookup,m=this._pt,y,_,S,T,x,M,w;if((!o||o==="all")&&xS(c,f))return o==="all"&&(this._pt=0),kl(this);for(y=this._op=this._op||[],o!=="all"&&(ce(o)&&(x={},He(o,function(E){return x[E]=1}),o=x),o=VS(c,o)),w=c.length;w--;)if(~f.indexOf(c[w])){_=g[w],o==="all"?(y[w]=o,T=_,S={}):(S=y[w]=y[w]||{},T=o);for(x in T)M=_&&_[x],M&&((!("kill"in M.d)||M.d.kill(x)===!0)&&Ko(this,M,"_pt"),delete _[x]),S!=="all"&&(S[x]=1)}return this._initted&&!this._pt&&m&&kl(this),this},e.to=function(l,o){return new e(l,o,arguments[2])},e.from=function(l,o){return Yl(1,arguments)},e.delayedCall=function(l,o,u,c){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:l,onComplete:o,onReverseComplete:o,onCompleteParams:u,onReverseCompleteParams:u,callbackScope:c})},e.fromTo=function(l,o,u){return Yl(2,arguments)},e.set=function(l,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(l,o)},e.killTweensOf=function(l,o,u){return Vt.killTweensOf(l,o,u)},e})(Fl);$e(ne.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});He("staggerTo,staggerFrom,staggerFromTo",function(d){ne[d]=function(){var e=new xe,n=Ph.call(arguments,0);return n.splice(d==="staggerFromTo"?5:4,0,0),e[d].apply(e,n)}});var wf=function(e,n,a){return e[n]=a},Ay=function(e,n,a){return e[n](a)},QS=function(e,n,a,l){return e[n](l.fp,a)},ZS=function(e,n,a){return e.setAttribute(n,a)},Cf=function(e,n){return Wt(e[n])?Ay:gf(e[n])&&e.setAttribute?ZS:wf},Ey=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},WS=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},Oy=function(e,n){var a=n._pt,l="";if(!e&&n.b)l=n.b;else if(e===1&&n.e)l=n.e;else{for(;a;)l=a.p+(a.m?a.m(a.s+a.c*e):Math.round((a.s+a.c*e)*1e4)/1e4)+l,a=a._next;l+=n.c}n.set(n.t,n.p,l,n)},Af=function(e,n){for(var a=n._pt;a;)a.r(e,a.d),a=a._next},KS=function(e,n,a,l){for(var o=this._pt,u;o;)u=o._next,o.p===l&&o.modifier(e,n,a),o=u},FS=function(e){for(var n=this._pt,a,l;n;)l=n._next,n.p===e&&!n.op||n.op===e?Ko(this,n,"_pt"):n.dep||(a=1),n=l;return!a},JS=function(e,n,a,l){l.mSet(e,n,l.m.call(l.tween,a,l.mt),l)},Hy=function(e){for(var n=e._pt,a,l,o,u;n;){for(a=n._next,l=o;l&&l.pr>n.pr;)l=l._next;(n._prev=l?l._prev:u)?n._prev._next=n:o=n,(n._next=l)?l._prev=n:u=n,n=a}e._pt=o},ze=(function(){function d(n,a,l,o,u,c,f,g,m){this.t=a,this.s=o,this.c=u,this.p=l,this.r=c||Ey,this.d=f||this,this.set=g||wf,this.pr=m||0,this._next=n,n&&(n._prev=this)}var e=d.prototype;return e.modifier=function(a,l,o){this.mSet=this.mSet||this.set,this.set=JS,this.m=a,this.mt=o,this.tween=l},d})();He(Sf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(d){return _f[d]=1});Je.TweenMax=Je.TweenLite=ne;Je.TimelineLite=Je.TimelineMax=xe;Vt=new xe({sortChildren:!1,defaults:Us,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Fe.stringFilter=_y;var Oa=[],zo={},$S=[],$0=0,tx=0,Uh=function(e){return(zo[e]||$S).map(function(n){return n()})},Kh=function(){var e=Date.now(),n=[];e-$0>2&&(Uh("matchMediaInit"),Oa.forEach(function(a){var l=a.queries,o=a.conditions,u,c,f,g;for(c in l)u=Ui.matchMedia(l[c]).matches,u&&(f=1),u!==o[c]&&(o[c]=u,g=1);g&&(a.revert(),f&&n.push(a))}),Uh("matchMediaRevert"),n.forEach(function(a){return a.onMatch(a,function(l){return a.add(null,l)})}),$0=e,Uh("matchMedia"))},zy=(function(){function d(n,a){this.selector=a&&Qh(a),this.data=[],this._r=[],this.isReverted=!1,this.id=tx++,n&&this.add(n)}var e=d.prototype;return e.add=function(a,l,o){Wt(a)&&(o=l,l=a,a=Wt);var u=this,c=function(){var g=qt,m=u.selector,y;return g&&g!==u&&g.data.push(u),o&&(u.selector=Qh(o)),qt=u,y=l.apply(u,arguments),Wt(y)&&u._r.push(y),qt=g,u.selector=m,u.isReverted=!1,y};return u.last=c,a===Wt?c(u,function(f){return u.add(null,f)}):a?u[a]=c:c},e.ignore=function(a){var l=qt;qt=null,a(this),qt=l},e.getTweens=function(){var a=[];return this.data.forEach(function(l){return l instanceof d?a.push.apply(a,l.getTweens()):l instanceof ne&&!(l.parent&&l.parent.data==="nested")&&a.push(l)}),a},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(a,l){var o=this;if(a?(function(){for(var c=o.getTweens(),f=o.data.length,g;f--;)g=o.data[f],g.data==="isFlip"&&(g.revert(),g.getChildren(!0,!0,!1).forEach(function(m){return c.splice(c.indexOf(m),1)}));for(c.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,y){return y.g-m.g||-1/0}).forEach(function(m){return m.t.revert(a)}),f=o.data.length;f--;)g=o.data[f],g instanceof xe?g.data!=="nested"&&(g.scrollTrigger&&g.scrollTrigger.revert(),g.kill()):!(g instanceof ne)&&g.revert&&g.revert(a);o._r.forEach(function(m){return m(a,o)}),o.isReverted=!0})():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),l)for(var u=Oa.length;u--;)Oa[u].id===this.id&&Oa.splice(u,1)},e.revert=function(a){this.kill(a||{})},d})(),ex=(function(){function d(n){this.contexts=[],this.scope=n,qt&&qt.data.push(this)}var e=d.prototype;return e.add=function(a,l,o){Bi(a)||(a={matches:a});var u=new zy(0,o||this.scope),c=u.conditions={},f,g,m;qt&&!u.selector&&(u.selector=qt.selector),this.contexts.push(u),l=u.add("onMatch",l),u.queries=a;for(g in a)g==="all"?m=1:(f=Ui.matchMedia(a[g]),f&&(Oa.indexOf(u)<0&&Oa.push(u),(c[g]=f.matches)&&(m=1),f.addListener?f.addListener(Kh):f.addEventListener("change",Kh)));return m&&l(u,function(y){return u.add(null,y)}),this},e.revert=function(a){this.kill(a||{})},e.kill=function(a){this.contexts.forEach(function(l){return l.kill(a,!0)})},d})(),Lo={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];n.forEach(function(l){return my(l)})},timeline:function(e){return new xe(e)},getTweensOf:function(e,n){return Vt.getTweensOf(e,n)},getProperty:function(e,n,a,l){ce(e)&&(e=vi(e)[0]);var o=Ca(e||{}).get,u=a?ny:iy;return a==="native"&&(a=""),e&&(n?u((Pe[n]&&Pe[n].get||o)(e,n,a,l)):function(c,f,g){return u((Pe[c]&&Pe[c].get||o)(e,c,f,g))})},quickSetter:function(e,n,a){if(e=vi(e),e.length>1){var l=e.map(function(m){return De.quickSetter(m,n,a)}),o=l.length;return function(m){for(var y=o;y--;)l[y](m)}}e=e[0]||{};var u=Pe[n],c=Ca(e),f=c.harness&&(c.harness.aliases||{})[n]||n,g=u?function(m){var y=new u;ws._pt=0,y.init(e,a?m+a:m,ws,0,[e]),y.render(1,y),ws._pt&&Af(1,ws)}:c.set(e,f);return u?g:function(m){return g(e,f,a?m+a:m,c,1)}},quickTo:function(e,n,a){var l,o=De.to(e,$e((l={},l[n]="+=0.1",l.paused=!0,l.stagger=0,l),a||{})),u=function(f,g,m){return o.resetTo(n,f,g,m)};return u.tween=o,u},isTweening:function(e){return Vt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ea(e.ease,Us.ease)),Z0(Us,e||{})},config:function(e){return Z0(Fe,e||{})},registerEffect:function(e){var n=e.name,a=e.effect,l=e.plugins,o=e.defaults,u=e.extendTimeline;(l||"").split(",").forEach(function(c){return c&&!Pe[c]&&!Je[c]&&Ql(n+" effect requires "+c+" plugin.")}),Eh[n]=function(c,f,g){return a(vi(c),$e(f||{},o),g)},u&&(xe.prototype[n]=function(c,f,g){return this.add(Eh[n](c,Bi(f)?f:(g=f)&&{},this),g)})},registerEase:function(e,n){gt[e]=Ea(n)},parseEase:function(e,n){return arguments.length?Ea(e,n):gt},getById:function(e){return Vt.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var a=new xe(e),l,o;for(a.smoothChildTiming=Oe(e.smoothChildTiming),Vt.remove(a),a._dp=0,a._time=a._tTime=Vt._time,l=Vt._first;l;)o=l._next,(n||!(!l._dur&&l instanceof ne&&l.vars.onComplete===l._targets[0]))&&Ri(a,l,l._start-l._delay),l=o;return Ri(Vt,a,0),a},context:function(e,n){return e?new zy(e,n):qt},matchMedia:function(e){return new ex(e)},matchMediaRefresh:function(){return Oa.forEach(function(e){var n=e.conditions,a,l;for(l in n)n[l]&&(n[l]=!1,a=1);a&&e.revert()})||Kh()},addEventListener:function(e,n){var a=zo[e]||(zo[e]=[]);~a.indexOf(n)||a.push(n)},removeEventListener:function(e,n){var a=zo[e],l=a&&a.indexOf(n);l>=0&&a.splice(l,1)},utils:{wrap:DS,wrapYoyo:RS,distribute:cy,random:fy,snap:hy,normalize:US,getUnit:ve,clamp:ES,splitColor:yy,toArray:vi,selector:Qh,mapRange:py,pipe:HS,unitize:zS,interpolate:NS,shuffle:uy},install:Fm,effects:Eh,ticker:Qe,updateRoot:xe.updateRoot,plugins:Pe,globalTimeline:Vt,core:{PropTween:ze,globals:Jm,Tween:ne,Timeline:xe,Animation:Fl,getCache:Ca,_removeLinkedListItem:Ko,reverting:function(){return ye},context:function(e){return e&&qt&&(qt.data.push(e),e._ctx=qt),qt},suppressOverwrites:function(e){return pf=e}}};He("to,from,fromTo,delayedCall,set,killTweensOf",function(d){return Lo[d]=ne[d]});Qe.add(xe.updateRoot);ws=Lo.to({},{duration:0});var ix=function(e,n){for(var a=e._pt;a&&a.p!==n&&a.op!==n&&a.fp!==n;)a=a._next;return a},nx=function(e,n){var a=e._targets,l,o,u;for(l in n)for(o=a.length;o--;)u=e._ptLookup[o][l],u&&(u=u.d)&&(u._pt&&(u=ix(u,l)),u&&u.modifier&&u.modifier(n[l],e,a[o],l))},Dh=function(e,n){return{name:e,headless:1,rawVars:1,init:function(l,o,u){u._onInit=function(c){var f,g;if(ce(o)&&(f={},He(o,function(m){return f[m]=1}),o=f),n){f={};for(g in o)f[g]=n(o[g]);o=f}nx(c,o)}}}},De=Lo.registerPlugin({name:"attr",init:function(e,n,a,l,o){var u,c,f;this.tween=a;for(u in n)f=e.getAttribute(u)||"",c=this.add(e,"setAttribute",(f||0)+"",n[u],l,o,0,0,u),c.op=u,c.b=f,this._props.push(u)},render:function(e,n){for(var a=n._pt;a;)ye?a.set(a.t,a.p,a.b,a):a.r(e,a.d),a=a._next}},{name:"endArray",headless:1,init:function(e,n){for(var a=n.length;a--;)this.add(e,a,e[a]||0,n[a],0,0,0,0,0,1)}},Dh("roundProps",Zh),Dh("modifiers"),Dh("snap",hy))||Lo;ne.version=xe.version=De.version="3.14.2";Km=1;mf()&&Bs();gt.Power0;gt.Power1;gt.Power2;gt.Power3;gt.Power4;gt.Linear;gt.Quad;gt.Cubic;gt.Quart;gt.Quint;gt.Strong;gt.Elastic;gt.Back;gt.SteppedEase;gt.Bounce;gt.Sine;gt.Expo;gt.Circ;var tm,In,Os,Ef,ba,em,Of,ax=function(){return typeof window<"u"},un={},Sa=180/Math.PI,Hs=Math.PI/180,Ss=Math.atan2,im=1e8,Hf=/([A-Z])/g,sx=/(left|right|width|margin|padding|x)/i,lx=/[\s,\(]\S/,Ni={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Fh=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},rx=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},ox=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},ux=function(e,n){return n.set(n.t,n.p,e===1?n.e:e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},cx=function(e,n){var a=n.s+n.c*e;n.set(n.t,n.p,~~(a+(a<0?-.5:.5))+n.u,n)},Uy=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},Dy=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},hx=function(e,n,a){return e.style[n]=a},fx=function(e,n,a){return e.style.setProperty(n,a)},dx=function(e,n,a){return e._gsap[n]=a},px=function(e,n,a){return e._gsap.scaleX=e._gsap.scaleY=a},gx=function(e,n,a,l,o){var u=e._gsap;u.scaleX=u.scaleY=a,u.renderTransform(o,u)},mx=function(e,n,a,l,o){var u=e._gsap;u[n]=a,u.renderTransform(o,u)},Pt="transform",Ue=Pt+"Origin",yx=function d(e,n){var a=this,l=this.target,o=l.style,u=l._gsap;if(e in un&&o){if(this.tfm=this.tfm||{},e!=="transform")e=Ni[e]||e,~e.indexOf(",")?e.split(",").forEach(function(c){return a.tfm[c]=nn(l,c)}):this.tfm[e]=u.x?u[e]:nn(l,e),e===Ue&&(this.tfm.zOrigin=u.zOrigin);else return Ni.transform.split(",").forEach(function(c){return d.call(a,c,n)});if(this.props.indexOf(Pt)>=0)return;u.svg&&(this.svgo=l.getAttribute("data-svg-origin"),this.props.push(Ue,n,"")),e=Pt}(o||n)&&this.props.push(e,n,o[e])},Ry=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},vx=function(){var e=this.props,n=this.target,a=n.style,l=n._gsap,o,u;for(o=0;o<e.length;o+=3)e[o+1]?e[o+1]===2?n[e[o]](e[o+2]):n[e[o]]=e[o+2]:e[o+2]?a[e[o]]=e[o+2]:a.removeProperty(e[o].substr(0,2)==="--"?e[o]:e[o].replace(Hf,"-$1").toLowerCase());if(this.tfm){for(u in this.tfm)l[u]=this.tfm[u];l.svg&&(l.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),o=Of(),(!o||!o.isStart)&&!a[Pt]&&(Ry(a),l.zOrigin&&a[Ue]&&(a[Ue]+=" "+l.zOrigin+"px",l.zOrigin=0,l.renderTransform()),l.uncache=1)}},Ny=function(e,n){var a={target:e,props:[],revert:vx,save:yx};return e._gsap||De.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(l){return a.save(l)}),a},By,Jh=function(e,n){var a=In.createElementNS?In.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):In.createElement(e);return a&&a.style?a:In.createElement(e)},We=function d(e,n,a){var l=getComputedStyle(e);return l[n]||l.getPropertyValue(n.replace(Hf,"-$1").toLowerCase())||l.getPropertyValue(n)||!a&&d(e,ks(n)||n,1)||""},nm="O,Moz,ms,Ms,Webkit".split(","),ks=function(e,n,a){var l=n||ba,o=l.style,u=5;if(e in o&&!a)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);u--&&!(nm[u]+e in o););return u<0?null:(u===3?"ms":u>=0?nm[u]:"")+e},$h=function(){ax()&&window.document&&(tm=window,In=tm.document,Os=In.documentElement,ba=Jh("div")||{style:{}},Jh("div"),Pt=ks(Pt),Ue=Pt+"Origin",ba.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",By=!!ks("perspective"),Of=De.core.reverting,Ef=1)},am=function(e){var n=e.ownerSVGElement,a=Jh("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),l=e.cloneNode(!0),o;l.style.display="block",a.appendChild(l),Os.appendChild(a);try{o=l.getBBox()}catch{}return a.removeChild(l),Os.removeChild(a),o},sm=function(e,n){for(var a=n.length;a--;)if(e.hasAttribute(n[a]))return e.getAttribute(n[a])},ky=function(e){var n,a;try{n=e.getBBox()}catch{n=am(e),a=1}return n&&(n.width||n.height)||a||(n=am(e)),n&&!n.width&&!n.x&&!n.y?{x:+sm(e,["x","cx","x1"])||0,y:+sm(e,["y","cy","y1"])||0,width:0,height:0}:n},Ly=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&ky(e))},Wn=function(e,n){if(n){var a=e.style,l;n in un&&n!==Ue&&(n=Pt),a.removeProperty?(l=n.substr(0,2),(l==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),a.removeProperty(l==="--"?n:n.replace(Hf,"-$1").toLowerCase())):a.removeAttribute(n)}},Gn=function(e,n,a,l,o,u){var c=new ze(e._pt,n,a,0,1,u?Dy:Uy);return e._pt=c,c.b=l,c.e=o,e._props.push(a),c},lm={deg:1,rad:1,turn:1},_x={grid:1,flex:1},Kn=function d(e,n,a,l){var o=parseFloat(a)||0,u=(a+"").trim().substr((o+"").length)||"px",c=ba.style,f=sx.test(n),g=e.tagName.toLowerCase()==="svg",m=(g?"client":"offset")+(f?"Width":"Height"),y=100,_=l==="px",S=l==="%",T,x,M,w;if(l===u||!o||lm[l]||lm[u])return o;if(u!=="px"&&!_&&(o=d(e,n,a,"px")),w=e.getCTM&&Ly(e),(S||u==="%")&&(un[n]||~n.indexOf("adius")))return T=w?e.getBBox()[f?"width":"height"]:e[m],Jt(S?o/T*y:o/100*T);if(c[f?"width":"height"]=y+(_?u:l),x=l!=="rem"&&~n.indexOf("adius")||l==="em"&&e.appendChild&&!g?e:e.parentNode,w&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===In||!x.appendChild)&&(x=In.body),M=x._gsap,M&&S&&M.width&&f&&M.time===Qe.time&&!M.uncache)return Jt(o/M.width*y);if(S&&(n==="height"||n==="width")){var E=e.style[n];e.style[n]=y+l,T=e[m],E?e.style[n]=E:Wn(e,n)}else(S||u==="%")&&!_x[We(x,"display")]&&(c.position=We(e,"position")),x===e&&(c.position="static"),x.appendChild(ba),T=ba[m],x.removeChild(ba),c.position="absolute";return f&&S&&(M=Ca(x),M.time=Qe.time,M.width=x[m]),Jt(_?T*o/y:T&&o?y/T*o:0)},nn=function(e,n,a,l){var o;return Ef||$h(),n in Ni&&n!=="transform"&&(n=Ni[n],~n.indexOf(",")&&(n=n.split(",")[0])),un[n]&&n!=="transform"?(o=$l(e,l),o=n!=="transformOrigin"?o[n]:o.svg?o.origin:Go(We(e,Ue))+" "+o.zOrigin+"px"):(o=e.style[n],(!o||o==="auto"||l||~(o+"").indexOf("calc("))&&(o=Io[n]&&Io[n](e,n,a)||We(e,n)||ty(e,n)||(n==="opacity"?1:0))),a&&!~(o+"").trim().indexOf(" ")?Kn(e,n,o,a)+a:o},Sx=function(e,n,a,l){if(!a||a==="none"){var o=ks(n,e,1),u=o&&We(e,o,1);u&&u!==a?(n=o,a=u):n==="borderColor"&&(a=We(e,"borderTopColor"))}var c=new ze(this._pt,e.style,n,0,1,Oy),f=0,g=0,m,y,_,S,T,x,M,w,E,H,B,N;if(c.b=a,c.e=l,a+="",l+="",l.substring(0,6)==="var(--"&&(l=We(e,l.substring(4,l.indexOf(")")))),l==="auto"&&(x=e.style[n],e.style[n]=l,l=We(e,n)||l,x?e.style[n]=x:Wn(e,n)),m=[a,l],_y(m),a=m[0],l=m[1],_=a.match(Ms)||[],N=l.match(Ms)||[],N.length){for(;y=Ms.exec(l);)M=y[0],E=l.substring(f,y.index),T?T=(T+1)%5:(E.substr(-5)==="rgba("||E.substr(-5)==="hsla(")&&(T=1),M!==(x=_[g++]||"")&&(S=parseFloat(x)||0,B=x.substr((S+"").length),M.charAt(1)==="="&&(M=Es(S,M)+B),w=parseFloat(M),H=M.substr((w+"").length),f=Ms.lastIndex-H.length,H||(H=H||Fe.units[n]||B,f===l.length&&(l+=H,c.e+=H)),B!==H&&(S=Kn(e,n,x,H)||0),c._pt={_next:c._pt,p:E||g===1?E:",",s:S,c:w-S,m:T&&T<4||n==="zIndex"?Math.round:0});c.c=f<l.length?l.substring(f,l.length):""}else c.r=n==="display"&&l==="none"?Dy:Uy;return Wm.test(l)&&(c.e=0),this._pt=c,c},rm={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},xx=function(e){var n=e.split(" "),a=n[0],l=n[1]||"50%";return(a==="top"||a==="bottom"||l==="left"||l==="right")&&(e=a,a=l,l=e),n[0]=rm[a]||a,n[1]=rm[l]||l,n.join(" ")},bx=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var a=n.t,l=a.style,o=n.u,u=a._gsap,c,f,g;if(o==="all"||o===!0)l.cssText="",f=1;else for(o=o.split(","),g=o.length;--g>-1;)c=o[g],un[c]&&(f=1,c=c==="transformOrigin"?Ue:Pt),Wn(a,c);f&&(Wn(a,Pt),u&&(u.svg&&a.removeAttribute("transform"),l.scale=l.rotate=l.translate="none",$l(a,1),u.uncache=1,Ry(l)))}},Io={clearProps:function(e,n,a,l,o){if(o.data!=="isFromStart"){var u=e._pt=new ze(e._pt,n,a,0,0,bx);return u.u=l,u.pr=-10,u.tween=o,e._props.push(a),1}}},Jl=[1,0,0,1,0,0],Iy={},Gy=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},om=function(e){var n=We(e,Pt);return Gy(n)?Jl:n.substr(7).match(Zm).map(Jt)},zf=function(e,n){var a=e._gsap||Ca(e),l=e.style,o=om(e),u,c,f,g;return a.svg&&e.getAttribute("transform")?(f=e.transform.baseVal.consolidate().matrix,o=[f.a,f.b,f.c,f.d,f.e,f.f],o.join(",")==="1,0,0,1,0,0"?Jl:o):(o===Jl&&!e.offsetParent&&e!==Os&&!a.svg&&(f=l.display,l.display="block",u=e.parentNode,(!u||!e.offsetParent&&!e.getBoundingClientRect().width)&&(g=1,c=e.nextElementSibling,Os.appendChild(e)),o=om(e),f?l.display=f:Wn(e,"display"),g&&(c?u.insertBefore(e,c):u?u.appendChild(e):Os.removeChild(e))),n&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},tf=function(e,n,a,l,o,u){var c=e._gsap,f=o||zf(e,!0),g=c.xOrigin||0,m=c.yOrigin||0,y=c.xOffset||0,_=c.yOffset||0,S=f[0],T=f[1],x=f[2],M=f[3],w=f[4],E=f[5],H=n.split(" "),B=parseFloat(H[0])||0,N=parseFloat(H[1])||0,G,Y,j,I;a?f!==Jl&&(Y=S*M-T*x)&&(j=B*(M/Y)+N*(-x/Y)+(x*E-M*w)/Y,I=B*(-T/Y)+N*(S/Y)-(S*E-T*w)/Y,B=j,N=I):(G=ky(e),B=G.x+(~H[0].indexOf("%")?B/100*G.width:B),N=G.y+(~(H[1]||H[0]).indexOf("%")?N/100*G.height:N)),l||l!==!1&&c.smooth?(w=B-g,E=N-m,c.xOffset=y+(w*S+E*x)-w,c.yOffset=_+(w*T+E*M)-E):c.xOffset=c.yOffset=0,c.xOrigin=B,c.yOrigin=N,c.smooth=!!l,c.origin=n,c.originIsAbsolute=!!a,e.style[Ue]="0px 0px",u&&(Gn(u,c,"xOrigin",g,B),Gn(u,c,"yOrigin",m,N),Gn(u,c,"xOffset",y,c.xOffset),Gn(u,c,"yOffset",_,c.yOffset)),e.setAttribute("data-svg-origin",B+" "+N)},$l=function(e,n){var a=e._gsap||new Ty(e);if("x"in a&&!n&&!a.uncache)return a;var l=e.style,o=a.scaleX<0,u="px",c="deg",f=getComputedStyle(e),g=We(e,Ue)||"0",m,y,_,S,T,x,M,w,E,H,B,N,G,Y,j,I,F,it,et,nt,wt,ot,R,P,K,vt,mt,bt,yt,at,_t,Xt;return m=y=_=x=M=w=E=H=B=0,S=T=1,a.svg=!!(e.getCTM&&Ly(e)),f.translate&&((f.translate!=="none"||f.scale!=="none"||f.rotate!=="none")&&(l[Pt]=(f.translate!=="none"?"translate3d("+(f.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(f.rotate!=="none"?"rotate("+f.rotate+") ":"")+(f.scale!=="none"?"scale("+f.scale.split(" ").join(",")+") ":"")+(f[Pt]!=="none"?f[Pt]:"")),l.scale=l.rotate=l.translate="none"),Y=zf(e,a.svg),a.svg&&(a.uncache?(K=e.getBBox(),g=a.xOrigin-K.x+"px "+(a.yOrigin-K.y)+"px",P=""):P=!n&&e.getAttribute("data-svg-origin"),tf(e,P||g,!!P||a.originIsAbsolute,a.smooth!==!1,Y)),N=a.xOrigin||0,G=a.yOrigin||0,Y!==Jl&&(it=Y[0],et=Y[1],nt=Y[2],wt=Y[3],m=ot=Y[4],y=R=Y[5],Y.length===6?(S=Math.sqrt(it*it+et*et),T=Math.sqrt(wt*wt+nt*nt),x=it||et?Ss(et,it)*Sa:0,E=nt||wt?Ss(nt,wt)*Sa+x:0,E&&(T*=Math.abs(Math.cos(E*Hs))),a.svg&&(m-=N-(N*it+G*nt),y-=G-(N*et+G*wt))):(Xt=Y[6],at=Y[7],mt=Y[8],bt=Y[9],yt=Y[10],_t=Y[11],m=Y[12],y=Y[13],_=Y[14],j=Ss(Xt,yt),M=j*Sa,j&&(I=Math.cos(-j),F=Math.sin(-j),P=ot*I+mt*F,K=R*I+bt*F,vt=Xt*I+yt*F,mt=ot*-F+mt*I,bt=R*-F+bt*I,yt=Xt*-F+yt*I,_t=at*-F+_t*I,ot=P,R=K,Xt=vt),j=Ss(-nt,yt),w=j*Sa,j&&(I=Math.cos(-j),F=Math.sin(-j),P=it*I-mt*F,K=et*I-bt*F,vt=nt*I-yt*F,_t=wt*F+_t*I,it=P,et=K,nt=vt),j=Ss(et,it),x=j*Sa,j&&(I=Math.cos(j),F=Math.sin(j),P=it*I+et*F,K=ot*I+R*F,et=et*I-it*F,R=R*I-ot*F,it=P,ot=K),M&&Math.abs(M)+Math.abs(x)>359.9&&(M=x=0,w=180-w),S=Jt(Math.sqrt(it*it+et*et+nt*nt)),T=Jt(Math.sqrt(R*R+Xt*Xt)),j=Ss(ot,R),E=Math.abs(j)>2e-4?j*Sa:0,B=_t?1/(_t<0?-_t:_t):0),a.svg&&(P=e.getAttribute("transform"),a.forceCSS=e.setAttribute("transform","")||!Gy(We(e,Pt)),P&&e.setAttribute("transform",P))),Math.abs(E)>90&&Math.abs(E)<270&&(o?(S*=-1,E+=x<=0?180:-180,x+=x<=0?180:-180):(T*=-1,E+=E<=0?180:-180)),n=n||a.uncache,a.x=m-((a.xPercent=m&&(!n&&a.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-m)?-50:0)))?e.offsetWidth*a.xPercent/100:0)+u,a.y=y-((a.yPercent=y&&(!n&&a.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-y)?-50:0)))?e.offsetHeight*a.yPercent/100:0)+u,a.z=_+u,a.scaleX=Jt(S),a.scaleY=Jt(T),a.rotation=Jt(x)+c,a.rotationX=Jt(M)+c,a.rotationY=Jt(w)+c,a.skewX=E+c,a.skewY=H+c,a.transformPerspective=B+u,(a.zOrigin=parseFloat(g.split(" ")[2])||!n&&a.zOrigin||0)&&(l[Ue]=Go(g)),a.xOffset=a.yOffset=0,a.force3D=Fe.force3D,a.renderTransform=a.svg?Mx:By?qy:Tx,a.uncache=0,a},Go=function(e){return(e=e.split(" "))[0]+" "+e[1]},Rh=function(e,n,a){var l=ve(n);return Jt(parseFloat(n)+parseFloat(Kn(e,"x",a+"px",l)))+l},Tx=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,qy(e,n)},va="0deg",Ul="0px",_a=") ",qy=function(e,n){var a=n||this,l=a.xPercent,o=a.yPercent,u=a.x,c=a.y,f=a.z,g=a.rotation,m=a.rotationY,y=a.rotationX,_=a.skewX,S=a.skewY,T=a.scaleX,x=a.scaleY,M=a.transformPerspective,w=a.force3D,E=a.target,H=a.zOrigin,B="",N=w==="auto"&&e&&e!==1||w===!0;if(H&&(y!==va||m!==va)){var G=parseFloat(m)*Hs,Y=Math.sin(G),j=Math.cos(G),I;G=parseFloat(y)*Hs,I=Math.cos(G),u=Rh(E,u,Y*I*-H),c=Rh(E,c,-Math.sin(G)*-H),f=Rh(E,f,j*I*-H+H)}M!==Ul&&(B+="perspective("+M+_a),(l||o)&&(B+="translate("+l+"%, "+o+"%) "),(N||u!==Ul||c!==Ul||f!==Ul)&&(B+=f!==Ul||N?"translate3d("+u+", "+c+", "+f+") ":"translate("+u+", "+c+_a),g!==va&&(B+="rotate("+g+_a),m!==va&&(B+="rotateY("+m+_a),y!==va&&(B+="rotateX("+y+_a),(_!==va||S!==va)&&(B+="skew("+_+", "+S+_a),(T!==1||x!==1)&&(B+="scale("+T+", "+x+_a),E.style[Pt]=B||"translate(0, 0)"},Mx=function(e,n){var a=n||this,l=a.xPercent,o=a.yPercent,u=a.x,c=a.y,f=a.rotation,g=a.skewX,m=a.skewY,y=a.scaleX,_=a.scaleY,S=a.target,T=a.xOrigin,x=a.yOrigin,M=a.xOffset,w=a.yOffset,E=a.forceCSS,H=parseFloat(u),B=parseFloat(c),N,G,Y,j,I;f=parseFloat(f),g=parseFloat(g),m=parseFloat(m),m&&(m=parseFloat(m),g+=m,f+=m),f||g?(f*=Hs,g*=Hs,N=Math.cos(f)*y,G=Math.sin(f)*y,Y=Math.sin(f-g)*-_,j=Math.cos(f-g)*_,g&&(m*=Hs,I=Math.tan(g-m),I=Math.sqrt(1+I*I),Y*=I,j*=I,m&&(I=Math.tan(m),I=Math.sqrt(1+I*I),N*=I,G*=I)),N=Jt(N),G=Jt(G),Y=Jt(Y),j=Jt(j)):(N=y,j=_,G=Y=0),(H&&!~(u+"").indexOf("px")||B&&!~(c+"").indexOf("px"))&&(H=Kn(S,"x",u,"px"),B=Kn(S,"y",c,"px")),(T||x||M||w)&&(H=Jt(H+T-(T*N+x*Y)+M),B=Jt(B+x-(T*G+x*j)+w)),(l||o)&&(I=S.getBBox(),H=Jt(H+l/100*I.width),B=Jt(B+o/100*I.height)),I="matrix("+N+","+G+","+Y+","+j+","+H+","+B+")",S.setAttribute("transform",I),E&&(S.style[Pt]=I)},wx=function(e,n,a,l,o){var u=360,c=ce(o),f=parseFloat(o)*(c&&~o.indexOf("rad")?Sa:1),g=f-l,m=l+g+"deg",y,_;return c&&(y=o.split("_")[1],y==="short"&&(g%=u,g!==g%(u/2)&&(g+=g<0?u:-u)),y==="cw"&&g<0?g=(g+u*im)%u-~~(g/u)*u:y==="ccw"&&g>0&&(g=(g-u*im)%u-~~(g/u)*u)),e._pt=_=new ze(e._pt,n,a,l,g,rx),_.e=m,_.u="deg",e._props.push(a),_},um=function(e,n){for(var a in n)e[a]=n[a];return e},Cx=function(e,n,a){var l=um({},a._gsap),o="perspective,force3D,transformOrigin,svgOrigin",u=a.style,c,f,g,m,y,_,S,T;l.svg?(g=a.getAttribute("transform"),a.setAttribute("transform",""),u[Pt]=n,c=$l(a,1),Wn(a,Pt),a.setAttribute("transform",g)):(g=getComputedStyle(a)[Pt],u[Pt]=n,c=$l(a,1),u[Pt]=g);for(f in un)g=l[f],m=c[f],g!==m&&o.indexOf(f)<0&&(S=ve(g),T=ve(m),y=S!==T?Kn(a,f,g,T):parseFloat(g),_=parseFloat(m),e._pt=new ze(e._pt,c,f,y,_-y,Fh),e._pt.u=T||0,e._props.push(f));um(c,l)};He("padding,margin,Width,Radius",function(d,e){var n="Top",a="Right",l="Bottom",o="Left",u=(e<3?[n,a,l,o]:[n+o,n+a,l+a,l+o]).map(function(c){return e<2?d+c:"border"+c+d});Io[e>1?"border"+d:d]=function(c,f,g,m,y){var _,S;if(arguments.length<4)return _=u.map(function(T){return nn(c,T,g)}),S=_.join(" "),S.split(_[0]).length===5?_[0]:S;_=(m+"").split(" "),S={},u.forEach(function(T,x){return S[T]=_[x]=_[x]||_[(x-1)/2|0]}),c.init(f,S,y)}});var Yy={name:"css",register:$h,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,a,l,o){var u=this._props,c=e.style,f=a.vars.startAt,g,m,y,_,S,T,x,M,w,E,H,B,N,G,Y,j,I;Ef||$h(),this.styles=this.styles||Ny(e),j=this.styles.props,this.tween=a;for(x in n)if(x!=="autoRound"&&(m=n[x],!(Pe[x]&&My(x,n,a,l,e,o)))){if(S=typeof m,T=Io[x],S==="function"&&(m=m.call(a,l,e,o),S=typeof m),S==="string"&&~m.indexOf("random(")&&(m=Wl(m)),T)T(this,e,x,m,a)&&(Y=1);else if(x.substr(0,2)==="--")g=(getComputedStyle(e).getPropertyValue(x)+"").trim(),m+="",Qn.lastIndex=0,Qn.test(g)||(M=ve(g),w=ve(m),w?M!==w&&(g=Kn(e,x,g,w)+w):M&&(m+=M)),this.add(c,"setProperty",g,m,l,o,0,0,x),u.push(x),j.push(x,0,c[x]);else if(S!=="undefined"){if(f&&x in f?(g=typeof f[x]=="function"?f[x].call(a,l,e,o):f[x],ce(g)&&~g.indexOf("random(")&&(g=Wl(g)),ve(g+"")||g==="auto"||(g+=Fe.units[x]||ve(nn(e,x))||""),(g+"").charAt(1)==="="&&(g=nn(e,x))):g=nn(e,x),_=parseFloat(g),E=S==="string"&&m.charAt(1)==="="&&m.substr(0,2),E&&(m=m.substr(2)),y=parseFloat(m),x in Ni&&(x==="autoAlpha"&&(_===1&&nn(e,"visibility")==="hidden"&&y&&(_=0),j.push("visibility",0,c.visibility),Gn(this,c,"visibility",_?"inherit":"hidden",y?"inherit":"hidden",!y)),x!=="scale"&&x!=="transform"&&(x=Ni[x],~x.indexOf(",")&&(x=x.split(",")[0]))),H=x in un,H){if(this.styles.save(x),I=m,S==="string"&&m.substring(0,6)==="var(--"){if(m=We(e,m.substring(4,m.indexOf(")"))),m.substring(0,5)==="calc("){var F=e.style.perspective;e.style.perspective=m,m=We(e,"perspective"),F?e.style.perspective=F:Wn(e,"perspective")}y=parseFloat(m)}if(B||(N=e._gsap,N.renderTransform&&!n.parseTransform||$l(e,n.parseTransform),G=n.smoothOrigin!==!1&&N.smooth,B=this._pt=new ze(this._pt,c,Pt,0,1,N.renderTransform,N,0,-1),B.dep=1),x==="scale")this._pt=new ze(this._pt,N,"scaleY",N.scaleY,(E?Es(N.scaleY,E+y):y)-N.scaleY||0,Fh),this._pt.u=0,u.push("scaleY",x),x+="X";else if(x==="transformOrigin"){j.push(Ue,0,c[Ue]),m=xx(m),N.svg?tf(e,m,0,G,0,this):(w=parseFloat(m.split(" ")[2])||0,w!==N.zOrigin&&Gn(this,N,"zOrigin",N.zOrigin,w),Gn(this,c,x,Go(g),Go(m)));continue}else if(x==="svgOrigin"){tf(e,m,1,G,0,this);continue}else if(x in Iy){wx(this,N,x,_,E?Es(_,E+m):m);continue}else if(x==="smoothOrigin"){Gn(this,N,"smooth",N.smooth,m);continue}else if(x==="force3D"){N[x]=m;continue}else if(x==="transform"){Cx(this,m,e);continue}}else x in c||(x=ks(x)||x);if(H||(y||y===0)&&(_||_===0)&&!lx.test(m)&&x in c)M=(g+"").substr((_+"").length),y||(y=0),w=ve(m)||(x in Fe.units?Fe.units[x]:M),M!==w&&(_=Kn(e,x,g,w)),this._pt=new ze(this._pt,H?N:c,x,_,(E?Es(_,E+y):y)-_,!H&&(w==="px"||x==="zIndex")&&n.autoRound!==!1?cx:Fh),this._pt.u=w||0,H&&I!==m?(this._pt.b=g,this._pt.e=I,this._pt.r=ux):M!==w&&w!=="%"&&(this._pt.b=g,this._pt.r=ox);else if(x in c)Sx.call(this,e,x,g,E?E+m:m);else if(x in e)this.add(e,x,g||e[x],E?E+m:m,l,o);else if(x!=="parseTransform"){vf(x,m);continue}H||(x in c?j.push(x,0,c[x]):typeof e[x]=="function"?j.push(x,2,e[x]()):j.push(x,1,g||e[x])),u.push(x)}}Y&&Hy(this)},render:function(e,n){if(n.tween._time||!Of())for(var a=n._pt;a;)a.r(e,a.d),a=a._next;else n.styles.revert()},get:nn,aliases:Ni,getSetter:function(e,n,a){var l=Ni[n];return l&&l.indexOf(",")<0&&(n=l),n in un&&n!==Ue&&(e._gsap.x||nn(e,"x"))?a&&em===a?n==="scale"?px:dx:(em=a||{})&&(n==="scale"?gx:mx):e.style&&!gf(e.style[n])?hx:~n.indexOf("-")?fx:Cf(e,n)},core:{_removeProperty:Wn,_getMatrix:zf}};De.utils.checkPrefix=ks;De.core.getStyleSaver=Ny;(function(d,e,n,a){var l=He(d+","+e+","+n,function(o){un[o]=1});He(e,function(o){Fe.units[o]="deg",Iy[o]=1}),Ni[l[13]]=d+","+e,He(a,function(o){var u=o.split(":");Ni[u[1]]=l[u[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");He("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(d){Fe.units[d]="px"});De.registerPlugin(Yy);var pt=De.registerPlugin(Yy)||De;pt.core.Tween;var qn,qo,cm,mi,jl,Xy,ef,$o,jy=function(){return typeof window<"u"},Vy=function(){return qn||jy()&&(qn=window.gsap)&&qn.registerPlugin&&qn},nf=function(e){return typeof e=="function"},Py=function(e){return console.warn(e)},Ax=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Mi=.212671,hi=.71516,fi=.072169,Qy=function(e){return nf(mi[e])?mi[e]:mi.filters[e]},tu=function(e,n){var a=[],l=0,o=0,u,c;for(u=0;u<4;u++){for(c=0;c<5;c++)o=c===4?e[l+4]:0,a[l+c]=e[l]*n[c]+e[l+1]*n[c+5]+e[l+2]*n[c+10]+e[l+3]*n[c+15]+o;l+=5}return a},hm=function(e,n){var a=1-n,l=a*Mi,o=a*hi,u=a*fi;return tu([l+n,o,u,0,0,l,o+n,u,0,0,l,o,u+n,0,0,0,0,0,1,0],e)},fm=function(e,n,a){var l=qo(n),o=l[0]/255,u=l[1]/255,c=l[2]/255,f=1-a;return tu([f+a*o*Mi,a*o*hi,a*o*fi,0,0,a*u*Mi,f+a*u*hi,a*u*fi,0,0,a*c*Mi,a*c*hi,f+a*c*fi,0,0,0,0,0,1,0],e)},dm=function(e,n){n*=Math.PI/180;var a=Math.cos(n),l=Math.sin(n);return tu([Mi+a*(1-Mi)+l*-Mi,hi+a*-hi+l*-hi,fi+a*-fi+l*(1-fi),0,0,Mi+a*-Mi+l*.143,hi+a*(1-hi)+l*.14,fi+a*-fi+l*-.283,0,0,Mi+a*-Mi+l*-.787329,hi+a*-hi+l*hi,fi+a*(1-fi)+l*fi,0,0,0,0,0,1,0,0,0,0,0,1],e)},pm=function(e,n){return tu([n,0,0,0,.5*(1-n),0,n,0,0,.5*(1-n),0,0,n,0,.5*(1-n),0,0,0,1,0],e)},Zy=function(e,n){var a=Qy(n),l=e.filters||[],o=l.length,u;for(a||Py(n+" not found. PixiPlugin.registerPIXI(PIXI)");--o>-1;)if(l[o]instanceof a)return l[o];return u=new a,n==="BlurFilter"&&($o?u.strength=0:u.blur=0),e.filters=[].concat(l,[u]),u},ue=function(e,n,a,l){n.add(a,e,a[e],l[e]),n._props.push(e)},gm=function(e,n){var a=Qy("ColorMatrixFilter"),l=new a;return l.matrix=n,l.brightness(e,!0),l.matrix},Ex=function(e){var n={},a;for(a in e)n[a]=e[a];return n},je={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},Ox=function(e,n,a){var l=Zy(e,"ColorMatrixFilter"),o=e._gsColorMatrixFilter=e._gsColorMatrixFilter||Ex(je),u=n.combineCMF&&!("colorMatrixFilter"in n&&!n.colorMatrixFilter),c,f,g;for(g=l.matrix,n.resolution&&(l.resolution=n.resolution),n.matrix&&n.matrix.length===g.length?(f=n.matrix,o.contrast!==1&&ue("contrast",a,o,je),o.hue&&ue("hue",a,o,je),o.brightness!==1&&ue("brightness",a,o,je),o.colorizeAmount&&(ue("colorize",a,o,je),ue("colorizeAmount",a,o,je)),o.saturation!==1&&ue("saturation",a,o,je)):(f=Ax.slice(),n.contrast!=null?(f=pm(f,+n.contrast),ue("contrast",a,o,n)):o.contrast!==1&&(u?f=pm(f,o.contrast):ue("contrast",a,o,je)),n.hue!=null?(f=dm(f,+n.hue),ue("hue",a,o,n)):o.hue&&(u?f=dm(f,o.hue):ue("hue",a,o,je)),n.brightness!=null?(f=gm(+n.brightness,f),ue("brightness",a,o,n)):o.brightness!==1&&(u?f=gm(o.brightness,f):ue("brightness",a,o,je)),n.colorize!=null?(n.colorizeAmount="colorizeAmount"in n?+n.colorizeAmount:1,f=fm(f,n.colorize,n.colorizeAmount),ue("colorize",a,o,n),ue("colorizeAmount",a,o,n)):o.colorizeAmount&&(u?f=fm(f,o.colorize,o.colorizeAmount):(ue("colorize",a,o,je),ue("colorizeAmount",a,o,je))),n.saturation!=null?(f=hm(f,+n.saturation),ue("saturation",a,o,n)):o.saturation!==1&&(u?f=hm(f,o.saturation):ue("saturation",a,o,je))),c=f.length;--c>-1;)f[c]!==g[c]&&a.add(g,c,g[c],f[c],"colorMatrixFilter");a._props.push("colorMatrixFilter")},Hx=function(e,n){var a=n.t,l=n.p,o=n.color,u=n.set;u(a,l,o[0]<<16|o[1]<<8|o[2])},zx=function(e,n){var a=n.g;$o?(a.fill(),a.stroke()):a&&(a.dirty++,a.clearDirty++)},Ux=function(e,n){n.t.visible=!!n.t.alpha},mm=function(e,n,a,l){var o=e[n],u=qo(nf(o)?e[n.indexOf("set")||!nf(e["get"+n.substr(3)])?n:"get"+n.substr(3)]():o),c=qo(a);l._pt=new jl(l._pt,e,n,0,0,Hx,{t:e,p:n,color:u,set:Xy(e,n)}),l.add(u,0,u[0],c[0]),l.add(u,1,u[1],c[1]),l.add(u,2,u[2],c[2])},Dx={tint:1,lineColor:1,fillColor:1,strokeColor:1},ym="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),af={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},Rx={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},Yo=Math.PI/180,Wy=function(e){return typeof e=="string"},Nx=function(e){return Wy(e)&&e.charAt(1)==="="?e.substr(0,2)+parseFloat(e.substr(2))*Yo:e*Yo},Bx=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e5)/1e5,n)},kx=function(e,n,a,l,o,u){var c=360*(u?Yo:1),f=Wy(o),g=f&&o.charAt(1)==="="?+(o.charAt(0)+"1"):0,m=parseFloat(g?o.substr(2):o)*(u?Yo:1),y=g?m*g:m-l,_=l+y,S,T;return f&&(S=o.split("_")[1],S==="short"&&(y%=c,y!==y%(c/2)&&(y+=y<0?c:-c)),S==="cw"&&y<0?y=(y+c*1e10)%c-~~(y/c)*c:S==="ccw"&&y>0&&(y=(y-c*1e10)%c-~~(y/c)*c)),e._pt=T=new jl(e._pt,n,a,l,y,Bx),T.e=_,T},vm=function(){if(!cm){qn=Vy(),mi=cm=mi||jy()&&window.PIXI;var e=mi&&mi.VERSION&&parseFloat(mi.VERSION.split(".")[0])||0;ef=e===4,$o=e>=8,qo=function(a){return qn.utils.splitColor((a+"").substr(0,2)==="0x"?"#"+a.substr(2):a)}}},Mo,Dl;for(Mo=0;Mo<ym.length;Mo++)Dl=ym[Mo],af[Dl+"X"]=Dl,af[Dl+"Y"]=Dl;var Uf={version:"3.14.2",name:"pixi",register:function(e,n,a){qn=e,jl=a,Xy=n.getSetter,vm()},headless:!0,registerPIXI:function(e){mi=e},init:function(e,n,a,l,o){if(mi||vm(),!mi)return Py("PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var u,c,f,g,m,y,_,S,T,x;for(y in n){if(u=af[y],f=n[y],u)c=~y.charAt(y.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(e[u],c,e[u][c],u==="skew"?Nx(f):f,0,0,0,0,0,1);else if(y==="scale"||y==="anchor"||y==="pivot"||y==="tileScale")this.add(e[y],"x",e[y].x,f),this.add(e[y],"y",e[y].y,f);else if(y==="rotation"||y==="angle")kx(this,e,y,e[y],f,y==="rotation");else if(Rx[y])g||(Ox(e,n.colorMatrixFilter||n,this),g=!0);else if(y==="blur"||y==="blurX"||y==="blurY"||y==="blurPadding"){if(m=Zy(e,"BlurFilter"),this.add(m,y,m[y],f),n.blurPadding!==0)for(_=n.blurPadding||Math.max(m[y],f)*2,S=e.filters.length;--S>-1;)e.filters[S].padding=Math.max(e.filters[S].padding,_)}else if(Dx[y])if((y==="lineColor"||y==="fillColor"||y==="strokeColor")&&e instanceof mi.Graphics)for(T=("fillStyle"in e)?[e]:(e.geometry||e).graphicsData,x=y.substr(0,y.length-5),$o&&x==="line"&&(x="stroke"),this._pt=new jl(this._pt,e,y,0,0,zx,{g:e.geometry||e}),S=T.length;--S>-1;)mm(ef?T[S]:T[S][x+"Style"],ef?y:"color",f,this);else mm(e,y,f,this);else y==="autoAlpha"?(this._pt=new jl(this._pt,e,"visible",0,0,Ux),this.add(e,"alpha",e.alpha,f),this._props.push("alpha","visible")):y!=="resolution"&&this.add(e,y,"get",f);this._props.push(y)}}};Vy()&&qn.registerPlugin(Uf);var Lx=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Ix=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Gx=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,qx=/(^[#\.][a-z]|[a-y][a-z])/i,Yx=Math.PI/180,Xx=180/Math.PI,wo=Math.sin,Co=Math.cos,_i=Math.abs,sn=Math.sqrt,jx=Math.atan2,sf=1e8,_m=function(e){return typeof e=="string"},Ky=function(e){return typeof e=="number"},Vx=function(e){return typeof e>"u"},Px={},Qx={},Xo=1e5,Fy=function(e){return Math.round((e+sf)%1*Xo)/Xo||(e<0?0:1)},Mt=function(e){return Math.round(e*Xo)/Xo||0},Sm=function(e){return Math.round(e*1e10)/1e10||0},xm=function(e){return e.closed=Math.abs(e[0]-e[e.length-2])<.001&&Math.abs(e[1]-e[e.length-1])<.001},bm=function(e,n,a,l){var o=e[n],u=l===1?6:lf(o,a,l);if((u||!l)&&u+a+2<o.length)return e.splice(n,0,o.slice(0,a+u+2)),o.splice(0,a+u),1},Jy=function(e,n,a){var l=e.length,o=~~(a*l);if(e[o]>n){for(;--o&&e[o]>n;);o<0&&(o=0)}else for(;e[++o]<n&&o<l;);return o<l?o:l-1},Zx=function(e,n){var a=e.length;for(e.reverse();a--;)e[a].reversed||Fx(e[a])},Tm=function(e,n){return n.totalLength=e.totalLength,e.samples?(n.samples=e.samples.slice(0),n.lookup=e.lookup.slice(0),n.minLength=e.minLength,n.resolution=e.resolution):e.totalPoints&&(n.totalPoints=e.totalPoints),n},Wx=function(e,n){var a=e.length,l=e[a-1]||[],o=l.length;a&&n[0]===l[o-2]&&n[1]===l[o-1]&&(n=l.concat(n.slice(2)),a--),e[a]=n};function Uo(d){d=_m(d)&&qx.test(d)&&document.querySelector(d)||d;var e=d.getAttribute?d:0,n;return e&&(d=d.getAttribute("d"))?(e._gsPath||(e._gsPath={}),n=e._gsPath[d],n&&!n._dirty?n:e._gsPath[d]=jo(d)):d?_m(d)?jo(d):Ky(d[0])?[d]:d:console.warn("Expecting a <path> element or an SVG path data string")}function Kx(d){for(var e=[],n=0;n<d.length;n++)e[n]=Tm(d[n],d[n].slice(0));return Tm(d,e)}function Fx(d){var e=0,n;for(d.reverse();e<d.length;e+=2)n=d[e],d[e]=d[e+1],d[e+1]=n;d.reversed=!d.reversed}var Jx=function(e,n){var a=document.createElementNS("http://www.w3.org/2000/svg","path"),l=[].slice.call(e.attributes),o=l.length,u;for(n=","+n+",";--o>-1;)u=l[o].nodeName.toLowerCase(),n.indexOf(","+u+",")<0&&a.setAttributeNS(null,u,l[o].nodeValue);return a},$x={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},tb=function(e,n){for(var a=n?n.split(","):[],l={},o=a.length;--o>-1;)l[a[o]]=+e.getAttribute(a[o])||0;return l};function eb(d,e){var n=d.tagName.toLowerCase(),a=.552284749831,l,o,u,c,f,g,m,y,_,S,T,x,M,w,E,H,B,N,G,Y,j,I;return n==="path"||!d.getBBox?d:(g=Jx(d,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),I=tb(d,$x[n]),n==="rect"?(c=I.rx,f=I.ry||c,o=I.x,u=I.y,S=I.width-c*2,T=I.height-f*2,c||f?(x=o+c*(1-a),M=o+c,w=M+S,E=w+c*a,H=w+c,B=u+f*(1-a),N=u+f,G=N+T,Y=G+f*a,j=G+f,l="M"+H+","+N+" V"+G+" C"+[H,Y,E,j,w,j,w-(w-M)/3,j,M+(w-M)/3,j,M,j,x,j,o,Y,o,G,o,G-(G-N)/3,o,N+(G-N)/3,o,N,o,B,x,u,M,u,M+(w-M)/3,u,w-(w-M)/3,u,w,u,E,u,H,B,H,N].join(",")+"z"):l="M"+(o+S)+","+u+" v"+T+" h"+-S+" v"+-T+" h"+S+"z"):n==="circle"||n==="ellipse"?(n==="circle"?(c=f=I.r,y=c*a):(c=I.rx,f=I.ry,y=f*a),o=I.cx,u=I.cy,m=c*a,l="M"+(o+c)+","+u+" C"+[o+c,u+y,o+m,u+f,o,u+f,o-m,u+f,o-c,u+y,o-c,u,o-c,u-y,o-m,u-f,o,u-f,o+m,u-f,o+c,u-y,o+c,u].join(",")+"z"):n==="line"?l="M"+I.x1+","+I.y1+" L"+I.x2+","+I.y2:(n==="polyline"||n==="polygon")&&(_=(d.getAttribute("points")+"").match(Ix)||[],o=_.shift(),u=_.shift(),l="M"+o+","+u+" L"+_.join(","),n==="polygon"&&(l+=","+o+","+u+"z")),g.setAttribute("d",ev(g._gsRawPath=jo(l))),e&&d.parentNode&&(d.parentNode.insertBefore(g,d),d.parentNode.removeChild(d)),g)}function $y(d,e,n){var a=d[e],l=d[e+2],o=d[e+4],u;return a+=(l-a)*n,l+=(o-l)*n,a+=(l-a)*n,u=l+(o+(d[e+6]-o)*n-l)*n-a,a=d[e+1],l=d[e+3],o=d[e+5],a+=(l-a)*n,l+=(o-l)*n,a+=(l-a)*n,Mt(jx(l+(o+(d[e+7]-o)*n-l)*n-a,u)*Xx)}function tv(d,e,n){n=Vx(n)?1:Sm(n)||0,e=Sm(e)||0;var a=Math.max(0,~~(_i(n-e)-1e-8)),l=Kx(d);if(e>n&&(e=1-e,n=1-n,Zx(l),l.totalLength=0),e<0||n<0){var o=Math.abs(~~Math.min(e,n))+1;e+=o,n+=o}l.totalLength||Ha(l);var u=n>1,c=Mm(l,e,Px,!0),f=Mm(l,n,Qx),g=f.segment,m=c.segment,y=f.segIndex,_=c.segIndex,S=f.i,T=c.i,x=_===y,M=S===T&&x,w,E,H,B,N,G,Y,j;if(u||a){for(w=y<_||x&&S<T||M&&f.t<c.t,bm(l,_,T,c.t)&&(_++,w||(y++,M?(f.t=(f.t-c.t)/(1-c.t),S=0):x&&(S-=T))),Math.abs(1-(n-e))<1e-5?y=_-1:!f.t&&y?y--:bm(l,y,S,f.t)&&w&&_++,c.t===1&&(_=(_+1)%l.length),N=[],G=l.length,Y=1+G*a,j=_,Y+=(G-_+y)%G,B=0;B<Y;B++)Wx(N,l[j++%G]);l=N}else if(H=f.t===1?6:lf(g,S,f.t),e!==n)for(E=lf(m,T,M?c.t/f.t:c.t),x&&(H+=E),g.splice(S+H+2),(E||T)&&m.splice(0,T+E),B=l.length;B--;)(B<_||B>y)&&l.splice(B,1);else g.angle=$y(g,S+H,0),S+=H,c=g[S],f=g[S+1],g.length=g.totalLength=0,g.totalPoints=l.totalPoints=8,g.push(c,f,c,f,c,f,c,f);return l.totalLength=0,l}function ib(d,e,n){e=e||0,d.samples||(d.samples=[],d.lookup=[]);var a=~~d.resolution||12,l=1/a,o=d.length,u=d[e],c=d[e+1],f=e?e/6*a:0,g=d.samples,m=d.lookup,y=(e?d.minLength:sf)||sf,_=g[f+n*a-1],S=e?g[f-1]:0,T,x,M,w,E,H,B,N,G,Y,j,I,F,it,et,nt,wt;for(g.length=m.length=0,x=e+2;x<o;x+=6){if(M=d[x+4]-u,w=d[x+2]-u,E=d[x]-u,N=d[x+5]-c,G=d[x+3]-c,Y=d[x+1]-c,H=B=j=I=0,_i(M)<.01&&_i(N)<.01&&_i(E)+_i(Y)<.01)d.length>8&&(d.splice(x,6),x-=6,o-=6);else for(T=1;T<=a;T++)it=l*T,F=1-it,H=B-(B=(it*it*M+3*F*(it*w+F*E))*it),j=I-(I=(it*it*N+3*F*(it*G+F*Y))*it),nt=sn(j*j+H*H),nt<y&&(y=nt),S+=nt,g[f++]=S;u+=M,c+=N}if(_)for(_-=S;f<g.length;f++)g[f]+=_;if(g.length&&y){if(d.totalLength=wt=g[g.length-1]||0,d.minLength=y,wt/y<9999)for(nt=et=0,T=0;T<wt;T+=y)m[nt++]=g[et]<T?++et:et}else d.totalLength=g[0]=0;return e?S-g[e/2-1]:S}function Ha(d,e){var n,a,l;for(l=n=a=0;l<d.length;l++)d[l].resolution=~~e||12,n+=ib(d[l]),a+=d[l].length;return d.totalPoints=a,d.totalLength=n,d}function lf(d,e,n){if(n<=0||n>=1)return 0;var a=d[e],l=d[e+1],o=d[e+2],u=d[e+3],c=d[e+4],f=d[e+5],g=d[e+6],m=d[e+7],y=a+(o-a)*n,_=o+(c-o)*n,S=l+(u-l)*n,T=u+(f-u)*n,x=y+(_-y)*n,M=S+(T-S)*n,w=c+(g-c)*n,E=f+(m-f)*n;return _+=(w-_)*n,T+=(E-T)*n,d.splice(e+2,4,Mt(y),Mt(S),Mt(x),Mt(M),Mt(x+(_-x)*n),Mt(M+(T-M)*n),Mt(_),Mt(T),Mt(w),Mt(E)),d.samples&&d.samples.splice(e/6*d.resolution|0,0,0,0,0,0,0,0),6}function Mm(d,e,n,a){n=n||{},d.totalLength||Ha(d),(e<0||e>1)&&(e=Fy(e));var l=0,o=d[0],u,c,f,g,m,y,_;if(!e)_=y=l=0,o=d[0];else if(e===1)_=1,l=d.length-1,o=d[l],y=o.length-8;else{if(d.length>1){for(f=d.totalLength*e,m=y=0;(m+=d[y++].totalLength)<f;)l=y;o=d[l],g=m-o.totalLength,e=(f-g)/(m-g)||0}u=o.samples,c=o.resolution,f=o.totalLength*e,y=o.lookup.length?o.lookup[~~(f/o.minLength)]||0:Jy(u,f,e),g=y?u[y-1]:0,m=u[y],m<f&&(g=m,m=u[++y]),_=1/c*((f-g)/(m-g)+y%c),y=~~(y/c)*6,a&&_===1&&(y+6<o.length?(y+=6,_=0):l+1<d.length&&(y=_=0,o=d[++l]))}return n.t=_,n.i=y,n.path=d,n.segment=o,n.segIndex=l,n}function wm(d,e,n,a){var l=d[0],o=a||{},u,c,f,g,m,y,_,S,T;if((e<0||e>1)&&(e=Fy(e)),l.lookup||Ha(d),d.length>1){for(f=d.totalLength*e,m=y=0;(m+=d[y++].totalLength)<f;)l=d[y];g=m-l.totalLength,e=(f-g)/(m-g)||0}return u=l.samples,c=l.resolution,f=l.totalLength*e,y=l.lookup.length?l.lookup[e<1?~~(f/l.minLength):l.lookup.length-1]||0:Jy(u,f,e),g=y?u[y-1]:0,m=u[y],m<f&&(g=m,m=u[++y]),_=1/c*((f-g)/(m-g)+y%c)||0,T=1-_,y=~~(y/c)*6,S=l[y],o.x=Mt((_*_*(l[y+6]-S)+3*T*(_*(l[y+4]-S)+T*(l[y+2]-S)))*_+S),o.y=Mt((_*_*(l[y+7]-(S=l[y+1]))+3*T*(_*(l[y+5]-S)+T*(l[y+3]-S)))*_+S),n&&(o.angle=l.totalLength?$y(l,y,_>=1?1-1e-9:_||1e-9):l.angle||0),o}function Il(d,e,n,a,l,o,u){for(var c=d.length,f,g,m,y,_;--c>-1;)for(f=d[c],g=f.length,m=0;m<g;m+=2)y=f[m],_=f[m+1],f[m]=y*e+_*a+o,f[m+1]=y*n+_*l+u;return d._dirty=1,d}function nb(d,e,n,a,l,o,u,c,f){if(!(d===c&&e===f)){n=_i(n),a=_i(a);var g=l%360*Yx,m=Co(g),y=wo(g),_=Math.PI,S=_*2,T=(d-c)/2,x=(e-f)/2,M=m*T+y*x,w=-y*T+m*x,E=M*M,H=w*w,B=E/(n*n)+H/(a*a);B>1&&(n=sn(B)*n,a=sn(B)*a);var N=n*n,G=a*a,Y=(N*G-N*H-G*E)/(N*H+G*E);Y<0&&(Y=0);var j=(o===u?-1:1)*sn(Y),I=j*(n*w/a),F=j*-(a*M/n),it=(d+c)/2,et=(e+f)/2,nt=it+(m*I-y*F),wt=et+(y*I+m*F),ot=(M-I)/n,R=(w-F)/a,P=(-M-I)/n,K=(-w-F)/a,vt=ot*ot+R*R,mt=(R<0?-1:1)*Math.acos(ot/sn(vt)),bt=(ot*K-R*P<0?-1:1)*Math.acos((ot*P+R*K)/sn(vt*(P*P+K*K)));isNaN(bt)&&(bt=_),!u&&bt>0?bt-=S:u&&bt<0&&(bt+=S),mt%=S,bt%=S;var yt=Math.ceil(_i(bt)/(S/4)),at=[],_t=bt/yt,Xt=4/3*wo(_t/2)/(1+Co(_t/2)),Ai=m*n,Ra=y*n,Na=y*-a,cn=m*a,he;for(he=0;he<yt;he++)l=mt+he*_t,M=Co(l),w=wo(l),ot=Co(l+=_t),R=wo(l),at.push(M-Xt*w,w+Xt*M,ot+Xt*R,R-Xt*ot,ot,R);for(he=0;he<at.length;he+=2)M=at[he],w=at[he+1],at[he]=M*Ai+w*Na+nt,at[he+1]=M*Ra+w*cn+wt;return at[he-2]=c,at[he-1]=f,at}}function jo(d){var e=(d+"").replace(Gx,function(I){var F=+I;return F<1e-4&&F>-1e-4?0:F}).match(Lx)||[],n=[],a=0,l=0,o=2/3,u=e.length,c=0,f="ERROR: malformed path: "+d,g,m,y,_,S,T,x,M,w,E,H,B,N,G,Y,j=function(F,it,et,nt){E=(et-F)/3,H=(nt-it)/3,x.push(F+E,it+H,et-E,nt-H,et,nt)};if(!d||!isNaN(e[0])||isNaN(e[1]))return console.log(f),n;for(g=0;g<u;g++)if(N=S,isNaN(e[g])?(S=e[g].toUpperCase(),T=S!==e[g]):g--,y=+e[g+1],_=+e[g+2],T&&(y+=a,_+=l),g||(M=y,w=_),S==="M")x&&(x.length<8?n.length-=1:c+=x.length,xm(x)),a=M=y,l=w=_,x=[y,_],n.push(x),g+=2,S="L";else if(S==="C")x||(x=[0,0]),T||(a=l=0),x.push(y,_,a+e[g+3]*1,l+e[g+4]*1,a+=e[g+5]*1,l+=e[g+6]*1),g+=6;else if(S==="S")E=a,H=l,(N==="C"||N==="S")&&(E+=a-x[x.length-4],H+=l-x[x.length-3]),T||(a=l=0),x.push(E,H,y,_,a+=e[g+3]*1,l+=e[g+4]*1),g+=4;else if(S==="Q")E=a+(y-a)*o,H=l+(_-l)*o,T||(a=l=0),a+=e[g+3]*1,l+=e[g+4]*1,x.push(E,H,a+(y-a)*o,l+(_-l)*o,a,l),g+=4;else if(S==="T")E=a-x[x.length-4],H=l-x[x.length-3],x.push(a+E,l+H,y+(a+E*1.5-y)*o,_+(l+H*1.5-_)*o,a=y,l=_),g+=2;else if(S==="H")j(a,l,a=y,l),g+=1;else if(S==="V")j(a,l,a,l=y+(T?l-a:0)),g+=1;else if(S==="L"||S==="Z")S==="Z"&&(y=M,_=w,x.closed=!0),(S==="L"||_i(a-y)>.5||_i(l-_)>.5)&&(j(a,l,y,_),S==="L"&&(g+=2)),a=y,l=_;else if(S==="A"){if(G=e[g+4],Y=e[g+5],E=e[g+6],H=e[g+7],m=7,G.length>1&&(G.length<3?(H=E,E=Y,m--):(H=Y,E=G.substr(2),m-=2),Y=G.charAt(1),G=G.charAt(0)),B=nb(a,l,+e[g+1],+e[g+2],+e[g+3],+G,+Y,(T?a:0)+E*1,(T?l:0)+H*1),g+=m,B)for(m=0;m<B.length;m++)x.push(B[m]);a=x[x.length-2],l=x[x.length-1]}else console.log(f);return g=x.length,g<6?(n.pop(),g=0):xm(x),n.totalPoints=c+g,n}function ab(d,e){e===void 0&&(e=1);for(var n=d[0],a=0,l=[n,a],o=2;o<d.length;o+=2)l.push(n,a,d[o],a=(d[o]-n)*e/2,n=d[o],-a);return l}function rf(d,e){_i(d[0]-d[2])<1e-4&&_i(d[1]-d[3])<1e-4&&(d=d.slice(2));var n=d.length-2,a=+d[0],l=+d[1],o=+d[2],u=+d[3],c=[a,l,a,l],f=o-a,g=u-l,m=d.nonSmooth||[],y=Math.abs(d[n]-a)<.001&&Math.abs(d[n+1]-l)<.001,_,S,T,x,M,w,E,H,B,N,G,Y,j,I,F;if(!n)return[a,l,a,l,a,l,a,l];for(y&&(d.push(o,u),o=a,u=l,a=d[n-2],l=d[n-1],d.unshift(a,l),n+=4,m=[0,0].concat(m)),e=e||e===0?+e:1,T=2;T<n;T+=2)if(_=a,S=l,a=o,l=u,o=+d[T+2],u=+d[T+3],!(a===o&&l===u)){if(x=f,M=g,f=o-a,g=u-l,m[T]){c.push(a-(a-_)/4,l-(l-S)/4,a,l,a+(o-a)/4,l+(u-l)/4);continue}w=sn(x*x+M*M),E=sn(f*f+g*g),H=sn(Math.pow(f/E+x/w,2)+Math.pow(g/E+M/w,2)),B=(w+E)*e*.25/H,N=a-(a-_)*(w?B/w:0),G=a+(o-a)*(E?B/E:0),Y=a-(N+((G-N)*(w*3/(w+E)+.5)/4||0)),j=l-(l-S)*(w?B/w:0),I=l+(u-l)*(E?B/E:0),F=l-(j+((I-j)*(w*3/(w+E)+.5)/4||0)),c.push(Mt(N+Y),Mt(j+F),Mt(a),Mt(l),Mt(G+Y),Mt(I+F))}return a!==o||l!==u||c.length<4?c.push(Mt(o),Mt(u),Mt(o),Mt(u)):c.length-=2,c.length===2?c.push(a,l,a,l,a,l):y&&(c.splice(0,6),c.length-=6),c.closed=y,c}function ev(d){Ky(d[0])&&(d=[d]);var e="",n=d.length,a,l,o,u;for(l=0;l<n;l++){for(u=d[l],e+="M"+Mt(u[0])+","+Mt(u[1])+" C",a=u.length,o=2;o<a;o++)e+=Mt(u[o++])+","+Mt(u[o++])+" "+Mt(u[o++])+","+Mt(u[o++])+" "+Mt(u[o++])+","+Mt(u[o])+" ";u.closed&&(e+="z")}return e}var ln,za,Df,eu,Gl,Do,Vo,Vl,wi="transform",of=wi+"Origin",iv,nv=function(e){var n=e.ownerDocument||e;for(!(wi in e.style)&&("msTransform"in e.style)&&(wi="msTransform",of=wi+"Origin");n.parentNode&&(n=n.parentNode););if(za=window,Vo=new tr,n){ln=n,Df=n.documentElement,eu=n.body,Vl=ln.createElementNS("http://www.w3.org/2000/svg","g"),Vl.style.transform="none";var a=n.createElement("div"),l=n.createElement("div"),o=n&&(n.body||n.firstElementChild);o&&o.appendChild&&(o.appendChild(a),a.appendChild(l),a.style.position="static",a.style.transform="translate3d(0,0,1px)",iv=l.offsetParent!==a,o.removeChild(a))}return n},sb=function(e){for(var n,a;e&&e!==eu;)a=e._gsap,a&&a.uncache&&a.get(e,"x"),a&&!a.scaleX&&!a.scaleY&&a.renderTransform&&(a.scaleX=a.scaleY=1e-4,a.renderTransform(1,a),n?n.push(a):n=[a]),e=e.parentNode;return n},av=[],sv=[],lb=function(){return za.pageYOffset||ln.scrollTop||Df.scrollTop||eu.scrollTop||0},rb=function(){return za.pageXOffset||ln.scrollLeft||Df.scrollLeft||eu.scrollLeft||0},Rf=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},ob=function d(e){if(za.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return d(e)},Nh=function d(e,n){if(e.parentNode&&(ln||nv(e))){var a=Rf(e),l=a?a.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",o=a?n?"rect":"g":"div",u=n!==2?0:100,c=n===3?100:0,f={position:"absolute",display:"block",pointerEvents:"none",margin:"0",padding:"0"},g=ln.createElementNS?ln.createElementNS(l.replace(/^https/,"http"),o):ln.createElement(o);return n&&(a?(Do||(Do=d(e)),g.setAttribute("width",.01),g.setAttribute("height",.01),g.setAttribute("transform","translate("+u+","+c+")"),g.setAttribute("fill","transparent"),Do.appendChild(g)):(Gl||(Gl=d(e),Object.assign(Gl.style,f)),Object.assign(g.style,f,{width:"0.1px",height:"0.1px",top:c+"px",left:u+"px"}),Gl.appendChild(g))),g}throw"Need document and parent."},ub=function(e){for(var n=new tr,a=0;a<e.numberOfItems;a++)n.multiply(e.getItem(a).matrix);return n},cb=function(e){var n=e.getCTM(),a;return n||(a=e.style[wi],e.style[wi]="none",e.appendChild(Vl),n=Vl.getCTM(),e.removeChild(Vl),a?e.style[wi]=a:e.style.removeProperty(wi.replace(/([A-Z])/g,"-$1").toLowerCase())),n||Vo.clone()},hb=function(e,n){var a=Rf(e),l=e===a,o=a?av:sv,u=e.parentNode,c=u&&!a&&u.shadowRoot&&u.shadowRoot.appendChild?u.shadowRoot:u,f,g,m,y,_,S;if(e===za)return e;if(o.length||o.push(Nh(e,1),Nh(e,2),Nh(e,3)),f=a?Do:Gl,a)l?(m=cb(e),y=-m.e/m.a,_=-m.f/m.d,g=Vo):e.getBBox?(m=e.getBBox(),g=e.transform?e.transform.baseVal:{},g=g.numberOfItems?g.numberOfItems>1?ub(g):g.getItem(0).matrix:Vo,y=g.a*m.x+g.c*m.y,_=g.b*m.x+g.d*m.y):(g=new tr,y=_=0),n&&e.tagName.toLowerCase()==="g"&&(y=_=0),(l||!e.getBoundingClientRect().width?a:u).appendChild(f),f.setAttribute("transform","matrix("+g.a+","+g.b+","+g.c+","+g.d+","+(g.e+y)+","+(g.f+_)+")");else{if(y=_=0,iv)for(g=e.offsetParent,m=e;m&&(m=m.parentNode)&&m!==g&&m.parentNode;)(za.getComputedStyle(m)[wi]+"").length>4&&(y=m.offsetLeft,_=m.offsetTop,m=0);if(S=za.getComputedStyle(e),S.position!=="absolute"&&S.position!=="fixed")for(g=e.offsetParent;u&&u!==g;)y+=u.scrollLeft||0,_+=u.scrollTop||0,u=u.parentNode;m=f.style,m.top=e.offsetTop-_+"px",m.left=e.offsetLeft-y+"px",m[wi]=S[wi],m[of]=S[of],m.position=S.position==="fixed"?"fixed":"absolute",c.appendChild(f)}return f},Bh=function(e,n,a,l,o,u,c){return e.a=n,e.b=a,e.c=l,e.d=o,e.e=u,e.f=c,e},tr=(function(){function d(n,a,l,o,u,c){n===void 0&&(n=1),a===void 0&&(a=0),l===void 0&&(l=0),o===void 0&&(o=1),u===void 0&&(u=0),c===void 0&&(c=0),Bh(this,n,a,l,o,u,c)}var e=d.prototype;return e.inverse=function(){var a=this.a,l=this.b,o=this.c,u=this.d,c=this.e,f=this.f,g=a*u-l*o||1e-10;return Bh(this,u/g,-l/g,-o/g,a/g,(o*f-u*c)/g,-(a*f-l*c)/g)},e.multiply=function(a){var l=this.a,o=this.b,u=this.c,c=this.d,f=this.e,g=this.f,m=a.a,y=a.c,_=a.b,S=a.d,T=a.e,x=a.f;return Bh(this,m*l+_*u,m*o+_*c,y*l+S*u,y*o+S*c,f+T*l+x*u,g+T*o+x*c)},e.clone=function(){return new d(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(a){var l=this.a,o=this.b,u=this.c,c=this.d,f=this.e,g=this.f;return l===a.a&&o===a.b&&u===a.c&&c===a.d&&f===a.e&&g===a.f},e.apply=function(a,l){l===void 0&&(l={});var o=a.x,u=a.y,c=this.a,f=this.b,g=this.c,m=this.d,y=this.e,_=this.f;return l.x=o*c+u*g+y||0,l.y=o*f+u*m+_||0,l},d})();function zs(d,e,n,a){if(!d||!d.parentNode||(ln||nv(d)).documentElement===d)return new tr;var l=sb(d),o=Rf(d),u=o?av:sv,c=hb(d,n),f=u[0].getBoundingClientRect(),g=u[1].getBoundingClientRect(),m=u[2].getBoundingClientRect(),y=c.parentNode,_=!a&&ob(d),S=new tr((g.left-f.left)/100,(g.top-f.top)/100,(m.left-f.left)/100,(m.top-f.top)/100,f.left+(_?0:rb()),f.top+(_?0:lb()));if(y.removeChild(c),l)for(f=l.length;f--;)g=l[f],g.scaleX=g.scaleY=0,g.renderTransform(1,g);return e?S.inverse():S}var fb="x,translateX,left,marginLeft,xPercent".split(","),db="y,translateY,top,marginTop,yPercent".split(","),pb=Math.PI/180,gi,lv,bs,uf,kh,Cm,gb=function(){return gi||typeof window<"u"&&(gi=window.gsap)&&gi.registerPlugin&&gi},Rl=function(e,n,a,l){for(var o=n.length,u=l===2?0:l,c=0;c<o;c++)e[u]=parseFloat(n[c][a]),l===2&&(e[u+1]=0),u+=2;return e},Cs=function(e,n,a){return parseFloat(e._gsap.get(e,n,a||"px"))||0},rv=function(e){var n=e[0],a=e[1],l;for(l=2;l<e.length;l+=2)n=e[l]+=n,a=e[l+1]+=a},Am=function(e,n,a,l,o,u,c,f,g){if(c.type==="cubic")n=[n];else{c.fromCurrent!==!1&&n.unshift(Cs(a,l,f),o?Cs(a,o,g):0),c.relative&&rv(n);var m=o?rf:ab;n=[m(n,c.curviness)]}return n=u(ov(n,a,c)),Po(e,a,l,n,"x",f),o&&Po(e,a,o,n,"y",g),Ha(n,c.resolution||(c.curviness===0?20:12))},mb=function(e){return e},yb=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,Em=function(e,n,a){var l=zs(e),o=0,u=0,c;return(e.tagName+"").toLowerCase()==="svg"?(c=e.viewBox.baseVal,c.width||(c={width:+e.getAttribute("width"),height:+e.getAttribute("height")})):c=n&&e.getBBox&&e.getBBox(),n&&n!=="auto"&&(o=n.push?n[0]*(c?c.width:e.offsetWidth||0):n.x,u=n.push?n[1]*(c?c.height:e.offsetHeight||0):n.y),a.apply(o||u?l.apply({x:o,y:u}):{x:l.e,y:l.f})},cf=function(e,n,a,l){var o=zs(e.parentNode,!0,!0),u=o.clone().multiply(zs(n)),c=Em(e,a,o),f=Em(n,l,o),g=f.x,m=f.y,y;return u.e=u.f=0,l==="auto"&&n.getTotalLength&&n.tagName.toLowerCase()==="path"&&(y=n.getAttribute("d").match(yb)||[],y=u.apply({x:+y[0],y:+y[1]}),g+=y.x,m+=y.y),y&&(y=u.apply(n.getBBox()),g-=y.x,m-=y.y),u.e=g-c.x,u.f=m-c.y,u},ov=function(e,n,a){var l=a.align,o=a.matrix,u=a.offsetX,c=a.offsetY,f=a.alignOrigin,g=e[0][0],m=e[0][1],y=Cs(n,"x"),_=Cs(n,"y"),S,T,x;return!e||!e.length?Uo("M0,0L0,0"):(l&&(l==="self"||(S=uf(l)[0]||n)===n?Il(e,1,0,0,1,y-g,_-m):(f&&f[2]!==!1?gi.set(n,{transformOrigin:f[0]*100+"% "+f[1]*100+"%"}):f=[Cs(n,"xPercent")/-100,Cs(n,"yPercent")/-100],T=cf(n,S,f,"auto"),x=T.apply({x:g,y:m}),Il(e,T.a,T.b,T.c,T.d,y+T.e-(x.x-T.e),_+T.f-(x.y-T.f)))),o?Il(e,o.a,o.b,o.c,o.d,o.e,o.f):(u||c)&&Il(e,1,0,0,1,u||0,c||0),e)},Po=function(e,n,a,l,o,u){var c=n._gsap,f=c.harness,g=f&&f.aliases&&f.aliases[a],m=g&&g.indexOf(",")<0?g:a,y=e._pt=new lv(e._pt,n,m,0,0,mb,0,c.set(n,m,e));y.u=bs(c.get(n,m,u))||0,y.path=l,y.pp=o,e._props.push(m)},vb=function(e,n){return function(a){return e||n!==1?tv(a,e,n):a}},uv={version:"3.14.2",name:"motionPath",register:function(e,n,a){gi=e,bs=gi.utils.getUnit,uf=gi.utils.toArray,kh=gi.core.getStyleSaver,Cm=gi.core.reverting||function(){},lv=a},init:function(e,n,a){if(!gi)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;(!(typeof n=="object"&&!n.style)||!n.path)&&(n={path:n});var l=[],o=n,u=o.path,c=o.autoRotate,f=o.unitX,g=o.unitY,m=o.x,y=o.y,_=u[0],S=vb(n.start,"end"in n?n.end:1),T,x;if(this.rawPaths=l,this.target=e,this.tween=a,this.styles=kh&&kh(e,"transform"),(this.rotate=c||c===0)&&(this.rOffset=parseFloat(c)||0,this.radians=!!n.useRadians,this.rProp=n.rotation||"rotation",this.rSet=e._gsap.set(e,this.rProp,this),this.ru=bs(e._gsap.get(e,this.rProp))||0),Array.isArray(u)&&!("closed"in u)&&typeof _!="number"){for(x in _)!m&&~fb.indexOf(x)?m=x:!y&&~db.indexOf(x)&&(y=x);m&&y?l.push(Am(this,Rl(Rl([],u,m,0),u,y,1),e,m,y,S,n,f||bs(u[0][m]),g||bs(u[0][y]))):m=y=0;for(x in _)x!==m&&x!==y&&l.push(Am(this,Rl([],u,x,2),e,x,0,S,n,bs(u[0][x])))}else T=S(ov(Uo(n.path),e,n)),Ha(T,n.resolution),l.push(T),Po(this,e,n.x||"x",T,"x",n.unitX||"px"),Po(this,e,n.y||"y",T,"y",n.unitY||"px");a.vars.immediateRender&&this.render(a.progress(),this)},render:function(e,n){var a=n.rawPaths,l=a.length,o=n._pt;if(n.tween._time||!Cm()){for(e>1?e=1:e<0&&(e=0);l--;)wm(a[l],e,!l&&n.rotate,a[l]);for(;o;)o.set(o.t,o.p,o.path[o.pp]+o.u,o.d,e),o=o._next;n.rotate&&n.rSet(n.target,n.rProp,a[0].angle*(n.radians?pb:1)+n.rOffset+n.ru,n,e)}else n.styles.revert()},getLength:function(e){return Ha(Uo(e)).totalLength},sliceRawPath:tv,getRawPath:Uo,pointsToSegment:rf,stringToRawPath:jo,rawPathToString:ev,transformRawPath:Il,getGlobalMatrix:zs,getPositionOnPath:wm,cacheRawPathMeasurements:Ha,convertToPath:function(e,n){return uf(e).map(function(a){return eb(a,n!==!1)})},convertCoordinates:function(e,n,a){var l=zs(n,!0,!0).multiply(zs(e));return a?l.apply(a):l},getAlignMatrix:cf,getRelativePosition:function(e,n,a,l){var o=cf(e,n,a,l);return{x:o.e,y:o.f}},arrayToRawPath:function(e,n){n=n||{};var a=Rl(Rl([],e,n.x||"x",0),e,n.y||"y",1);return n.relative&&rv(a),[n.type==="cubic"?a:rf(a,n.curviness)]}};gb()&&gi.registerPlugin(uv);var Fn=(d=>(d.World="world",d.Battle="battle",d))(Fn||{});class _b{emitter=new j_;emit(e,n){this.emitter.emit(e,n)}on(e,n){this.emitter.on(e,n)}off(e,n){this.emitter.off(e,n)}destroy(){this.emitter.removeAllListeners()}}let rt;const Sb=()=>{rt&&rt.destroy(),rt=new _b};var xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bb(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var cv={exports:{}};(function(d,e){(function(){var n,a;a=function(l){return d.exports=l},n={linear:function(l,o,u,c){return u*l/c+o},easeInQuad:function(l,o,u,c){return u*(l/=c)*l+o},easeOutQuad:function(l,o,u,c){return-u*(l/=c)*(l-2)+o},easeInOutQuad:function(l,o,u,c){return(l/=c/2)<1?u/2*l*l+o:-u/2*(--l*(l-2)-1)+o},easeInCubic:function(l,o,u,c){return u*(l/=c)*l*l+o},easeOutCubic:function(l,o,u,c){return u*((l=l/c-1)*l*l+1)+o},easeInOutCubic:function(l,o,u,c){return(l/=c/2)<1?u/2*l*l*l+o:u/2*((l-=2)*l*l+2)+o},easeInQuart:function(l,o,u,c){return u*(l/=c)*l*l*l+o},easeOutQuart:function(l,o,u,c){return-u*((l=l/c-1)*l*l*l-1)+o},easeInOutQuart:function(l,o,u,c){return(l/=c/2)<1?u/2*l*l*l*l+o:-u/2*((l-=2)*l*l*l-2)+o},easeInQuint:function(l,o,u,c){return u*(l/=c)*l*l*l*l+o},easeOutQuint:function(l,o,u,c){return u*((l=l/c-1)*l*l*l*l+1)+o},easeInOutQuint:function(l,o,u,c){return(l/=c/2)<1?u/2*l*l*l*l*l+o:u/2*((l-=2)*l*l*l*l+2)+o},easeInSine:function(l,o,u,c){return-u*Math.cos(l/c*(Math.PI/2))+u+o},easeOutSine:function(l,o,u,c){return u*Math.sin(l/c*(Math.PI/2))+o},easeInOutSine:function(l,o,u,c){return-u/2*(Math.cos(Math.PI*l/c)-1)+o},easeInExpo:function(l,o,u,c){return l===0?o:u*Math.pow(2,10*(l/c-1))+o},easeOutExpo:function(l,o,u,c){return l===c?o+u:u*(-Math.pow(2,-10*l/c)+1)+o},easeInOutExpo:function(l,o,u,c){return(l/=c/2)<1?u/2*Math.pow(2,10*(l-1))+o:u/2*(-Math.pow(2,-10*--l)+2)+o},easeInCirc:function(l,o,u,c){return-u*(Math.sqrt(1-(l/=c)*l)-1)+o},easeOutCirc:function(l,o,u,c){return u*Math.sqrt(1-(l=l/c-1)*l)+o},easeInOutCirc:function(l,o,u,c){return(l/=c/2)<1?-u/2*(Math.sqrt(1-l*l)-1)+o:u/2*(Math.sqrt(1-(l-=2)*l)+1)+o},easeInElastic:function(l,o,u,c){var f,g,m;return m=1.70158,g=0,f=u,l===0||(l/=c),g||(g=c*.3),f<Math.abs(u)?(f=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/f),-(f*Math.pow(2,10*(l-=1))*Math.sin((l*c-m)*(2*Math.PI)/g))+o},easeOutElastic:function(l,o,u,c){var f,g,m;return m=1.70158,g=0,f=u,l===0||(l/=c),g||(g=c*.3),f<Math.abs(u)?(f=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/f),f*Math.pow(2,-10*l)*Math.sin((l*c-m)*(2*Math.PI)/g)+u+o},easeInOutElastic:function(l,o,u,c){var f,g,m;return m=1.70158,g=0,f=u,l===0||(l/=c/2),g||(g=c*(.3*1.5)),f<Math.abs(u)?(f=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/f),l<1?-.5*(f*Math.pow(2,10*(l-=1))*Math.sin((l*c-m)*(2*Math.PI)/g))+o:f*Math.pow(2,-10*(l-=1))*Math.sin((l*c-m)*(2*Math.PI)/g)*.5+u+o},easeInBack:function(l,o,u,c,f){return f===void 0&&(f=1.70158),u*(l/=c)*l*((f+1)*l-f)+o},easeOutBack:function(l,o,u,c,f){return f===void 0&&(f=1.70158),u*((l=l/c-1)*l*((f+1)*l+f)+1)+o},easeInOutBack:function(l,o,u,c,f){return f===void 0&&(f=1.70158),(l/=c/2)<1?u/2*(l*l*(((f*=1.525)+1)*l-f))+o:u/2*((l-=2)*l*(((f*=1.525)+1)*l+f)+2)+o},easeInBounce:function(l,o,u,c){var f;return f=n.easeOutBounce(c-l,0,u,c),u-f+o},easeOutBounce:function(l,o,u,c){return(l/=c)<1/2.75?u*(7.5625*l*l)+o:l<2/2.75?u*(7.5625*(l-=1.5/2.75)*l+.75)+o:l<2.5/2.75?u*(7.5625*(l-=2.25/2.75)*l+.9375)+o:u*(7.5625*(l-=2.625/2.75)*l+.984375)+o},easeInOutBounce:function(l,o,u,c){var f;return l<c/2?(f=n.easeInBounce(l*2,0,u,c),f*.5+o):(f=n.easeOutBounce(l*2-c,0,u,c),f*.5+u*.5+o)}},a(n)}).call(xb)})(cv);var Tb=cv.exports;const Om=bb(Tb);function iu(d,e){if(d){if(typeof d=="function")return d;if(typeof d=="string")return Om[d]}else return Om[e]}class Mb{constructor(e){this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new Ma(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var e;(e=this.viewport.options.events.domElement)==null||e.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.visible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),a=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!a||!a.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.visible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const a=e.global.x-this.last.x,l=e.global.y-this.last.y;(this.checkThreshold(a)||this.checkThreshold(l))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.visible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new le;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.visible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const Nl=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class wb{constructor(e){this.viewport=e,this.list=[],this.plugins={}}add(e,n,a=Nl.length){const l=this.plugins[e];l&&l.destroy(),this.plugins[e]=n;const o=Nl.indexOf(e);o!==-1&&Nl.splice(o,1),Nl.splice(a,0,e),this.sort()}get(e,n){var a;return n&&(a=this.plugins[e])!=null&&a.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of Nl)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const a of this.list)a.down(e)&&(n=!0);return n}move(e){let n=!1;for(const a of this.viewport.plugins.list)a.move(e)&&(n=!0);return n}up(e){let n=!1;for(const a of this.list)a.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const a of this.list)a.wheel(e)&&(n=!0);return n}}class Si{constructor(e){this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}const Cb={removeOnInterrupt:!1,ease:"linear",time:1e3};class Ab extends Si{constructor(e,n={}){super(e),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},Cb,n),this.options.ease=iu(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new le(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const a=this.parent.width,l=this.parent.height;this.complete(),(a!==this.parent.width||l!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const a=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const l=this.startWidth,o=this.deltaWidth;this.parent.fitWidth(l+o*a,this.keepCenter,this.height===null)}if(this.height!==null){const l=this.startHeight,o=this.deltaHeight;this.parent.fitHeight(l+o*a,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const l=this.startX,o=this.startY,u=this.deltaX,c=this.deltaY,f=new le(this.parent.x,this.parent.y);this.parent.moveCenter(l+u*a,o+c*a),this.parent.emit("moved",{viewport:this.parent,original:f,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const Eb={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class Ob extends Si{constructor(e,n={}){super(e),this.options=Object.assign({},Eb,n),this.ease=iu(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const a=this.options.underflow.toLowerCase();a==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=a.indexOf("left")!==-1?-1:a.indexOf("right")!==-1?1:0,this.underflowY=a.indexOf("top")!==-1?-1:a.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,a=typeof e.y>"u"?0:e.y,l=typeof e.width>"u"?this.parent.worldWidth:e.width,o=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>l,top:this.parent.top<a,bottom:this.parent.bottom>o,topLeft:new le(n*this.parent.scale.x,a*this.parent.scale.y),bottomRight:new le(l*this.parent.scale.x-this.parent.screenWidth,o*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new le(0,0),bottomRight:new le(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let a,l=this.parent.plugins.get("decelerate",!0);l&&(l.x||l.y)&&(l.x&&l.percentChangeX===((e=l.options)==null?void 0:e.friction)||l.y&&l.percentChangeY===((n=l.options)==null?void 0:n.friction))&&(a=this.oob(),(a.left&&this.left||a.right&&this.right)&&(l.percentChangeX=this.options.friction),(a.top&&this.top||a.bottom&&this.bottom)&&(l.percentChangeY=this.options.friction));const o=this.parent.plugins.get("drag",!0)||{},u=this.parent.plugins.get("pinch",!0)||{};if(l=l||{},!(o!=null&&o.active)&&!(u!=null&&u.active)&&(!this.toX||!this.toY)&&(!l.x||!l.y)){a=a||this.oob();const c=a.topLeft,f=a.bottomRight;if(!this.toX&&!l.x){let g=null;a.left&&this.left?g=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-c.x:a.right&&this.right&&(g=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-f.x),g!==null&&this.parent.x!==g&&(this.toX={time:0,start:this.parent.x,delta:g-this.parent.x,end:g},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!l.y){let g=null;a.top&&this.top?g=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-c.y:a.bottom&&this.bottom&&(g=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-f.y),g!==null&&this.parent.y!==g&&(this.toY={time:0,start:this.parent.y,delta:g-this.parent.y,end:g},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const Hb={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class zb extends Si{constructor(e,n={}){super(e),this.options=Object.assign({},Hb,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new le(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let a=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,a=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,a=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,a=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,a=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,a=!0);a&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let a=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,a=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,a=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,a=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,a=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,a=!0);a&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const Ub={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class Db extends Si{constructor(e,n={}){super(e),this.options=Object.assign({},Ub,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const a=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/a,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const a=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/a,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const a=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/a,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const a=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/a,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const o=this.options.minScale;e.x=typeof o.x>"u"?null:o.x,e.y=typeof o.y>"u"?null:o.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const o=this.options.maxScale;n.x=typeof o.x>"u"?null:o.x,n.y=typeof o.y>"u"?null:o.y}let a=this.parent.scale.x,l=this.parent.scale.y;e.x!==null&&a<e.x&&(a=e.x),n.x!==null&&a>n.x&&(a=n.x),e.y!==null&&l<e.y&&(l=e.y),n.y!==null&&l>n.y&&(l=n.y),(a!==this.parent.scale.x||l!==this.parent.scale.y)&&(this.parent.scale.set(a,l),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const Rb={friction:.98,bounce:.8,minSpeed:.01},Bn=16;class Nb extends Si{constructor(e,n={}){super(e),this.options=Object.assign({},Rb,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",a=>this.handleMoved(a))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const a=e-n.time;this.x=(this.parent.x-n.x)/a,this.y=(this.parent.y-n.y)/a,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,a=this.timeSinceRelease,l=this.timeSinceRelease+e;if(this.x){const o=this.percentChangeX,u=Math.log(o);this.parent.x+=this.x*Bn/u*(Math.pow(o,l/Bn)-Math.pow(o,a/Bn)),this.x*=Math.pow(this.percentChangeX,e/Bn)}if(this.y){const o=this.percentChangeY,u=Math.log(o);this.parent.y+=this.y*Bn/u*(Math.pow(o,l/Bn)-Math.pow(o,a/Bn)),this.y*=Math.pow(this.percentChangeY,e/Bn)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const Bb={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class kb extends Si{constructor(e,n={}){super(e),this.windowEventHandlers=[],this.options=Object.assign({},Bb,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=l=>{e.includes(l.code)&&(this.keyIsPressed=!0)},a=l=>{e.includes(l.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",a),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){typeof window>"u"||(window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",a=this.parent.input.count();return!!((a===1||a>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},(this.parent.parent||this.parent).toLocal(this.last,void 0,this.last),this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,a=e.global.y,l=this.parent.input.count();if(l===1||l>1&&!this.parent.plugins.get("pinch",!0)){const o={x:n,y:a};(this.parent.parent||this.parent).toLocal(o,void 0,o);const u=o.x-this.last.x,c=o.y-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(u)||this.yDirection&&this.parent.input.checkThreshold(c))return this.xDirection&&(this.parent.x+=(o.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(o.y-this.last.y)*this.options.factor),this.last=o,this.moved||this.parent.emit("drag-start",{event:e,screen:new le(this.last.x,this.last.y),world:this.parent.toWorld(new le(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const a=n[0];return a.last&&(this.last={x:a.last.x,y:a.last.y},this.current=a.id),this.moved=!1,!0}else if(this.last&&this.moved){const a=new le(this.last.x,this.last.y);return(this.parent.parent||this.parent).toGlobal(a,a,!0),this.parent.emit("drag-end",{event:e,screen:a,world:this.parent.toWorld(a),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const a=e.deltaMode?this.options.lineHeight:1,l=[e.deltaX,e.deltaY],[o,u]=this.options.wheelSwapAxes?l.reverse():l;return this.xDirection&&(this.parent.x+=o*a*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=u*a*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const Lb={speed:0,acceleration:null,radius:null};class Ib extends Si{constructor(e,n,a={}){super(e),this.target=n,this.options=Object.assign({},Lb,a),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let a=this.target.x,l=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const c=Math.atan2(this.target.y-n.y,this.target.x-n.x);a=this.target.x-Math.cos(c)*this.options.radius,l=this.target.y-Math.sin(c)*this.options.radius}else return;const o=a-n.x,u=l-n.y;if(o||u)if(this.options.speed)if(this.options.acceleration){const c=Math.atan2(l-n.y,a-n.x),f=Math.sqrt(Math.pow(o,2)+Math.pow(u,2));if(f){const g=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);f>g?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const m=Math.cos(c)*this.velocity.x,y=Math.sin(c)*this.velocity.y,_=Math.abs(m)>Math.abs(o)?a:n.x+m,S=Math.abs(y)>Math.abs(u)?l:n.y+y;this.parent.moveCenter(_,S),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const c=Math.atan2(l-n.y,a-n.x),f=Math.cos(c)*this.options.speed,g=Math.sin(c)*this.options.speed,m=Math.abs(f)>Math.abs(o)?a:n.x+f,y=Math.abs(g)>Math.abs(u)?l:n.y+g;this.parent.moveCenter(m,y),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(a,l),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const Gb={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class qb extends Si{constructor(e,n={}){super(e),this.options=Object.assign({},Gb,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,a=e.global.y;if(this.radiusSquared){const l=this.parent.toScreen(this.parent.center);if(Math.pow(l.x-n,2)+Math.pow(l.y-a,2)>=this.radiusSquared){const o=Math.atan2(l.y-a,l.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(o))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(o))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(o)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(o)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&a<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&a>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const Yb={noDrag:!1,percent:1,center:null,factor:1,axis:"all"},Xb=new le;class jb extends Si{constructor(e,n={}){super(e),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},Yb,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const{x:n,y:a}=(this.parent.parent||this.parent).toLocal(e.global,void 0,Xb),l=this.parent.input.touches;if(l.length>=2){const o=l[0],u=l[1],c=o.last&&u.last?Math.sqrt(Math.pow(u.last.x-o.last.x,2)+Math.pow(u.last.y-o.last.y,2)):null;if(o.id===e.pointerId?o.last={x:n,y:a,data:e}:u.id===e.pointerId&&(u.last={x:n,y:a,data:e}),c){let f;const g=new le(o.last.x+(u.last.x-o.last.x)/2,o.last.y+(u.last.y-o.last.y)/2);this.options.center||(f=this.parent.toLocal(g,this.parent.parent||this.parent));let m=Math.sqrt(Math.pow(u.last.x-o.last.x,2)+Math.pow(u.last.y-o.last.y,2));m=m===0?m=1e-10:m;const y=(1-c/m)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=y),this.isAxisY()&&(this.parent.scale.y+=y),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:g});const _=this.parent.plugins.get("clamp-zoom",!0);if(_&&_.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const S=(this.parent.parent||this.parent).toLocal(f,this.parent);this.parent.x+=(g.x-S.x)*this.options.factor,this.parent.y+=(g.y-S.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(g.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(g.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=g,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const Vb={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class Pb extends Si{constructor(e,n,a,l={}){super(e),this.options=Object.assign({},Vb,l),this.ease=iu(l.ease,"easeInOutSine"),this.x=n,this.y=a,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let a,l,o;const u=this.startX,c=this.startY,f=this.deltaX,g=this.deltaY;if(n.time>this.options.time)a=!0,l=u+f,o=c+g;else{const m=this.ease(n.time,0,1,this.options.time);l=u+f*m,o=c+g*m}this.options.topLeft?this.parent.moveCorner(l,o):this.parent.moveCenter(l,o),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),a&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const Qb={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class Zb extends Si{constructor(e,n={}){super(e),this.options=Object.assign({},Qb,n),this.ease=iu(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,a=this.parent.screenWidth/this.xScale,l=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:a-e,deltaY:l-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const a=this.snapping;if(a.time+=e,a.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const o=this.snapping,u=this.ease(o.time,o.startX,o.deltaX,this.options.time),c=this.ease(o.time,o.startY,o.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/u,this.parent.scale.y=this.parent.screenHeight/c}const l=this.parent.plugins.get("clamp-zoom",!0);l&&l.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const Wb={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class Kb extends Si{constructor(e,n={}){super(e),this.options=Object.assign({},Wb,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){typeof window>"u"||(window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let a;this.options.center||(a=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const l=this.parent.plugins.get("clamp-zoom",!0);if(l&&l.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const o=this.parent.parent||this.parent;o.toLocal(a,this.parent,a);const u=o.toLocal(e);this.parent.x+=u.x-a.x,this.parent.y+=u.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,typeof this.options.smooth=="number"&&this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),a=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,l=Math.pow(2,(1+this.options.percent)*a);let o;this.options.center||(o=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=l),this.isAxisY()&&(this.parent.scale.y*=l),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const u=this.parent.plugins.get("clamp-zoom",!0);if(u&&u.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const c=this.parent.parent||this.parent;c.toLocal(o,this.parent,o);const f=c.toLocal(n);this.parent.x+=f.x-o.x,this.parent.y+=f.y-o.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),a=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,l=Math.pow(2,(1+this.options.percent)*a);if(this.options.smooth){const o={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+o.x)*l-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+o.y)*l-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let o;this.options.center||(o=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=l),this.isAxisY()&&(this.parent.scale.y*=l),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const u=this.parent.plugins.get("clamp-zoom",!0);if(u&&u.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const c=this.parent.parent||this.parent;c.toLocal(o,this.parent,o);const f=c.toLocal(n);this.parent.x+=f.x-o.x,this.parent.y+=f.y-o.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}const Fb={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:V_.shared,allowPreserveDragOutside:!1};class Jb extends It{constructor(e){super(),this._disableOnContextMenu=n=>n.preventDefault(),this.options={...Fb,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new Mb(this),this.plugins=new wb(this)}destroy(e){var n;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((n=this.options.events.domElement)==null||n.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Ma(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=typeof window>"u"?0:window.innerWidth,n=typeof window>"u"?0:window.innerHeight,a,l){this.screenWidth=e,this.screenHeight=n,typeof a<"u"&&(this._worldWidth=a),typeof l<"u"&&(this._worldHeight=l),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new Ma(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new le(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new le(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new le(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,a;typeof e[0]=="number"?(n=e[0],a=e[1]):(n=e[0].x,a=e[0].y);const l=(this.worldScreenWidth/2-n)*this.scale.x,o=(this.worldScreenHeight/2-a)*this.scale.y;return(this.x!==l||this.y!==o)&&(this.position.set(l,o),this.plugins.reset(),this.dirty=!0),this}get corner(){return new le(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,a;return e.length===1?(n=-e[0].x*this.scale.x,a=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,a=-e[1]*this.scale.y),(n!==this.x||a!==this.y)&&(this.position.set(n,a),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const a=this.screenWidth/e,l=this.screenHeight/n;return Math.min(a,l)}findCover(e,n){const a=this.screenWidth/e,l=this.screenHeight/n;return Math.max(a,l)}fitWidth(e=this.worldWidth,n,a=!0,l){let o;n&&(o=this.center),this.scale.x=this.screenWidth/e,a&&(this.scale.y=this.scale.x);const u=this.plugins.get("clamp-zoom",!0);return!l&&u&&u.clamp(),n&&o&&this.moveCenter(o),this}fitHeight(e=this.worldHeight,n,a=!0,l){let o;n&&(o=this.center),this.scale.y=this.screenHeight/e,a&&(this.scale.x=this.scale.y);const u=this.plugins.get("clamp-zoom",!0);return!l&&u&&u.clamp(),n&&o&&this.moveCenter(o),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const a=this.plugins.get("clamp-zoom",!0);return a&&a.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,a=this.worldHeight){let l;e&&(l=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/a,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const o=this.plugins.get("clamp-zoom",!0);return o&&o.clamp(),e&&l&&this.moveCenter(l),this}setZoom(e,n){let a;n&&(a=this.center),this.scale.set(e);const l=this.plugins.get("clamp-zoom",!0);return l&&l.clamp(),n&&a&&this.moveCenter(a),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new Zb(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new le(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new Ma(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new kb(this,e)),this}clamp(e){return this.plugins.add("clamp",new zb(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new Nb(this,e)),this}bounce(e){return this.plugins.add("bounce",new Ob(this,e)),this}pinch(e){return this.plugins.add("pinch",new jb(this,e)),this}snap(e,n,a){return this.plugins.add("snap",new Pb(this,e,n,a)),this}follow(e,n){return this.plugins.add("follow",new Ib(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new Kb(this,e)),this}animate(e){return this.plugins.add("animate",new Ab(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new Db(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new qb(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,a,l,o){o&&(a>this.worldScreenWidth||l>this.worldScreenHeight)&&(this.fit(!0,a,l),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let u=!1;e<this.left?(this.left=e,u=!0):e+a>this.right&&(this.right=e+a,u=!0),n<this.top?(this.top=n,u=!0):n+l>this.bottom&&(this.bottom=n+l,u=!0),u&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const Et={Player:"player",Enemy:"enemy",Neutral:"neutral"},xs={Idle:"idle",Dead:"dead"},Bt={Obstacle:"obstacle",Flat:"flat",Hill:"hill",Cliff:"cliff"},Z={Idle:"idle",PlayerMoving:"player_moving",PlayerAttacking:"player_attacking",EnemyTurn:"enemy_turn",SkillTargeting:"skill_targeting",Initializing:"initializing",Ended:"ended"},Yt={Preparing:"preparing",Playing:"playing",Victory:"victory",Defeat:"defeat"},pi=128,Nf=1,Bf=16777215,hv=.85,Qo=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}],hf={[Bt.Obstacle]:{id:Bt.Obstacle,name:"Obstacle",color:"#4b6f44",canPatch:!1,canBeSeed:!0,moveCost:999,defenseBonus:0,blocksMovement:!0,blocksLineOfSight:!0},[Bt.Flat]:{id:Bt.Flat,name:"Flat",color:"#7c9a4a",canPatch:!0,canBeSeed:!1,moveCost:10,defenseBonus:0,blocksMovement:!1,blocksLineOfSight:!1},[Bt.Hill]:{id:Bt.Hill,name:"Hill",color:"#9a7c4a",canPatch:!0,canBeSeed:!0,moveCost:15,defenseBonus:10,blocksMovement:!1,blocksLineOfSight:!1},[Bt.Cliff]:{id:Bt.Cliff,name:"Cliff",color:"#6b6b6b",canPatch:!1,canBeSeed:!1,moveCost:999,defenseBonus:25,blocksMovement:!0,blocksLineOfSight:!0}};class $b{constructor(e){this.viewport=e,this.initDefaultBehavior()}initDefaultBehavior(){this.viewport.drag({mouseButtons:"left"}).pinch().wheel().clamp({direction:"all",underflow:"center"}).clampZoom({minScale:.25,maxScale:1.25})}updateSize(e,n){this.viewport.screenWidth=e,this.viewport.screenHeight=n}initConstraints(e){this.viewport.worldWidth=e.width-pi*2,this.viewport.worldHeight=e.height-pi*2,this.viewport.clamp({left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height,direction:"all",underflow:"center"});const n=e.x+e.width/2,a=e.y+e.height/2;this.viewport.moveCenter(n,a),this.viewport.setZoom(1,!0)}applyGridMask(e,n){const a=new Ve().rect(0,0,n.width-200,n.height-200).fill(16777215);return a.eventMode="none",e.addChild(a),e.mask=a,a}lock(){this.viewport.plugins.pause("drag"),this.viewport.plugins.pause("wheel"),this.viewport.plugins.pause("pinch")}unlock(){this.viewport.plugins.resume("drag"),this.viewport.plugins.resume("wheel"),this.viewport.plugins.resume("pinch")}async focusOnBattleCenter(e){if(e.length===0)return;const n=e.reduce((l,o)=>l+o.x,0)/e.length,a=e.reduce((l,o)=>l+o.y,0)/e.length;return new Promise(l=>{this.viewport.snap(n,a,{removeOnInterrupt:!0,time:1e3,ease:"easeInOutExpo"}),this.viewport.animate({scale:.3,time:1e3,ease:"easeInOutExpo",callbackOnComplete:()=>l()})})}async focusOnPoint(e,n=!1,a=!0){this.viewport.plugins.pause("snap");const o=this.viewport.getVisibleBounds(),{width:u,height:c,x:f,y:g}=o;if(e.x>f+100&&e.x<f+u-100&&e.y>g+100&&e.y<g+c-100&&!n)return;let y=f+u/2,_=g+c/2;if(a){e.x<f+100?y=e.x-200+u/2:e.x>f+u-100&&(y=e.x+200-u/2);const T=g+100,x=g+c-100,M=e.y-50;M<T?_=M-200+c/2:M>x&&(_=M+200-c/2)}else y=e.x,_=e.y-50;return new Promise(S=>{this.viewport.animate({position:{x:y,y:_},time:800,ease:"easeInOutCubic",removeOnInterrupt:!0,callbackOnComplete:()=>S()})})}jumpToPoint(e,n){this.viewport.moveCenter(e,n)}}function fv(d,e){const n=pi*(1.5*d),a=pi*(Math.sqrt(3)*(e+d/2))*Nf;return{x:n,y:a}}function rn(d){const[e,n]=d.split(":").map(Number);return{q:e??0,r:n??0}}function Ut({q:d,r:e}){return`${d}:${e}`}function Ci(d,e){return Math.max(Math.abs(d.q-e.q),Math.abs(d.r-e.r),Math.abs(-d.q-d.r-(-e.q-e.r)))}function ff(d,e){return Qo.map(n=>({q:d+n.q,r:e+n.r}))}function Hm(d,e){return d%2===0?[{q:d+1,r:e-1},{q:d+1,r:e},{q:d,r:e+1},{q:d-1,r:e},{q:d-1,r:e-1},{q:d,r:e-1}]:[{q:d+1,r:e},{q:d+1,r:e+1},{q:d,r:e+1},{q:d-1,r:e+1},{q:d-1,r:e},{q:d,r:e-1}]}class se{static pathCache=new Map;constructor(){throw new Error("PathCalculator is a static utility class")}static getReachableNodes(e,n,a){const l=new Map,o=new Map,u=Ut(e),c=[{q:e.q,r:e.r,costSoFar:0}];for(l.set(u,0),o.set(u,null);c.length>0;){c.sort((m,y)=>m.costSoFar-y.costSoFar);const f=c.shift(),g=Ut(f);for(const m of Qo){const y=f.q+m.q,_=f.r+m.r,S=Ut({q:y,r:_}),T=a.get(S);if(T&&!T.isObstacle&&!T.entityId){const x=hf[T.terrain]?.moveCost??10,M=this.getStepCost(n.speed,x),w=f.costSoFar+M;w<=n.currentStamina&&(!l.has(S)||w<l.get(S))&&(l.set(S,w),o.set(S,g),c.push({q:y,r:_,costSoFar:w}))}}}return{reachableIds:Array.from(l.keys()),reachableMap:l,parentMap:o}}static restorePath(e,n){const a=[];let l=e;for(;l!==null;)a.push(l),l=n.get(l)||null;return a.reverse().slice(1)}static findPath(e,n,a){const l=`${e}->${n}`;if(se.pathCache.has(l))return se.pathCache.get(l);const o=se.computeAStarPath(e,n,a);return se.pathCache.set(l,o),o}static getPathToHex(e,n,a,l){const o=se.findPath(e,n,l);if(o.length===0)return{path:[],lastStep:null,cost:0};const u=[];let c=null,f=0;for(const m of o)if(a.has(m))u.push(m),c=m,f=a.get(m)||f;else break;let g={id:"",terrain:Bt.Flat};if(c){const m=l.get(c);m&&(g.id=c,g.terrain=m.terrain)}else g=null;return{path:u,lastStep:g,cost:f}}static constructFullPath(e,n,a){const l=[{x:e.x,y:e.y}];return n.forEach(o=>{const u=a.get(o);u&&l.push({x:u.x,y:u.y})}),l}static getRadius(e,n,a,l=!1){const o=new Map,u=[{...e,dist:0}],c=new Set([Ut(e)]);for(;u.length>0;){const{q:f,r:g,dist:m}=u.shift();if(m>0){const y=Ut({q:f,r:g}),_=a.get(y);(!l||_&&!_.entityId)&&o.set(y,m)}if(!(m>=n))for(const y of ff(f,g)){const _=Ut(y),S=a.get(_);S&&!S.isObstacle&&!c.has(_)&&(c.add(_),u.push({...y,dist:m+1}))}}return o}static clearCache(){se.pathCache.clear()}static computeAStarPath(e,n,a,l){const o=rn(e),u=rn(n),c=.15,f=10,g=new Map,m=new Map,y=new Map,_=[e];for(g.set(e,null),m.set(e,0),y.set(e,Ci(o,u));_.length>0;){_.sort((M,w)=>(y.get(M)??1/0)-(y.get(w)??1/0));const S=_.shift();if(S===n){const M=[];let w=S;for(;w&&w!==e;)M.push(w),w=g.get(w)||null;return M.reverse()}const{q:T,r:x}=rn(S);for(const M of ff(T,x)){const w=Ut(M),E=a.get(w);if(!E||E.isObstacle||E.entityId&&w!==e&&w!==n)continue;const H=hf[E.terrain]?.moveCost??10;let B=0;if(l&&l.has(w)){const Y=l.get(w)||0;B=Math.min(f,Y*c)}const N=H+B,G=(m.get(S)||0)+N;if(!m.has(w)||G<m.get(w)){g.set(w,S),m.set(w,G);const Y=Ci(rn(w),u);y.set(w,G+Y),_.includes(w)||_.push(w)}}}return[]}static getStepCost(e,n){const o=(45-e*5)*(n/10),u=Math.round(o/5)*5;return console.log("getStepCost",u,e,n),Math.max(5,u)}}function t2(d){return function(){let e=d+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}}function e2(d){let e=2166136261;for(let n=0;n<d.length;n++)e^=d.charCodeAt(n),e=Math.imul(e,16777619);return e>>>0}const dv=(d,e=!1)=>{if(d.length<2)return[...d];const n=[],a=20,l=(o,u,c,f,g)=>{const m=g*g,y=m*g;return .5*(2*u+(-o+c)*g+(2*o-5*u+4*c-f)*m+(-o+3*u-3*c+f)*y)};for(let o=0;o<d.length-1;o++){const u=d[o],c=d[o+1],f=d[o-1]??u,g=d[o+2]??c;for(let m=0;m<=1;m+=.05){let y=l(f.x,u.x,c.x,g.x,m),_=l(f.y,u.y,c.y,g.y,m);if(e){const S=(o+m)/(d.length-1);_-=S*a}n.push({x:y,y:_})}}return n};function pv(d){const e=[...d].filter(u=>u.count>0).sort((u,c)=>c.stats.initiative-u.stats.initiative),n=[];if(e.length===0)return n;const a=e[0].faction;let l=1,o={id:`${a}_${l}_${Date.now()}`,faction:a,unitIds:[e[0].unitId]};for(let u=1;u<e.length;u++){const c=e[u];c.faction===o.faction?o.unitIds.push(c.unitId):(n.push(o),l=l+1,o={id:`${c.faction}_${l}_${Date.now()}`,faction:c.faction,unitIds:[c.unitId]})}return n.push(o),n}const gv=(d,e)=>d.finishedPools.some(n=>n.unitIds.includes(e)),i2=(d,e)=>Zo(d)?.unitIds.includes(e)??!1,Zo=d=>d.turnQueue[0]||null,Wo={path:[],lastStep:null,cost:0},zm=()=>({units:new Map,battleMap:new Map,selectedUnitId:null,selectedHexId:null,selectedPath:Wo,round:1,activeFaction:Et.Player,reachableHexes:[],reachableHexesWithCost:new Map,currentPathPoints:[],turnQueue:[],finishedPools:[],selectedSkillId:null,targetHexes:[],status:Yt.Preparing});class Yn{static updateHex(e,n,a){const l=e.battleMap.get(n);l&&e.battleMap.set(n,{...l,...a})}static updateUnit(e,n,a){const l=e.units.get(n);l&&e.units.set(n,{...l,...a})}static resetSelectedPath(e){e.selectedPath=Wo}static setReachableHexes(e,n,a){e.reachableHexes=n,e.reachableHexesWithCost=a}}const Um=d=>{let e;const n=new Set,a=(g,m)=>{const y=typeof g=="function"?g(e):g;if(!Object.is(y,e)){const _=e;e=m??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(S=>S(e,_))}},l=()=>e,c={setState:a,getState:l,getInitialState:()=>f,subscribe:g=>(n.add(g),()=>n.delete(g))},f=e=d(a,l,c);return c},n2=(d=>d?Um(d):Um),a2=d=>d;function mv(d,e=a2){const n=Ts.useSyncExternalStore(d.subscribe,Ts.useCallback(()=>e(d.getState()),[d,e]),Ts.useCallback(()=>e(d.getInitialState()),[d,e]));return Ts.useDebugValue(n),n}const s2=d=>{const e=n2(d),n=a=>mv(e,a);return Object.assign(n,e),n},yv=(d=>s2),Dm={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},er=new Map,Ao=d=>{const e=er.get(d);return e?Object.fromEntries(Object.entries(e.stores).map(([n,a])=>[n,a.getState()])):{}},l2=(d,e,n)=>{if(d===void 0)return{type:"untracked",connection:e.connect(n)};const a=er.get(n.name);if(a)return{type:"tracked",store:d,...a};const l={connection:e.connect(n),stores:{}};return er.set(n.name,l),{type:"tracked",store:d,...l}},r2=(d,e)=>{if(e===void 0)return;const n=er.get(d);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&er.delete(d))},o2=d=>{var e,n;if(!d)return;const a=d.split(`
`),l=a.findIndex(u=>u.includes("api.setState"));if(l<0)return;const o=((e=a[l+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(o))==null?void 0:n[1]},u2=(d,e={})=>(n,a,l)=>{const{enabled:o,anonymousActionType:u,store:c,...f}=e;let g;try{g=(o??(Dm?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!g)return d(n,a,l);const{connection:m,...y}=l2(c,g,f);let _=!0;l.setState=((x,M,w)=>{const E=n(x,M);if(!_)return E;const H=w===void 0?{type:u||o2(new Error().stack)||"anonymous"}:typeof w=="string"?{type:w}:w;return c===void 0?(m?.send(H,a()),E):(m?.send({...H,type:`${c}/${H.type}`},{...Ao(f.name),[c]:l.getState()}),E)}),l.devtools={cleanup:()=>{m&&typeof m.unsubscribe=="function"&&m.unsubscribe(),r2(f.name,c)}};const S=(...x)=>{const M=_;_=!1,n(...x),_=M},T=d(l.setState,a,l);if(y.type==="untracked"?m?.init(T):(y.stores[y.store]=l,m?.init(Object.fromEntries(Object.entries(y.stores).map(([x,M])=>[x,x===y.store?T:M.getState()])))),l.dispatchFromDevtools&&typeof l.dispatch=="function"){let x=!1;const M=l.dispatch;l.dispatch=(...w)=>{(Dm?"production":void 0)!=="production"&&w[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),M(...w)}}return m.subscribe(x=>{var M;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Lh(x.payload,w=>{if(w.type==="__setState"){if(c===void 0){S(w.state);return}Object.keys(w.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const E=w.state[c];if(E==null)return;JSON.stringify(l.getState())!==JSON.stringify(E)&&S(E);return}l.dispatchFromDevtools&&typeof l.dispatch=="function"&&l.dispatch(w)});case"DISPATCH":switch(x.payload.type){case"RESET":return S(T),c===void 0?m?.init(l.getState()):m?.init(Ao(f.name));case"COMMIT":if(c===void 0){m?.init(l.getState());return}return m?.init(Ao(f.name));case"ROLLBACK":return Lh(x.state,w=>{if(c===void 0){S(w),m?.init(l.getState());return}S(w[c]),m?.init(Ao(f.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Lh(x.state,w=>{if(c===void 0){S(w);return}JSON.stringify(l.getState())!==JSON.stringify(w[c])&&S(w[c])});case"IMPORT_STATE":{const{nextLiftedState:w}=x.payload,E=(M=w.computedStates.slice(-1)[0])==null?void 0:M.state;if(!E)return;S(c===void 0?E:E[c]),m?.send(null,w);return}case"PAUSE_RECORDING":return _=!_}return}}),T},c2=u2,Lh=(d,e)=>{let n;try{n=JSON.parse(d)}catch(a){console.error("[zustand devtools middleware] Could not parse the received json",a)}n!==void 0&&e(n)},h2=d=>(e,n,a)=>{const l=a.subscribe;return a.subscribe=((u,c,f)=>{let g=u;if(c){const m=f?.equalityFn||Object.is;let y=u(a.getState());g=_=>{const S=u(_);if(!m(y,S)){const T=y;c(y=S,T)}},f?.fireImmediately&&c(y,y)}return l(g)}),d(e,n,a)},vv=h2,V=yv()(c2(vv((d,e)=>({...zm(),apply:n=>d(a=>(n(a),{...a})),updateHex:(n,a)=>d(l=>(Yn.updateHex(l,n,a),{...l})),updateUnit:(n,a)=>d(l=>(Yn.updateUnit(l,n,a),{...l})),resetSelectedPath:()=>d(n=>(Yn.resetSelectedPath(n),{...n})),setReachableHexes:(n,a)=>d(l=>(Yn.setReachableHexes(l,n,a),{...l})),setStatus:n=>d({status:n}),setSelectedUnit:n=>d({selectedUnitId:n}),setSelectedHex:n=>d({selectedHexId:n}),setSelectedSkill:n=>d({selectedSkillId:n}),setSelectedPath:n=>d({selectedPath:n}),setTargetHexes:n=>d({targetHexes:n}),addUnit:n=>d(a=>{const l=new Map(a.units);return l.set(n.unitId,n),{units:l}}),setUnits:n=>{const a=new Map;n.forEach(l=>a.set(l.unitId,l)),d({units:a})},removeUnit:n=>d(a=>{const l=new Map(a.units);return l.delete(n),{units:l}}),setBattleMap:n=>d({battleMap:n}),applyUnitDeath:n=>d(a=>{const{unitId:l,hexId:o,newQueue:u}=n,c=new Map(a.units),f=c.get(l);f&&c.set(l,{...f,isDead:!0,count:0,currentUnitHp:0});const g=new Map(a.battleMap),m=g.get(o);return m&&g.set(o,{...m,entityId:void 0}),{units:c,battleMap:g,turnQueue:u,selectedUnitId:a.selectedUnitId===l?null:a.selectedUnitId}}),setTurnQueue:n=>d({turnQueue:n}),setRound:n=>d({round:n}),setActiveFaction:n=>d({activeFaction:n}),reset:()=>d(zm())})),{name:"BattleGame",enabled:!0})),f2=.3;class d2{constructor(e,n,a,l,o,u,c,f,g){this.pathRenderer=e,this.inputController=n,this.skillManager=a,this.cameraManager=l,this.highlightManager=o,this.entityRegistry=u,this.stateMachine=c,this.turnManager=f,this.aiTurnManager=g,this.setupStoreSubscriptions()}unsubscribers=[];setupStoreSubscriptions(){this.unsubscribers.push(V.subscribe(e=>e.targetHexes,()=>this.skillRangeHexHighlights()),V.subscribe(e=>e.reachableHexes,()=>this.reachableHexesHighlight()),V.subscribe(e=>e.selectedHexId,e=>this.handleHexSelection(e)),V.subscribe(e=>e.selectedUnitId,(e,n)=>{e!==n&&this.handleUnitSelection(e)})),this.stateMachine.onStateChange((e,n)=>{if(this.stateMachine.isBlocking()&&(this.highlightManager.clearHoverState(),this.highlightManager.resetAllHexes()),n===Z.Idle||n===Z.SkillTargeting){this.highlightManager.updateSkillRangeHighlights(),V.getState().resetSelectedPath(),V.getState().setSelectedHex(null);const a=this.inputController.getLastMousePosition();a&&V.getState().status===Yt.Playing&&this.highlightManager.restoreHoverHighlightsAfterAnimation(a.x,a.y)}if(e===Z.PlayerMoving&&n===Z.Idle){const a=V.getState().selectedUnitId;a&&this.handleStaminaChange(a)}if(e===Z.PlayerAttacking&&n===Z.Idle){const a=V.getState().selectedUnitId,l=V.getState().selectedSkillId;l&&a&&this.checkSkillAffordability(a,l),a&&this.handleStaminaChange(a)}})}checkSkillAffordability(e,n){const a=V.getState().units.get(e);if(!a)return;const l=a.skills.find(o=>o.id===n)||null;l&&(a.currentStamina<l.cost?this.skillManager.deselectSkill():this.skillManager.selectSkill(n))}handleUnitSelection(e){if(this.resetSelection(),!e){V.getState().setReachableHexes([],new Map);return}if(V.getState().status!==Yt.Playing){V.getState().setSelectedUnit(null);return}const a=V.getState(),l=a.units.get(e);if(l&&l.faction===Et.Player){const c=se.getReachableNodes(l,{currentStamina:l.currentStamina,speed:l.stats.speed},a.battleMap);a.setReachableHexes(c.reachableIds,c.reachableMap)}const o=this.entityRegistry.getUnit(e);o&&(this.cameraManager.focusOnPoint({x:o.x,y:o.y}),o.startIdle());const u=Zo(V.getState());u&&(u.faction===Et.Enemy?(this.stateMachine.setState(Z.EnemyTurn),this.handleEnemyTurn()):this.stateMachine.setState(Z.Idle))}handleStaminaChange(e){const n=V.getState(),a=n.units.get(e);if(!(!a||a.faction!==Et.Player))if(!this.turnManager.canUnitStillAct(e))console.log("nextSameFactionIdx 4"),this.turnManager.endUnitTurn(e);else{const l=se.getReachableNodes(a,{currentStamina:a.currentStamina,speed:a.stats.speed},n.battleMap);n.setReachableHexes(l.reachableIds,l.reachableMap),n.selectedSkillId&&this.highlightManager.updateSkillRangeHighlights()}}skillRangeHexHighlights(){const{units:e,selectedUnitId:n}=V.getState();n&&e.get(n)?.faction===Et.Player&&this.highlightManager.updateSkillRangeHighlights()}reachableHexesHighlight(){const{units:e,selectedUnitId:n}=V.getState();n&&e.get(n)?.faction===Et.Player&&this.highlightManager.updateReachableHighlights()}handleHexSelection(e){if(!e){this.pathRenderer.clear();return}const n=V.getState();if(!n.selectedUnitId)return;const a=n.units.get(n.selectedUnitId);if(!a)return;const l=Ut(a),o=se.getPathToHex(l,e,n.reachableHexesWithCost,n.battleMap);V.getState().setSelectedPath(o),this.showUnitPath(a.unitId,o.path)}resetSelection(){const e=this.stateMachine.getState();console.log("selectedUnitId resetSelection",e),(e===Z.Idle||e===Z.EnemyTurn)&&(V.getState().setSelectedHex(null),se.clearCache(),this.pathRenderer.clear(),this.highlightManager.resetAllHexes(),this.highlightManager.resetAllUnits(),this.highlightManager.clearHoverState())}showUnitPath(e,n){const a=this.entityRegistry.getUnit(e);if(!a)return;const l=se.constructFullPath(a,n,this.entityRegistry.getAllHexes()),o=this.pathRenderer.smoothPath(l,f2),u=dv(o);this.pathRenderer.drawPathFromPoints(u)}async handleEnemyTurn(){const e=V.getState(),n=Zo(e);if(!e.selectedUnitId||!n||n.faction!==Et.Enemy)return;const a=e.units.get(e.selectedUnitId);!a||a.isDead||a.faction!==Et.Enemy||(console.log("[EnemyTurn] Starting with:",a.unitId),await this.aiTurnManager.executeUnitTurn(a.unitId),console.log("[EnemyTurn] Completed"))}destroy(){console.warn("BattleManager: ..."),this.unsubscribers.forEach(e=>e()),this.unsubscribers=[],pt.killTweensOf(this),this.pathRenderer.clear(),console.log("BattleManager: ' .")}}class p2{element;displayTimeout=null;mousePos={x:0,y:0};currentUnitId=null;HOVER_DELAY=400;storeUnsubscribe;constructor(){this.element=this.initElement(),this.setupListeners(),this.storeUnsubscribe=V.subscribe(e=>e.selectedSkillId,e=>this.handleSelectionChange(e))}setupListeners(){rt.on("UNIT_HOVER",this.handleUnitHover),rt.on("UNIT_MOUSEMOVE",this.handleMouseMove),rt.on("UNIT_OUT",this.handleUnitOut),rt.on("TOOLTIP_UPDATE",this.handleTooltipUpdate)}handleUnitHover=({id:e,position:n})=>{this.currentUnitId=e,this.mousePos=n,this.startIdlingTimer()};handleMouseMove=({position:e})=>{this.mousePos=e,this.element.style.display==="block"?this.updatePosition():this.startIdlingTimer()};handleUnitOut=()=>{this.currentUnitId=null,this.clearTimer(),this.hide()};handleTooltipUpdate=()=>{this.currentUnitId&&(V.getState().units.get(this.currentUnitId)?.isDead?(this.currentUnitId=null,this.hide()):this.render())};handleSelectionChange(e){this.element.style.display==="block"&&e&&this.handleUnitOut()}initElement(){let e=document.getElementById("game-tooltip");return e||(e=document.createElement("div"),e.id="game-tooltip",document.body.appendChild(e)),e}startIdlingTimer(){this.clearTimer(),this.displayTimeout=setTimeout(()=>{if(this.currentUnitId){const{selectedSkillId:e,units:n}=V.getState(),a=n.get(this.currentUnitId);!e&&a&&this.show()}},this.HOVER_DELAY)}show(){this.render(),this.element.style.display="block",this.updatePosition()}updatePosition(){this.element.style.left=`${this.mousePos.x+15}px`,this.element.style.top=`${this.mousePos.y+15}px`}hide(){this.element.style.display="none"}clearTimer(){this.displayTimeout&&(clearTimeout(this.displayTimeout),this.displayTimeout=null)}render(){if(!this.currentUnitId)return;const{units:e,selectedUnitId:n,activeFaction:a}=V.getState(),l=e.get(this.currentUnitId);if(!l)return;const o=l.faction===Et.Player,u=n===l.unitId,c=l.stats.hp*l.count,f=(l.count-1)*l.stats.hp+l.currentUnitHp;this.element.innerHTML=`
            ${u?'<div class="tooltip-status selected"></div>':""}
            <div class="tooltip-title ${o?"friend":"enemy"}">${l.unitId.split("_")[0]}</div>
            <div class="tooltip-stat">HP: ${f} / ${c}</div>
            <div class="tooltip-footer">
                ${a===l.faction?" ":" "}
            </div>
        `}destroy(){this.clearTimer(),rt.off("UNIT_HOVER",this.handleUnitHover),rt.off("UNIT_MOUSEMOVE",this.handleMouseMove),rt.off("UNIT_OUT",this.handleUnitOut),rt.off("TOOLTIP_UPDATE",this.handleTooltipUpdate),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),console.log("TooltipManager: Cleaned up.")}}class g2{container;footprints=[];STEP_DISTANCE=45;ASSET_URL="/assets/footsteps.png";constructor(e){this.container=new It,this.container.eventMode="none",this.container.interactiveChildren=!1,e.addChild(this.container),Xn.load(this.ASSET_URL)}drawPathFromPoints(e){if(e.length<2){this.clear();return}this.clear();const n=this.smoothPath(e,.5,2);let a=0;for(let l=0;l<n.length-1;l++){const[o,u]=[n[l],n[l+1]],c=u.x-o.x,f=u.y-o.y,g=Math.hypot(c,f);if(a+=g,a>=this.STEP_DISTANCE){const m=Math.atan2(f,c);this.createFootprintStep(o.x,o.y,m),a=0}}}createFootprintStep(e,n,a){const l=Xn.get(this.ASSET_URL);if(!l)return;const o=new jn(l);o.anchor.set(.5),o.scale.set(.6),o.rotation=a+Math.PI/2,o.x=e,o.y=n,o.alpha=.4,this.container.addChild(o),this.footprints.push(o)}smoothPath(e,n=.4,a=1){if(e.length<3)return e;let l=e.map(o=>({...o}));for(let o=0;o<a;o++){const u=l.map(c=>({...c}));for(let c=1;c<l.length-1;c++){const f=l[c-1],g=l[c],m=l[c+1],y=u[c],_=(f.x+m.x)/2,S=(f.y+m.y)/2;y.x=g.x+(_-g.x)*n,y.y=g.y+(S-g.y)*n}l=u}return l}clear(){for(const e of this.footprints)e.destroy({children:!0,texture:!1});this.footprints=[]}destroy(){this.clear(),this.container.destroy({children:!0})}}const m2=new df({type:"linear",colorStops:[{offset:0,color:15133164},{offset:.4,color:10989752},{offset:1,color:6252140}]}),y2=new df({type:"linear",colorStops:[{offset:0,color:16773830},{offset:.4,color:14723130},{offset:1,color:7225104}]}),v2=new df({type:"linear",colorStops:[{offset:0,color:6252140},{offset:.5,color:10989752},{offset:1,color:6252140}]}),_2=new Vn({fontFamily:"CinzelBold, Trajan Pro, serif",fontSize:48,fontWeight:"700",letterSpacing:2,fill:m2,stroke:{color:1777185,width:6,join:"round",miterLimit:2},dropShadow:{alpha:.6,angle:Math.PI/4,blur:6,color:0,distance:4}}),S2=new Vn({fontFamily:"CinzelBold, Trajan Pro, serif",fontSize:58,fontWeight:"700",letterSpacing:2,fill:y2,stroke:{color:2824715,width:7,join:"round",miterLimit:2},dropShadow:{alpha:.6,angle:Math.PI/4,blur:10,color:0,distance:6}}),x2=new Vn({fontSize:42,fontFamily:"CinzelBold, Trajan Pro, serif",fontWeight:"400",letterSpacing:2,fill:v2,stroke:{color:1777185,width:4,join:"round",miterLimit:2},dropShadow:{alpha:.4,angle:Math.PI/4,blur:6,color:0,distance:4}});class b2 extends It{constructor(e){super(),this.getUnitContainer=e,this.setupEventListeners()}showDamangeBound=e=>this.showDamage(e);setupEventListeners(){rt.on("SKILL_EXECUTED",this.showDamangeBound)}showDamage(e){const n=this.getUnitContainer(e.targetId);if(!n){console.warn(`[DamageText] Unit not found: ${e.targetId}`);return}const a=this.createDamageText(e.result);a.position.set(n.x,n.y-170),this.addChild(a),this.animateDamageText(a,e.result.isCrit||!1,e.result.isMiss||!1)}createDamageText(e){let n,a;e.isMiss?(n="MISS",a=x2):e.isCrit?(n=`${e.damage}`,a=S2):(n=`${e.damage}`,a=_2);const l=new wa(n,a);return l.anchor.set(.5),l}animateDamageText(e,n,a){const l=pt.timeline();a?l.from(e.scale,{x:.9,y:.9,duration:.1}).to(e,{y:e.y-40,alpha:0,duration:1.1,ease:"sine.out"}):n?l.from(e.scale,{x:2.4,y:.4,duration:.05}).to(e.scale,{x:1,y:1,duration:.15}).to(e,{x:"+=5",yoyo:!0,repeat:6,duration:.025}).to(e,{y:e.y-120,alpha:0,duration:1.7}):l.from(e.scale,{x:1.4,y:.6,duration:.08}).to(e.scale,{x:1,y:1,duration:.1}).to(e,{y:e.y+6,duration:.05}).to(e,{y:e.y-70,alpha:0,duration:1.4,ease:"power1.out"}),l.call(()=>{this.removeChild(e),e.destroy()})}destroy(e){rt.on("SKILL_EXECUTED",this.showDamangeBound),super.destroy(e)}}const T2=.035,M2=.025;class w2{map;rng;size;rows;constructor(e){const{size:n,seed:a}=e;this.size=n,this.rows=Math.floor(n-n*.34),this.rng=t2(e2(a)),this.map=new Map}generate(){return this.initializeGrid(),this.applyTerrainFeatures(),this.map}initializeGrid(){for(let e=0;e<this.size;e++){const n=Math.floor(e/2);for(let a=-n;a<this.rows-n;a++){const l=Ut({q:e,r:a});this.map.set(l,{id:l,q:e,r:a,x:0,y:0,terrain:Bt.Flat,isCliff:!1,isObstacle:!1})}}}applyTerrainFeatures(){for(const e of this.map.values())this.maybePlaceObstacle(e),e.terrain===Bt.Flat&&this.rng()<this.calculateHillSeedChance(e.q)&&this.growHillPatch(e.q,e.r)}promoteCliffs(){for(const e of this.map.values()){if(e.terrain!==Bt.Hill)continue;const n=Hm(e.q,e.r);let a=0;for(const l of n)this.getHex(l.q,l.r)?.terrain===Bt.Hill&&a++;a>=3&&this.rng()<.15&&(e.terrain=Bt.Cliff,e.isCliff=!0)}}maybePlaceObstacle(e){this.rng()<T2&&(e.isObstacle=!0)}calculateHillSeedChance(e){const n=(this.size-1)/2,a=Math.abs(e-n)/n;return M2+a*.015}growHillPatch(e,n){const a=[{q:e,r:n,strength:1}];for(;a.length;){const l=a.pop(),o=this.getHex(l.q,l.r);if(!o||o.terrain!==Bt.Flat)continue;o.terrain=Bt.Hill;const u=Hm(l.q,l.r);for(const c of u){const f=this.getHex(c.q,c.r);f&&f.terrain===Bt.Flat&&this.rng()<.25*l.strength&&a.push({q:c.q,r:c.r,strength:l.strength*.4})}}}getHex(e,n){return this.map.get(Ut({q:e,r:n}))}}const C2="assets/terrain/plains.png",A2=4,E2=0,Rm=256,O2="assets/terrain/obstacles.png",H2=3,z2=128,Nm=256,U2="assets/terrain/cliff.png",D2=1,R2=128,Bm=256,N2="assets/terrain/hill_top.png",B2={1:"assets/terrain/hill_edge_right_rear.png",2:"assets/terrain/hill_edge_center_rear.png",3:"assets/terrain/hill_edge_left_rear.png",4:"assets/terrain/hill_edge_left_front.png",5:"assets/terrain/hill_edge_center_front.png",0:"assets/terrain/hill_edge_right_front.png"};function _v(d=0){const e=[],n=pi+d;for(let a=0;a<6;a++){const l=Math.PI/180*(60*a);e.push(n*Math.cos(l),n*Math.sin(l))}return new Ym(e)}const Ih=_v();_v(1).points;class k2 extends It{data;id;highlightOverlay;staticContainer;edgeContainer=null;bakedEdgesSprite=null;constructor(e){super(),this.data=e,this.id=this.data.id;const n=fv(this.data.q,this.data.r);this.x=Math.round(n.x),this.y=Math.round(n.y),this.scale.y=Nf,this.zIndex=this.data.terrain===Bt.Cliff?3:this.data.terrain===Bt.Hill?2:1,this.staticContainer=new It,this.staticContainer.eventMode="none",this.addChild(this.staticContainer),this.buildStaticLayers(),this.highlightOverlay=new Ve,this.highlightOverlay.eventMode="none",this.drawOverlay(),this.addChild(this.highlightOverlay),this.hitArea=Ih,this.eventMode="static",this.cursor="pointer",this.setupInteraction()}getHexPoints(e=0){const n=[],a=pi+e;for(let l=0;l<6;l++){const o=Math.PI/180*(60*l);n.push(a*Math.cos(o),a*Math.sin(o))}return n}buildStaticLayers(){const e=hf[this.data.terrain];parseInt(e.color.replace("#","0x"));const n=this.createAtlasSprite(C2,A2,E2,Rm,Rm);if(n&&this.staticContainer.addChild(n),this.data.terrain===Bt.Hill){const a=this.createAtlasSprite(N2,1,0,256,256);a&&this.staticContainer.addChild(a),this.edgeContainer=new It,this.edgeContainer.eventMode="none",this.staticContainer.addChild(this.edgeContainer)}if(this.data.terrain===Bt.Cliff){const a=this.createAtlasSprite(U2,D2,R2,Bm,Bm);a&&this.staticContainer.addChild(a)}if(this.data.isObstacle){const a=this.createAtlasSprite(O2,H2,z2,Nm,Nm);a&&this.staticContainer.addChild(a)}}drawOverlay(){this.highlightOverlay.poly(Ih.points).fill({color:16777215}),this.highlightOverlay.alpha=0}createAtlasSprite(e,n,a,l,o){try{const u=As.from(e),c=Math.floor(Math.random()*n),f=new As({source:u.source,frame:new Ma(c*l,a,l,o)}),g=new jn(f);return g.anchor.set(.5,.5),g.width=pi*2,g.height=pi*2,g.eventMode="none",g}catch(u){return console.warn("[BattleHex] Failed to create sprite:",e,u),null}}addEdgeSprite(e){if(!this.edgeContainer)return;const n=B2[e];if(n)try{const a=new jn(As.from(n));a.anchor.set(.5,.5),a.width=pi*2,a.height=pi*2,a.eventMode="none",this.edgeContainer.addChild(a)}catch(a){console.warn("[BattleHex] Failed to add edge sprite:",n,a)}}bakeEdges(e){if(!this.edgeContainer)return null;const n=pi*2,a=P_.create({width:n,height:n});return this.edgeContainer.x=n/2,this.edgeContainer.y=n/2,e.render({container:this.edgeContainer,target:a}),this.edgeContainer.x=0,this.edgeContainer.y=0,this.applyBakedEdges(a),a}applyBakedEdges(e){if(!this.edgeContainer)return;const n=pi*2,a=this.staticContainer.getChildIndex(this.edgeContainer);this.staticContainer.removeChild(this.edgeContainer),this.edgeContainer.destroy({children:!0}),this.edgeContainer=null,this.bakedEdgesSprite=new jn(e),this.bakedEdgesSprite.anchor.set(.5,.5),this.bakedEdgesSprite.width=n,this.bakedEdgesSprite.height=n,this.bakedEdgesSprite.eventMode="none",this.staticContainer.addChildAt(this.bakedEdgesSprite,a)}setupInteraction(){this.on("pointerover",e=>{rt.emit("HEX_HOVER",{id:this.id,position:{x:e.global.x,y:e.global.y}})}),this.on("pointerout",()=>{rt.emit("HEX_OUT",{id:this.id})}),this.on("pointertap",()=>{rt.emit("HEX_CLICK",{id:this.id})})}setHighlight(e,n=.2,a=1){e===null?this.highlightOverlay.alpha=0:(this.highlightOverlay.tint=e,this.highlightOverlay.alpha=n,this.highlightOverlay.scale.set(a))}flashHighlight(e,n=1){this.highlightOverlay.tint=e,this.highlightOverlay.alpha=.2,pt.to(this.highlightOverlay,{alpha:.1,duration:n,ease:"power2.in",onComplete:()=>this.setHighlight(Bf,.1)})}containsPoint(e,n){const a=this.toLocal(new le(e,n));return Ih.contains(a.x,a.y)}destroy(){this.removeAllListeners(),super.destroy({children:!0})}}const km=d=>Symbol.iterator in d,Lm=d=>"entries"in d,Im=(d,e)=>{const n=d instanceof Map?d:new Map(d.entries()),a=e instanceof Map?e:new Map(e.entries());if(n.size!==a.size)return!1;for(const[l,o]of n)if(!a.has(l)||!Object.is(o,a.get(l)))return!1;return!0},L2=(d,e)=>{const n=d[Symbol.iterator](),a=e[Symbol.iterator]();let l=n.next(),o=a.next();for(;!l.done&&!o.done;){if(!Object.is(l.value,o.value))return!1;l=n.next(),o=a.next()}return!!l.done&&!!o.done};function nu(d,e){return Object.is(d,e)?!0:typeof d!="object"||d===null||typeof e!="object"||e===null||Object.getPrototypeOf(d)!==Object.getPrototypeOf(e)?!1:km(d)&&km(e)?Lm(d)&&Lm(e)?Im(d,e):L2(d,e):Im({entries:()=>Object.entries(d)},{entries:()=>Object.entries(e)})}function I2(d){const e=Ts.useRef(void 0);return n=>{const a=d(n);return nu(e.current,a)?e.current:e.current=a}}var G2=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,q2=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}`,Y2=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uThickness;
uniform vec3 uColor;
uniform float uAlpha;
uniform float uKnockout;

uniform vec4 uInputClamp;

const float DOUBLE_PI = 2. * 3.14159265358979323846264;
const float ANGLE_STEP = \${ANGLE_STEP};

float outlineMaxAlphaAtPos(vec2 pos) {
    if (uThickness.x == 0. || uThickness.y == 0.) {
        return 0.;
    }

    vec4 displacedColor;
    vec2 displacedPos;
    float maxAlpha = 0.;

    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {
        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);
        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);
        displacedColor = texture(uTexture, clamp(displacedPos, uInputClamp.xy, uInputClamp.zw));
        maxAlpha = max(maxAlpha, displacedColor.a);
    }

    return maxAlpha;
}

void main(void) {
    vec4 sourceColor = texture(uTexture, vTextureCoord);
    vec4 contentColor = sourceColor * float(uKnockout < 0.5);
    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);
    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);
    finalColor = contentColor + outlineColor;
}
`,X2=`struct OutlineUniforms {
  uThickness:vec2<f32>,
  uColor:vec3<f32>,
  uAlpha:f32,
  uAngleStep:f32,
  uKnockout:f32,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> outlineUniforms : OutlineUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let sourceColor: vec4<f32> = textureSample(uTexture, uSampler, uv);
  let contentColor: vec4<f32> = sourceColor * (1. - outlineUniforms.uKnockout);
  
  let outlineAlpha: f32 = outlineUniforms.uAlpha * outlineMaxAlphaAtPos(uv) * (1. - sourceColor.a);
  let outlineColor: vec4<f32> = vec4<f32>(vec3<f32>(outlineUniforms.uColor) * outlineAlpha, outlineAlpha);
  
  return contentColor + outlineColor;
}

fn outlineMaxAlphaAtPos(uv: vec2<f32>) -> f32 {
  let thickness = outlineUniforms.uThickness;

  if (thickness.x == 0. || thickness.y == 0.) {
    return 0.;
  }
  
  let angleStep = outlineUniforms.uAngleStep;

  var displacedColor: vec4<f32>;
  var displacedPos: vec2<f32>;

  var maxAlpha: f32 = 0.;
  var displaced: vec2<f32>;
  var curColor: vec4<f32>;

  for (var angle = 0.; angle <= DOUBLE_PI; angle += angleStep)
  {
    displaced.x = uv.x + thickness.x * cos(angle);
    displaced.y = uv.y + thickness.y * sin(angle);
    curColor = textureSample(uTexture, uSampler, clamp(displaced, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
    maxAlpha = max(maxAlpha, curColor.a);
  }

  return maxAlpha;
}

const DOUBLE_PI: f32 = 3.14159265358979323846264 * 2.;`,j2=Object.defineProperty,V2=(d,e,n)=>e in d?j2(d,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[e]=n,Ta=(d,e,n)=>(V2(d,typeof e!="symbol"?e+"":e,n),n);const au=class xa extends Q_{constructor(...e){let n=e[0]??{};typeof n=="number"&&(Z_("6.0.0","OutlineFilter constructor params are now options object. See params: { thickness, color, quality, alpha, knockout }"),n={thickness:n},e[1]!==void 0&&(n.color=e[1]),e[2]!==void 0&&(n.quality=e[2]),e[3]!==void 0&&(n.alpha=e[3]),e[4]!==void 0&&(n.knockout=e[4])),n={...xa.DEFAULT_OPTIONS,...n};const a=n.quality??.1,l=W_.from({vertex:{source:q2,entryPoint:"mainVertex"},fragment:{source:X2,entryPoint:"mainFragment"}}),o=K_.from({vertex:G2,fragment:Y2.replace(/\$\{ANGLE_STEP\}/,xa.getAngleStep(a).toFixed(7)),name:"outline-filter"});super({gpuProgram:l,glProgram:o,resources:{outlineUniforms:{uThickness:{value:new Float32Array(2),type:"vec2<f32>"},uColor:{value:new Float32Array(3),type:"vec3<f32>"},uAlpha:{value:n.alpha,type:"f32"},uAngleStep:{value:0,type:"f32"},uKnockout:{value:n.knockout?1:0,type:"f32"}}}}),Ta(this,"uniforms"),Ta(this,"_thickness"),Ta(this,"_quality"),Ta(this,"_color"),this.uniforms=this.resources.outlineUniforms.uniforms,this.uniforms.uAngleStep=xa.getAngleStep(a),this._color=new F_,this.color=n.color??0,Object.assign(this,n)}apply(e,n,a,l){this.uniforms.uThickness[0]=this.thickness/n.source.width,this.uniforms.uThickness[1]=this.thickness/n.source.height,e.applyFilter(this,n,a,l)}static getAngleStep(e){return parseFloat((Math.PI*2/Math.max(e*xa.MAX_SAMPLES,xa.MIN_SAMPLES)).toFixed(7))}get thickness(){return this._thickness}set thickness(e){this._thickness=this.padding=e}get color(){return this._color.value}set color(e){this._color.setValue(e);const[n,a,l]=this._color.toArray();this.uniforms.uColor[0]=n,this.uniforms.uColor[1]=a,this.uniforms.uColor[2]=l}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}get quality(){return this._quality}set quality(e){this._quality=e,this.uniforms.uAngleStep=xa.getAngleStep(e)}get knockout(){return this.uniforms.uKnockout===1}set knockout(e){this.uniforms.uKnockout=e?1:0}};Ta(au,"DEFAULT_OPTIONS",{thickness:1,color:0,alpha:1,quality:.1,knockout:!1});Ta(au,"MIN_SAMPLES",1);Ta(au,"MAX_SAMPLES",100);let Gh=au;const P2=.015;class Q2 extends It{unitId;faction;config;q;r;visual;view;badgeContainer;countText;badgeBg;_state=xs.Idle;unsubStore;filtersMap={selected:new Gh(3,16753920),hover:new Gh(2,16777215),enemy:new Gh(2,16711680)};isHighlighted=!1;FORWARD_PX=22;WINDUP_MS=170;STRIKE_MS=65;RECOVER_MS=240;KNOCKBACK_PX=18;CRIT_KNOCKBACK_MULT=2;impactPromise=null;resolveImpact=null;constructor(e,n,a,l,o,u,c,f){super(),this.x=c,this.y=f,this.zIndex=f,this.unitId=a,this.faction=l,this.config=n,this.q=o,this.r=u,this.sortableChildren=!0,this.visual=new It,this.visual.zIndex=0,this.addChild(this.visual),this.view=new jn(e);const g=n.anchor?.x??.5,m=n.anchor?.y??.7;if(this.view.anchor.set(g,m),this.view.zIndex=0,this.faction===Et.Enemy&&(this.view.scale.x=-1*Nf),this.visual.addChild(this.view),n.hitArea){n.hitArea.map((x,M)=>M%2===0?x-256*g:x-256*m);const _=this.view.width,S=this.view.height,T=[];for(let x=0;x<n.hitArea.length;x+=2){let M=n.hitArea[x]-_*g,w=n.hitArea[x+1]-S*m;T.push(M,w)}this.view.hitArea=new Ym(T)}this.badgeContainer=new It,this.badgeContainer.zIndex=10,this.badgeContainer.position.set(70,50),this.countText=new wa("",{fontFamily:'Georgia, "Times New Roman", serif',fontSize:16,fill:15393232,fontWeight:"bold",dropShadow:{color:0,blur:2,distance:1,angle:Math.PI/6,alpha:.5},align:"center"}),this.countText.anchor.set(.4,.55),this.badgeBg=new Ve,this.drawBadgeBackground(),this.badgeContainer.addChild(this.badgeBg),this.badgeContainer.addChild(this.countText),this.addChild(this.badgeContainer),this.eventMode="static",this.cursor="pointer",this.on("pointerover",this.onPointerOver,this),this.on("pointerout",this.onPointerOut,this),this.on("pointermove",this.onPointerMove,this),this.on("pointertap",this.onPointerTap,this),this.unsubStore=V.subscribe(_=>_.units.get(this.unitId),_=>{_&&this.refreshVisuals(_)},{equalityFn:nu});const y=V.getState();this.refreshVisuals(y.units.get(this.unitId))}drawBadgeBackground(){const e=this.badgeBg,l=Math.max(this.countText.width,10)+8*2,o=22;e.clear(),e.beginFill(0,.5),e.drawRoundedRect(2,2,l,o,6),e.endFill(),e.beginFill(2827810),e.lineStyle(1.5,6511178),e.drawRoundedRect(0,0,l,o,5),e.endFill(),this.countText.position.set(l/2,o/2)}refreshVisuals(e){if(!e){console.warn(`No data for unit ${this.unitId}`);return}if(this.countText.text=e.count.toString(),this.drawBadgeBackground(),this.badgeContainer.visible=e.count>0,e.count<=0&&this._state!==xs.Dead){this._state=xs.Dead,this.alpha=.5,this.eventMode="none",this.view.filters=[];return}this._state!==xs.Dead&&this.updateFilters()}onPointerOver(e){this._state!==xs.Dead&&rt?.emit("UNIT_HOVER",{id:this.unitId,position:{x:e.global.x,y:e.global.y}})}onPointerOut(){rt?.emit("UNIT_OUT",{id:this.unitId})}onPointerMove(e){rt?.emit("UNIT_MOUSEMOVE",{position:{x:e.global.x,y:e.global.y}})}onPointerTap(){this._state!==xs.Dead&&rt?.emit("UNIT_CLICK",{id:this.unitId})}updateGridPos(e,n,a,l){this.q=e,this.r=n,this.x=a,this.y=l,this.zIndex=l}setHighlighted(e){this.isHighlighted=e,this.updateFilters()}updateFilters(){}triggerImpact(){this.resolveImpact?.(),this.resolveImpact=null,this.impactPromise=null}waitForImpact(e){return this.impactPromise||(this.impactPromise=new Promise(n=>{this.resolveImpact=n})),e&&e.addEventListener("abort",()=>{this.resolveImpact?.()},{once:!0}),this.impactPromise}waitForIdle(e){return new Promise((n,a)=>{if(e?.aborted)return a(new Error("Aborted"));const l=pt.delayedCall(.05,n);e?.addEventListener("abort",()=>{l.kill(),a(new Error("Aborted"))},{once:!0})})}prepareForAction(){return this.stopIdle(),this.resetPose()}async finishAction(e){return await this.resetPose(),this.waitForIdle(e)}startIdle(){pt.killTweensOf(this.visual),pt.to(this.visual,{y:-8,duration:.5,ease:"sine.inOut",yoyo:!0,repeat:-1})}stopIdle(){pt.killTweensOf(this.visual),this.visual.y=0}startBreathing(){this.startIdle()}stopBreathing(){this.stopIdle()}norm(e,n){const a=Math.hypot(e,n)||1;return{x:e/a,y:n/a,dist:a}}async animateMovement(e){return new Promise(n=>{pt.to(this,{duration:e.length*P2,ease:"power1.inOut",motionPath:{path:e,autoRotate:!1},onUpdate:()=>{this.zIndex=Math.floor(this.y)},onComplete:n})})}resetPose(e=220){return new Promise(n=>{if(pt.killTweensOf([this.visual,this.visual.scale,this.view]),Math.abs(this.visual.x)<.01&&this.visual.rotation===0)return this.visual.x=0,this.visual.y=0,this.rotation=0,n();pt.to(this.visual,{x:0,y:0,rotation:0,duration:e/1e3,ease:"power2.out",onComplete:n,onInterrupt:n}),pt.to(this.visual.scale,{x:1,y:1,duration:e/1e3,ease:"power2.out"})})}playAttackTowards(e){return new Promise(n=>{pt.killTweensOf([this.visual,this.visual.scale,this.view]),this.stopIdle(),this.impactPromise=new Promise(g=>{this.resolveImpact=g});const a=e.x-this.x,l=e.y-this.y,o=Math.hypot(a,l)||1,u=a/o,c=this.FORWARD_PX??14,f=pt.timeline();f.to(this.visual,{x:`-=${u*6}`,y:2,duration:(this.WINDUP_MS??120)/1e3,ease:"power3.in"}),f.to(this.visual,{x:`+=${u*c}`,y:-6,duration:(this.STRIKE_MS??80)/1e3,ease:"expo.out"}),f.call(()=>{this.triggerImpact()}),f.to(this.visual,{x:0,y:0,duration:.16,ease:"elastic.out(1, 0.5)",onComplete:()=>{this.resetPose(120).then(n)}})})}flashRed(){const e=new J_;this.visual.filters=[e],e.matrix=[0,0,0,0,.5,0,0,0,0,0,0,0,0,0,0,0,0,0,.5,0],setTimeout(()=>{this.visual.filters=[]},50)}playHitReaction(e){return new Promise(async n=>{pt.killTweensOf([this.visual,this.visual.scale,this.view]),this.stopIdle();const a=(this.x??0)-(e.x??0),l=(this.y??0)-(e.y??0),o=Math.hypot(a,l)||1,u=a/o,c=this.KNOCKBACK_PX*1.6,f=-4,g=.92,m=1.06,y=pt.timeline();y.to(this.visual,{x:`+=${u*c}`,y:`+=${f}`,duration:.06,ease:"power1.out"},0),pt.to(this.visual,{pixi:{tint:"#ff3333"},duration:.06,yoyo:!0,repeat:1,onComplete:()=>{this.visual.tint=16777215}}),y.to(this.visual.scale,{x:g,y:m,duration:.06,ease:"power1.out"},0),y.to(this.visual,{x:0,y:0,duration:(this.RECOVER_MS??300)/1e3,ease:"elastic.out(1, 0.5)"},"+=0.02"),y.to(this.visual.scale,{x:1,y:1,duration:(this.RECOVER_MS??300)/1e3,ease:"elastic.out(1, 0.5)"},"<"),y.to(this.visual,{x:0,y:0,duration:.16,ease:"elastic.out(1, 0.5)",onComplete:()=>{this.resetPose(120).then(n)}})})}playCritReaction(e){return new Promise(async n=>{pt.killTweensOf([this.visual,this.visual.scale,this.view]),this.stopIdle();const a=(this.x??0)-(e.x??0),l=(this.y??0)-(e.y??0),o=Math.hypot(a,l)||1,u=a/o,c=18,f=-10,g=16,m=.02,y=pt.timeline();y.to(this.visual,{x:`+=${u*c}`,y:`+=${f}`,duration:.09,ease:"power3.out"},0),pt.to(this.visual,{pixi:{tint:"#ff3333"},duration:m,yoyo:!0,repeat:1,onComplete:()=>{this.visual.tint=16777215}}),y.to({},{duration:m}),y.to(this.visual,{y:`+=${g}`,duration:.12,ease:"power2.in"}),y.to(this.visual.scale,{x:1,y:1,duration:.22,ease:"elastic.out(1, 0.5)"}),y.to(this.visual,{x:0,y:0,duration:.22,ease:"elastic.out(1, 0.5)"},"<"),y.to(this.visual,{x:0,y:0,duration:.16,ease:"elastic.out(1, 0.5)",onComplete:()=>{this.resetPose(120).then(n)}})})}playMissReaction(e){return new Promise(async n=>{pt.killTweensOf([this.visual,this.visual.scale,this.view]),this.stopIdle();const a=(this.x??0)-(e.x??0),l=(this.y??0)-(e.y??0),o=Math.hypot(a,l)||1,u=a/o,c=pt.timeline();c.to(this.visual,{x:`+=${u*10}`,rotation:u>0?.06:-.06,duration:.1,ease:"power2.out"}),c.to(this.visual,{x:0,rotation:0,duration:.22,ease:"back.out(2)"}),c.to(this.visual,{x:0,y:0,duration:.16,ease:"elastic.out(1, 0.5)",onComplete:()=>{this.resetPose(120).then(n)}})})}playDeath(){return new Promise(e=>{pt.killTweensOf(this.visual),pt.timeline({onComplete:()=>e()}).to(this.visual,{y:20,alpha:0,duration:.45,ease:"power2.in"})})}destroy(e){this.unsubStore&&this.unsubStore(),pt.killTweensOf(this.visual),pt.killTweensOf(this.view),super.destroy(e)}}class kn{static configCache=new Map;static async createUnit(e,n,a,l,o=Et.Player){const u=`assets/units/${e}.json`,c=`assets/units/${e}.png`;let f=this.configCache.get(e);f||(f=await Xn.load(u),this.configCache.set(e,f));const g=await Xn.load(c),m=`${e}_${Date.now()}_${Math.floor(Math.random()*1e3)}`,y=fv(n,a);return V.getState().addUnit({unitId:m,unitName:f.unitName,count:l,currentUnitHp:f.stats.hp,currentStamina:f.stats.stamina,q:n,r:a,isDead:!1,faction:o,stats:{...f.stats},skills:[...f.skills],unitPortrait:f.unitPortrait||null}),new Q2(g,f,m,o,n,a,y.x,y.y)}}class Z2{queue=[];running=!1;playSkillAnimation(e,n,a,l){return this.enqueue(async()=>{await this.executeCombatSequence(e,n,a,l?.signal)},l?.signal,"combat")}playMovement(e,n,a){return this.enqueue(async()=>{await this.animateUnitMovement(e,n,a?.signal)},a?.signal,"move")}enqueue(e,n,a="combat"){return new Promise((l,o)=>{this.queue.push({task:e,resolve:l,reject:o,signal:n,type:a}),this.running||this.processQueue()})}async processQueue(){if(!this.running){for(this.running=!0;this.queue.length>0;){const e=this.queue.shift();if(e.signal?.aborted){e.reject(new Error("animation aborted via signal"));continue}try{await e.task(),e.resolve()}catch(n){console.error("Animation error:",n),e.reject(n)}}this.running=!1}}async executeCombatSequence(e,n,a,l){if(!(!n||!a))try{await Promise.all([n.prepareForAction(),a.prepareForAction()]);const o=n.playAttackTowards(a);await n.waitForImpact(l);const u=(async()=>{if(rt.emit("SKILL_EXECUTED",{attackerId:n.unitId,targetId:a.unitId,result:e}),e.isMiss?await a.playMissReaction(n):e.isCrit?await a.playCritReaction(n):await a.playHitReaction(n),e.isDead){await a.playDeath();return}await a.finishAction(l),await n.resetPose(),n.startIdle()})();await Promise.all([o,u]),await n.waitForIdle(l)}catch(o){console.log("Animation sequence stopped:",o.message),n.startIdle(),a&&!e.isDead&&a.startIdle()}}async animateUnitMovement(e,n,a){if(!(!e||!n))try{await e.animateMovement(n)}catch(l){console.log("Animation sequence stopped:",l.message)}}cancelAll(e="cancelled"){this.queue.forEach(n=>n.reject(new Error(e))),this.queue=[],this.running=!1}}class W2{hexes=new Map;units=new Map;registerHex(e,n){this.hexes.set(e,n)}getHex(e){return this.hexes.get(e)}getAllHexes(){return this.hexes}hasHex(e){return this.hexes.has(e)}removeHex(e){const n=this.hexes.get(e);n&&(n.destroy(),this.hexes.delete(e))}registerUnit(e,n){this.units.set(e,n)}getUnit(e){return this.units.get(e)}getAllUnits(){return this.units}hasUnit(e){return this.units.has(e)}removeUnit(e){const n=this.units.get(e);n&&(n.destroy(),this.units.delete(e))}clearHexes(){this.hexes.forEach(e=>e.destroy()),this.hexes.clear()}clearUnits(){this.units.forEach(e=>e.destroy()),this.units.clear()}destroy(){this.clearHexes(),this.clearUnits()}getCounts(){return{hexes:this.hexes.size,units:this.units.size}}}class K2{constructor(e,n){this.registry=e,this.stateMachine=n}currentHoverState={hexId:null,unitId:null};updateHoverState(e,n,a=!1){if(!this.stateMachine.allowsHover()&&!a){(this.currentHoverState.hexId||this.currentHoverState.unitId)&&this.clearHoverState();return}!a&&this.currentHoverState.hexId===e&&this.currentHoverState.unitId===n||(this.clearPreviousHoverHighlights(),this.currentHoverState={hexId:e,unitId:n},e&&this.highlightHex(e),n&&this.highlightUnit(n))}clearHoverState(){this.clearPreviousHoverHighlights(),this.currentHoverState={hexId:null,unitId:null}}clearPreviousHoverHighlights(){if(this.currentHoverState.hexId&&this.restoreHexHighlight(this.currentHoverState.hexId),this.currentHoverState.unitId){const e=this.registry.getUnit(this.currentHoverState.unitId);e&&e.setHighlighted(!1)}}highlightHex(e){const n=this.registry.getHex(e);if(!n)return;const{selectedSkillId:a,battleMap:l,units:o,targetHexes:u,reachableHexesWithCost:c}=V.getState();if(a){const f=l.get(e);if(!f)return;const g=u.includes(e),y=(f.entityId?o.get(f.entityId):null)?.faction===Et.Enemy;n.setHighlight(y&&g?16711680:16777215,y&&g?.4:.2)}else c.has(e)?n.setHighlight(0,.1):n.setHighlight(Bf,.1)}highlightUnit(e){const n=this.registry.getUnit(e);if(!n)return;const a=n.faction===Et.Player,l=V.getState(),{finishedPools:o,targetHexes:u}=l;if(a){const c=i2(l,n.unitId),f=!gv(l,n.unitId);c&&f&&n.setHighlighted(!0)}else{const c=Ut(n);u.includes(c)&&n.setHighlighted(!0)}}restoreHexHighlight(e){const{selectedSkillId:n,targetHexes:a,reachableHexesWithCost:l,units:o,battleMap:u}=V.getState(),c=this.registry.getHex(e);if(c){if(n){if(a.includes(e)){const f=u.get(e),m=(f?.entityId?o.get(f.entityId):null)?.faction===Et.Enemy;c.setHighlight(m?16711680:16777215,.2,m?1:.4)}else c.setHighlight(null);return}l.has(e)?c.setHighlight(0,.2):c.setHighlight(null)}}updateSkillRangeHighlights(){this.registry.getAllHexes().forEach((n,a)=>{this.updateHexBaseHighlight(a)})}updateReachableHighlights(){this.registry.getAllHexes().forEach((n,a)=>{this.updateHexBaseHighlight(a)})}updateHexBaseHighlight(e){const{selectedSkillId:n,targetHexes:a,reachableHexes:l,units:o,battleMap:u}=V.getState(),c=this.registry.getHex(e);if(c){if(n){if(a.includes(e)){const f=u.get(e),m=(f?.entityId?o.get(f.entityId):null)?.faction===Et.Enemy;c.setHighlight(m?16711680:16777215,.2,m?1:.4)}else c.setHighlight(null);return}l.includes(e)?c.setHighlight(0,.2):c.setHighlight(null)}}resetAllHexes(){this.registry.getAllHexes().forEach(n=>n.setHighlight(null))}resetAllUnits(){this.registry.getAllUnits().forEach(n=>n.stopIdle())}findHexAtPosition(e,n){const a=this.registry.getAllHexes();for(const[l,o]of a)if(o.containsPoint(e,n))return o;return null}restoreHoverHighlightsAfterAnimation(e,n,a=!1){if(e===null||n===null){this.clearHoverState();return}const l=this.findHexAtPosition(e,n);if(!l){this.clearHoverState();return}const o=l.id,c=V.getState().battleMap.get(o)?.entityId??null;this.updateHoverState(o,c,a)}}class F2{constructor(e,n,a,l,o,u){this.highlightManager=e,this.movementExecutor=n,this.combatExecutor=a,this.entityRegistry=l,this.stateMachine=o,this.skillManager=u,this.setupEventHandlers()}hotkeysInitialized=!1;lastMousePosition=null;initializeHotkeys(){this.hotkeysInitialized||(this.setupHotkeys(),this.hotkeysInitialized=!0)}setupHotkeys(){this.onKeyDown=this.onKeyDown.bind(this),window.addEventListener("keydown",this.onKeyDown)}handleHexHoverBound=e=>this.handleHexHover(e.id);handleHexClickBound=e=>this.handleHexClick(e.id);handleHexOutBound=e=>this.handleHexOut(e.id);handleUnitHoverBound=e=>this.handleUnitHover(e.id);handleUnitClickBound=e=>this.handleUnitClick(e.id);handleUnitOutBound=e=>this.handleUnitOut(e.id);handleMouseMoveBound=e=>this.handleMouseMove(e);setupEventHandlers(){rt.on("HEX_HOVER",this.handleHexHoverBound),rt.on("HEX_CLICK",this.handleHexClickBound),rt.on("HEX_OUT",this.handleHexOutBound),rt.on("UNIT_HOVER",this.handleUnitHoverBound),rt.on("UNIT_OUT",this.handleUnitOutBound),rt.on("UNIT_CLICK",this.handleUnitClickBound),rt.on("MOUSE_MOVE",this.handleMouseMoveBound)}getLastMousePosition(){return this.lastMousePosition}canHandleHover(){return this.stateMachine.canHandleInput(V.getState().status)}canHandleClick(){return this.stateMachine.canHandleInput(V.getState().status)}handleHexHover(e){if(!this.canHandleHover())return;const a=V.getState().battleMap.get(e)?.entityId??null;this.highlightManager.updateHoverState(e,a)}handleHexOut(e){this.canHandleHover()&&this.highlightManager.clearHoverState()}handleUnitHover(e){if(!this.canHandleHover())return;const n=V.getState().units.get(e);if(!n)return;const a=Ut(n);this.highlightManager.updateHoverState(a,e)}handleUnitOut(e){this.canHandleHover()&&this.highlightManager.clearHoverState()}handleMouseMove(e){this.lastMousePosition={x:e.x,y:e.y}}handleHexClick(e){if(!this.canHandleClick())return;const n=this.entityRegistry.getHex(e);if(!n)return;const{selectedUnitId:a,selectedSkillId:l,selectedHexId:o,selectedPath:u,battleMap:c}=V.getState();if(!a)return;const f=c.get(e);if(f){if(f.entityId){this.handleUnitClick(f.entityId);return}if(!l){if(u.lastStep?.id===f.id){this.movementExecutor.execute(a,u);return}n.flashHighlight(Bf,.1),V.getState().setSelectedHex(e)}}}handleUnitClick(e){if(!this.canHandleClick())return;const n=V.getState(),{selectedUnitId:a,selectedSkillId:l}=n;if(a&&l){this.combatExecutor.execute(a,e,l);return}const o=Zo(n);o?.faction===Et.Player&&o.unitIds.includes(e)&&!gv(n,e)&&n.setSelectedUnit(e)}onKeyDown(e){if(e.key>="1"&&e.key<="9"){const n=parseInt(e.key)-1;this.selectSkillByIndex(n)}if(e.key==="Escape"){e.preventDefault();const n=V.getState();if(!this.canHandleClick())return;n.selectedSkillId?this.skillManager.deselectSkill():n.selectedHexId&&n.setSelectedHex(null)}}selectSkillByIndex(e){const n=V.getState().selectedUnitId;if(!n)return;const a=V.getState().units.get(n);if(!a||!a.skills[e])return;const l=a.skills[e].id;this.skillManager.toggleSkill(l),this.lastMousePosition&&this.highlightManager.restoreHoverHighlightsAfterAnimation(this.lastMousePosition.x,this.lastMousePosition.y,!0)}destroy(){window.removeEventListener("keydown",this.onKeyDown),rt.off("HEX_HOVER",this.handleHexHoverBound),rt.off("HEX_CLICK",this.handleHexClickBound),rt.off("HEX_OUT",this.handleHexOutBound),rt.off("UNIT_HOVER",this.handleUnitHoverBound),rt.off("UNIT_CLICK",this.handleUnitClickBound),rt.off("UNIT_OUT",this.handleUnitOutBound),rt.off("MOUSE_MOVE",this.handleMouseMoveBound)}}class J2{constructor(e,n,a,l,o){this.animationController=e,this.pathRendeder=n,this.entityRegistry=a,this.turnManager=l,this.stateMachine=o}currentAbortController=null;async execute(e,n){this.currentAbortController=new AbortController;const a=this.currentAbortController.signal,o=V.getState().units.get(e),u=this.entityRegistry.getUnit(e);if(!o||!u){console.warn("[MovementExecutor] Unit or visual not found");return}const c=o.faction===Et.Player;if(Ut(o),o.currentStamina<n.cost){console.warn("[MovementExecutor] Not enough stamina");return}if(n.path.length===0){console.warn("[MovementExecutor] No valid path found");return}if(!n.lastStep){console.warn("[MovementExecutor] No valid path found");return}c&&this.stateMachine.is(Z.Idle)&&this.stateMachine.setState(Z.PlayerMoving);try{const f=this.prepareForMovement(u,n.path,n.lastStep.terrain===Bt.Hill);rt.emit("STAMINA_DRAIN",{unitId:e,amount:n.cost}),await this.animationController.playMovement(u,f,{signal:a}),a.aborted||this.updateUnitPosition(u,n.lastStep.id,n.cost)}catch(f){a.aborted||f.message?.includes("aborted")?console.log("[MovementExecutor] Movement cancelled"):console.error("[MovementExecutor] Movement failed:",f)}finally{this.pathRendeder.clear(),this.currentAbortController=null,this.stateMachine.is(Z.PlayerMoving)&&this.stateMachine.setState(Z.Idle)}}cancelCurrentMovement(){this.currentAbortController&&(this.currentAbortController.abort(),this.currentAbortController=null)}prepareForMovement(e,n,a=!1){this.pathRendeder.clear();const l=se.constructFullPath(e,n,this.entityRegistry.getAllHexes());return dv(l,a)}updateUnitPosition(e,n,a){const l=this.entityRegistry.getHex(n),o=V.getState().units.get(e.unitId);if(!l||!o)return;e.q=l.data.q,e.r=l.data.r;const u=Ut(o),c=o.currentStamina-a;V.getState().apply(f=>{Yn.updateHex(f,u,{entityId:void 0}),Yn.updateHex(f,n,{entityId:o.unitId}),Yn.resetSelectedPath(f),Yn.updateUnit(f,o.unitId,{q:l.data.q,r:l.data.r,currentStamina:c})})}}class $2{constructor(e=!0){this.enableLogging=e}state=Z.Initializing;previousState=null;stateHistory=[];MAX_HISTORY=20;onStateChangeCallbacks=[];setState(e){if(this.state===e)return;if(!this.isValidTransition(this.state,e)){console.warn(`[ControlStateMachine] Invalid transition: ${this.state}  ${e}`);return}const n=this.state;this.previousState=n,this.state=e,this.stateHistory.push({from:n,to:e,timestamp:Date.now()}),this.stateHistory.length>this.MAX_HISTORY&&this.stateHistory.shift(),this.enableLogging&&console.log(`[ControlState] ${n}  ${e}`),this.onStateChangeCallbacks.forEach(a=>{a(n,e)})}isValidTransition(e,n){return{[Z.Initializing]:[Z.Idle,Z.EnemyTurn,Z.Ended],[Z.Idle]:[Z.PlayerMoving,Z.PlayerAttacking,Z.SkillTargeting,Z.EnemyTurn,Z.Ended],[Z.SkillTargeting]:[Z.Idle,Z.PlayerAttacking,Z.EnemyTurn,Z.Ended],[Z.PlayerMoving]:[Z.Idle,Z.EnemyTurn,Z.Ended],[Z.PlayerAttacking]:[Z.Idle,Z.EnemyTurn,Z.Ended],[Z.EnemyTurn]:[Z.Idle,Z.Ended],[Z.Ended]:[]}[e]?.includes(n)??!1}revertToPreviousState(){this.previousState&&this.setState(this.previousState)}getState(){return this.state}is(e){return this.state===e}isAnyOf(...e){return e.includes(this.state)}allowsInput(){return this.state===Z.Idle||this.state===Z.SkillTargeting}allowsHover(){return this.allowsInput()}allowsClick(){return this.allowsInput()}allowsMovement(){return this.state===Z.Idle}allowsAttack(){return this.state===Z.Idle||this.state===Z.SkillTargeting}allowsSkillSelection(){return this.state===Z.Idle||this.state===Z.SkillTargeting}isBlocking(){return this.state===Z.PlayerMoving||this.state===Z.PlayerAttacking||this.state===Z.EnemyTurn}isBattleActive(){return this.state!==Z.Initializing&&this.state!==Z.Ended}canHandleInput(e){return e!==Yt.Playing?!1:this.allowsInput()}syncWithBattleStatus(e){switch(e){case Yt.Preparing:this.setState(Z.Initializing);break;case Yt.Playing:this.is(Z.Initializing)&&this.setState(Z.Idle);break;case Yt.Victory:case Yt.Defeat:this.setState(Z.Ended);break}}onStateChange(e){return this.onStateChangeCallbacks.push(e),()=>{const n=this.onStateChangeCallbacks.indexOf(e);n!==-1&&this.onStateChangeCallbacks.splice(n,1)}}getHistory(){return[...this.stateHistory]}getHistoryString(){return this.stateHistory.map(({from:e,to:n,timestamp:a})=>`[${new Date(a).toLocaleTimeString()}] ${e}  ${n}`).join(`
`)}debugPrint(){console.log("=== ControlStateMachine State ==="),console.log("Current:",this.state),console.log("Previous:",this.previousState),console.log("Allows Input:",this.allowsInput()),console.log("Is Blocking:",this.isBlocking()),console.log(`
Recent History:`),console.log(this.getHistoryString())}reset(){this.state=Z.Initializing,this.previousState=null,this.stateHistory=[],this.enableLogging&&console.log("[ControlStateMachine] Reset")}}class Ua{static getHitChance(e,n,a,l){const o=e.currentStamina<e.stats.stamina*.2?-5:0;let u=n+(l.hitChanceBonus||0)-a.stats.evasion+o;return Math.max(5,Math.min(95,u))}static getEffectiveCount(e){return Math.pow(e.count,hv)}static calculateSkillRawDamage(e,n,a,l=!0){return this.calculateRawDamage(e,n,a.powerMult||1,a.armorPenetration,l)}static calculateOpportunityRawDamage(e,n,a=!0){return this.calculateRawDamage(e,n,.5,.1,a)}static calculateRawDamage(e,n,a,l,o=!0){const u=this.getEffectiveCount(e),f=(o?(e.stats.damageMin+e.stats.damageMax)/2:e.stats.damageMin+Math.random()*(e.stats.damageMax-e.stats.damageMin))*u*a,g=l||0,m=f*g;let y=f*(1-g);const _=Math.min(.8,n.stats.armor/100);return y=y*(1-_),Math.round(m+y)}static calculateAttack(e,n,a){const o=a.range>2?e.stats.rangedSkill||0:e.stats.meleeSkill||0,u=this.getHitChance(e,o,n,a);if(Math.random()*100>u)return this.emptyResult(n,!0,"Miss!");const f=this.calculateSkillRawDamage(e,n,a,!1),g=(e.stats.critChance||0)+(a.critChanceBonus||0),m=Math.random()*100<g,y=(e.stats.critMult||1.5)+(a.critMultBonus||0),_=m?Math.round(f*y):f;return this.applyDamageToStack(n,_,m)}static checkOpportunityAttackersOnHex(e,n,a){const l=a.get(e);if(!l)return[];const o=rn(n),u=[];for(const[c,f]of a.entries()){if(f.faction===l.faction||f.isDead||f.opportunityAttackUsed)continue;Ci(o,f)<=1&&u.push({attackerId:c})}return u}static applyDamageToStack(e,n,a){const l=(e.count-1)*e.stats.hp+e.currentUnitHp,o=Math.max(0,l-n),u=Math.ceil(o/e.stats.hp),c=o%e.stats.hp||(o>0?e.stats.hp:0);return{targetId:e.unitId,damage:n,isCrit:a,isMiss:!1,finalDefenderHp:c,finalDefenderCount:u,isDead:o<=0,details:`${a?"CRIT! ":""}Dealt ${n} damage.`}}static emptyResult(e,n,a){return{targetId:e.unitId,damage:0,isCrit:!1,isMiss:n,finalDefenderHp:e.currentUnitHp,finalDefenderCount:e.count,isDead:!1,details:a}}}class tT{constructor(e,n,a,l){this.animationController=e,this.registry=n,this.turnManager=a,this.stateMachine=l}currentAbortController=null;async execute(e,n,a){this.currentAbortController=new AbortController;const l=this.currentAbortController.signal,o=V.getState(),u=o.units.get(e),c=o.units.get(n);if(!u||!c){console.warn("[CombatExecutor] Attacker or target not found");return}const f=u.skills.find(m=>m.id===a);if(!f){console.warn("[CombatExecutor] Skill not found");return}if(u.currentStamina<f.cost){console.warn("[CombatExecutor] Not enough stamina");return}const g=u.faction===Et.Player;if(g){const m=Ut(c);if(!o.targetHexes.includes(m)){console.warn("[CombatExecutor] Unit not in range");return}}g&&this.stateMachine.is(Z.SkillTargeting)&&this.stateMachine.setState(Z.PlayerAttacking);try{const m=Ua.calculateAttack(u,c,f),y=this.registry.getUnit(e),_=this.registry.getUnit(n);if(!y||!_){console.warn("[CombatExecutor] Visual not found");return}rt.emit("STAMINA_DRAIN",{unitId:e,amount:f.cost}),await this.animationController.playSkillAnimation(m,y,_,{signal:l}),l.aborted||this.applySkillResult(e,n,f,m)}catch(m){l.aborted||m.message?.includes("aborted")?console.log("[CombatExecutor] Combat cancelled"):console.error("[CombatExecutor] Combat failed:",m)}finally{this.currentAbortController=null,this.stateMachine.is(Z.PlayerAttacking)&&this.stateMachine.setState(Z.Idle)}}cancelCurrentCombat(){this.currentAbortController&&(this.currentAbortController.abort(),this.currentAbortController=null)}applySkillResult(e,n,a,l){const o=V.getState(),u=o.units.get(e),c=o.units.get(n);if(!u||!c)return;l.isDead?this.turnManager.handleUnitDeath(n):o.updateUnit(n,{count:l.finalDefenderCount,currentUnitHp:l.finalDefenderHp});const f=u.currentStamina-a.cost;o.updateUnit(e,{currentStamina:f})}}class eT{endUnitTurn(e){const n=V.getState(),a=n.units.get(e);if(!a)return;const l=this.removeUnitFromActive(n.turnQueue,e),o=this.addToFinished(n.finishedPools,e,a.faction);this.applyQueueUpdate(l,o)}deferUnit(e){const n=V.getState(),a=n.units.get(e);if(!a||!n.turnQueue[0])return;const o=n.turnQueue.findIndex((u,c)=>c>0&&u.faction===a.faction);if(o!==-1){const u=this.moveToNextPool(n.turnQueue,e,o);this.applyQueueUpdate(u,n.finishedPools);return}this.endUnitTurn(e)}canUnitStillAct(e){const n=V.getState(),a=n.units.get(e);if(!a||a.currentStamina<=0)return!1;if(a.skills.some(f=>a.currentStamina>=f.cost))return!0;const o=Array.from(n.reachableHexesWithCost.values()).filter(f=>f>0),u=o.length>0?Math.min(...o):1/0;return a.currentStamina>=u}handleUnitDeath(e){const n=V.getState(),a=n.units.get(e);if(!a||a.isDead)return;const l=this.removeUnitFromActive(n.turnQueue,e);V.getState().applyUnitDeath({unitId:e,hexId:Ut(a),newQueue:l}),this.checkBattleEnd(),e===n.selectedUnitId&&this.advanceTurn(l,n.finishedPools)}removeUnitFromActive(e,n){return e.map(a=>({...a,unitIds:a.unitIds.filter(l=>l!==n)})).filter(a=>a.unitIds.length>0)}moveToNextPool(e,n,a){return e.map((l,o)=>o===0?{...l,unitIds:l.unitIds.filter(u=>u!==n)}:o===a?{...l,unitIds:[...l.unitIds,n]}:l).filter(l=>l.unitIds.length>0)}addToFinished(e,n,a){const l=e.findIndex(o=>o.faction===a);return l!==-1?e.map((o,u)=>u===l?{...o,unitIds:[...o.unitIds,n]}:o):[...e,{id:`finished-${a}`,faction:a,unitIds:[n]}]}applyQueueUpdate(e,n){const a=V.getState(),l=e[0];if(!l){this.startNewRound();return}const o=l.unitIds.find(u=>u!==a.selectedUnitId)||l.unitIds[0];V.setState({turnQueue:e,finishedPools:n,selectedUnitId:o||null,selectedSkillId:null})}advanceTurn(e,n){const a=e[0];if(!a){this.startNewRound();return}V.setState({turnQueue:e,finishedPools:n,selectedUnitId:a.unitIds[0]||null,selectedSkillId:null})}startNewRound(){const e=V.getState(),n=new Map,a=[];for(const[u,c]of e.units){const f=c.currentStamina===c.stats.stamina?c:{...c,currentStamina:c.stats.stamina};n.set(u,f),a.push(f)}const l=pv(a),o=l[0];V.setState({units:n,turnQueue:l,finishedPools:[],round:e.round+1,selectedUnitId:o?.unitIds[0]||null,selectedSkillId:null})}checkBattleEnd(){const e=V.getState().units;let n=0,a=0;for(const l of e.values())if(!l.isDead&&(l.faction===Et.Enemy?n++:a++,n>0&&a>0))break;n===0?V.setState({status:Yt.Victory,selectedUnitId:null,selectedPath:Wo,reachableHexes:[],targetHexes:[]}):a===0&&V.setState({status:Yt.Defeat,selectedUnitId:null,selectedPath:Wo,reachableHexes:[],targetHexes:[]})}}class iT{constructor(e,n){this.stateMachine=e,this.pathRenderer=n}selectSkill(e){const n=this.validateSkillSelection(e);if(!n.isValid)return console.log("[SkillManager] Cannot select skill:",n.reason),!1;this.pathRenderer.clear();const{unit:a,skill:l}=n,o=this.calculateSkillRange(a,l);return V.setState({selectedSkillId:e,targetHexes:o}),this.stateMachine.is(Z.Idle)&&this.stateMachine.setState(Z.SkillTargeting),console.log(`[SkillManager] Skill selected: ${e}, targets: ${o.length}`),!0}deselectSkill(){V.setState({selectedSkillId:null,targetHexes:[]}),this.stateMachine.is(Z.SkillTargeting)&&this.stateMachine.setState(Z.Idle),console.log("[SkillManager] Skill deselected")}toggleSkill(e){return V.getState().selectedSkillId===e?(this.deselectSkill(),!1):this.selectSkill(e)}canSelectSkill(e){const n=this.validateSkillSelection(e);return{canSelect:n.isValid,reason:n.reason}}getSelectedSkill(){const{selectedUnitId:e,selectedSkillId:n}=V.getState();if(!e||!n)return null;const a=V.getState().units.get(e);return a&&a.skills.find(l=>l.id===n)||null}isValidTarget(e){const{targetHexes:n}=V.getState();return n.includes(e)}validateSkillSelection(e){if(V.getState().status!==Yt.Playing)return{isValid:!1,reason:"Battle is not active"};if(!this.stateMachine.allowsSkillSelection())return{isValid:!1,reason:`Cannot select skill in state: ${this.stateMachine.getState()}`};const a=V.getState().selectedUnitId;if(!a)return{isValid:!1,reason:"No unit selected"};const l=V.getState().units.get(a);if(!l)return{isValid:!1,reason:"Selected unit not found"};if(l.isDead)return{isValid:!1,reason:"Unit is dead"};if(V.getState().finishedPools.some(f=>f.unitIds.includes(a)))return{isValid:!1,reason:"Unit has finished turn"};const c=l.skills.find(f=>f.id===e);return c?l.currentStamina<c.cost?{isValid:!1,reason:`Not enough stamina (need ${c.cost}, have ${l.currentStamina})`}:{isValid:!0,unit:l,skill:c}:{isValid:!1,reason:"Skill not found"}}calculateSkillRange(e,n){const a=V.getState().battleMap,l={q:e.q,r:e.r},o=n.range,u=se.getRadius(l,o,a,!1);return Array.from(u.keys())}}class di{static instance=null;skillManager;stateMachine;turnManager;constructor(){}static initialize(e,n,a){di.instance||(di.instance=new di);const l=di.instance;l.stateMachine=e,l.skillManager=n,l.turnManager=a,console.log("[ManagerRegistry] Initialized")}static getInstance(){if(!di.instance)throw new Error("ManagerRegistry not initialized. Create BattleScene first.");return di.instance}static destroy(){di.instance=null,console.log("[ManagerRegistry] Destroyed")}static isInitialized(){return di.instance!==null}}const nT={ELIMINATE:"ELIMINATE"};class aT{state={goals:[],assignments:new Map,goalProgress:new Map,goalsCreated:0,goalsCompleted:0,goalsFailed:0};currentTurn=0;onTurnStart(e,n,a,l,o){this.currentTurn=l,this.state.goals=[],this.state.assignments.clear(),this.state.goals=this.generateGoals(e,n,a),this.assignGoalsToAll(e,n,o),console.log(`[AIManager] Turn ${l}: Generated goals`,this.state.goals)}getGoalForUnit(e,n,a,l){const o=this.state.assignments.get(e.unitId);if(o){const c=this.state.goals.find(f=>f.id===o);if(c&&this.isGoalValid(c,a))return console.log(`[AIManager] Unit ${e.unitId}: Keeping existing goal ${c.type} - ${c.targetId}`),c}const u=this.assignBestGoal(e,n,a,l);return u.goal?(this.state.assignments.set(e.unitId,u.goal.id),u.goal.assignedUnits.push(e.unitId),console.log(`[AIManager] Unit ${e.unitId}: Assigned ${u.goal.type} (score: ${u.score.toFixed(1)})`,this.state.goals)):console.log(`[AIManager] Unit ${e.unitId}: No suitable goal, going OPPORTUNISTIC`),u.goal}markGoalCompleted(e){const n=this.state.goals.find(a=>a.id===e);n&&(n.isActive=!1,this.state.goalsCompleted++)}getState(){return this.state}generateGoals(e,n,a){const l=[];for(const o of n){const u=this.findClosestAllyDistance(o,e),c=Math.max(1,Math.min(10,11-u)),f={id:`eliminate_${o.unitId}_t${this.currentTurn}`,type:nT.ELIMINATE,priority:c,targetId:o.unitId,assignedUnits:[],isActive:!0,maxUnits:1,reason:`Closest ally distance: ${u}`};l.push(f)}return l.sort((o,u)=>u.priority-o.priority),this.state.goalsCreated+=l.length,l}assignGoalsToAll(e,n,a){const l=[];for(const c of e)for(const f of this.state.goals){const g=n.find(y=>y.unitId===f.targetId);if(!g||g.isDead)continue;const m=this.calculateWeight(c,g,a);l.push({u:c.unitId,g:f,score:m})}l.sort((c,f)=>f.score-c.score);const o=new Set,u=new Map;for(const c of l){if(o.has(c.u))continue;const f=u.get(c.g.id)??0,g=c.g.maxUnits??1/0;f<g&&(this.state.assignments.set(c.u,c.g.id),c.g.assignedUnits.push(c.u),o.add(c.u),u.set(c.g.id,f+1))}}calculateWeight(e,n,a){const l=a.pathsToEnemies.get(n.unitId)?.length||5,o=e.skills[0]?.armorPenetration??0,u=n.skills[0]?.armorPenetration??0,c=Math.max(0,n.stats.armor-o),f=Math.max(0,e.stats.damageMin-c),g=n.stats.damageMin*(1+u/20);let m=0;if(o>0&&n.stats.armor>0){const _=n.stats.armor/o;m=_>.5&&_<=1.2?20:0}const y=Math.pow(l,1.5)*2;return f*(g/10)+m-y}assignBestGoal(e,n,a,l){const o={allies:n,enemies:a,battleMap:l,getDistance:Ci,getTarget:f=>a.find(g=>g.unitId===f)},u=this.state.goals.filter(f=>f.isActive).filter(f=>this.canUnitPursueGoal(e,f,o)).map(f=>({goal:f,score:this.evaluateGoalSuitability(e,f,o)})).sort((f,g)=>g.score-f.score),c=u[0];return c?{unitId:e.unitId,goal:c.goal,score:c.score,alternatives:u.slice(1,3).map(f=>f.goal)}:{unitId:e.unitId,goal:null,score:0}}canUnitPursueGoal(e,n,a){return!(n.maxUnits&&n.assignedUnits.length>=n.maxUnits||n.targetId&&!a.getTarget(n.targetId))}evaluateGoalSuitability(e,n,a){const l=n.priority*10;if(n.targetId){const o=a.getTarget(n.targetId);if(!o)return 0;const c=100/(a.getDistance({q:e.q,r:e.r},{q:o.q,r:o.r})+1);return l*(c/100)}return l}isGoalValid(e,n){return e.isActive?e.targetId&&!n.some(l=>l.unitId===e.targetId)?(e.isActive=!1,e.reason="Target eliminated",!1):!0:!1}findClosestAllyDistance(e,n){let a=1/0;for(const l of n){const o=Ci({q:l.q,r:l.r},{q:e.q,r:e.r});o<a&&(a=o)}return a}customEvaluators=new Map;setEvaluator(e,n){this.customEvaluators.set(e,n)}getCurrentTurn(){return this.currentTurn}}const Gm={AGGRESSIVE_RATIO:1.3,DEFENSIVE_RATIO:.7},Di={CREATURE_VALUE:10,ONESHOT_BONUS:3,STRONG_TARGET_BONUS:1.5,WEAK_TARGET_BONUS:.5,NORMAL_TARGET_BONUS:1,WOUNDED_BONUS_MAX:2,INTERRUPT_PENALTY_BASE:5,PATH_LOG_BASE:11},sT={DAMAGE_WEIGHT:1.4,TARGET_VALUE_WEIGHT:1.2,FOCUS_FIRE_BONUS:1.5,CLOSING_WEIGHT:2,PATH_ALIGNMENT_BONUS:1.15,ENTERING_RANGE_WEIGHT:1.5,REPOSITIONING_WEIGHT:.8,RISK_WEIGHT:.5,THREAT_ZONE_WEIGHT:.3,OPPORTUNITY_RISK_WEIGHT:.5,MOVE_COST_WEIGHT:.3,KITING_WEIGHT:.5,THREAT_ZONE_TARGET:1.5},lT={DAMAGE_WEIGHT:1.3,TARGET_VALUE_WEIGHT:.8,FOCUS_FIRE_BONUS:1,CLOSING_WEIGHT:1.2,PATH_ALIGNMENT_BONUS:1.1,ENTERING_RANGE_WEIGHT:.2,REPOSITIONING_WEIGHT:.5,RISK_WEIGHT:.8,THREAT_ZONE_WEIGHT:.7,OPPORTUNITY_RISK_WEIGHT:.8,MOVE_COST_WEIGHT:1,KITING_WEIGHT:1,THREAT_ZONE_TARGET:.5},rT={DAMAGE_WEIGHT:1,TARGET_VALUE_WEIGHT:.8,FOCUS_FIRE_BONUS:1,CLOSING_WEIGHT:.7,PATH_ALIGNMENT_BONUS:1.05,ENTERING_RANGE_WEIGHT:1,REPOSITIONING_WEIGHT:.3,RISK_WEIGHT:1.5,THREAT_ZONE_WEIGHT:2,OPPORTUNITY_RISK_WEIGHT:1,MOVE_COST_WEIGHT:1.5,KITING_WEIGHT:1.5,THREAT_ZONE_TARGET:.3};function oT(d){switch(d){case"AGGRESSIVE":return sT;case"DEFENSIVE":return rT;default:return lT}}const Bl={MELEE_THRESHOLD:2,RANGED_MIN_DISTANCE:4,RANGED_PREFERRED_DISTANCE:6},ir={pruneThreshold:.5,debug:!0};class Sv{static analyzeBehavior(e){const n=e.skills;return n.length===0?this.createMeleeStrategy():n.filter(l=>l.range>Bl.MELEE_THRESHOLD).length>0?this.createRangedStrategy():this.createMeleeStrategy()}static createMeleeStrategy(){return{type:"MELEE",preferredDistance:1,minDistance:0,maxDistance:2,shouldKite:!1}}static createRangedStrategy(){return{type:"RANGED",preferredDistance:Bl.RANGED_PREFERRED_DISTANCE,minDistance:Bl.RANGED_MIN_DISTANCE,maxDistance:6,shouldKite:!0}}static createHybridStrategy(){return{type:"HYBRID",preferredDistance:4,minDistance:1,maxDistance:12,shouldKite:!0}}static getMaxSkillRange(e){return e.skills.length===0?1:Math.max(...e.skills.map(n=>n.range))}static canPerformMelee(e){return e.skills.some(n=>n.range<=Bl.MELEE_THRESHOLD)}static canPerformRanged(e){return e.skills.some(n=>n.range>Bl.MELEE_THRESHOLD)}}class uT{static calculate(e,n){const a=rn(e),l=new Map;let o=1/0,u=null;for(const c of n){const f=Ci(a,c);l.set(c.unitId,f),f<o&&(o=f,u=c.unitId)}return{distances:l,minDist:o,closestEnemyId:u}}}const cT=.75;class hT{static calculate(e,n,a,l,o){const u=n.get(e);if(!u)return 0;const c=Ut(a),f=se.findPath(c,l,o);if(f.length===0)return 0;let g=0;const m=[c,...f],y=new Set;let _=null;for(const S of m){if(_){const T=Ua.checkOpportunityAttackersOnHex(e,_,n);for(const{attackerId:x}of T){const M=n.get(x);if(!M||M.isDead)continue;y.add(x);const w=Ua.calculateOpportunityRawDamage(M,u,!0);g+=w}}_=S}if(y.size>0){const S=g/Math.max(y.size,1),T=y.size*S*cT;g+=T}return g}}class fT{static calculate(e,n,a,l,o,u){const c=new Map,f=new Map;if(a.length===0)return{pathHexes:c,pathsToEnemies:f};const g=Ut(n),m=[];let y=1/0;for(const _ of a){const S=Ut(_),T=se.findPath(g,S,o);if(T&&T.length>0){T.length<y&&(y=T.length);const x=Ua.calculateRawDamage(e,_,1,0,!0),M=Math.max(0,(_.count-1)*_.stats.hp+_.currentUnitHp),w=x>=M*1.5,E=Math.min(x,M*1.5),H=Math.pow(_.count,hv),B=(_.stats.damageMin+_.stats.damageMax)/2*H;m.push({path:T,weight:E,enemyDmg:B,isKillable:w}),f.set(_.unitId,T)}}if(m.length===0)return{pathHexes:c,pathsToEnemies:f};for(const{path:_,weight:S,enemyDmg:T,isKillable:x}of m)for(const M of _)if(l.has(M)){const w=c.get(M)||{maxDmg:0,sumDmg:0,enemyMaxDmg:0,enemySumDmg:0,dist:1/0,hasKill:!1},E=x||w.hasKill;c.set(M,{maxDmg:Math.max(w.maxDmg,S),sumDmg:w.sumDmg+S,enemyMaxDmg:Math.max(w.enemyMaxDmg,T),enemySumDmg:w.enemySumDmg+T,hasKill:E,dist:Math.min(w.dist,_.length)})}return{pathHexes:c,pathsToEnemies:f}}}class dT{static calculate(e,n,a,l){const o=new Map,u=n.map(c=>({instance:c,damageTable:this.precomputeDamageKnapsack(c,a),reachableMap:se.getReachableNodes({q:c.q,r:c.r},{currentStamina:c.currentStamina,speed:c.stats.speed},l).reachableMap}));for(const c of e){const f=this.evaluateSingleHex(c,u,l);f>0&&o.set(c[0],f)}return o}static evaluateSingleHex(e,n,a){const l=[];for(const c of n){const f=[],g=c.damageTable.maxRange,m=rn(e[0]);se.getRadius(m,g,a,!0).forEach((_,S)=>{const T=c.reachableMap.get(S);if(T===void 0)return;const x=c.instance.currentStamina-T;if(x<0)return;const M=c.damageTable.tables.get(_);if(!M)return;const w=this.getMaxDamageForStamina(M,x);w>0&&f.push({slot:S,damage:w})}),f.length>0&&(f.sort((_,S)=>S.damage-_.damage),l.push({enemy:c,options:f}))}l.sort((c,f)=>{const g=c.options[0],m=f.options[0];return!g||!m?0:c.options.length!==f.options.length?c.options.length-f.options.length:m.damage-g.damage});let o=0;const u=new Set;for(const c of l){const f=c.options.find(g=>!u.has(g.slot));f&&(o+=f.damage,u.add(f.slot))}return o}static precomputeDamageKnapsack(e,n){const l=Math.floor(e.currentStamina/5),o=new Map,u=e.skills.reduce((m,y)=>{m[y.range]||(m[y.range]=[]);const _=Math.ceil(y.cost/5);return m[y.range].push({stepCost:_,damage:Ua.calculateRawDamage(e,n,y.powerMult||1,y.armorPenetration||0,!0)}),m},{}),c=Object.keys(u).map(Number).sort((m,y)=>y-m);if(c.length===0)return{tables:o,maxRange:0};const f=c[0];let g=new Array(l+1).fill(0);for(let m=f;m>=1;m--){if(u[m]){const y=[...g];for(const _ of u[m])for(let S=_.stepCost;S<=l;S++){const T=y[S-_.stepCost]+_.damage;T>y[S]&&(y[S]=T)}for(let _=1;_<=l;_++)y[_]=Math.max(y[_],y[_-1]);g=y}o.set(m,g)}return{tables:o,maxRange:f,step:5}}static getMaxDamageForStamina(e,n,a=5){const l=Math.floor(n/a);return l<0?0:l>=e.length?e[e.length-1]||0:e[l]||0}}class pT{static calculate(e,n){const a=new Map;for(const l of e){if(l.isDead)continue;const o=(l.stats.damageMin+l.stats.damageMax)*l.count/2,u=ff(l.q,l.r);for(const c of u){const f=Ut(c),g=n.get(f);if(g&&!g.isObstacle){const m=a.get(f)||0;a.set(f,m+o)}}}return a}}class gT{static create(e,n,a,l,o){const u=oT(l),c=Sv.analyzeBehavior(e),f=[],g=[];for(const B of n.values())B.isDead||(B.faction===e.faction?g.push(B):f.push(B));const m=f.find(B=>B.unitId===o?.targetId),{reachableIds:y,reachableMap:_,parentMap:S}=se.getReachableNodes(e,{currentStamina:e.currentStamina,speed:e.stats.speed},a),T=pT.calculate(f,a),{pathHexes:x,pathsToEnemies:M}=fT.calculate(e,e,f,_,a,T),w=dT.calculate(_,f,e,a),{distanceMatrix:E,oppRiskCache:H}=this.precomputeHexData(e,n,f,y,a);return{unit:e,goal:o,allies:g,enemies:f,target:m,battleMap:a,reachableMap:_,parentMap:S,stance:l,weights:u,behavior:c,threatMap:w,zocMap:T,distanceMatrix:E,oppRiskCache:H,pathHexes:x,pathsToEnemies:M}}static precomputeHexData(e,n,a,l,o){const u=new Map,c=new Map;return l.forEach(f=>{const g=uT.calculate(f,a),m=hT.calculate(e.unitId,n,e,f,o);c.set(f,m),u.set(f,g)}),{distanceMatrix:u,oppRiskCache:c}}}class mT{evaluate(e,n,a,l){const o=Ua.calculateSkillRawDamage(n.unit,a,l,!0),u=Math.max(n.unit.stats.rangedSkill||0,n.unit.stats.meleeSkill||0),f=Math.max(5,u+(l.hitChanceBonus||0)-a.stats.evasion)/100,g=o*f,m=Di.CREATURE_VALUE,y=Math.min(g/a.stats.hp,a.count),_=y*m,S=_*n.weights.DAMAGE_WEIGHT;let T=0;y>=a.count&&(T+=Di.ONESHOT_BONUS*m*n.weights.TARGET_VALUE_WEIGHT);const x=a.stats.hp*a.count,M=n.unit.stats.hp*n.unit.count,w=x/M;w>1.5?T+=Di.STRONG_TARGET_BONUS*m*n.weights.TARGET_VALUE_WEIGHT:w<.5?T+=Di.WEAK_TARGET_BONUS*m*n.weights.TARGET_VALUE_WEIGHT:T+=Di.NORMAL_TARGET_BONUS*m*n.weights.TARGET_VALUE_WEIGHT;let E=0;const H=a.currentUnitHp/a.stats.hp;H<.5&&(E=(1-H)*Di.WOUNDED_BONUS_MAX*m*n.weights.FOCUS_FIRE_BONUS);const B=S+T+E;return{utility:B,components:{baseDamage:_,damageWeight:S-_,targetBonus:T,woundedBonus:E,total:B}}}}class yT{evaluate(e,n,a){if(!a.lastStep)return{utility:0};const l=Di.CREATURE_VALUE,o=n.unit.stats.hp*n.unit.count,u=rn(a.lastStep.id),c=n.oppRiskCache.get(a.lastStep.id)||0,f=n.distanceMatrix.get(a.lastStep.id),g=n.pathHexes.get(a.lastStep.id),m=this.calculateComponents(e,n,u,a.cost,f,g,c,o,l);let y=Object.values(m).reduce((_,S)=>_+(S||0),0);return n.goal?.type==="ELIMINATE"&&(y+=1),m.total=y,{utility:y,components:m}}calculateComponents(e,n,a,l,o,u,c,f,g){const{unit:m,enemies:y,weights:_,threatMap:S}=n,{minDistBefore:T,minDistAfter:x}=this.calculateDistances(e.position,a,y,o),M=this.evaluateMovement(m,e.position,a,l,T,x,g,u),w=this.evaluatePathAlignment(m,l,g,_,u),E=this.evaluateRangeEntry(m,T,x,g,_),H=this.evaluateRisk(e.position,a,c,S,f,g,_);return{progress:M.progress,moveCost:M.cost,pathAlignment:w,enteringRange:E,threatDelta:H.threatDelta,threatZone:H.threatZone,oppRisk:H.oppRisk,total:0}}calculateDistances(e,n,a,l){if(l){const c=l.minDist;let f=1/0;for(const g of a){const m=Ci(e,{q:g.q,r:g.r});f=Math.min(f,m)}return{minDistBefore:f,minDistAfter:c}}let o=1/0,u=1/0;for(const c of a){const f={q:c.q,r:c.r},g=Ci(e,f),m=Ci(n,f);o=Math.min(o,g),u=Math.min(u,m)}return{minDistBefore:o,minDistAfter:u}}evaluateMovement(e,n,a,l,o,u,c,f){const g=e.stats.stamina,m=c/g,y=-l*m,_=Ci(n,a);let S=Math.max(0,o-u);S<=0&&f&&(S=_*.9);const T=S>0?l/S:30;return{progress:S*T*m,cost:y}}evaluatePathAlignment(e,n,a,l,o){if(!o)return 0;const u=o.maxDmg-Math.sqrt(o.enemyMaxDmg*a),c=Math.log(1+Math.max(0,u)/a)/Math.log(Di.PATH_LOG_BASE),f=1+o.dist*.08*l.PATH_ALIGNMENT_BONUS,g=c/f;let m=0;const y=(o.sumDmg-o.enemySumDmg)/a;y>0&&(m=Math.log(1+y)/Math.log(Di.PATH_LOG_BASE)*.3);const _=o.dist>0&&n>0?n/o.dist:30,S=a/e.stats.stamina,T=_*S;return(g+m)*T}evaluateRangeEntry(e,n,a,l,o){const u=Sv.getMaxSkillRange(e),c=n>u,f=a<=u;return c&&f?1.5*l*o.ENTERING_RANGE_WEIGHT:0}evaluateRisk(e,n,a,l,o,u,c){const f=l.get(Ut(e))||0,g=l.get(Ut(n))||0,y=(g-f)/o,_=-Math.tanh(y*2)*c.RISK_WEIGHT,T=-(g/o)*u*c.THREAT_ZONE_WEIGHT;let x=0;if(a>0){const M=a/o,w=Di.INTERRUPT_PENALTY_BASE;x=-(M+w)*u*c.OPPORTUNITY_RISK_WEIGHT}return{threatDelta:_,threatZone:T,oppRisk:x}}}const Ke={Attack:"attack",Move:"move",Wait:"wait"};class vT{generatorType=Ke.Attack;generate(e,n,a){const l=[];for(const o of n.enemies)for(const u of n.unit.skills){const c=u.cost;if(e.stamina<c||Ci(e.position,o)>u.range)continue;const g=a.evaluate(e,n,o,u);l.push({action:{type:Ke.Attack,unitId:n.unit.unitId,targetUnitId:o.unitId,skillId:u.id},utility:g.utility,staminaAfter:e.stamina-c,position:e.position,components:g.components,metadata:{type:"attack",targetEnemy:o.unitId}})}return l}}class _T{generatorType=Ke.Move;generate(e,n,a){const l=[],o=Ut(e.position),{battleMap:u,reachableMap:c}=n;for(const[f,g]of c.entries()){if(f===Ut(e.position))continue;const m=u.get(f);if(!m||m.isObstacle||m.entityId&&f!==o)continue;const y=n.pathHexes.get(f),_=[];let S=f;for(;S!==null&&S!==o;)_.push(S),S=n.parentMap.get(S)||null;const T=_.reverse(),x={id:f,terrain:m.terrain},M={path:T,lastStep:x,cost:g},w=a.evaluate(e,n,M),E=rn(f);l.push({action:{type:Ke.Move,unitId:n.unit.unitId,targetHexId:f,targetPath:M},utility:w.utility,staminaAfter:e.stamina-g,position:E,components:{...w.components,total:w.utility},metadata:{type:y?"path-based":"opportunistic",pathAlignment:!!y}})}return l}}class ST{generatorType=Ke.Wait;generate(e,n,a){Ut(e.position);const l=a.evaluate(e,n,"wait");return[{action:{type:Ke.Wait,unitId:n.unit.unitId},utility:l.utility,staminaAfter:n.unit.currentStamina,position:{q:n.unit.q,r:n.unit.r},components:{...l.components,total:l.utility},metadata:{type:"wait"}}]}}class xT{prune(e,n,a){const l=e.length;if(l<=1||l<=3)return e;const o=e[0].utility,u=e[1].utility;let f=(o+u)/2*ir.pruneThreshold;return f=Math.min(f,u),o<0&&(f=Math.min(f,o*1.5)),n===0&&ir.debug&&this.logPruning(e,f),e.filter(g=>g.utility>=f)}logPruning(e,n){const a=e.filter(l=>l.utility>=n);console.log("[Pruning]",{before:e.length,after:a.length,threshold:n.toFixed(2),bestUtility:e[0]?.utility.toFixed(2),worstKept:a[a.length-1]?.utility.toFixed(2)}),console.log("[Pruning] Top candidates:",e.slice(0,40).map(l=>({type:l.action.type,subtype:l.metadata?.type,target:l.action.type==="move"?l.action.targetHexId:l.metadata?.targetEnemy,utility:l.utility.toFixed(1),components:l.components})))}}class bT{constructor(e,n){this.stateSimulator=e,this.pruningStrategy=n}currentMetadata={candidatesGenerated:0,topCandidates:[],prunedCount:0,remainingCount:0};planBestSequence(e,n,a,l=3){return this.currentMetadata={candidatesGenerated:0,topCandidates:[],prunedCount:0,remainingCount:0},{sequence:this.planRecursive(e,n,a,0,l),metadata:this.currentMetadata}}planRecursive(e,n,a,l,o){if(l>=o||e.stamina<=0)return null;const u=e.actionsUsed[e.actionsUsed.length-1];if(u?.type===Ke.Wait)return null;let c=[];for(const{generator:y,evaluator:_}of a){if(u?.type===Ke.Move&&y.generatorType===Ke.Move)continue;const S=y.generate(e,n,_);c.push(...S)}if(c.length===0)return null;c.sort((y,_)=>_.utility-y.utility),l===0&&ir.debug&&(this.currentMetadata.candidatesGenerated=c.length,this.currentMetadata.topCandidates=c.slice(0,10));const f=this.pruningStrategy.prune(c,l,n);l===0&&ir.debug&&(this.currentMetadata.prunedCount=c.length-f.length,this.currentMetadata.remainingCount=f.length);let g=null,m=-1/0;for(const y of f){const _=this.stateSimulator.simulate(e,y);if(y.action.type===Ke.Wait){const x={actions:[y.action],totalUtility:y.utility,finalStamina:_.stamina};x.totalUtility>m&&(m=x.totalUtility,g=x);continue}const S=this.planRecursive(_,n,a,l+1,o),T=S?y.utility+S.totalUtility:y.utility;T>m&&(m=T,g={actions:S?[y.action,...S.actions]:[y.action],totalUtility:T,finalStamina:S?.finalStamina??_.stamina})}return g}}class TT{simulate(e,n){return n.action.type===Ke.Move?this.simulateMove(e,n):n.action.type===Ke.Attack?this.simulateAttack(e,n):n.action.type===Ke.Wait?this.simulateWait(e,n):e}simulateMove(e,n){return{position:n.position,stamina:n.staminaAfter,actionsUsed:[...e.actionsUsed,n.action],totalUtility:e.totalUtility,depth:e.depth+1}}simulateAttack(e,n){return{position:n.position,stamina:n.staminaAfter,actionsUsed:[...e.actionsUsed,n.action],totalUtility:e.totalUtility,depth:e.depth+1}}simulateWait(e,n){return{position:n.position,stamina:n.staminaAfter,actionsUsed:[...e.actionsUsed,n.action],totalUtility:e.totalUtility,depth:e.depth+1}}}class MT{logs=[];enabled;maxLogs=50;constructor(e=!1){this.enabled=e}enable(){this.enabled=!0}disable(){this.enabled=!1}logDecision(e){this.enabled&&(this.logs.push(e),this.logs.length>this.maxLogs&&this.logs.shift(),this.prettyPrint(e))}prettyPrint(e){console.group(` AI Decision: ${e.context.unitName} (${e.context.stance})`),console.log(` Position: ${e.context.position}, Stamina: ${e.context.currentStamina}, HP: ${e.context.currentHp}`),console.log(` Evaluated ${e.candidatesCount} candidates, showing top ${e.topCandidates.length}:`),console.table(e.topCandidates.map(n=>({Action:n.description,Utility:n.utility.toFixed(1),"Stamina After":n.staminaAfter,"Key Component":this.getKeyComponent(n.components)}))),e.finalDecision?(console.log(` Final Decision: ${e.finalDecision.description} (utility: ${e.finalDecision.utility.toFixed(1)})`),e.planDepth>1&&console.log(`    Part of ${e.planDepth}-action sequence`),e.finalDecision.type==="move"?console.log("   Components:",{pos:e.finalDecision.components.progress?.toFixed(1),path:e.finalDecision.components.pathAlignment?.toFixed(1),threat:e.finalDecision.components.threatZone?.toFixed(1),opp:e.finalDecision.components.oppRisk?.toFixed(1),cost:e.finalDecision.components.moveCost?.toFixed(1)}):e.finalDecision.type==="attack"&&console.log("   Components:",{base:e.finalDecision.components.baseDamage?.toFixed(1),weight:e.finalDecision.components.damageWeight?.toFixed(1),target:e.finalDecision.components.targetBonus?.toFixed(1),wounded:e.finalDecision.components.woundedBonus?.toFixed(1)})):console.log(" No valid decision"),console.groupEnd()}getKeyComponent(e){const n=Object.entries(e).filter(([a,l])=>a!=="total"&&l!==void 0&&l!==0).map(([a,l])=>({key:a,val:Math.abs(l)})).sort((a,l)=>l.val-a.val);return n.length>0?n[0].key:"-"}getLastLog(){return this.logs[this.logs.length-1]||null}getAllLogs(){return[...this.logs]}getLogsForUnit(e){return this.logs.filter(n=>n.context.unitId===e)}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}}class wT{evaluate(e,n,a){return{utility:-3,components:{total:-3,waiting:-3}}}}class kf{constructor(e,n,a){this.strategicManager=e,this.sequencePlanner=n,this.decisionLogger=a}currentContext=null;generators={attack:new vT,move:new _T,wait:new ST};static create(e){const n=new xT,a=new TT,l=new bT(a,n),o=new MT(ir.debug);return new kf(e,l,o)}getNextAction(e){const n=V.getState(),a=n.units.get(e);if(!a)return null;const l=[],o=[];for(const y of n.units.values())y.isDead||(y.faction===a.faction?o.push(y):l.push(y));const u=this.getOrCreateContext(a,o,l);this.strategicManager.getCurrentTurn()!==n.round&&(this.strategicManager.onTurnStart(o,l,n.battleMap,n.round,u),this.currentContext=null);const c=this.strategicManager.getGoalForUnit(a,o,l,n.battleMap);u.goal=c;const f=this.getComponentsForUnit(a,n),g={position:{q:a.q,r:a.r},stamina:a.currentStamina,actionsUsed:[],totalUtility:0,depth:0},m=this.sequencePlanner.planBestSequence(g,u,f,5);return this.logDecision(a,u,m),!m.sequence||m.sequence.actions.length===0?{type:"wait",unitId:a.unitId}:m.sequence.actions[0]}candidateToLogEntry(e,n){const a=e.action;let l="",o=0;switch(a.type){case"attack":{const u=n.enemies.find(f=>f.unitId===a.targetUnitId),c=n.unit.skills.find(f=>f.id===a.skillId);l=`Attack ${u?.unitId||"unknown"} with ${c?.name||"skill"}`,o=c?.cost||0;break}case"move":{const u=e.metadata?.type||"move";l=`Move to ${a.targetHexId} (${u})`,o=n.unit.currentStamina-e.staminaAfter;break}case"wait":{l="Wait",o=0;break}default:l=`Unknown action: ${a.type}`,o=0}return{type:a.type,description:l,position:a.type==="move"?a.targetHexId:void 0,targetId:a.type==="attack"?a.targetUnitId:void 0,skillId:a.type==="attack"?a.skillId:void 0,staminaCost:o,staminaAfter:e.staminaAfter,utility:e.utility,components:e.components||{total:e.utility}}}getOrCreateContext(e,n,a){const l=V.getState(),o=this.strategicManager.getGoalForUnit(e,n,a,l.battleMap);console.log(`[AIPlanner] Recreating context for ${e.unitId}. Reason: composition or goal change.`);const u=this.determineStance();return console.log("determineStance",u),this.currentContext=gT.create(e,l.units,l.battleMap,u,o),this.currentContext}getComponentsForUnit(e,n){const a=[];return a.push({generator:this.generators.move,evaluator:new yT}),a.push({generator:this.generators.attack,evaluator:new mT}),a.push({generator:this.generators.wait,evaluator:new wT}),a}determineStance(){const e=Array.from(V.getState().units.values()).filter(o=>!o.isDead),n=e.filter(o=>o.faction===Et.Enemy).reduce((o,u)=>o+u.stats.hp*u.count,0),a=e.filter(o=>o.faction===Et.Player).reduce((o,u)=>o+u.stats.hp*u.count,0),l=n/(a||1);return l>Gm.AGGRESSIVE_RATIO||l<.2?"AGGRESSIVE":l<Gm.DEFENSIVE_RATIO?"DEFENSIVE":"BALANCED"}logDecision(e,n,a){const l={unitId:e.unitId,unitName:e.unitId.split("_")[0]||"-",stance:n.stance,position:`${e.q}:${e.r}`,currentHp:`${e.currentUnitHp}/${e.stats.hp}`,currentStamina:e.currentStamina},o=a.metadata.topCandidates.slice(0,5).map(c=>this.candidateToLogEntry(c,n));let u=null;if(a.sequence&&a.sequence.actions.length>0){const c=a.sequence.actions[0],f=a.metadata.topCandidates.find(g=>this.actionsMatch(g.action,c));f?u=this.candidateToLogEntry(f,n):u=this.actionToLogEntry(c,n,a.sequence.totalUtility)}this.decisionLogger.logDecision({context:l,candidatesCount:a.metadata.candidatesGenerated,topCandidates:o,finalDecision:u,planDepth:a.sequence?.actions.length||0,timestamp:Date.now()})}actionsMatch(e,n){if(e.type!==n.type)return!1;switch(e.type){case"attack":return e.targetUnitId===n.targetUnitId&&e.skillId===n.skillId;case"move":return e.targetHexId===n.targetHexId;case"wait":return!0;default:return!1}}actionToLogEntry(e,n,a){let l="",o=0;switch(e.type){case"attack":{const u=n.enemies.find(f=>f.unitId===e.targetUnitId),c=n.unit.skills.find(f=>f.id===e.skillId);l=`Attack ${u?.unitId||"unknown"} with ${c?.name||"skill"}`,o=c?.cost||0;break}case"move":{l=`Move to ${e.targetHexId}`,o=n.unit.currentStamina-(n.reachableMap.get(e.targetHexId)||0);break}case"wait":{l="Wait",o=0;break}}return{type:e.type,description:l,position:e.type==="move"?e.targetHexId:void 0,targetId:e.type==="attack"?e.targetUnitId:void 0,skillId:e.type==="attack"?e.skillId:void 0,staminaCost:o,staminaAfter:n.unit.currentStamina-o,utility:a,components:{total:a}}}}class Pl{constructor(e,n,a,l,o){this.aiSystem=e,this.movementExecutor=n,this.combatExecutor=a,this.turnManager=l,this.controlStateMachine=o}static MAX_ITERATIONS=5;static ACTION_DELAY=400;async executeUnitTurn(e){console.log(`[AITurnManager] ===== Starting turn for ${e} =====`);const n=V.getState().units.get(e);if(!n){console.warn(`[AITurnManager] Unit ${e} not found`);return}this.logUnitState("Initial",n);let a=0;const l=[];for(;a<Pl.MAX_ITERATIONS;){a++;const o=V.getState().units.get(e);if(!o||this.shouldStopTurn(o,e))break;const u=this.aiSystem.getNextAction(e);if(!u||u.type==="wait"){console.log(`[AITurnManager] Unit ${e} chose to wait`);break}if(l.push(u.type),this.detectLoop(l,e,u))break;console.log(`[AITurnManager] Iteration ${a}/${Pl.MAX_ITERATIONS}:`,{action:u.type,position:`${o.q}:${o.r}`,stamina:o.currentStamina},u);const c=o.currentStamina;if(await this.executeAction(u),!this.verifyStaminaChanged(e,c))break;await this.delay(Pl.ACTION_DELAY)}this.finishUnitTurn(e,n,l),await this.delay(500)}async executeAction(e){switch(this.controlStateMachine.is(Z.EnemyTurn)||this.controlStateMachine.setState(Z.EnemyTurn),e.type){case"move":if(!e.targetPath){console.error("[AITurnManager] Invalid move - missing hex");return}await this.movementExecutor.execute(e.unitId,e.targetPath);break;case"attack":if(!e.targetUnitId||!e.skillId){console.error("[AITurnManager] Invalid attack - missing target or skill");return}await this.combatExecutor.execute(e.unitId,e.targetUnitId,e.skillId);break;case"wait":console.log("[AITurnManager] Wait action executed");break;default:console.error("[AITurnManager] Unknown action type:",e)}}shouldStopTurn(e,n){return!e||e.isDead?(console.log(`[AITurnManager] Unit ${n} is dead or missing`),!0):e.currentStamina<=0?(console.log(`[AITurnManager] Unit ${n} out of stamina`),!0):V.getState().status!==Yt.Playing?(console.log("[AITurnManager] Battle ended"),!0):!1}detectLoop(e,n,a){if(e.length<4)return!1;const l=e.slice(-3);return l[0]===l[1]&&l[1]===l[2]?(console.error(`[AITurnManager] LOOP DETECTED! Unit ${n} repeating:`,l[0]),console.error("[AITurnManager] Action history:",e),console.error("[AITurnManager] Current action:",a),!0):!1}verifyStaminaChanged(e,n){const a=V.getState().units.get(e);return a?a.currentStamina===n?(console.error("[AITurnManager] WARNING: Stamina didn't change!"),console.error("[AITurnManager] This will cause infinite loop. Breaking."),!1):!0:!1}finishUnitTurn(e,n,a){const l=V.getState().units.get(e);console.log(`[AITurnManager] ===== Finished turn for ${e} =====`,{iterations:a.length,staminaUsed:(n?.currentStamina||0)-(l?.currentStamina||0),finalPosition:`${l?.q}:${l?.r}`,actions:a}),V.getState().status===Yt.Playing&&(l&&this.turnManager.canUnitStillAct(e)?(console.log(`[AITurnManager nextSameFactionIdx] Unit ${e} can still act - deferring`),this.turnManager.deferUnit(e)):(console.log(`[AITurnManager nextSameFactionIdx] Unit ${e} cannot act - ending turn`),this.turnManager.endUnitTurn(e)))}delay(e){return new Promise(n=>setTimeout(n,e))}logUnitState(e,n){n&&console.log(`[AITurnManager] ${e} state:`,{position:`${n.q}:${n.r}`,stamina:n.currentStamina,hp:`${n.currentUnitHp}/${n.stats.hp}`,id:n.unitId})}}const CT={direction:"vertical",portraitSize:64,portraitGap:8,poolGap:12,colors:{player:{primary:12091649,accent:14463309},enemy:{primary:9047296,accent:16745347},neutral:{primary:4868682,accent:2763306},finished:8421504,background:2040090,text:14206880,border:9202219},portraitOpacity:1,activePoolGlow:1.2};class AT extends It{config;portraits=new Map;layoutHeight=0;layoutWidth=0;unsubscribe=null;onLayoutChange;onUnitClick=null;constructor(e={}){super(),this.config={...CT,...e},this.setupStoreSubscription()}setupStoreSubscription(){this.unsubscribe=V.subscribe(e=>[e.selectedUnitId,e.turnQueue,e.finishedPools,e.status],([e,n,a,l])=>{this.render(e,n,a,l)},{equalityFn:nu})}render(e,n,a,l){if(this.clearPortraits(),l!==Yt.Playing)return;let o=0;n.forEach((c,f)=>{const g=c.unitIds.filter(S=>S!==e);if(g.length===0)return;const m=f===0,y={...c,unitIds:g},_=this.renderPool(y,m,!1,o);o+=_+this.config.poolGap}),a.forEach(c=>{const f=this.renderPool(c,!1,!0,o);o+=f+this.config.poolGap});const u=o>0?o-this.config.poolGap:0;this.layoutHeight=this.config.direction==="vertical"?u:this.config.portraitSize,this.layoutWidth=this.config.direction==="vertical"?this.config.portraitSize:u,this.onLayoutChange?.()}renderPool(e,n,a,l){const{portraitSize:o,direction:u}=this.config,c=e.unitIds.length;return e.unitIds.forEach((f,g)=>{const m={isFirst:g===0,isLast:g===c-1,isSingle:c===1};let y=[0,0,0,0];m.isSingle?y=[1,1,1,1]:u==="vertical"?m.isFirst?y=[0,0,1,1]:m.isLast&&(y=[1,1,0,0]):m.isFirst?y=[1,0,0,1]:m.isLast&&(y=[0,1,1,0]);const _=this.createPortrait(f,e.faction,a,!a,y,n,m);this.portraits.set(f,_);const S=g*o;u==="vertical"?(_.container.x=0,_.container.y=-(l+S+o)):(_.container.x=l+S,_.container.y=0),this.addChild(_.container)}),c*o}createPortrait(e,n,a,l,o,u,c){const f=new It,{portraitSize:g,portraitGap:m,direction:y}=this.config,_=this.getUnitData(e),S=this.getPortraitBorderColor(n,u),T=m/2,x=a?S:this.brightenColor(S,this.config.activePoolGlow),M=new Ve,w=8;this.drawComplexRect(M,g,g,w,o,x,c,y),f.addChild(M);const E=T,H=g-E*2,B=Math.max(0,w-E),N=new Ve;N.roundRect(E,E,H,H,B),N.fill(this.config.colors.background),N.stroke({width:1,color:this.config.colors.border,alpha:.8,alignment:.5});const G=this.createPortraitContent(e,_,T),Y=new It;return Y.addChild(N),Y.addChild(G),Y.pivot.set(g/2,g/2),Y.position.set(g/2,g/2),f.addChild(Y),a?(f.alpha=.4,f.tint=this.config.colors.finished):f.alpha=this.config.portraitOpacity,l&&!a&&(f.eventMode="static",f.cursor="pointer",f.on("pointerdown",()=>this.handlePortraitClick(e)),f.on("pointerover",()=>{Y.scale.set(1.1)}),f.on("pointerout",()=>{Y.scale.set(1)})),{container:f,background:N,border:M,label:G,unitId:e}}createPortraitContent(e,n,a){const{portraitSize:l}=this.config;if(n?.unitPortrait){const{row:o,col:u}=n.unitPortrait,c=64;try{const f=As.from("assets/portraits.png"),g=new As({source:f.source,frame:new Ma(u*c,o*c,c,c)}),m=new jn(g);m.width=l,m.height=l,m.eventMode="none";const y=a;return m.width=l-y*2,m.height=l-y*2,m.x=y,m.y=y,m}catch(f){console.warn("[TurnQueueRenderer] Failed to load portrait:",e,f)}}return this.createPortraitPlaceholder(e,n)}createPortraitPlaceholder(e,n){const{portraitSize:a}=this.config,l=n?.unitId.substring(0,2).toUpperCase()||e.charAt(0).toUpperCase(),o=new Vn({fontFamily:"CinzelBold, sans-serif",fontSize:18,fontWeight:"bold",fill:this.config.colors.text,stroke:{color:657930,width:1}}),u=new wa({text:l,style:o});return u.anchor.set(.5),u.position.set(a/2,a/2),u}drawComplexRect(e,n,a,l,o,u,c,f){let y=0,_=0,S=n,T=a;f==="vertical"?(y=-4,S=n+8,c.isSingle?(_=-4,T=a+8):c.isFirst?(_=0,T=a+4):c.isLast&&(_=-4,T=a+4)):(_=-4,T=a+8,c.isSingle?(y=-4,S=n+8):c.isFirst?(y=-4,S=n+4):c.isLast&&(y=0,S=n+4));const[x,M,w,E]=o.map(H=>H*l);e.clear(),e.moveTo(y+x,_),e.lineTo(y+S-M,_),M>0&&e.arcTo(y+S,_,y+S,_+M,M),e.lineTo(y+S,_+T-w),w>0&&e.arcTo(y+S,_+T,y+S-w,_+T,w),e.lineTo(y+E,_+T),E>0&&e.arcTo(y,_+T,y,_+T-E,E),e.lineTo(y,_+x),x>0&&e.arcTo(y,_,y+x,_,x),e.fill({color:u,alpha:.35})}getPortraitBorderColor(e,n){switch(e){case Et.Player:return n?this.config.colors.player.accent:this.config.colors.player.primary;case Et.Enemy:return this.config.colors.enemy.primary;case Et.Neutral:return this.config.colors.neutral.primary;default:return this.config.colors.neutral.primary}}brightenColor(e,n){const a=Math.min(255,(e>>16&255)*n),l=Math.min(255,(e>>8&255)*n),o=Math.min(255,(e&255)*n);return a<<16|l<<8|o}getUnitData(e){return V.getState().units.get(e)||null}handlePortraitClick(e){this.onUnitClick?this.onUnitClick(e):console.warn(`TurnQueueRenderer: onUnitClick not assigned. UnitId: ${e}`)}clearPortraits(){this.portraits.forEach(e=>{e.container.destroy({children:!0})}),this.portraits.clear(),this.removeChildren()}destroy(e){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.clearPortraits(),super.destroy(e)}}const ET={iconSize:56,gap:12,borderWidth:3,direction:"horizontal",colors:{borderDefault:9202219,borderSelected:13936186,borderDisabled:2760470,background:1775378,text:14206880},assets:{atlasUrl:"/assets/skills.png",iconSizeInAtlas:64}};class OT extends It{constructor(e,n,a,l={}){super(),this.skillManager=e,this.turnManager=n,this.stateMachine=a,this.config={...ET,...l},this.loadAssets(),this.setupStoreSubscription()}config;icons=new Map;unsubscribe=null;skillAtlasTexture=null;layoutHeight=0;getLayoutHeight(){return this.layoutHeight}onLayoutChange;async loadAssets(){try{Xn.cache.has(this.config.assets.atlasUrl)?this.skillAtlasTexture=Xn.get(this.config.assets.atlasUrl):this.skillAtlasTexture=await Xn.load(this.config.assets.atlasUrl),this.refreshRender()}catch(e){console.warn("SkillBarRenderer: Could not load skill atlas",e)}}setupStoreSubscription(){this.stateMachine.onStateChange((e,n)=>{if(e===Z.PlayerMoving||e===Z.PlayerAttacking||e===Z.EnemyTurn||n===Z.EnemyTurn){const{selectedUnitId:a,selectedSkillId:l}=V.getState();this.render(a,l)}}),this.unsubscribe=V.subscribe(e=>[e.selectedUnitId,e.selectedSkillId],([e,n])=>{this.render(e,n)},{equalityFn:nu})}refreshRender(){const e=V.getState();this.render(e.selectedUnitId,e.selectedSkillId)}render(e,n){if(!e||this.stateMachine.is(Z.EnemyTurn)){this.clearIcons();return}const a=V.getState().units.get(e);if(!a)return;this.clearIcons();let l=0;const{gap:o,iconSize:u,direction:c}=this.config;[...a.skills].sort((y,_)=>y.sort-_.sort).forEach(y=>{const _=a.currentStamina>=y.cost,S=y.id===n,T=this.createSkillIcon(y,S,_);c==="vertical"?T.container.position.set(0,l):T.container.position.set(l,0),this.addChild(T.container),l+=u+o}),l+=o*.5;const g=this.createSkipButton(a.unitId),m=this.createEndTurnButton(a.unitId);if(this.addChild(g),this.addChild(m),c==="vertical")g.position.set(0,l),m.position.set(u+o,l),this.layoutHeight=l+u*.8;else{g.position.set(l,0);const y=l+u+o;m.position.set(y,0),this.layoutHeight=u}this.onLayoutChange?.()}createSkillIcon(e,n,a){const l=new It,{iconSize:o,borderWidth:u,colors:c}=this.config,f=new Ve;f.roundRect(0,0,o,o,6),f.fill(c.background);let g;if(this.skillAtlasTexture){const T=this.config.assets.iconSizeInAtlas,x=e.iconCol||0,M=e.iconRow||0,w=new Ma(x*T,M*T,T,T),E=new As({source:this.skillAtlasTexture.source,frame:w}),H=new jn(E);H.width=o-u*2,H.height=o-u*2,H.position.set(u,u),g=H,!a&&g instanceof jn&&(g.tint=7827558,g.alpha=.6)}else{const T=new Vn({fontFamily:"Arial",fontSize:24,fontWeight:"bold",fill:a?c.text:8947848});g=new wa({text:e.name[0],style:T}),g.anchor.set(.5),g.position.set(o/2,o/2)}const m=new Ve,y=n?c.borderSelected:a?c.borderDefault:c.borderDisabled;if(m.roundRect(0,0,o,o,6),m.stroke({width:u,color:y,alpha:a?1:.6}),m.stroke({width:u,color:9202219,alpha:.9}),n){const T=new Ve;T.roundRect(2,2,o-4,o-4,5),T.stroke({width:2,color:c.borderSelected,alpha:.9}),l.addChild(T)}const _=new It;_.addChild(f),_.addChild(g),_.addChild(m),_.pivot.set(o/2,o/2),_.position.set(o/2,o/2),l.addChild(_),l.eventMode="static",l.cursor=a?"pointer":"not-allowed",a&&(l.on("pointerdown",()=>{this.handleSkillClick(e.id)}),l.on("pointerover",T=>{n||_.scale.set(1.1)}),l.on("pointerout",()=>{_.scale.set(1)}));const S={container:l,background:f,sprite:g,border:m,skillId:e.id};return this.icons.set(e.id,S),S}createSkipButton(e){const{iconSize:n,borderWidth:a,colors:l}=this.config,o=new It,u=n*.8,c=n,f=new Ve;f.roundRect(0,0,c,u,6),f.fill(2760726),o.addChild(f);const g=new Ve;g.roundRect(0,0,c,u,6),g.stroke({width:a,color:9202219,alpha:.9}),o.addChild(g);const m=new Vn({fontFamily:"CinzelBold",fontSize:14,fontWeight:"bold",fill:13936186,align:"center"}),y=new wa({text:"SKIP",style:m});return y.anchor.set(.5),y.position.set(n/2,u/2),o.addChild(y),o.eventMode="static",o.cursor="pointer",o.on("pointerdown",()=>{this.handleSkipClick(e)}),o}createEndTurnButton(e){const{iconSize:n,borderWidth:a,colors:l}=this.config,o=new It,u=n*.8,c=n,f=new Ve;f.roundRect(0,0,c,u,6),f.fill(2760726),o.addChild(f);const g=new Ve;g.roundRect(0,0,c,u,6),g.stroke({width:a,color:9202219,alpha:.9}),o.addChild(g);const m=new Vn({fontFamily:"CinzelBold",fontSize:14,fontWeight:"bold",fill:13936186,align:"center"}),y=new wa({text:"END",style:m});return y.anchor.set(.5),y.position.set(n/2,u/2),o.addChild(y),o.eventMode="static",o.cursor="pointer",o.on("pointerdown",()=>{this.handleEndTurnClick(e)}),o}handleSkillClick(e){V.getState().selectedSkillId===e?this.skillManager.deselectSkill():this.skillManager.selectSkill(e)}handleSkipClick(e){this.stateMachine.canHandleInput(V.getState().status)&&this.turnManager.deferUnit(e)}handleEndTurnClick(e){this.stateMachine.canHandleInput(V.getState().status)&&this.turnManager.endUnitTurn(e)}clearIcons(){this.icons.forEach(e=>{e.container.destroy({children:!0})}),this.icons.clear(),this.removeChildren()}destroy(e){this.unsubscribe&&this.unsubscribe(),this.clearIcons(),super.destroy(e)}}class HT extends It{constructor(e){super(),this.app=e,this.app.renderer.on("resize",()=>{this.cameraManager.updateSize(this.app.screen.width,this.app.screen.height),this.positionTurnQueue(),this.positionSkillBar()}),this.viewport=new Jb({screenWidth:this.app.screen.width,screenHeight:this.app.screen.height,worldWidth:2e3,worldHeight:2e3,events:this.app.renderer.events,ticker:e.ticker}),this.addChild(this.viewport),this.addChild(this.uiLayer),this.viewport.addChild(this.mapLayer),this.viewport.addChild(this.groundLayer),this.viewport.addChild(this.unitLayer),this.viewport.addChild(this.vfxLayer),this.unitLayer.sortableChildren=!0,this.vfxLayer.sortableChildren=!0,this.entityRegistry=new W2,this.pathRenderer=new g2(this.groundLayer),this.tooltipManager=new p2,this.animationController=new Z2,this.controlStateMachine=new $2,this.turnManager=new eT,this.highlightManager=new K2(this.entityRegistry,this.controlStateMachine),this.skillManager=new iT(this.controlStateMachine,this.pathRenderer),this.turnQueueRenderer=new AT({portraitSize:52}),this.turnQueueRenderer.onLayoutChange=()=>{this.positionTurnQueue()},this.skillBarRenderer=new OT(this.skillManager,this.turnManager,this.controlStateMachine,{direction:"vertical",gap:8,iconSize:64}),this.skillBarRenderer.onLayoutChange=()=>{this.positionSkillBar()},this.movementExecutor=new J2(this.animationController,this.pathRenderer,this.entityRegistry,this.turnManager,this.controlStateMachine),this.combatExecutor=new tT(this.animationController,this.entityRegistry,this.turnManager,this.controlStateMachine),this.inputController=new F2(this.highlightManager,this.movementExecutor,this.combatExecutor,this.entityRegistry,this.controlStateMachine,this.skillManager),this.aiStrategicManager=new aT,this.aiSystem=kf.create(this.aiStrategicManager),this.aiTurnManager=new Pl(this.aiSystem,this.movementExecutor,this.combatExecutor,this.turnManager,this.controlStateMachine),this.cameraManager=new $b(this.viewport),this.battleManager=new d2(this.pathRenderer,this.inputController,this.skillManager,this.cameraManager,this.highlightManager,this.entityRegistry,this.controlStateMachine,this.turnManager,this.aiTurnManager),di.initialize(this.controlStateMachine,this.skillManager,this.turnManager),this.damageText=new b2(n=>this.entityRegistry.getUnit(n)),this.vfxLayer.addChild(this.damageText),this.uiLayer.addChild(this.turnQueueRenderer),this.uiLayer.addChild(this.skillBarRenderer)}viewport;mapLayer=new It;groundLayer=new It;unitLayer=new It;vfxLayer=new It;cameraManager;entityRegistry;tooltipManager;pathRenderer;turnQueueRenderer;skillBarRenderer;animationController;damageText;highlightManager;controlStateMachine;inputController;movementExecutor;combatExecutor;skillManager;aiStrategicManager;aiSystem;aiTurnManager;turnManager;battleManager;uiLayer=new It;endText=null;edgeTextureCache=new Map;statusUnsubscribe=null;async init(){console.log("[BattleScene] Init start"),V.getState().reset(),await this.loadGameAssets(),this.initializeBattleMap(),console.log("[BattleScene] Map initialized"),await this.initializeUnits(),console.log("[BattleScene] Units initialized");const e=this.mapLayer.getLocalBounds().rectangle;this.cameraManager.initConstraints(e),this.cameraManager.applyGridMask(this.mapLayer,e),this.cameraManager.updateSize(this.app.screen.width,this.app.screen.height);const n=this.getUnitPositions();await this.cameraManager.focusOnBattleCenter(n),this.statusUnsubscribe=V.subscribe(a=>a.status,a=>this.showEndGameVisuals(a)),this.initializeBattle(),this.inputController.initializeHotkeys(),console.log("[BattleScene] Hotkeys initialized - scene ready")}initializeBattleMap=()=>{const n=new w2({size:48,seed:"battle-of-kyi1870"}).generate();V.getState().setBattleMap(n);for(const[l,o]of n){const u=new k2(o);this.mapLayer.addChild(u),this.entityRegistry.registerHex(l,u)}this.applyHillEdges(n),this.bakeEdgesUnique(this.app.renderer,n);const a=this.applyHillEdges(n);for(const l of a)this.entityRegistry.getHex(l)?.bakeEdges(this.app.renderer);this.mapLayer.sortableChildren=!0,this.mapLayer.sortChildren(),this.mapLayer.sortableChildren=!1};getEdgeBitmask(e,n){let a=0;return Qo.forEach((l,o)=>{const{q:u,r:c}=l,f=Ut({q:e.q+u,r:e.r+c}),g=n.get(f);(!g||g.terrain!==Bt.Hill)&&(a|=1<<o)}),a}applyHillEdges(e){const n=new Set;for(const[a,l]of e){if(l.terrain!==Bt.Hill)continue;const o=this.entityRegistry.getHex(a);o&&Qo.forEach((u,c)=>{const{q:f,r:g}=u,m=Ut({q:l.q+f,r:l.r+g}),y=e.get(m);(!y||y.terrain!==Bt.Hill)&&(o.addEdgeSprite(c),n.add(o.id))})}return n}bakeEdgesUnique(e,n){for(const[a,l]of n){if(l.terrain!==Bt.Hill)continue;const o=this.entityRegistry.getHex(a);if(!o)continue;const u=this.getEdgeBitmask(l,n);if(this.edgeTextureCache.has(u)){o.applyBakedEdges(this.edgeTextureCache.get(u));continue}const c=o.bakeEdges(e);c&&this.edgeTextureCache.set(u,c)}}async initializeUnits(){(await Promise.all([kn.createUnit("saadachnyi",18,-3,10,Et.Enemy),kn.createUnit("bek",17,-2,10,Et.Enemy),kn.createUnit("batyr",17,-3,10,Et.Enemy),kn.createUnit("batyr",17,-1,10,Et.Enemy),kn.createUnit("spysnyk",8,1,10),kn.createUnit("varganian",8,2,10),kn.createUnit("striletz",7,2,10),kn.createUnit("gryd",8,3,10)])).forEach(n=>{this.unitLayer.addChild(n),this.entityRegistry.registerUnit(n.unitId,n),V.getState().updateHex(Ut(n),{entityId:n.unitId})}),this.unitLayer.sortChildren()}initializeBattle(){const e=V.getState(),n=Array.from(e.units.values()),a=pv(n),l=a[0];l&&(e.setTurnQueue(a),e.setStatus(Yt.Playing),e.setActiveFaction(l.faction),e.setSelectedUnit(l.unitIds[0]||null))}getUnitPositions=()=>Array.from(V.getState().units.values()).map(a=>{const l=this.entityRegistry.getUnit(a.unitId);return{x:l?.x||0,y:l?.y||0}});positionTurnQueue(){console.log("Global Y:",this.turnQueueRenderer.getGlobalPosition().y),this.turnQueueRenderer.position.set(this.app.screen.width-this.turnQueueRenderer.width-20,this.app.screen.height-20)}positionSkillBar(){this.skillBarRenderer.getLayoutHeight(),this.skillBarRenderer.position.set(20,this.app.screen.height-this.skillBarRenderer.height-20)}async showEndGameVisuals(e){if(e===Yt.Playing||e===Yt.Preparing)return;this.unitLayer.eventMode="none",this.cameraManager.lock(),this.tooltipManager.destroy();const n=this.getUnitPositions();await Promise.all([this.cameraManager.focusOnBattleCenter(n)]);const a=e===Yt.Victory,l=a?"VICTORY":"DEFEAT",o=a?"#FFD700":"#FF3333";this.viewport.animate({scale:.5,time:2e3,ease:"easeInOutExpo"}),await new Promise(f=>setTimeout(f,1500));const u=new Vn({fontFamily:"Arial Black",fontSize:100,fill:o,stroke:{color:"#000000",width:10},dropShadow:{color:"#000000",blur:5,distance:12}});this.endText=new wa({text:l,style:u}),this.endText.anchor.set(.5),this.endText.x=this.app.screen.width/2,this.endText.y=this.app.screen.height/2,this.endText.alpha=0,this.endText.scale.set(5),this.uiLayer.addChild(this.endText),pt.timeline().to(this.endText,{alpha:1,scale:1,duration:1.2,ease:"elastic.out(1, 0.75)"})}async loadGameAssets(){await Xn.load([{src:"assets/units/spysnyk.png"},{src:"assets/units/varganian.png"},{src:"assets/units/gryd.png"},{src:"assets/units/striletz.png"},{src:"assets/units/batyr.png"},{src:"assets/units/saadachnyi.png"},{src:"assets/units/bek.png"},{src:"assets/portraits.png"},{src:"assets/terrain/hill_edge_center_front.png"},{src:"assets/terrain/hill_edge_right_front.png"},{src:"assets/terrain/hill_edge_right_rear.png"},{src:"assets/terrain/hill_edge_center_rear.png"},{src:"assets/terrain/hill_edge_left_rear.png"},{src:"assets/terrain/hill_edge_left_front.png"},{src:"assets/terrain/hill_top.png"},{src:"assets/terrain/plains.png"},{src:"assets/terrain/obstacles.png"},{src:"assets/terrain/cliff.png"},{alias:"Cinzel",src:"assets/fonts/cinzel/cinzel-regular.ttf"},{alias:"CinzelBold",src:"assets/fonts/cinzel/cinzel-bold.ttf"}])}_destroy(e){console.warn("[BattleScene]  ..."),this.statusUnsubscribe&&this.statusUnsubscribe(),this.battleManager&&this.battleManager.destroy(),this.inputController&&this.inputController.destroy(),this.tooltipManager&&this.tooltipManager.destroy(),di.destroy(),pt.killTweensOf(this.viewport),pt.killTweensOf(this.viewport.scale),this.endText&&pt.killTweensOf(this.endText),this.viewport&&this.viewport.destroy({children:!0});const n={children:!0,texture:!1};typeof e=="object"&&e!==null?Object.assign(n,e):typeof e=="boolean"&&(n.children=e),this.pathRenderer.destroy(),this.damageText.destroy(),super.destroy(n),console.log("[BattleScene] Pixi ' .")}destroy(e){console.warn("[BattleScene]  ..."),this.statusUnsubscribe&&(this.statusUnsubscribe(),this.statusUnsubscribe=null),this.viewport.off("pointermove"),this.app.renderer.off("resize"),this.battleManager?.destroy(),this.inputController?.destroy(),this.tooltipManager?.destroy(),di.destroy(),pt.killTweensOf(this),pt.killTweensOf(this.viewport),pt.killTweensOf(this.viewport.scale),this.endText&&pt.killTweensOf(this.endText),this.animationController?.cancelAll?.(),this.pathRenderer?.destroy(),this.damageText?.destroy(),this.turnQueueRenderer?.destroy(),this.skillBarRenderer?.destroy(),this.entityRegistry?.destroy?.();const n={children:!0,texture:!1};typeof e=="object"&&e!==null?Object.assign(n,e):typeof e=="boolean"&&(n.children=e),this.viewport&&this.viewport.destroy({children:!0}),super.destroy(n),console.log("[BattleScene]   .")}}class zT extends It{constructor(e){super(),this.app=e,this.addChild(this.uiLayer)}uiLayer=new It;background=null;titleText=null;async init(){console.log("WorldScene: ..."),this.background=new Ve().rect(0,0,this.app.screen.width,this.app.screen.height).fill(2040090),this.addChildAt(this.background,0)}destroy(e){console.log("WorldScene: ...");const n={children:!0,texture:!1};typeof e=="object"&&e!==null&&Object.assign(n,e),super.destroy(n)}}const UT=()=>({currentScene:Fn.World}),Lf=yv()(vv(d=>({...UT(),setScene:e=>d({currentScene:e})}))),DT=()=>{const d=Lf(e=>e.setScene);return Q.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Q.jsxs("div",{className:"flex flex-col items-center gap-12 -translate-y-1/4",children:[Q.jsx("img",{src:"/assets/rw_logo.png",alt:"Ruthenian Warlords logo",className:"w-[clamp(220px,50vw,600px)] -mt-25vh h-auto max-h-[70vh] object-contain pointer-events-none"}),Q.jsxs("button",{onClick:()=>d(Fn.Battle),className:`
        relative px-10 py-3
        
        bg-slate-900/80 backdrop-blur-md
        border-2 border-amber-600/50
        text-amber-200 font-bold uppercase tracking-widest text-lg
        rounded-sm
        shadow-[0_0_15px_rgba(0,0,0,0.5)]
        hover:bg-amber-900/40 hover:border-amber-400 hover:text-white hover:shadow-[0_0_20px_rgba(217,119,6,0.3)]
        active:scale-95
        transition-all duration-300 ease-out
        pointer-events-auto cursor-pointer
      `,children:[Q.jsx("span",{className:"absolute top-0 left-0 w-2 h-2 border-t-2 border-l-2 border-amber-400"}),Q.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 border-t-2 border-r-2 border-amber-400"}),Q.jsx("span",{className:"absolute bottom-0 left-0 w-2 h-2 border-b-2 border-l-2 border-amber-400"}),Q.jsx("span",{className:"absolute bottom-0 right-0 w-2 h-2 border-b-2 border-r-2 border-amber-400"})," !"]}),Q.jsx("style",{children:`
                .world-hud-container {
                    position: absolute;
                    inset: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    pointer-events: none; /*         Pixi */
                }
                .attack-btn {
                    pointer-events: auto; /*      */
                    padding: 15px 40px;
                    background: #cc3333;
                    color: white;
                    font-weight: bold;
                    border: 2px solid #000;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: transform 0.2s;
                }
                .attack-btn:hover {
                    transform: scale(1.1) rotate(-2deg);
                    background: #ff4444;
                }
            `})]})})};function RT({unit:d,skill:e}){if(!e)return Q.jsx("div",{className:"smart-block",children:Q.jsx("div",{className:"idle-state",children:Q.jsx("div",{className:"idle-text"})})});const n=Ua.getEffectiveCount(d),a=Math.round(d?.stats.damageMin*n*(e.powerMult||1)),l=Math.round(d?.stats.damageMax*n*(e.powerMult||1));return Q.jsx("div",{className:"smart-block",children:Q.jsxs("div",{className:"skill-display",children:[Q.jsx("div",{className:"skill-icon",children:e.icon?Q.jsx("img",{src:e.icon,alt:e.name}):Q.jsx("div",{className:"skill-icon-placeholder",children:e.name.charAt(0).toUpperCase()})}),Q.jsxs("div",{className:"skill-stats",children:[Q.jsx("div",{className:"skill-name",children:e.name}),a!==void 0&&Q.jsxs("div",{className:"skill-stat",children:[Q.jsx("span",{className:"stat-label",children:"Dmg:"})," ",a," - ",l]}),e.range!==void 0&&Q.jsxs("div",{className:"skill-stat",children:[Q.jsx("span",{className:"stat-label",children:"Range:"})," ",e.range]}),e.cost!==void 0&&Q.jsxs("div",{className:"skill-stat stamina-cost",children:[Q.jsx("span",{className:"stat-label",children:"Cost:"})," ",e.cost]}),e.armorPenetration!==void 0&&Q.jsxs("div",{className:"skill-stat",children:[Q.jsx("span",{className:"stat-label",children:"Armor Pen:"})," ",e.armorPenetration*100,"%"]})]})]})})}const NT=({currentPercent:d,drainStartPercent:e=0,drainWidthPercent:n=0,previewWidthPercent:a=0,isDraining:l=!1,height:o=12})=>{const u=Math.max(0,Math.min(100,d));let c,f;l?(c=Math.max(0,Math.min(u,n)),f=u):(c=Math.max(0,Math.min(u,a)),f=u-c);const g=f;return console.log("[StaminaCore] Rendering with-:",{currentPercent:d,drainWidthPercent:n,previewWidthPercent:a,solidW:f,fill:u,drainX:g,drainW:c}),Q.jsxs("svg",{className:"stamina-svg",viewBox:`0 0 100 ${o}`,preserveAspectRatio:"none",style:{display:"block",width:"100%",height:"100%"},children:[Q.jsxs("defs",{children:[Q.jsx("clipPath",{id:"barRadius",children:Q.jsx("rect",{x:"0",y:"0",width:"100",height:o,rx:"1",ry:"1"})}),Q.jsxs("linearGradient",{id:"staminaVert",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[Q.jsx("stop",{offset:"0%",stopColor:"#e0b85a"}),Q.jsx("stop",{offset:"50%",stopColor:"#b8862a"}),Q.jsx("stop",{offset:"100%",stopColor:"#e0b85a"})]}),Q.jsxs("linearGradient",{id:"shadeGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[Q.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.15)"}),Q.jsx("stop",{offset:"50%",stopColor:"rgba(0,0,0,0)"}),Q.jsx("stop",{offset:"100%",stopColor:"rgba(255,255,255,0.15)"})]})]}),Q.jsxs("g",{clipPath:"url(#barRadius)",children:[Q.jsx("rect",{width:"100",height:o,fill:"#151510"}),Q.jsx("rect",{width:u,height:o,fill:"url(#staminaVert)",opacity:"0.08"}),Q.jsx("rect",{x:"0",width:f+.1,height:o,fill:"url(#staminaVert)"}),Q.jsx("rect",{x:g,width:c,height:o,fill:"url(#staminaVert)",className:"stamina-drain",style:{transition:l?"width 0.4s ease-out":""}}),Q.jsx("rect",{width:"100",height:o,fill:"url(#shadeGrad)",pointerEvents:"none"})]})]})};function BT({unitName:d,unitId:e,currentStamina:n,maxStamina:a,previewCost:l}){const[o,u]=an.useState(0),[c,f]=an.useState(0),[g,m]=an.useState(null),[y,_]=an.useState(!1);an.useEffect(()=>{const E=H=>{if(H.unitId!==e)return;const B=Math.max(0,n-H.amount);m(B),f(l),u(H.amount),_(!0),setTimeout(()=>{console.log("[StaminaCore] Drain animation start"),u(0)},50),setTimeout(()=>{console.log("[StaminaCore] Drain complete - unfreezing"),f(0),m(null),_(!1)},900)};return rt.on("STAMINA_DRAIN",E),()=>rt.off("STAMINA_DRAIN",E)},[e,n,l]);const S=g!==null?g:n,T=a>0?S/a*100:0,x=a>0?o/a*100:0,M=c>0?c:l,w=a>0?M/a*100:0;return console.log("[StaminaCore] Rendering with:",{predictedStamina:g,currentStamina:n,maxStamina:a,animatedDrain:o,effectiveStamina:S,activePreviewCost:M,currentPercent:T,previewPercent:w,drainPercent:x,isDraining:y}),Q.jsxs("div",{className:"unit-name-stamina",children:[Q.jsx("div",{className:"unit-name",children:d.split("_")[0]||"-"}),Q.jsx("div",{className:"stamina-bar-container",children:Q.jsx(NT,{currentPercent:T,drainWidthPercent:x,previewWidthPercent:w,isDraining:y,height:20})}),Q.jsxs("div",{className:"stamina-values",children:[Q.jsx("span",{className:"current",children:S}),Q.jsx("span",{className:"separator",children:"/"}),Q.jsx("span",{className:"max",children:a}),Q.jsx("span",{className:"preview",children:l>0?` >> ${Math.max(n-l,0)}`:""})]})]})}function kT({unit:d}){const e=d.currentUnitHp/d.stats.hp*100;return LT(d.faction),Q.jsxs("div",{className:"unit-stats-portrait",children:[Q.jsxs("div",{className:"stats-column",children:[Q.jsxs("div",{className:"stat-row",children:[Q.jsx("span",{className:"label",children:"Armor"}),Q.jsx("span",{className:"value",children:d.stats.armor})]}),Q.jsxs("div",{className:"stat-row",children:[Q.jsx("span",{className:"label",children:"Dmg"}),Q.jsxs("span",{className:"value",children:[d.stats.damageMin,"-",d.stats.damageMax]})]}),Q.jsxs("div",{className:"stat-row",children:[Q.jsx("span",{className:"label",children:"Speed"}),Q.jsx("span",{className:"value",children:d.stats.initiative||10})]})]}),Q.jsx("div",{className:"hp-bar-vertical",children:Q.jsx("div",{className:"hp-bar-container-vertical",children:Q.jsx("div",{className:"hp-bar-fill-vertical",style:{height:`${e}%`}})})}),Q.jsx("div",{className:"portrait-wrapper",children:Q.jsx("div",{className:"portrait-border",children:Q.jsx("div",{className:"portrait-background",children:Q.jsx("div",{className:"portrait-placeholder",children:d.unitId.substring(0,2).toUpperCase()})})})})]})}function LT(d){switch(d){case"PLAYER":return"#4a90e2";case"ENEMY":return"#e74c3c";case"NEUTRAL":return"#95a5a6";default:return"#95a5a6"}}function IT(){const{unit:d,skill:e,previewCost:n}=V(I2(a=>{const l=a.selectedUnitId,o=l?a.units.get(l):null;if(!o)return{unit:null,skill:null,previewCost:0};let u=null,c=0;return a.selectedSkillId?(u=o.skills.find(f=>f.id===a.selectedSkillId)||null,c=u?.cost||0):a.selectedHexId&&a.selectedPath&&(c=a.selectedPath.cost||0),{unit:o,skill:u,previewCost:c}}));return!d||d.faction!==Et.Player?Q.jsx("div",{className:"bottom-panel"}):Q.jsxs("div",{className:"bottom-panel",children:[Q.jsx(RT,{skill:e,unit:d}),Q.jsx(BT,{unitName:d.unitId,unitId:d.unitId,currentStamina:d.currentStamina,maxStamina:d.stats.stamina,previewCost:n}),Q.jsx(kT,{unit:d})]})}const GT=()=>{const{status:d}=mv(V),e=Lf(l=>l.setScene),[n,a]=an.useState(!1);return an.useEffect(()=>{if(d===Yt.Victory||d===Yt.Defeat){const l=setTimeout(()=>a(!0),2500);return()=>clearTimeout(l)}else a(!1)},[d]),d===Yt.Victory||d===Yt.Defeat?Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"ui-full-overlay",children:n&&Q.jsxs("button",{onClick:()=>e(Fn.World),className:`
                            self-end mb-5 mx-auto
                            /*   Pointer Events */
                            pointer-events-auto cursor-pointer
                            
                            /*    */
                            px-12 py-4 text-xl font-medium tracking-widest text-slate-200
                            
                            /*      (   ) */
                            bg-slate-900/60 backdrop-blur-md
                            
                            /* :      */
                            border-2 border-slate-400/40
                            
                            /* :   ,   ,     */
                            rounded-md
                            
                            /* :        */
                            shadow-[0_0_20px_rgba(30,41,59,0.5)]
                            
                            /* :   ,    */
                            hover:bg-slate-800/80
                            hover:border-slate-200
                            hover:text-white
                            hover:shadow-[0_0_25px_rgba(148,163,184,0.3)]
                            
                            /*    */
                            transition-all duration-500
                            active:scale-95
                            animate-fade-in
                        `,children:[Q.jsx("span",{className:"opacity-40 mr-3",children:""}),"RETURN TO WORLD MAP",Q.jsx("span",{className:"opacity-40 ml-3",children:""})]})}),Q.jsx("div",{className:"bottom-panel-container",children:Q.jsx("div",{className:"bottom-panel"})})]}):d!==Yt.Playing&&d!==Yt.Preparing?null:Q.jsx("div",{className:"bottom-panel-container",children:Q.jsx(IT,{})})},qT=({onReady:d})=>{const e=Lf(n=>n.currentScene);return an.useLayoutEffect(()=>{d(e)},[e]),Q.jsxs(Q.Fragment,{children:[e===Fn.World&&Q.jsx(DT,{}),e===Fn.Battle&&Q.jsx(GT,{})]})};pt.registerPlugin(uv,Uf);Uf.registerPIXI(Xm);let Eo=null;async function YT(){if(globalThis.__PIXI_APP__){console.warn("HMR: Killing old Pixi instance...");const c=globalThis.__PIXI_APP__;c.ticker.stop(),c.stop(),c.destroy(!0,{children:!0,texture:!0}),globalThis.__PIXI_APP__=void 0}let d=document.getElementById("app-container"),e=document.getElementById("pixi-wrapper"),n=document.getElementById("ui-root");d||(d=document.createElement("div"),d.id="app-container",e=document.createElement("div"),e.id="pixi-wrapper",n=document.createElement("div"),n.id="ui-root",d.appendChild(e),d.appendChild(n),document.body.appendChild(d));const a=new $_;await a.init({resizeTo:e,resolution:window.devicePixelRatio||1,autoDensity:!0,backgroundColor:328965}),globalThis.__PIXI_APP__=a,window.app=a;const l=e.querySelector("canvas");l&&l.remove(),e.appendChild(a.canvas);let o=null;const u=async c=>{o&&(console.info("[Scene] Destroying old scene"),o.destroy({children:!0}),a.stage.removeChild(o),o=null),a.resize(),console.log(`[Scene] Init ${c}. Screen: ${a.screen.width}x${a.screen.height}`),c===Fn.Battle?(Sb(),o=new HT(a)):o=new zT(a),a.stage.addChild(o),o.init&&await o.init()};a.ticker.add(()=>{const c=performance.now(),f=performance.now();f-c>1&&console.log("Actual CPU Work:",(f-c).toFixed(4),"ms")}),!Eo&&n&&(Eo=oS.createRoot(n)),Eo&&Eo.render(Q.jsx(Ts.StrictMode,{children:Q.jsx(qT,{onReady:u})})),u(Fn.Battle),window.PIXI=Xm,window.app=a}YT().catch(console.error);
//# sourceMappingURL=index-Du1y9Cq-.js.map
