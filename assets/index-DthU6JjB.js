import{g as Nm,b as B_,T as k_,C as jt,R as Ll,P as se,G as Oe,c as Yn,S as Do,d as uf,f as Xn,h as ba,i as L_,j as I_,k as G_,l as q_,m as Y_,n as X_,o as j_,p as V_,q as P_,r as Q_}from"./pixi-BagO6QuG.js";import{r as Bm,a as Z_}from"./react-Dh3zDKDA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var Sh={exports:{}},Al={};var B0;function W_(){if(B0)return Al;B0=1;var d=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var c in l)c!=="key"&&(o[c]=l[c])}else o=l;return l=o.ref,{$$typeof:d,type:a,key:u,ref:l!==void 0?l:null,props:o}}return Al.Fragment=e,Al.jsx=n,Al.jsxs=n,Al}var k0;function K_(){return k0||(k0=1,Sh.exports=W_()),Sh.exports}var Q=K_(),an=Bm();const xs=Nm(an);var xh={exports:{}},Cl={},bh={exports:{}},Th={};var L0;function F_(){return L0||(L0=1,(function(d){function e(R,P){var K=R.length;R.push(P);t:for(;0<K;){var vt=K-1>>>1,mt=R[vt];if(0<l(mt,P))R[vt]=P,R[K]=mt,K=vt;else break t}}function n(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var P=R[0],K=R.pop();if(K!==P){R[0]=K;t:for(var vt=0,mt=R.length,bt=mt>>>1;vt<bt;){var yt=2*(vt+1)-1,at=R[yt],_t=yt+1,qt=R[_t];if(0>l(at,K))_t<mt&&0>l(qt,at)?(R[vt]=qt,R[_t]=K,vt=_t):(R[vt]=at,R[yt]=K,vt=yt);else if(_t<mt&&0>l(qt,K))R[vt]=qt,R[_t]=K,vt=_t;else break t}}return P}function l(R,P){var K=R.sortIndex-P.sortIndex;return K!==0?K:R.id-P.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();d.unstable_now=function(){return u.now()-c}}var f=[],g=[],m=1,y=null,_=3,S=!1,T=!1,x=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function B(R){for(var P=n(g);P!==null;){if(P.callback===null)a(g);else if(P.startTime<=R)a(g),P.sortIndex=P.expirationTime,e(f,P);else break;P=n(g)}}function N(R){if(x=!1,B(R),!T)if(n(f)!==null)T=!0,G||(G=!0,et());else{var P=n(g);P!==null&&ot(N,P.startTime-R)}}var G=!1,Y=-1,j=5,I=-1;function F(){return M?!0:!(d.unstable_now()-I<j)}function it(){if(M=!1,G){var R=d.unstable_now();I=R;var P=!0;try{t:{T=!1,x&&(x=!1,C(Y),Y=-1),S=!0;var K=_;try{e:{for(B(R),y=n(f);y!==null&&!(y.expirationTime>R&&F());){var vt=y.callback;if(typeof vt=="function"){y.callback=null,_=y.priorityLevel;var mt=vt(y.expirationTime<=R);if(R=d.unstable_now(),typeof mt=="function"){y.callback=mt,B(R),P=!0;break e}y===n(f)&&a(f),B(R)}else a(f);y=n(f)}if(y!==null)P=!0;else{var bt=n(g);bt!==null&&ot(N,bt.startTime-R),P=!1}}break t}finally{y=null,_=K,S=!1}P=void 0}}finally{P?et():G=!1}}}var et;if(typeof z=="function")et=function(){z(it)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Et=nt.port2;nt.port1.onmessage=it,et=function(){Et.postMessage(null)}}else et=function(){w(it,0)};function ot(R,P){Y=w(function(){R(d.unstable_now())},P)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(R){R.callback=null},d.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},d.unstable_getCurrentPriorityLevel=function(){return _},d.unstable_next=function(R){switch(_){case 1:case 2:case 3:var P=3;break;default:P=_}var K=_;_=P;try{return R()}finally{_=K}},d.unstable_requestPaint=function(){M=!0},d.unstable_runWithPriority=function(R,P){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var K=_;_=R;try{return P()}finally{_=K}},d.unstable_scheduleCallback=function(R,P,K){var vt=d.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?vt+K:vt):K=vt,R){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=K+mt,R={id:m++,callback:P,priorityLevel:R,startTime:K,expirationTime:mt,sortIndex:-1},K>vt?(R.sortIndex=K,e(g,R),n(f)===null&&R===n(g)&&(x?(C(Y),Y=-1):x=!0,ot(N,K-vt))):(R.sortIndex=mt,e(f,R),T||S||(T=!0,G||(G=!0,et()))),R},d.unstable_shouldYield=F,d.unstable_wrapCallback=function(R){var P=_;return function(){var K=_;_=P;try{return R.apply(this,arguments)}finally{_=K}}}})(Th)),Th}var I0;function J_(){return I0||(I0=1,bh.exports=F_()),bh.exports}var G0;function $_(){if(G0)return Cl;G0=1;var d=J_(),e=Bm(),n=Z_();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function o(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function u(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function c(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function f(t){if(o(t)!==t)throw Error(a(188))}function g(t){var i=t.alternate;if(!i){if(i=o(t),i===null)throw Error(a(188));return i!==t?null:t}for(var s=t,r=i;;){var h=s.return;if(h===null)break;var p=h.alternate;if(p===null){if(r=h.return,r!==null){s=r;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===s)return f(h),t;if(p===r)return f(h),i;p=p.sibling}throw Error(a(188))}if(s.return!==r.return)s=h,r=p;else{for(var v=!1,b=h.child;b;){if(b===s){v=!0,s=h,r=p;break}if(b===r){v=!0,r=h,s=p;break}b=b.sibling}if(!v){for(b=p.child;b;){if(b===s){v=!0,s=p,r=h;break}if(b===r){v=!0,r=p,s=h;break}b=b.sibling}if(!v)throw Error(a(189))}}if(s.alternate!==r)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:i}function m(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=m(t),i!==null)return i;t=t.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),z=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function et(t){return t===null||typeof t!="object"?null:(t=it&&t[it]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Symbol.for("react.client.reference");function Et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===nt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case w:return"Profiler";case M:return"StrictMode";case N:return"Suspense";case G:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case z:return t.displayName||"Context";case C:return(t._context.displayName||"Context")+".Consumer";case B:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return i=t.displayName||null,i!==null?i:Et(t.type)||"Memo";case j:i=t._payload,t=t._init;try{return Et(t(i))}catch{}}return null}var ot=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},vt=[],mt=-1;function bt(t){return{current:t}}function yt(t){0>mt||(t.current=vt[mt],vt[mt]=null,mt--)}function at(t,i){mt++,vt[mt]=t.current,t.current=i}var _t=bt(null),qt=bt(null),Ei=bt(null),Da=bt(null);function Ua(t,i){switch(at(Ei,i),at(qt,t),at(_t,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?s0(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=s0(i),t=l0(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}yt(_t),at(_t,t)}function cn(){yt(_t),yt(qt),yt(Ei)}function ce(t){t.memoizedState!==null&&at(Da,t);var i=_t.current,s=l0(i,t.type);i!==s&&(at(qt,t),at(_t,s))}function ir(t){qt.current===t&&(yt(_t),yt(qt)),Da.current===t&&(yt(Da),Tl._currentValue=K)}var iu,Nf;function Kn(t){if(iu===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);iu=i&&i[1]||"",Nf=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+iu+t+Nf}var nu=!1;function au(t,i){if(!t||nu)return"";nu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(k){var U=k}Reflect.construct(t,[],X)}else{try{X.call()}catch(k){U=k}t.call(X.prototype)}}else{try{throw Error()}catch(k){U=k}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(k){if(k&&U&&typeof k.stack=="string")return[k.stack,U.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=r.DetermineComponentFrameRoot(),v=p[0],b=p[1];if(v&&b){var E=v.split(`
`),D=b.split(`
`);for(h=r=0;r<E.length&&!E[r].includes("DetermineComponentFrameRoot");)r++;for(;h<D.length&&!D[h].includes("DetermineComponentFrameRoot");)h++;if(r===E.length||h===D.length)for(r=E.length-1,h=D.length-1;1<=r&&0<=h&&E[r]!==D[h];)h--;for(;1<=r&&0<=h;r--,h--)if(E[r]!==D[h]){if(r!==1||h!==1)do if(r--,h--,0>h||E[r]!==D[h]){var L=`
`+E[r].replace(" at new "," at ");return t.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",t.displayName)),L}while(1<=r&&0<=h);break}}}finally{nu=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Kn(s):""}function dv(t,i){switch(t.tag){case 26:case 27:case 5:return Kn(t.type);case 16:return Kn("Lazy");case 13:return t.child!==i&&i!==null?Kn("Suspense Fallback"):Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 15:return au(t.type,!1);case 11:return au(t.type.render,!1);case 1:return au(t.type,!0);case 31:return Kn("Activity");default:return""}}function Bf(t){try{var i="",s=null;do i+=dv(t,s),s=t,t=t.return;while(t);return i}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var su=Object.prototype.hasOwnProperty,lu=d.unstable_scheduleCallback,ru=d.unstable_cancelCallback,pv=d.unstable_shouldYield,gv=d.unstable_requestPaint,Ne=d.unstable_now,mv=d.unstable_getCurrentPriorityLevel,kf=d.unstable_ImmediatePriority,Lf=d.unstable_UserBlockingPriority,nr=d.unstable_NormalPriority,yv=d.unstable_LowPriority,If=d.unstable_IdlePriority,vv=d.log,_v=d.unstable_setDisableYieldValue,Ns=null,Be=null;function hn(t){if(typeof vv=="function"&&_v(t),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Ns,t)}catch{}}var ke=Math.clz32?Math.clz32:bv,Sv=Math.log,xv=Math.LN2;function bv(t){return t>>>=0,t===0?32:31-(Sv(t)/xv|0)|0}var ar=256,sr=262144,lr=4194304;function Fn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function rr(t,i,s){var r=t.pendingLanes;if(r===0)return 0;var h=0,p=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=r&134217727;return b!==0?(r=b&~p,r!==0?h=Fn(r):(v&=b,v!==0?h=Fn(v):s||(s=b&~t,s!==0&&(h=Fn(s))))):(b=r&~p,b!==0?h=Fn(b):v!==0?h=Fn(v):s||(s=r&~t,s!==0&&(h=Fn(s)))),h===0?0:i!==0&&i!==h&&(i&p)===0&&(p=h&-h,s=i&-i,p>=s||p===32&&(s&4194048)!==0)?i:h}function Bs(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Tv(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gf(){var t=lr;return lr<<=1,(lr&62914560)===0&&(lr=4194304),t}function ou(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function ks(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mv(t,i,s,r,h,p){var v=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var b=t.entanglements,E=t.expirationTimes,D=t.hiddenUpdates;for(s=v&~s;0<s;){var L=31-ke(s),X=1<<L;b[L]=0,E[L]=-1;var U=D[L];if(U!==null)for(D[L]=null,L=0;L<U.length;L++){var k=U[L];k!==null&&(k.lane&=-536870913)}s&=~X}r!==0&&qf(t,r,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(v&~i))}function qf(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var r=31-ke(i);t.entangledLanes|=i,t.entanglements[r]=t.entanglements[r]|1073741824|s&261930}function Yf(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var r=31-ke(s),h=1<<r;h&i|t[r]&i&&(t[r]|=i),s&=~h}}function Xf(t,i){var s=i&-i;return s=(s&42)!==0?1:uu(s),(s&(t.suspendedLanes|i))!==0?0:s}function uu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function cu(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function jf(){var t=P.p;return t!==0?t:(t=window.event,t===void 0?32:O0(t.type))}function Vf(t,i){var s=P.p;try{return P.p=t,i()}finally{P.p=s}}var fn=Math.random().toString(36).slice(2),he="__reactFiber$"+fn,be="__reactProps$"+fn,Ra="__reactContainer$"+fn,hu="__reactEvents$"+fn,wv="__reactListeners$"+fn,Ev="__reactHandles$"+fn,Pf="__reactResources$"+fn,Ls="__reactMarker$"+fn;function fu(t){delete t[he],delete t[be],delete t[hu],delete t[wv],delete t[Ev]}function Na(t){var i=t[he];if(i)return i;for(var s=t.parentNode;s;){if(i=s[Ra]||s[he]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=d0(t);t!==null;){if(s=t[he])return s;t=d0(t)}return i}t=s,s=t.parentNode}return null}function Ba(t){if(t=t[he]||t[Ra]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Is(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function ka(t){var i=t[Pf];return i||(i=t[Pf]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function le(t){t[Ls]=!0}var Qf=new Set,Zf={};function Jn(t,i){La(t,i),La(t+"Capture",i)}function La(t,i){for(Zf[t]=i,t=0;t<i.length;t++)Qf.add(i[t])}var Av=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wf={},Kf={};function Cv(t){return su.call(Kf,t)?!0:su.call(Wf,t)?!1:Av.test(t)?Kf[t]=!0:(Wf[t]=!0,!1)}function or(t,i,s){if(Cv(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var r=i.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function ur(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function Bi(t,i,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+r)}}function ti(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ff(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ov(t,i,s){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,p=r.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){s=""+v,p.call(this,v)}}),Object.defineProperty(t,i,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function du(t){if(!t._valueTracker){var i=Ff(t)?"checked":"value";t._valueTracker=Ov(t,i,""+t[i])}}function Jf(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),r="";return t&&(r=Ff(t)?t.checked?"true":"false":t.value),t=r,t!==s?(i.setValue(t),!0):!1}function cr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zv=/[\n"\\]/g;function ei(t){return t.replace(zv,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function pu(t,i,s,r,h,p,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+ti(i)):t.value!==""+ti(i)&&(t.value=""+ti(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?gu(t,v,ti(i)):s!=null?gu(t,v,ti(s)):r!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+ti(b):t.removeAttribute("name")}function $f(t,i,s,r,h,p,v,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),i!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){du(t);return}s=s!=null?""+ti(s):"",i=i!=null?""+ti(i):s,b||i===t.value||(t.value=i),t.defaultValue=i}r=r??h,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=b?t.checked:!!r,t.defaultChecked=!!r,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),du(t)}function gu(t,i,s){i==="number"&&cr(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Ia(t,i,s,r){if(t=t.options,i){i={};for(var h=0;h<s.length;h++)i["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=i.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&r&&(t[s].defaultSelected=!0)}else{for(s=""+ti(s),i=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,r&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function td(t,i,s){if(i!=null&&(i=""+ti(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+ti(s):""}function ed(t,i,s,r){if(i==null){if(r!=null){if(s!=null)throw Error(a(92));if(ot(r)){if(1<r.length)throw Error(a(93));r=r[0]}s=r}s==null&&(s=""),i=s}s=ti(i),t.defaultValue=s,r=t.textContent,r===s&&r!==""&&r!==null&&(t.value=r),du(t)}function Ga(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var Hv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function id(t,i,s){var r=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?r?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":r?t.setProperty(i,s):typeof s!="number"||s===0||Hv.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function nd(t,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,s!=null){for(var r in s)!s.hasOwnProperty(r)||i!=null&&i.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var h in i)r=i[h],i.hasOwnProperty(h)&&s[h]!==r&&id(t,h,r)}else for(var p in i)i.hasOwnProperty(p)&&id(t,p,i[p])}function mu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hr(t){return Uv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ki(){}var yu=null;function vu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qa=null,Ya=null;function ad(t){var i=Ba(t);if(i&&(t=i.stateNode)){var s=t[be]||null;t:switch(t=i.stateNode,i.type){case"input":if(pu(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ei(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var r=s[i];if(r!==t&&r.form===t.form){var h=r[be]||null;if(!h)throw Error(a(90));pu(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<s.length;i++)r=s[i],r.form===t.form&&Jf(r)}break t;case"textarea":td(t,s.value,s.defaultValue);break t;case"select":i=s.value,i!=null&&Ia(t,!!s.multiple,i,!1)}}}var _u=!1;function sd(t,i,s){if(_u)return t(i,s);_u=!0;try{var r=t(i);return r}finally{if(_u=!1,(qa!==null||Ya!==null)&&(Jr(),qa&&(i=qa,t=Ya,Ya=qa=null,ad(i),t)))for(i=0;i<t.length;i++)ad(t[i])}}function Gs(t,i){var s=t.stateNode;if(s===null)return null;var r=s[be]||null;if(r===null)return null;s=r[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break t;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Su=!1;if(Li)try{var qs={};Object.defineProperty(qs,"passive",{get:function(){Su=!0}}),window.addEventListener("test",qs,qs),window.removeEventListener("test",qs,qs)}catch{Su=!1}var dn=null,xu=null,fr=null;function ld(){if(fr)return fr;var t,i=xu,s=i.length,r,h="value"in dn?dn.value:dn.textContent,p=h.length;for(t=0;t<s&&i[t]===h[t];t++);var v=s-t;for(r=1;r<=v&&i[s-r]===h[p-r];r++);return fr=h.slice(t,1<r?1-r:void 0)}function dr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function pr(){return!0}function rd(){return!1}function Te(t){function i(s,r,h,p,v){this._reactName=s,this._targetInst=h,this.type=r,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(s=t[b],this[b]=s?s(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?pr:rd,this.isPropagationStopped=rd,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),i}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gr=Te($n),Ys=y({},$n,{view:0,detail:0}),Rv=Te(Ys),bu,Tu,Xs,mr=y({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?(bu=t.screenX-Xs.screenX,Tu=t.screenY-Xs.screenY):Tu=bu=0,Xs=t),bu)},movementY:function(t){return"movementY"in t?t.movementY:Tu}}),od=Te(mr),Nv=y({},mr,{dataTransfer:0}),Bv=Te(Nv),kv=y({},Ys,{relatedTarget:0}),Mu=Te(kv),Lv=y({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),Iv=Te(Lv),Gv=y({},$n,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qv=Te(Gv),Yv=y({},$n,{data:0}),ud=Te(Yv),Xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pv(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Vv[t])?!!i[t]:!1}function wu(){return Pv}var Qv=y({},Ys,{key:function(t){if(t.key){var i=Xv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=dr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wu,charCode:function(t){return t.type==="keypress"?dr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zv=Te(Qv),Wv=y({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cd=Te(Wv),Kv=y({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wu}),Fv=Te(Kv),Jv=y({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),$v=Te(Jv),t1=y({},mr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),e1=Te(t1),i1=y({},$n,{newState:0,oldState:0}),n1=Te(i1),a1=[9,13,27,32],Eu=Li&&"CompositionEvent"in window,js=null;Li&&"documentMode"in document&&(js=document.documentMode);var s1=Li&&"TextEvent"in window&&!js,hd=Li&&(!Eu||js&&8<js&&11>=js),fd=" ",dd=!1;function pd(t,i){switch(t){case"keyup":return a1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xa=!1;function l1(t,i){switch(t){case"compositionend":return gd(i);case"keypress":return i.which!==32?null:(dd=!0,fd);case"textInput":return t=i.data,t===fd&&dd?null:t;default:return null}}function r1(t,i){if(Xa)return t==="compositionend"||!Eu&&pd(t,i)?(t=ld(),fr=xu=dn=null,Xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return hd&&i.locale!=="ko"?null:i.data;default:return null}}var o1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function md(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!o1[t.type]:i==="textarea"}function yd(t,i,s,r){qa?Ya?Ya.push(r):Ya=[r]:qa=r,i=so(i,"onChange"),0<i.length&&(s=new gr("onChange","change",null,s,r),t.push({event:s,listeners:i}))}var Vs=null,Ps=null;function u1(t){$g(t,0)}function yr(t){var i=Is(t);if(Jf(i))return t}function vd(t,i){if(t==="change")return i}var _d=!1;if(Li){var Au;if(Li){var Cu="oninput"in document;if(!Cu){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),Cu=typeof Sd.oninput=="function"}Au=Cu}else Au=!1;_d=Au&&(!document.documentMode||9<document.documentMode)}function xd(){Vs&&(Vs.detachEvent("onpropertychange",bd),Ps=Vs=null)}function bd(t){if(t.propertyName==="value"&&yr(Ps)){var i=[];yd(i,Ps,t,vu(t)),sd(u1,i)}}function c1(t,i,s){t==="focusin"?(xd(),Vs=i,Ps=s,Vs.attachEvent("onpropertychange",bd)):t==="focusout"&&xd()}function h1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yr(Ps)}function f1(t,i){if(t==="click")return yr(i)}function d1(t,i){if(t==="input"||t==="change")return yr(i)}function p1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Le=typeof Object.is=="function"?Object.is:p1;function Qs(t,i){if(Le(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),r=Object.keys(i);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var h=s[r];if(!su.call(i,h)||!Le(t[h],i[h]))return!1}return!0}function Td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Md(t,i){var s=Td(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=i&&r>=i)return{node:s,offset:i-t};t=r}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Td(s)}}function wd(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?wd(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ed(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=cr(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=cr(t.document)}return i}function Ou(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var g1=Li&&"documentMode"in document&&11>=document.documentMode,ja=null,zu=null,Zs=null,Hu=!1;function Ad(t,i,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Hu||ja==null||ja!==cr(r)||(r=ja,"selectionStart"in r&&Ou(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zs&&Qs(Zs,r)||(Zs=r,r=so(zu,"onSelect"),0<r.length&&(i=new gr("onSelect","select",null,i,s),t.push({event:i,listeners:r}),i.target=ja)))}function ta(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var Va={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},Du={},Cd={};Li&&(Cd=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function ea(t){if(Du[t])return Du[t];if(!Va[t])return t;var i=Va[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Cd)return Du[t]=i[s];return t}var Od=ea("animationend"),zd=ea("animationiteration"),Hd=ea("animationstart"),m1=ea("transitionrun"),y1=ea("transitionstart"),v1=ea("transitioncancel"),Dd=ea("transitionend"),Ud=new Map,Uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uu.push("scrollEnd");function Si(t,i){Ud.set(t,i),Jn(i,[t])}var vr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ii=[],Pa=0,Ru=0;function _r(){for(var t=Pa,i=Ru=Pa=0;i<t;){var s=ii[i];ii[i++]=null;var r=ii[i];ii[i++]=null;var h=ii[i];ii[i++]=null;var p=ii[i];if(ii[i++]=null,r!==null&&h!==null){var v=r.pending;v===null?h.next=h:(h.next=v.next,v.next=h),r.pending=h}p!==0&&Rd(s,h,p)}}function Sr(t,i,s,r){ii[Pa++]=t,ii[Pa++]=i,ii[Pa++]=s,ii[Pa++]=r,Ru|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Nu(t,i,s,r){return Sr(t,i,s,r),xr(t)}function ia(t,i){return Sr(t,null,null,i),xr(t)}function Rd(t,i,s){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s);for(var h=!1,p=t.return;p!==null;)p.childLanes|=s,r=p.alternate,r!==null&&(r.childLanes|=s),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&i!==null&&(h=31-ke(s),t=p.hiddenUpdates,r=t[h],r===null?t[h]=[i]:r.push(i),i.lane=s|536870912),p):null}function xr(t){if(50<ml)throw ml=0,jc=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Qa={};function _1(t,i,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ie(t,i,s,r){return new _1(t,i,s,r)}function Bu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ii(t,i){var s=t.alternate;return s===null?(s=Ie(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Nd(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function br(t,i,s,r,h,p){var v=0;if(r=t,typeof t=="function")Bu(t)&&(v=1);else if(typeof t=="string")v=M_(t,s,_t.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case I:return t=Ie(31,s,i,h),t.elementType=I,t.lanes=p,t;case x:return na(s.children,h,p,i);case M:v=8,h|=24;break;case w:return t=Ie(12,s,i,h|2),t.elementType=w,t.lanes=p,t;case N:return t=Ie(13,s,i,h),t.elementType=N,t.lanes=p,t;case G:return t=Ie(19,s,i,h),t.elementType=G,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:v=10;break t;case C:v=9;break t;case B:v=11;break t;case Y:v=14;break t;case j:v=16,r=null;break t}v=29,s=Error(a(130,t===null?"null":typeof t,"")),r=null}return i=Ie(v,s,i,h),i.elementType=t,i.type=r,i.lanes=p,i}function na(t,i,s,r){return t=Ie(7,t,r,i),t.lanes=s,t}function ku(t,i,s){return t=Ie(6,t,null,i),t.lanes=s,t}function Bd(t){var i=Ie(18,null,null,0);return i.stateNode=t,i}function Lu(t,i,s){return i=Ie(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var kd=new WeakMap;function ni(t,i){if(typeof t=="object"&&t!==null){var s=kd.get(t);return s!==void 0?s:(i={value:t,source:i,stack:Bf(i)},kd.set(t,i),i)}return{value:t,source:i,stack:Bf(i)}}var Za=[],Wa=0,Tr=null,Ws=0,ai=[],si=0,pn=null,Ai=1,Ci="";function Gi(t,i){Za[Wa++]=Ws,Za[Wa++]=Tr,Tr=t,Ws=i}function Ld(t,i,s){ai[si++]=Ai,ai[si++]=Ci,ai[si++]=pn,pn=t;var r=Ai;t=Ci;var h=32-ke(r)-1;r&=~(1<<h),s+=1;var p=32-ke(i)+h;if(30<p){var v=h-h%5;p=(r&(1<<v)-1).toString(32),r>>=v,h-=v,Ai=1<<32-ke(i)+h|s<<h|r,Ci=p+t}else Ai=1<<p|s<<h|r,Ci=t}function Iu(t){t.return!==null&&(Gi(t,1),Ld(t,1,0))}function Gu(t){for(;t===Tr;)Tr=Za[--Wa],Za[Wa]=null,Ws=Za[--Wa],Za[Wa]=null;for(;t===pn;)pn=ai[--si],ai[si]=null,Ci=ai[--si],ai[si]=null,Ai=ai[--si],ai[si]=null}function Id(t,i){ai[si++]=Ai,ai[si++]=Ci,ai[si++]=pn,Ai=i.id,Ci=i.overflow,pn=t}var fe=null,Bt=null,dt=!1,gn=null,li=!1,qu=Error(a(519));function mn(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ks(ni(i,t)),qu}function Gd(t){var i=t.stateNode,s=t.type,r=t.memoizedProps;switch(i[he]=t,i[be]=r,s){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(s=0;s<vl.length;s++)ct(vl[s],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),$f(i,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),ed(i,r.value,r.defaultValue,r.children)}s=r.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||r.suppressHydrationWarning===!0||n0(i.textContent,s)?(r.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),r.onScroll!=null&&ct("scroll",i),r.onScrollEnd!=null&&ct("scrollend",i),r.onClick!=null&&(i.onclick=ki),i=!0):i=!1,i||mn(t,!0)}function qd(t){for(fe=t.return;fe;)switch(fe.tag){case 5:case 31:case 13:li=!1;return;case 27:case 3:li=!0;return;default:fe=fe.return}}function Ka(t){if(t!==fe)return!1;if(!dt)return qd(t),dt=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||sh(t.type,t.memoizedProps)),s=!s),s&&Bt&&mn(t),qd(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Bt=f0(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Bt=f0(t)}else i===27?(i=Bt,zn(t.type)?(t=ch,ch=null,Bt=t):Bt=i):Bt=fe?oi(t.stateNode.nextSibling):null;return!0}function aa(){Bt=fe=null,dt=!1}function Yu(){var t=gn;return t!==null&&(Ae===null?Ae=t:Ae.push.apply(Ae,t),gn=null),t}function Ks(t){gn===null?gn=[t]:gn.push(t)}var Xu=bt(null),sa=null,qi=null;function yn(t,i,s){at(Xu,i._currentValue),i._currentValue=s}function Yi(t){t._currentValue=Xu.current,yt(Xu)}function ju(t,i,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,r!==null&&(r.childLanes|=i)):r!==null&&(r.childLanes&i)!==i&&(r.childLanes|=i),t===s)break;t=t.return}}function Vu(t,i,s,r){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var v=h.child;p=p.firstContext;t:for(;p!==null;){var b=p;p=h;for(var E=0;E<i.length;E++)if(b.context===i[E]){p.lanes|=s,b=p.alternate,b!==null&&(b.lanes|=s),ju(p.return,s,t),r||(v=null);break t}p=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(a(341));v.lanes|=s,p=v.alternate,p!==null&&(p.lanes|=s),ju(v,s,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Fa(t,i,s,r){t=null;for(var h=i,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var b=h.type;Le(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===Da.current){if(v=h.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Tl):t=[Tl])}h=h.return}t!==null&&Vu(i,t,s,r),i.flags|=262144}function Mr(t){for(t=t.firstContext;t!==null;){if(!Le(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function la(t){sa=t,qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function de(t){return Yd(sa,t)}function wr(t,i){return sa===null&&la(t),Yd(t,i)}function Yd(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},qi===null){if(t===null)throw Error(a(308));qi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else qi=qi.next=i;return s}var S1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,r){t.push(r)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},x1=d.unstable_scheduleCallback,b1=d.unstable_NormalPriority,Jt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new S1,data:new Map,refCount:0}}function Fs(t){t.refCount--,t.refCount===0&&x1(b1,function(){t.controller.abort()})}var Js=null,Qu=0,Ja=0,$a=null;function T1(t,i){if(Js===null){var s=Js=[];Qu=0,Ja=Kc(),$a={status:"pending",value:void 0,then:function(r){s.push(r)}}}return Qu++,i.then(Xd,Xd),i}function Xd(){if(--Qu===0&&Js!==null){$a!==null&&($a.status="fulfilled");var t=Js;Js=null,Ja=0,$a=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function M1(t,i){var s=[],r={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return t.then(function(){r.status="fulfilled",r.value=i;for(var h=0;h<s.length;h++)(0,s[h])(i)},function(h){for(r.status="rejected",r.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),r}var jd=R.S;R.S=function(t,i){Ag=Ne(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&T1(t,i),jd!==null&&jd(t,i)};var ra=bt(null);function Zu(){var t=ra.current;return t!==null?t:Dt.pooledCache}function Er(t,i){i===null?at(ra,ra.current):at(ra,i.pool)}function Vd(){var t=Zu();return t===null?null:{parent:Jt._currentValue,pool:t}}var ts=Error(a(460)),Wu=Error(a(474)),Ar=Error(a(542)),Cr={then:function(){}};function Pd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Qd(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(ki,ki),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Wd(t),t;default:if(typeof i.status=="string")i.then(ki,ki);else{if(t=Dt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(r){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=r}},function(r){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=r}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Wd(t),t}throw ua=i,ts}}function oa(t){try{var i=t._init;return i(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ua=s,ts):s}}var ua=null;function Zd(){if(ua===null)throw Error(a(459));var t=ua;return ua=null,t}function Wd(t){if(t===ts||t===Ar)throw Error(a(483))}var es=null,$s=0;function Or(t){var i=$s;return $s+=1,es===null&&(es=[]),Qd(es,t,i)}function tl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function zr(t,i){throw i.$$typeof===_?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Kd(t){function i(O,A){if(t){var H=O.deletions;H===null?(O.deletions=[A],O.flags|=16):H.push(A)}}function s(O,A){if(!t)return null;for(;A!==null;)i(O,A),A=A.sibling;return null}function r(O){for(var A=new Map;O!==null;)O.key!==null?A.set(O.key,O):A.set(O.index,O),O=O.sibling;return A}function h(O,A){return O=Ii(O,A),O.index=0,O.sibling=null,O}function p(O,A,H){return O.index=H,t?(H=O.alternate,H!==null?(H=H.index,H<A?(O.flags|=67108866,A):H):(O.flags|=67108866,A)):(O.flags|=1048576,A)}function v(O){return t&&O.alternate===null&&(O.flags|=67108866),O}function b(O,A,H,q){return A===null||A.tag!==6?(A=ku(H,O.mode,q),A.return=O,A):(A=h(A,H),A.return=O,A)}function E(O,A,H,q){var $=H.type;return $===x?L(O,A,H.props.children,q,H.key):A!==null&&(A.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===j&&oa($)===A.type)?(A=h(A,H.props),tl(A,H),A.return=O,A):(A=br(H.type,H.key,H.props,null,O.mode,q),tl(A,H),A.return=O,A)}function D(O,A,H,q){return A===null||A.tag!==4||A.stateNode.containerInfo!==H.containerInfo||A.stateNode.implementation!==H.implementation?(A=Lu(H,O.mode,q),A.return=O,A):(A=h(A,H.children||[]),A.return=O,A)}function L(O,A,H,q,$){return A===null||A.tag!==7?(A=na(H,O.mode,q,$),A.return=O,A):(A=h(A,H),A.return=O,A)}function X(O,A,H){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=ku(""+A,O.mode,H),A.return=O,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case S:return H=br(A.type,A.key,A.props,null,O.mode,H),tl(H,A),H.return=O,H;case T:return A=Lu(A,O.mode,H),A.return=O,A;case j:return A=oa(A),X(O,A,H)}if(ot(A)||et(A))return A=na(A,O.mode,H,null),A.return=O,A;if(typeof A.then=="function")return X(O,Or(A),H);if(A.$$typeof===z)return X(O,wr(O,A),H);zr(O,A)}return null}function U(O,A,H,q){var $=A!==null?A.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return $!==null?null:b(O,A,""+H,q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return H.key===$?E(O,A,H,q):null;case T:return H.key===$?D(O,A,H,q):null;case j:return H=oa(H),U(O,A,H,q)}if(ot(H)||et(H))return $!==null?null:L(O,A,H,q,null);if(typeof H.then=="function")return U(O,A,Or(H),q);if(H.$$typeof===z)return U(O,A,wr(O,H),q);zr(O,H)}return null}function k(O,A,H,q,$){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return O=O.get(H)||null,b(A,O,""+q,$);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return O=O.get(q.key===null?H:q.key)||null,E(A,O,q,$);case T:return O=O.get(q.key===null?H:q.key)||null,D(A,O,q,$);case j:return q=oa(q),k(O,A,H,q,$)}if(ot(q)||et(q))return O=O.get(H)||null,L(A,O,q,$,null);if(typeof q.then=="function")return k(O,A,H,Or(q),$);if(q.$$typeof===z)return k(O,A,H,wr(A,q),$);zr(A,q)}return null}function W(O,A,H,q){for(var $=null,St=null,J=A,lt=A=0,ft=null;J!==null&&lt<H.length;lt++){J.index>lt?(ft=J,J=null):ft=J.sibling;var xt=U(O,J,H[lt],q);if(xt===null){J===null&&(J=ft);break}t&&J&&xt.alternate===null&&i(O,J),A=p(xt,A,lt),St===null?$=xt:St.sibling=xt,St=xt,J=ft}if(lt===H.length)return s(O,J),dt&&Gi(O,lt),$;if(J===null){for(;lt<H.length;lt++)J=X(O,H[lt],q),J!==null&&(A=p(J,A,lt),St===null?$=J:St.sibling=J,St=J);return dt&&Gi(O,lt),$}for(J=r(J);lt<H.length;lt++)ft=k(J,O,lt,H[lt],q),ft!==null&&(t&&ft.alternate!==null&&J.delete(ft.key===null?lt:ft.key),A=p(ft,A,lt),St===null?$=ft:St.sibling=ft,St=ft);return t&&J.forEach(function(Nn){return i(O,Nn)}),dt&&Gi(O,lt),$}function tt(O,A,H,q){if(H==null)throw Error(a(151));for(var $=null,St=null,J=A,lt=A=0,ft=null,xt=H.next();J!==null&&!xt.done;lt++,xt=H.next()){J.index>lt?(ft=J,J=null):ft=J.sibling;var Nn=U(O,J,xt.value,q);if(Nn===null){J===null&&(J=ft);break}t&&J&&Nn.alternate===null&&i(O,J),A=p(Nn,A,lt),St===null?$=Nn:St.sibling=Nn,St=Nn,J=ft}if(xt.done)return s(O,J),dt&&Gi(O,lt),$;if(J===null){for(;!xt.done;lt++,xt=H.next())xt=X(O,xt.value,q),xt!==null&&(A=p(xt,A,lt),St===null?$=xt:St.sibling=xt,St=xt);return dt&&Gi(O,lt),$}for(J=r(J);!xt.done;lt++,xt=H.next())xt=k(J,O,lt,xt.value,q),xt!==null&&(t&&xt.alternate!==null&&J.delete(xt.key===null?lt:xt.key),A=p(xt,A,lt),St===null?$=xt:St.sibling=xt,St=xt);return t&&J.forEach(function(N_){return i(O,N_)}),dt&&Gi(O,lt),$}function Ht(O,A,H,q){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case S:t:{for(var $=H.key;A!==null;){if(A.key===$){if($=H.type,$===x){if(A.tag===7){s(O,A.sibling),q=h(A,H.props.children),q.return=O,O=q;break t}}else if(A.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===j&&oa($)===A.type){s(O,A.sibling),q=h(A,H.props),tl(q,H),q.return=O,O=q;break t}s(O,A);break}else i(O,A);A=A.sibling}H.type===x?(q=na(H.props.children,O.mode,q,H.key),q.return=O,O=q):(q=br(H.type,H.key,H.props,null,O.mode,q),tl(q,H),q.return=O,O=q)}return v(O);case T:t:{for($=H.key;A!==null;){if(A.key===$)if(A.tag===4&&A.stateNode.containerInfo===H.containerInfo&&A.stateNode.implementation===H.implementation){s(O,A.sibling),q=h(A,H.children||[]),q.return=O,O=q;break t}else{s(O,A);break}else i(O,A);A=A.sibling}q=Lu(H,O.mode,q),q.return=O,O=q}return v(O);case j:return H=oa(H),Ht(O,A,H,q)}if(ot(H))return W(O,A,H,q);if(et(H)){if($=et(H),typeof $!="function")throw Error(a(150));return H=$.call(H),tt(O,A,H,q)}if(typeof H.then=="function")return Ht(O,A,Or(H),q);if(H.$$typeof===z)return Ht(O,A,wr(O,H),q);zr(O,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,A!==null&&A.tag===6?(s(O,A.sibling),q=h(A,H),q.return=O,O=q):(s(O,A),q=ku(H,O.mode,q),q.return=O,O=q),v(O)):s(O,A)}return function(O,A,H,q){try{$s=0;var $=Ht(O,A,H,q);return es=null,$}catch(J){if(J===ts||J===Ar)throw J;var St=Ie(29,J,null,O.mode);return St.lanes=q,St.return=O,St}}}var ca=Kd(!0),Fd=Kd(!1),vn=!1;function Ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fu(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _n(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Sn(t,i,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Tt&2)!==0){var h=r.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),r.pending=i,i=xr(t),Rd(t,null,s),i}return Sr(t,r,i,s),xr(t)}function el(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var r=i.lanes;r&=t.pendingLanes,s|=r,i.lanes=s,Yf(t,s)}}function Ju(t,i){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var h=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var v={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?h=p=v:p=p.next=v,s=s.next}while(s!==null);p===null?h=p=i:p=p.next=i}else h=p=i;s={baseState:r.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:r.shared,callbacks:r.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var $u=!1;function il(){if($u){var t=$a;if(t!==null)throw t}}function nl(t,i,s,r){$u=!1;var h=t.updateQueue;vn=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var E=b,D=E.next;E.next=null,v===null?p=D:v.next=D,v=E;var L=t.alternate;L!==null&&(L=L.updateQueue,b=L.lastBaseUpdate,b!==v&&(b===null?L.firstBaseUpdate=D:b.next=D,L.lastBaseUpdate=E))}if(p!==null){var X=h.baseState;v=0,L=D=E=null,b=p;do{var U=b.lane&-536870913,k=U!==b.lane;if(k?(ht&U)===U:(r&U)===U){U!==0&&U===Ja&&($u=!0),L!==null&&(L=L.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var W=t,tt=b;U=i;var Ht=s;switch(tt.tag){case 1:if(W=tt.payload,typeof W=="function"){X=W.call(Ht,X,U);break t}X=W;break t;case 3:W.flags=W.flags&-65537|128;case 0:if(W=tt.payload,U=typeof W=="function"?W.call(Ht,X,U):W,U==null)break t;X=y({},X,U);break t;case 2:vn=!0}}U=b.callback,U!==null&&(t.flags|=64,k&&(t.flags|=8192),k=h.callbacks,k===null?h.callbacks=[U]:k.push(U))}else k={lane:U,tag:b.tag,payload:b.payload,callback:b.callback,next:null},L===null?(D=L=k,E=X):L=L.next=k,v|=U;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;k=b,b=k.next,k.next=null,h.lastBaseUpdate=k,h.shared.pending=null}}while(!0);L===null&&(E=X),h.baseState=E,h.firstBaseUpdate=D,h.lastBaseUpdate=L,p===null&&(h.shared.lanes=0),wn|=v,t.lanes=v,t.memoizedState=X}}function Jd(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function $d(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Jd(s[t],i)}var is=bt(null),Hr=bt(0);function tp(t,i){t=Fi,at(Hr,t),at(is,i),Fi=t|i.baseLanes}function tc(){at(Hr,Fi),at(is,is.current)}function ec(){Fi=Hr.current,yt(is),yt(Hr)}var Ge=bt(null),ri=null;function xn(t){var i=t.alternate;at(Wt,Wt.current&1),at(Ge,t),ri===null&&(i===null||is.current!==null||i.memoizedState!==null)&&(ri=t)}function ic(t){at(Wt,Wt.current),at(Ge,t),ri===null&&(ri=t)}function ep(t){t.tag===22?(at(Wt,Wt.current),at(Ge,t),ri===null&&(ri=t)):bn()}function bn(){at(Wt,Wt.current),at(Ge,Ge.current)}function qe(t){yt(Ge),ri===t&&(ri=null),yt(Wt)}var Wt=bt(0);function Dr(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||oh(s)||uh(s)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xi=0,st=null,Ot=null,$t=null,Ur=!1,ns=!1,ha=!1,Rr=0,al=0,as=null,w1=0;function Pt(){throw Error(a(321))}function nc(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!Le(t[s],i[s]))return!1;return!0}function ac(t,i,s,r,h,p){return Xi=p,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=t===null||t.memoizedState===null?Lp:_c,ha=!1,p=s(r,h),ha=!1,ns&&(p=np(i,s,r,h)),ip(t),p}function ip(t){R.H=rl;var i=Ot!==null&&Ot.next!==null;if(Xi=0,$t=Ot=st=null,Ur=!1,al=0,as=null,i)throw Error(a(300));t===null||te||(t=t.dependencies,t!==null&&Mr(t)&&(te=!0))}function np(t,i,s,r){st=t;var h=0;do{if(ns&&(as=null),al=0,ns=!1,25<=h)throw Error(a(301));if(h+=1,$t=Ot=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}R.H=Ip,p=i(s,r)}while(ns);return p}function E1(){var t=R.H,i=t.useState()[0];return i=typeof i.then=="function"?sl(i):i,t=t.useState()[0],(Ot!==null?Ot.memoizedState:null)!==t&&(st.flags|=1024),i}function sc(){var t=Rr!==0;return Rr=0,t}function lc(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function rc(t){if(Ur){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Ur=!1}Xi=0,$t=Ot=st=null,ns=!1,al=Rr=0,as=null}function Se(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?st.memoizedState=$t=t:$t=$t.next=t,$t}function Kt(){if(Ot===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var i=$t===null?st.memoizedState:$t.next;if(i!==null)$t=i,Ot=t;else{if(t===null)throw st.alternate===null?Error(a(467)):Error(a(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},$t===null?st.memoizedState=$t=t:$t=$t.next=t}return $t}function Nr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sl(t){var i=al;return al+=1,as===null&&(as=[]),t=Qd(as,t,i),i=st,($t===null?i.memoizedState:$t.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?Lp:_c),t}function Br(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return sl(t);if(t.$$typeof===z)return de(t)}throw Error(a(438,String(t)))}function oc(t){var i=null,s=st.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var r=st.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(i={data:r.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=Nr(),st.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),r=0;r<t;r++)s[r]=F;return i.index++,s}function ji(t,i){return typeof i=="function"?i(t):i}function kr(t){var i=Kt();return uc(i,Ot,t)}function uc(t,i,s){var r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=s;var h=t.baseQueue,p=r.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}i.baseQueue=h=p,r.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{i=h.next;var b=v=null,E=null,D=i,L=!1;do{var X=D.lane&-536870913;if(X!==D.lane?(ht&X)===X:(Xi&X)===X){var U=D.revertLane;if(U===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),X===Ja&&(L=!0);else if((Xi&U)===U){D=D.next,U===Ja&&(L=!0);continue}else X={lane:0,revertLane:D.revertLane,gesture:null,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},E===null?(b=E=X,v=p):E=E.next=X,st.lanes|=U,wn|=U;X=D.action,ha&&s(p,X),p=D.hasEagerState?D.eagerState:s(p,X)}else U={lane:X,revertLane:D.revertLane,gesture:D.gesture,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null},E===null?(b=E=U,v=p):E=E.next=U,st.lanes|=X,wn|=X;D=D.next}while(D!==null&&D!==i);if(E===null?v=p:E.next=b,!Le(p,t.memoizedState)&&(te=!0,L&&(s=$a,s!==null)))throw s;t.memoizedState=p,t.baseState=v,t.baseQueue=E,r.lastRenderedState=p}return h===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function cc(t){var i=Kt(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var r=s.dispatch,h=s.pending,p=i.memoizedState;if(h!==null){s.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);Le(p,i.memoizedState)||(te=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),s.lastRenderedState=p}return[p,r]}function ap(t,i,s){var r=st,h=Kt(),p=dt;if(p){if(s===void 0)throw Error(a(407));s=s()}else s=i();var v=!Le((Ot||h).memoizedState,s);if(v&&(h.memoizedState=s,te=!0),h=h.queue,dc(rp.bind(null,r,h,t),[t]),h.getSnapshot!==i||v||$t!==null&&$t.memoizedState.tag&1){if(r.flags|=2048,ss(9,{destroy:void 0},lp.bind(null,r,h,s,i),null),Dt===null)throw Error(a(349));p||(Xi&127)!==0||sp(r,i,s)}return s}function sp(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=st.updateQueue,i===null?(i=Nr(),st.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function lp(t,i,s,r){i.value=s,i.getSnapshot=r,op(i)&&up(t)}function rp(t,i,s){return s(function(){op(i)&&up(t)})}function op(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!Le(t,s)}catch{return!0}}function up(t){var i=ia(t,2);i!==null&&Ce(i,t,2)}function hc(t){var i=Se();if(typeof t=="function"){var s=t;if(t=s(),ha){hn(!0);try{s()}finally{hn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:t},i}function cp(t,i,s,r){return t.baseState=s,uc(t,Ot,typeof r=="function"?r:ji)}function A1(t,i,s,r,h){if(Gr(t))throw Error(a(485));if(t=i.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};R.T!==null?s(!0):p.isTransition=!1,r(p),s=i.pending,s===null?(p.next=i.pending=p,hp(i,p)):(p.next=s.next,i.pending=s.next=p)}}function hp(t,i){var s=i.action,r=i.payload,h=t.state;if(i.isTransition){var p=R.T,v={};R.T=v;try{var b=s(h,r),E=R.S;E!==null&&E(v,b),fp(t,i,b)}catch(D){fc(t,i,D)}finally{p!==null&&v.types!==null&&(p.types=v.types),R.T=p}}else try{p=s(h,r),fp(t,i,p)}catch(D){fc(t,i,D)}}function fp(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(r){dp(t,i,r)},function(r){return fc(t,i,r)}):dp(t,i,s)}function dp(t,i,s){i.status="fulfilled",i.value=s,pp(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,hp(t,s)))}function fc(t,i,s){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do i.status="rejected",i.reason=s,pp(i),i=i.next;while(i!==r)}t.action=null}function pp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function gp(t,i){return i}function mp(t,i){if(dt){var s=Dt.formState;if(s!==null){t:{var r=st;if(dt){if(Bt){e:{for(var h=Bt,p=li;h.nodeType!==8;){if(!p){h=null;break e}if(h=oi(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Bt=oi(h.nextSibling),r=h.data==="F!";break t}}mn(r)}r=!1}r&&(i=s[0])}}return s=Se(),s.memoizedState=s.baseState=i,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gp,lastRenderedState:i},s.queue=r,s=Np.bind(null,st,r),r.dispatch=s,r=hc(!1),p=vc.bind(null,st,!1,r.queue),r=Se(),h={state:i,dispatch:null,action:t,pending:null},r.queue=h,s=A1.bind(null,st,h,p,s),h.dispatch=s,r.memoizedState=t,[i,s,!1]}function yp(t){var i=Kt();return vp(i,Ot,t)}function vp(t,i,s){if(i=uc(t,i,gp)[0],t=kr(ji)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var r=sl(i)}catch(v){throw v===ts?Ar:v}else r=i;i=Kt();var h=i.queue,p=h.dispatch;return s!==i.memoizedState&&(st.flags|=2048,ss(9,{destroy:void 0},C1.bind(null,h,s),null)),[r,p,t]}function C1(t,i){t.action=i}function _p(t){var i=Kt(),s=Ot;if(s!==null)return vp(i,s,t);Kt(),i=i.memoizedState,s=Kt();var r=s.queue.dispatch;return s.memoizedState=t,[i,r,!1]}function ss(t,i,s,r){return t={tag:t,create:s,deps:r,inst:i,next:null},i=st.updateQueue,i===null&&(i=Nr(),st.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,i.lastEffect=t),t}function Sp(){return Kt().memoizedState}function Lr(t,i,s,r){var h=Se();st.flags|=t,h.memoizedState=ss(1|i,{destroy:void 0},s,r===void 0?null:r)}function Ir(t,i,s,r){var h=Kt();r=r===void 0?null:r;var p=h.memoizedState.inst;Ot!==null&&r!==null&&nc(r,Ot.memoizedState.deps)?h.memoizedState=ss(i,p,s,r):(st.flags|=t,h.memoizedState=ss(1|i,p,s,r))}function xp(t,i){Lr(8390656,8,t,i)}function dc(t,i){Ir(2048,8,t,i)}function O1(t){st.flags|=4;var i=st.updateQueue;if(i===null)i=Nr(),st.updateQueue=i,i.events=[t];else{var s=i.events;s===null?i.events=[t]:s.push(t)}}function bp(t){var i=Kt().memoizedState;return O1({ref:i,nextImpl:t}),function(){if((Tt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Tp(t,i){return Ir(4,2,t,i)}function Mp(t,i){return Ir(4,4,t,i)}function wp(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ep(t,i,s){s=s!=null?s.concat([t]):null,Ir(4,4,wp.bind(null,i,t),s)}function pc(){}function Ap(t,i){var s=Kt();i=i===void 0?null:i;var r=s.memoizedState;return i!==null&&nc(i,r[1])?r[0]:(s.memoizedState=[t,i],t)}function Cp(t,i){var s=Kt();i=i===void 0?null:i;var r=s.memoizedState;if(i!==null&&nc(i,r[1]))return r[0];if(r=t(),ha){hn(!0);try{t()}finally{hn(!1)}}return s.memoizedState=[r,i],r}function gc(t,i,s){return s===void 0||(Xi&1073741824)!==0&&(ht&261930)===0?t.memoizedState=i:(t.memoizedState=s,t=Og(),st.lanes|=t,wn|=t,s)}function Op(t,i,s,r){return Le(s,i)?s:is.current!==null?(t=gc(t,s,r),Le(t,i)||(te=!0),t):(Xi&42)===0||(Xi&1073741824)!==0&&(ht&261930)===0?(te=!0,t.memoizedState=s):(t=Og(),st.lanes|=t,wn|=t,i)}function zp(t,i,s,r,h){var p=P.p;P.p=p!==0&&8>p?p:8;var v=R.T,b={};R.T=b,vc(t,!1,i,s);try{var E=h(),D=R.S;if(D!==null&&D(b,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var L=M1(E,r);ll(t,i,L,je(t))}else ll(t,i,r,je(t))}catch(X){ll(t,i,{then:function(){},status:"rejected",reason:X},je())}finally{P.p=p,v!==null&&b.types!==null&&(v.types=b.types),R.T=v}}function z1(){}function mc(t,i,s,r){if(t.tag!==5)throw Error(a(476));var h=Hp(t).queue;zp(t,h,i,K,s===null?z1:function(){return Dp(t),s(r)})}function Hp(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:K},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Dp(t){var i=Hp(t);i.next===null&&(i=t.alternate.memoizedState),ll(t,i.next.queue,{},je())}function yc(){return de(Tl)}function Up(){return Kt().memoizedState}function Rp(){return Kt().memoizedState}function H1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=je();t=_n(s);var r=Sn(i,t,s);r!==null&&(Ce(r,i,s),el(r,i,s)),i={cache:Pu()},t.payload=i;return}i=i.return}}function D1(t,i,s){var r=je();s={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Gr(t)?Bp(i,s):(s=Nu(t,i,s,r),s!==null&&(Ce(s,t,r),kp(s,i,r)))}function Np(t,i,s){var r=je();ll(t,i,s,r)}function ll(t,i,s,r){var h={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Gr(t))Bp(i,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,b=p(v,s);if(h.hasEagerState=!0,h.eagerState=b,Le(b,v))return Sr(t,i,h,0),Dt===null&&_r(),!1}catch{}if(s=Nu(t,i,h,r),s!==null)return Ce(s,t,r),kp(s,i,r),!0}return!1}function vc(t,i,s,r){if(r={lane:2,revertLane:Kc(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Gr(t)){if(i)throw Error(a(479))}else i=Nu(t,s,r,2),i!==null&&Ce(i,t,2)}function Gr(t){var i=t.alternate;return t===st||i!==null&&i===st}function Bp(t,i){ns=Ur=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function kp(t,i,s){if((s&4194048)!==0){var r=i.lanes;r&=t.pendingLanes,s|=r,i.lanes=s,Yf(t,s)}}var rl={readContext:de,use:Br,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};rl.useEffectEvent=Pt;var Lp={readContext:de,use:Br,useCallback:function(t,i){return Se().memoizedState=[t,i===void 0?null:i],t},useContext:de,useEffect:xp,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,Lr(4194308,4,wp.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Lr(4194308,4,t,i)},useInsertionEffect:function(t,i){Lr(4,2,t,i)},useMemo:function(t,i){var s=Se();i=i===void 0?null:i;var r=t();if(ha){hn(!0);try{t()}finally{hn(!1)}}return s.memoizedState=[r,i],r},useReducer:function(t,i,s){var r=Se();if(s!==void 0){var h=s(i);if(ha){hn(!0);try{s(i)}finally{hn(!1)}}}else h=i;return r.memoizedState=r.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},r.queue=t,t=t.dispatch=D1.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var i=Se();return t={current:t},i.memoizedState=t},useState:function(t){t=hc(t);var i=t.queue,s=Np.bind(null,st,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:pc,useDeferredValue:function(t,i){var s=Se();return gc(s,t,i)},useTransition:function(){var t=hc(!1);return t=zp.bind(null,st,t.queue,!0,!1),Se().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var r=st,h=Se();if(dt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),Dt===null)throw Error(a(349));(ht&127)!==0||sp(r,i,s)}h.memoizedState=s;var p={value:s,getSnapshot:i};return h.queue=p,xp(rp.bind(null,r,p,t),[t]),r.flags|=2048,ss(9,{destroy:void 0},lp.bind(null,r,p,s,i),null),s},useId:function(){var t=Se(),i=Dt.identifierPrefix;if(dt){var s=Ci,r=Ai;s=(r&~(1<<32-ke(r)-1)).toString(32)+s,i="_"+i+"R_"+s,s=Rr++,0<s&&(i+="H"+s.toString(32)),i+="_"}else s=w1++,i="_"+i+"r_"+s.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:yc,useFormState:mp,useActionState:mp,useOptimistic:function(t){var i=Se();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=vc.bind(null,st,!0,s),s.dispatch=i,[t,i]},useMemoCache:oc,useCacheRefresh:function(){return Se().memoizedState=H1.bind(null,st)},useEffectEvent:function(t){var i=Se(),s={impl:t};return i.memoizedState=s,function(){if((Tt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},_c={readContext:de,use:Br,useCallback:Ap,useContext:de,useEffect:dc,useImperativeHandle:Ep,useInsertionEffect:Tp,useLayoutEffect:Mp,useMemo:Cp,useReducer:kr,useRef:Sp,useState:function(){return kr(ji)},useDebugValue:pc,useDeferredValue:function(t,i){var s=Kt();return Op(s,Ot.memoizedState,t,i)},useTransition:function(){var t=kr(ji)[0],i=Kt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:ap,useId:Up,useHostTransitionStatus:yc,useFormState:yp,useActionState:yp,useOptimistic:function(t,i){var s=Kt();return cp(s,Ot,t,i)},useMemoCache:oc,useCacheRefresh:Rp};_c.useEffectEvent=bp;var Ip={readContext:de,use:Br,useCallback:Ap,useContext:de,useEffect:dc,useImperativeHandle:Ep,useInsertionEffect:Tp,useLayoutEffect:Mp,useMemo:Cp,useReducer:cc,useRef:Sp,useState:function(){return cc(ji)},useDebugValue:pc,useDeferredValue:function(t,i){var s=Kt();return Ot===null?gc(s,t,i):Op(s,Ot.memoizedState,t,i)},useTransition:function(){var t=cc(ji)[0],i=Kt().memoizedState;return[typeof t=="boolean"?t:sl(t),i]},useSyncExternalStore:ap,useId:Up,useHostTransitionStatus:yc,useFormState:_p,useActionState:_p,useOptimistic:function(t,i){var s=Kt();return Ot!==null?cp(s,Ot,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:oc,useCacheRefresh:Rp};Ip.useEffectEvent=bp;function Sc(t,i,s,r){i=t.memoizedState,s=s(r,i),s=s==null?i:y({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var xc={enqueueSetState:function(t,i,s){t=t._reactInternals;var r=je(),h=_n(r);h.payload=i,s!=null&&(h.callback=s),i=Sn(t,h,r),i!==null&&(Ce(i,t,r),el(i,t,r))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var r=je(),h=_n(r);h.tag=1,h.payload=i,s!=null&&(h.callback=s),i=Sn(t,h,r),i!==null&&(Ce(i,t,r),el(i,t,r))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=je(),r=_n(s);r.tag=2,i!=null&&(r.callback=i),i=Sn(t,r,s),i!==null&&(Ce(i,t,s),el(i,t,s))}};function Gp(t,i,s,r,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,p,v):i.prototype&&i.prototype.isPureReactComponent?!Qs(s,r)||!Qs(h,p):!0}function qp(t,i,s,r){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,r),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,r),i.state!==t&&xc.enqueueReplaceState(i,i.state,null)}function fa(t,i){var s=i;if("ref"in i){s={};for(var r in i)r!=="ref"&&(s[r]=i[r])}if(t=t.defaultProps){s===i&&(s=y({},s));for(var h in t)s[h]===void 0&&(s[h]=t[h])}return s}function Yp(t){vr(t)}function Xp(t){console.error(t)}function jp(t){vr(t)}function qr(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(r){setTimeout(function(){throw r})}}function Vp(t,i,s){try{var r=t.onCaughtError;r(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bc(t,i,s){return s=_n(s),s.tag=3,s.payload={element:null},s.callback=function(){qr(t,i)},s}function Pp(t){return t=_n(t),t.tag=3,t}function Qp(t,i,s,r){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var p=r.value;t.payload=function(){return h(p)},t.callback=function(){Vp(i,s,r)}}var v=s.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Vp(i,s,r),typeof h!="function"&&(En===null?En=new Set([this]):En.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})})}function U1(t,i,s,r,h){if(s.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(i=s.alternate,i!==null&&Fa(i,s,h,!0),s=Ge.current,s!==null){switch(s.tag){case 31:case 13:return ri===null?$r():s.alternate===null&&Qt===0&&(Qt=3),s.flags&=-257,s.flags|=65536,s.lanes=h,r===Cr?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([r]):i.add(r),Qc(t,r,h)),!1;case 22:return s.flags|=65536,r===Cr?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([r]):s.add(r)),Qc(t,r,h)),!1}throw Error(a(435,s.tag))}return Qc(t,r,h),$r(),!1}if(dt)return i=Ge.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,r!==qu&&(t=Error(a(422),{cause:r}),Ks(ni(t,s)))):(r!==qu&&(i=Error(a(423),{cause:r}),Ks(ni(i,s))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,r=ni(r,s),h=bc(t.stateNode,r,h),Ju(t,h),Qt!==4&&(Qt=2)),!1;var p=Error(a(520),{cause:r});if(p=ni(p,s),gl===null?gl=[p]:gl.push(p),Qt!==4&&(Qt=2),i===null)return!0;r=ni(r,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=h&-h,s.lanes|=t,t=bc(s.stateNode,r,t),Ju(s,t),!1;case 1:if(i=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(En===null||!En.has(p))))return s.flags|=65536,h&=-h,s.lanes|=h,h=Pp(h),Qp(h,t,s,r),Ju(s,h),!1}s=s.return}while(s!==null);return!1}var Tc=Error(a(461)),te=!1;function pe(t,i,s,r){i.child=t===null?Fd(i,null,s,r):ca(i,t.child,s,r)}function Zp(t,i,s,r,h){s=s.render;var p=i.ref;if("ref"in r){var v={};for(var b in r)b!=="ref"&&(v[b]=r[b])}else v=r;return la(i),r=ac(t,i,s,v,p,h),b=sc(),t!==null&&!te?(lc(t,i,h),Vi(t,i,h)):(dt&&b&&Iu(i),i.flags|=1,pe(t,i,r,h),i.child)}function Wp(t,i,s,r,h){if(t===null){var p=s.type;return typeof p=="function"&&!Bu(p)&&p.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=p,Kp(t,i,p,r,h)):(t=br(s.type,null,r,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(p=t.child,!Hc(t,h)){var v=p.memoizedProps;if(s=s.compare,s=s!==null?s:Qs,s(v,r)&&t.ref===i.ref)return Vi(t,i,h)}return i.flags|=1,t=Ii(p,r),t.ref=i.ref,t.return=i,i.child=t}function Kp(t,i,s,r,h){if(t!==null){var p=t.memoizedProps;if(Qs(p,r)&&t.ref===i.ref)if(te=!1,i.pendingProps=r=p,Hc(t,h))(t.flags&131072)!==0&&(te=!0);else return i.lanes=t.lanes,Vi(t,i,h)}return Mc(t,i,s,r,h)}function Fp(t,i,s,r){var h=r.children,p=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|s:s,t!==null){for(r=i.child=t.child,h=0;r!==null;)h=h|r.lanes|r.childLanes,r=r.sibling;r=h&~p}else r=0,i.child=null;return Jp(t,i,p,s,r)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Er(i,p!==null?p.cachePool:null),p!==null?tp(i,p):tc(),ep(i);else return r=i.lanes=536870912,Jp(t,i,p!==null?p.baseLanes|s:s,s,r)}else p!==null?(Er(i,p.cachePool),tp(i,p),bn(),i.memoizedState=null):(t!==null&&Er(i,null),tc(),bn());return pe(t,i,h,s),i.child}function ol(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Jp(t,i,s,r,h){var p=Zu();return p=p===null?null:{parent:Jt._currentValue,pool:p},i.memoizedState={baseLanes:s,cachePool:p},t!==null&&Er(i,null),tc(),ep(i),t!==null&&Fa(t,i,r,!0),i.childLanes=h,null}function Yr(t,i){return i=jr({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function $p(t,i,s){return ca(i,t.child,null,s),t=Yr(i,i.pendingProps),t.flags|=2,qe(i),i.memoizedState=null,t}function R1(t,i,s){var r=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(dt){if(r.mode==="hidden")return t=Yr(i,r),i.lanes=536870912,ol(null,t);if(ic(i),(t=Bt)?(t=h0(t,li),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:pn!==null?{id:Ai,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},s=Bd(t),s.return=i,i.child=s,fe=i,Bt=null)):t=null,t===null)throw mn(i);return i.lanes=536870912,null}return Yr(i,r)}var p=t.memoizedState;if(p!==null){var v=p.dehydrated;if(ic(i),h)if(i.flags&256)i.flags&=-257,i=$p(t,i,s);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(te||Fa(t,i,s,!1),h=(s&t.childLanes)!==0,te||h){if(r=Dt,r!==null&&(v=Xf(r,s),v!==0&&v!==p.retryLane))throw p.retryLane=v,ia(t,v),Ce(r,t,v),Tc;$r(),i=$p(t,i,s)}else t=p.treeContext,Bt=oi(v.nextSibling),fe=i,dt=!0,gn=null,li=!1,t!==null&&Id(i,t),i=Yr(i,r),i.flags|=4096;return i}return t=Ii(t.child,{mode:r.mode,children:r.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Xr(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function Mc(t,i,s,r,h){return la(i),s=ac(t,i,s,r,void 0,h),r=sc(),t!==null&&!te?(lc(t,i,h),Vi(t,i,h)):(dt&&r&&Iu(i),i.flags|=1,pe(t,i,s,h),i.child)}function tg(t,i,s,r,h,p){return la(i),i.updateQueue=null,s=np(i,r,s,h),ip(t),r=sc(),t!==null&&!te?(lc(t,i,p),Vi(t,i,p)):(dt&&r&&Iu(i),i.flags|=1,pe(t,i,s,p),i.child)}function eg(t,i,s,r,h){if(la(i),i.stateNode===null){var p=Qa,v=s.contextType;typeof v=="object"&&v!==null&&(p=de(v)),p=new s(r,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=xc,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=r,p.state=i.memoizedState,p.refs={},Ku(i),v=s.contextType,p.context=typeof v=="object"&&v!==null?de(v):Qa,p.state=i.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Sc(i,s,v,r),p.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&xc.enqueueReplaceState(p,p.state,null),nl(i,r,p,h),il(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),r=!0}else if(t===null){p=i.stateNode;var b=i.memoizedProps,E=fa(s,b);p.props=E;var D=p.context,L=s.contextType;v=Qa,typeof L=="object"&&L!==null&&(v=de(L));var X=s.getDerivedStateFromProps;L=typeof X=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,L||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||D!==v)&&qp(i,p,r,v),vn=!1;var U=i.memoizedState;p.state=U,nl(i,r,p,h),il(),D=i.memoizedState,b||U!==D||vn?(typeof X=="function"&&(Sc(i,s,X,r),D=i.memoizedState),(E=vn||Gp(i,s,E,r,U,D,v))?(L||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=r,i.memoizedState=D),p.props=r,p.state=D,p.context=v,r=E):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),r=!1)}else{p=i.stateNode,Fu(t,i),v=i.memoizedProps,L=fa(s,v),p.props=L,X=i.pendingProps,U=p.context,D=s.contextType,E=Qa,typeof D=="object"&&D!==null&&(E=de(D)),b=s.getDerivedStateFromProps,(D=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==X||U!==E)&&qp(i,p,r,E),vn=!1,U=i.memoizedState,p.state=U,nl(i,r,p,h),il();var k=i.memoizedState;v!==X||U!==k||vn||t!==null&&t.dependencies!==null&&Mr(t.dependencies)?(typeof b=="function"&&(Sc(i,s,b,r),k=i.memoizedState),(L=vn||Gp(i,s,L,r,U,k,E)||t!==null&&t.dependencies!==null&&Mr(t.dependencies))?(D||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,k,E),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,k,E)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&U===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&U===t.memoizedState||(i.flags|=1024),i.memoizedProps=r,i.memoizedState=k),p.props=r,p.state=k,p.context=E,r=L):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&U===t.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&U===t.memoizedState||(i.flags|=1024),r=!1)}return p=r,Xr(t,i),r=(i.flags&128)!==0,p||r?(p=i.stateNode,s=r&&typeof s.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,t!==null&&r?(i.child=ca(i,t.child,null,h),i.child=ca(i,null,s,h)):pe(t,i,s,h),i.memoizedState=p.state,t=i.child):t=Vi(t,i,h),t}function ig(t,i,s,r){return aa(),i.flags|=256,pe(t,i,s,r),i.child}var wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ec(t){return{baseLanes:t,cachePool:Vd()}}function Ac(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=Xe),t}function ng(t,i,s){var r=i.pendingProps,h=!1,p=(i.flags&128)!==0,v;if((v=p)||(v=t!==null&&t.memoizedState===null?!1:(Wt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(dt){if(h?xn(i):bn(),(t=Bt)?(t=h0(t,li),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:pn!==null?{id:Ai,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},s=Bd(t),s.return=i,i.child=s,fe=i,Bt=null)):t=null,t===null)throw mn(i);return uh(t)?i.lanes=32:i.lanes=536870912,null}var b=r.children;return r=r.fallback,h?(bn(),h=i.mode,b=jr({mode:"hidden",children:b},h),r=na(r,h,s,null),b.return=i,r.return=i,b.sibling=r,i.child=b,r=i.child,r.memoizedState=Ec(s),r.childLanes=Ac(t,v,s),i.memoizedState=wc,ol(null,r)):(xn(i),Cc(i,b))}var E=t.memoizedState;if(E!==null&&(b=E.dehydrated,b!==null)){if(p)i.flags&256?(xn(i),i.flags&=-257,i=Oc(t,i,s)):i.memoizedState!==null?(bn(),i.child=t.child,i.flags|=128,i=null):(bn(),b=r.fallback,h=i.mode,r=jr({mode:"visible",children:r.children},h),b=na(b,h,s,null),b.flags|=2,r.return=i,b.return=i,r.sibling=b,i.child=r,ca(i,t.child,null,s),r=i.child,r.memoizedState=Ec(s),r.childLanes=Ac(t,v,s),i.memoizedState=wc,i=ol(null,r));else if(xn(i),uh(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var D=v.dgst;v=D,r=Error(a(419)),r.stack="",r.digest=v,Ks({value:r,source:null,stack:null}),i=Oc(t,i,s)}else if(te||Fa(t,i,s,!1),v=(s&t.childLanes)!==0,te||v){if(v=Dt,v!==null&&(r=Xf(v,s),r!==0&&r!==E.retryLane))throw E.retryLane=r,ia(t,r),Ce(v,t,r),Tc;oh(b)||$r(),i=Oc(t,i,s)}else oh(b)?(i.flags|=192,i.child=t.child,i=null):(t=E.treeContext,Bt=oi(b.nextSibling),fe=i,dt=!0,gn=null,li=!1,t!==null&&Id(i,t),i=Cc(i,r.children),i.flags|=4096);return i}return h?(bn(),b=r.fallback,h=i.mode,E=t.child,D=E.sibling,r=Ii(E,{mode:"hidden",children:r.children}),r.subtreeFlags=E.subtreeFlags&65011712,D!==null?b=Ii(D,b):(b=na(b,h,s,null),b.flags|=2),b.return=i,r.return=i,r.sibling=b,i.child=r,ol(null,r),r=i.child,b=t.child.memoizedState,b===null?b=Ec(s):(h=b.cachePool,h!==null?(E=Jt._currentValue,h=h.parent!==E?{parent:E,pool:E}:h):h=Vd(),b={baseLanes:b.baseLanes|s,cachePool:h}),r.memoizedState=b,r.childLanes=Ac(t,v,s),i.memoizedState=wc,ol(t.child,r)):(xn(i),s=t.child,t=s.sibling,s=Ii(s,{mode:"visible",children:r.children}),s.return=i,s.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=s,i.memoizedState=null,s)}function Cc(t,i){return i=jr({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function jr(t,i){return t=Ie(22,t,null,i),t.lanes=0,t}function Oc(t,i,s){return ca(i,t.child,null,s),t=Cc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ag(t,i,s){t.lanes|=i;var r=t.alternate;r!==null&&(r.lanes|=i),ju(t.return,i,s)}function zc(t,i,s,r,h,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:h,treeForkCount:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=r,v.tail=s,v.tailMode=h,v.treeForkCount=p)}function sg(t,i,s){var r=i.pendingProps,h=r.revealOrder,p=r.tail;r=r.children;var v=Wt.current,b=(v&2)!==0;if(b?(v=v&1|2,i.flags|=128):v&=1,at(Wt,v),pe(t,i,r,s),r=dt?Ws:0,!b&&t!==null&&(t.flags&128)!==0)t:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ag(t,s,i);else if(t.tag===19)ag(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break t;for(;t.sibling===null;){if(t.return===null||t.return===i)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(s=i.child,h=null;s!==null;)t=s.alternate,t!==null&&Dr(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=i.child,i.child=null):(h=s.sibling,s.sibling=null),zc(i,!1,h,s,p,r);break;case"backwards":case"unstable_legacy-backwards":for(s=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Dr(t)===null){i.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}zc(i,!0,s,null,p,r);break;case"together":zc(i,!1,null,null,void 0,r);break;default:i.memoizedState=null}return i.child}function Vi(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),wn|=i.lanes,(s&i.childLanes)===0)if(t!==null){if(Fa(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,s=Ii(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Ii(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Hc(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Mr(t)))}function N1(t,i,s){switch(i.tag){case 3:Ua(i,i.stateNode.containerInfo),yn(i,Jt,t.memoizedState.cache),aa();break;case 27:case 5:ce(i);break;case 4:Ua(i,i.stateNode.containerInfo);break;case 10:yn(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ic(i),null;break;case 13:var r=i.memoizedState;if(r!==null)return r.dehydrated!==null?(xn(i),i.flags|=128,null):(s&i.child.childLanes)!==0?ng(t,i,s):(xn(i),t=Vi(t,i,s),t!==null?t.sibling:null);xn(i);break;case 19:var h=(t.flags&128)!==0;if(r=(s&i.childLanes)!==0,r||(Fa(t,i,s,!1),r=(s&i.childLanes)!==0),h){if(r)return sg(t,i,s);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),at(Wt,Wt.current),r)break;return null;case 22:return i.lanes=0,Fp(t,i,s,i.pendingProps);case 24:yn(i,Jt,t.memoizedState.cache)}return Vi(t,i,s)}function lg(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)te=!0;else{if(!Hc(t,s)&&(i.flags&128)===0)return te=!1,N1(t,i,s);te=(t.flags&131072)!==0}else te=!1,dt&&(i.flags&1048576)!==0&&Ld(i,Ws,i.index);switch(i.lanes=0,i.tag){case 16:t:{var r=i.pendingProps;if(t=oa(i.elementType),i.type=t,typeof t=="function")Bu(t)?(r=fa(t,r),i.tag=1,i=eg(null,i,t,r,s)):(i.tag=0,i=Mc(null,i,t,r,s));else{if(t!=null){var h=t.$$typeof;if(h===B){i.tag=11,i=Zp(null,i,t,r,s);break t}else if(h===Y){i.tag=14,i=Wp(null,i,t,r,s);break t}}throw i=Et(t)||t,Error(a(306,i,""))}}return i;case 0:return Mc(t,i,i.type,i.pendingProps,s);case 1:return r=i.type,h=fa(r,i.pendingProps),eg(t,i,r,h,s);case 3:t:{if(Ua(i,i.stateNode.containerInfo),t===null)throw Error(a(387));r=i.pendingProps;var p=i.memoizedState;h=p.element,Fu(t,i),nl(i,r,null,s);var v=i.memoizedState;if(r=v.cache,yn(i,Jt,r),r!==p.cache&&Vu(i,[Jt],s,!0),il(),r=v.element,p.isDehydrated)if(p={element:r,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=ig(t,i,r,s);break t}else if(r!==h){h=ni(Error(a(424)),i),Ks(h),i=ig(t,i,r,s);break t}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Bt=oi(t.firstChild),fe=i,dt=!0,gn=null,li=!0,s=Fd(i,null,r,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(aa(),r===h){i=Vi(t,i,s);break t}pe(t,i,r,s)}i=i.child}return i;case 26:return Xr(t,i),t===null?(s=y0(i.type,null,i.pendingProps,null))?i.memoizedState=s:dt||(s=i.type,t=i.pendingProps,r=lo(Ei.current).createElement(s),r[he]=i,r[be]=t,ge(r,s,t),le(r),i.stateNode=r):i.memoizedState=y0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ce(i),t===null&&dt&&(r=i.stateNode=p0(i.type,i.pendingProps,Ei.current),fe=i,li=!0,h=Bt,zn(i.type)?(ch=h,Bt=oi(r.firstChild)):Bt=h),pe(t,i,i.pendingProps.children,s),Xr(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&dt&&((h=r=Bt)&&(r=h_(r,i.type,i.pendingProps,li),r!==null?(i.stateNode=r,fe=i,Bt=oi(r.firstChild),li=!1,h=!0):h=!1),h||mn(i)),ce(i),h=i.type,p=i.pendingProps,v=t!==null?t.memoizedProps:null,r=p.children,sh(h,p)?r=null:v!==null&&sh(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=ac(t,i,E1,null,null,s),Tl._currentValue=h),Xr(t,i),pe(t,i,r,s),i.child;case 6:return t===null&&dt&&((t=s=Bt)&&(s=f_(s,i.pendingProps,li),s!==null?(i.stateNode=s,fe=i,Bt=null,t=!0):t=!1),t||mn(i)),null;case 13:return ng(t,i,s);case 4:return Ua(i,i.stateNode.containerInfo),r=i.pendingProps,t===null?i.child=ca(i,null,r,s):pe(t,i,r,s),i.child;case 11:return Zp(t,i,i.type,i.pendingProps,s);case 7:return pe(t,i,i.pendingProps,s),i.child;case 8:return pe(t,i,i.pendingProps.children,s),i.child;case 12:return pe(t,i,i.pendingProps.children,s),i.child;case 10:return r=i.pendingProps,yn(i,i.type,r.value),pe(t,i,r.children,s),i.child;case 9:return h=i.type._context,r=i.pendingProps.children,la(i),h=de(h),r=r(h),i.flags|=1,pe(t,i,r,s),i.child;case 14:return Wp(t,i,i.type,i.pendingProps,s);case 15:return Kp(t,i,i.type,i.pendingProps,s);case 19:return sg(t,i,s);case 31:return R1(t,i,s);case 22:return Fp(t,i,s,i.pendingProps);case 24:return la(i),r=de(Jt),t===null?(h=Zu(),h===null&&(h=Dt,p=Pu(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=s),h=p),i.memoizedState={parent:r,cache:h},Ku(i),yn(i,Jt,h)):((t.lanes&s)!==0&&(Fu(t,i),nl(i,null,null,s),il()),h=t.memoizedState,p=i.memoizedState,h.parent!==r?(h={parent:r,cache:r},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),yn(i,Jt,r)):(r=p.cache,yn(i,Jt,r),r!==h.cache&&Vu(i,[Jt],s,!0))),pe(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Pi(t){t.flags|=4}function Dc(t,i,s,r,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Ug())t.flags|=8192;else throw ua=Cr,Wu}else t.flags&=-16777217}function rg(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!b0(i))if(Ug())t.flags|=8192;else throw ua=Cr,Wu}function Vr(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Gf():536870912,t.lanes|=i,us|=i)}function ul(t,i){if(!dt)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(i)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,r|=h.subtreeFlags&65011712,r|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,r|=h.subtreeFlags,r|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=r,t.childLanes=s,i}function B1(t,i,s){var r=i.pendingProps;switch(Gu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(i),null;case 1:return kt(i),null;case 3:return s=i.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Yi(Jt),cn(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ka(i)?Pi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yu())),kt(i),null;case 26:var h=i.type,p=i.memoizedState;return t===null?(Pi(i),p!==null?(kt(i),rg(i,p)):(kt(i),Dc(i,h,null,r,s))):p?p!==t.memoizedState?(Pi(i),kt(i),rg(i,p)):(kt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==r&&Pi(i),kt(i),Dc(i,h,t,r,s)),null;case 27:if(ir(i),s=Ei.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==r&&Pi(i);else{if(!r){if(i.stateNode===null)throw Error(a(166));return kt(i),null}t=_t.current,Ka(i)?Gd(i):(t=p0(h,r,s),i.stateNode=t,Pi(i))}return kt(i),null;case 5:if(ir(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==r&&Pi(i);else{if(!r){if(i.stateNode===null)throw Error(a(166));return kt(i),null}if(p=_t.current,Ka(i))Gd(i);else{var v=lo(Ei.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof r.is=="string"?v.createElement("select",{is:r.is}):v.createElement("select"),r.multiple?p.multiple=!0:r.size&&(p.size=r.size);break;default:p=typeof r.is=="string"?v.createElement(h,{is:r.is}):v.createElement(h)}}p[he]=i,p[be]=r;t:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break t;for(;v.sibling===null;){if(v.return===null||v.return===i)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=p;t:switch(ge(p,h,r),h){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Pi(i)}}return kt(i),Dc(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,s),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==r&&Pi(i);else{if(typeof r!="string"&&i.stateNode===null)throw Error(a(166));if(t=Ei.current,Ka(i)){if(t=i.stateNode,s=i.memoizedProps,r=null,h=fe,h!==null)switch(h.tag){case 27:case 5:r=h.memoizedProps}t[he]=i,t=!!(t.nodeValue===s||r!==null&&r.suppressHydrationWarning===!0||n0(t.nodeValue,s)),t||mn(i,!0)}else t=lo(t).createTextNode(r),t[he]=i,i.stateNode=t}return kt(i),null;case 31:if(s=i.memoizedState,t===null||t.memoizedState!==null){if(r=Ka(i),s!==null){if(t===null){if(!r)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[he]=i}else aa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),t=!1}else s=Yu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return i.flags&256?(qe(i),i):(qe(i),null);if((i.flags&128)!==0)throw Error(a(558))}return kt(i),null;case 13:if(r=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ka(i),r!==null&&r.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[he]=i}else aa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),h=!1}else h=Yu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(qe(i),i):(qe(i),null)}return qe(i),(i.flags&128)!==0?(i.lanes=s,i):(s=r!==null,t=t!==null&&t.memoizedState!==null,s&&(r=i.child,h=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(h=r.alternate.memoizedState.cachePool.pool),p=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),p!==h&&(r.flags|=2048)),s!==t&&s&&(i.child.flags|=8192),Vr(i,i.updateQueue),kt(i),null);case 4:return cn(),t===null&&th(i.stateNode.containerInfo),kt(i),null;case 10:return Yi(i.type),kt(i),null;case 19:if(yt(Wt),r=i.memoizedState,r===null)return kt(i),null;if(h=(i.flags&128)!==0,p=r.rendering,p===null)if(h)ul(r,!1);else{if(Qt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(p=Dr(t),p!==null){for(i.flags|=128,ul(r,!1),t=p.updateQueue,i.updateQueue=t,Vr(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)Nd(s,t),s=s.sibling;return at(Wt,Wt.current&1|2),dt&&Gi(i,r.treeForkCount),i.child}t=t.sibling}r.tail!==null&&Ne()>Kr&&(i.flags|=128,h=!0,ul(r,!1),i.lanes=4194304)}else{if(!h)if(t=Dr(p),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Vr(i,t),ul(r,!0),r.tail===null&&r.tailMode==="hidden"&&!p.alternate&&!dt)return kt(i),null}else 2*Ne()-r.renderingStartTime>Kr&&s!==536870912&&(i.flags|=128,h=!0,ul(r,!1),i.lanes=4194304);r.isBackwards?(p.sibling=i.child,i.child=p):(t=r.last,t!==null?t.sibling=p:i.child=p,r.last=p)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ne(),t.sibling=null,s=Wt.current,at(Wt,h?s&1|2:s&1),dt&&Gi(i,r.treeForkCount),t):(kt(i),null);case 22:case 23:return qe(i),ec(),r=i.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(i.flags|=8192):r&&(i.flags|=8192),r?(s&536870912)!==0&&(i.flags&128)===0&&(kt(i),i.subtreeFlags&6&&(i.flags|=8192)):kt(i),s=i.updateQueue,s!==null&&Vr(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048),t!==null&&yt(ra),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Yi(Jt),kt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function k1(t,i){switch(Gu(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Yi(Jt),cn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ir(i),null;case 31:if(i.memoizedState!==null){if(qe(i),i.alternate===null)throw Error(a(340));aa()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(qe(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));aa()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return yt(Wt),null;case 4:return cn(),null;case 10:return Yi(i.type),null;case 22:case 23:return qe(i),ec(),t!==null&&yt(ra),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Yi(Jt),null;case 25:return null;default:return null}}function og(t,i){switch(Gu(i),i.tag){case 3:Yi(Jt),cn();break;case 26:case 27:case 5:ir(i);break;case 4:cn();break;case 31:i.memoizedState!==null&&qe(i);break;case 13:qe(i);break;case 19:yt(Wt);break;case 10:Yi(i.type);break;case 22:case 23:qe(i),ec(),t!==null&&yt(ra);break;case 24:Yi(Jt)}}function cl(t,i){try{var s=i.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var h=r.next;s=h;do{if((s.tag&t)===t){r=void 0;var p=s.create,v=s.inst;r=p(),v.destroy=r}s=s.next}while(s!==h)}}catch(b){Ct(i,i.return,b)}}function Tn(t,i,s){try{var r=i.updateQueue,h=r!==null?r.lastEffect:null;if(h!==null){var p=h.next;r=p;do{if((r.tag&t)===t){var v=r.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=i;var E=s,D=b;try{D()}catch(L){Ct(h,E,L)}}}r=r.next}while(r!==p)}}catch(L){Ct(i,i.return,L)}}function ug(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{$d(i,s)}catch(r){Ct(t,t.return,r)}}}function cg(t,i,s){s.props=fa(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(r){Ct(t,i,r)}}function hl(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof s=="function"?t.refCleanup=s(r):s.current=r}}catch(h){Ct(t,i,h)}}function Oi(t,i){var s=t.ref,r=t.refCleanup;if(s!==null)if(typeof r=="function")try{r()}catch(h){Ct(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Ct(t,i,h)}else s.current=null}function hg(t){var i=t.type,s=t.memoizedProps,r=t.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break t;case"img":s.src?r.src=s.src:s.srcSet&&(r.srcset=s.srcSet)}}catch(h){Ct(t,t.return,h)}}function Uc(t,i,s){try{var r=t.stateNode;s_(r,t.type,s,i),r[be]=i}catch(h){Ct(t,t.return,h)}}function fg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&zn(t.type)||t.tag===4}function Rc(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||fg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&zn(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,i,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=ki));else if(r!==4&&(r===27&&zn(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(Nc(t,i,s),t=t.sibling;t!==null;)Nc(t,i,s),t=t.sibling}function Pr(t,i,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(r!==4&&(r===27&&zn(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Pr(t,i,s),t=t.sibling;t!==null;)Pr(t,i,s),t=t.sibling}function dg(t){var i=t.stateNode,s=t.memoizedProps;try{for(var r=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);ge(i,r,s),i[he]=t,i[be]=s}catch(p){Ct(t,t.return,p)}}var Qi=!1,ee=!1,Bc=!1,pg=typeof WeakSet=="function"?WeakSet:Set,re=null;function L1(t,i){if(t=t.containerInfo,nh=po,t=Ed(t),Ou(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else t:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var h=r.anchorOffset,p=r.focusNode;r=r.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break t}var v=0,b=-1,E=-1,D=0,L=0,X=t,U=null;e:for(;;){for(var k;X!==s||h!==0&&X.nodeType!==3||(b=v+h),X!==p||r!==0&&X.nodeType!==3||(E=v+r),X.nodeType===3&&(v+=X.nodeValue.length),(k=X.firstChild)!==null;)U=X,X=k;for(;;){if(X===t)break e;if(U===s&&++D===h&&(b=v),U===p&&++L===r&&(E=v),(k=X.nextSibling)!==null)break;X=U,U=X.parentNode}X=k}s=b===-1||E===-1?null:{start:b,end:E}}else s=null}s=s||{start:0,end:0}}else s=null;for(ah={focusedElem:t,selectionRange:s},po=!1,re=i;re!==null;)if(i=re,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,re=t;else for(;re!==null;){switch(i=re,p=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)h=t[s],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,s=i,h=p.memoizedProps,p=p.memoizedState,r=s.stateNode;try{var W=fa(s.type,h);t=r.getSnapshotBeforeUpdate(W,p),r.__reactInternalSnapshotBeforeUpdate=t}catch(tt){Ct(s,s.return,tt)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)rh(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":rh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,re=t;break}re=i.return}}function gg(t,i,s){var r=s.flags;switch(s.tag){case 0:case 11:case 15:Wi(t,s),r&4&&cl(5,s);break;case 1:if(Wi(t,s),r&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(v){Ct(s,s.return,v)}else{var h=fa(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ct(s,s.return,v)}}r&64&&ug(s),r&512&&hl(s,s.return);break;case 3:if(Wi(t,s),r&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{$d(t,i)}catch(v){Ct(s,s.return,v)}}break;case 27:i===null&&r&4&&dg(s);case 26:case 5:Wi(t,s),i===null&&r&4&&hg(s),r&512&&hl(s,s.return);break;case 12:Wi(t,s);break;case 31:Wi(t,s),r&4&&vg(t,s);break;case 13:Wi(t,s),r&4&&_g(t,s),r&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Q1.bind(null,s),d_(t,s))));break;case 22:if(r=s.memoizedState!==null||Qi,!r){i=i!==null&&i.memoizedState!==null||ee,h=Qi;var p=ee;Qi=r,(ee=i)&&!p?Ki(t,s,(s.subtreeFlags&8772)!==0):Wi(t,s),Qi=h,ee=p}break;case 30:break;default:Wi(t,s)}}function mg(t){var i=t.alternate;i!==null&&(t.alternate=null,mg(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&fu(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Lt=null,Me=!1;function Zi(t,i,s){for(s=s.child;s!==null;)yg(t,i,s),s=s.sibling}function yg(t,i,s){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Ns,s)}catch{}switch(s.tag){case 26:ee||Oi(s,i),Zi(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ee||Oi(s,i);var r=Lt,h=Me;zn(s.type)&&(Lt=s.stateNode,Me=!1),Zi(t,i,s),Sl(s.stateNode),Lt=r,Me=h;break;case 5:ee||Oi(s,i);case 6:if(r=Lt,h=Me,Lt=null,Zi(t,i,s),Lt=r,Me=h,Lt!==null)if(Me)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(s.stateNode)}catch(p){Ct(s,i,p)}else try{Lt.removeChild(s.stateNode)}catch(p){Ct(s,i,p)}break;case 18:Lt!==null&&(Me?(t=Lt,u0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),ys(t)):u0(Lt,s.stateNode));break;case 4:r=Lt,h=Me,Lt=s.stateNode.containerInfo,Me=!0,Zi(t,i,s),Lt=r,Me=h;break;case 0:case 11:case 14:case 15:Tn(2,s,i),ee||Tn(4,s,i),Zi(t,i,s);break;case 1:ee||(Oi(s,i),r=s.stateNode,typeof r.componentWillUnmount=="function"&&cg(s,i,r)),Zi(t,i,s);break;case 21:Zi(t,i,s);break;case 22:ee=(r=ee)||s.memoizedState!==null,Zi(t,i,s),ee=r;break;default:Zi(t,i,s)}}function vg(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ys(t)}catch(s){Ct(i,i.return,s)}}}function _g(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ys(t)}catch(s){Ct(i,i.return,s)}}function I1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new pg),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new pg),i;default:throw Error(a(435,t.tag))}}function Qr(t,i){var s=I1(t);i.forEach(function(r){if(!s.has(r)){s.add(r);var h=Z1.bind(null,t,r);r.then(h,h)}})}function we(t,i){var s=i.deletions;if(s!==null)for(var r=0;r<s.length;r++){var h=s[r],p=t,v=i,b=v;t:for(;b!==null;){switch(b.tag){case 27:if(zn(b.type)){Lt=b.stateNode,Me=!1;break t}break;case 5:Lt=b.stateNode,Me=!1;break t;case 3:case 4:Lt=b.stateNode.containerInfo,Me=!0;break t}b=b.return}if(Lt===null)throw Error(a(160));yg(p,v,h),Lt=null,Me=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Sg(i,t),i=i.sibling}var xi=null;function Sg(t,i){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:we(i,t),Ee(t),r&4&&(Tn(3,t,t.return),cl(3,t),Tn(5,t,t.return));break;case 1:we(i,t),Ee(t),r&512&&(ee||s===null||Oi(s,s.return)),r&64&&Qi&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?r:s.concat(r))));break;case 26:var h=xi;if(we(i,t),Ee(t),r&512&&(ee||s===null||Oi(s,s.return)),r&4){var p=s!==null?s.memoizedState:null;if(r=t.memoizedState,s===null)if(r===null)if(t.stateNode===null){t:{r=t.type,s=t.memoizedProps,h=h.ownerDocument||h;e:switch(r){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Ls]||p[he]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(r),h.head.insertBefore(p,h.querySelector("head > title"))),ge(p,r,s),p[he]=t,le(p),r=p;break t;case"link":var v=S0("link","href",h).get(r+(s.href||""));if(v){for(var b=0;b<v.length;b++)if(p=v[b],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){v.splice(b,1);break e}}p=h.createElement(r),ge(p,r,s),h.head.appendChild(p);break;case"meta":if(v=S0("meta","content",h).get(r+(s.content||""))){for(b=0;b<v.length;b++)if(p=v[b],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){v.splice(b,1);break e}}p=h.createElement(r),ge(p,r,s),h.head.appendChild(p);break;default:throw Error(a(468,r))}p[he]=t,le(p),r=p}t.stateNode=r}else x0(h,t.type,t.stateNode);else t.stateNode=_0(h,r,t.memoizedProps);else p!==r?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,r===null?x0(h,t.type,t.stateNode):_0(h,r,t.memoizedProps)):r===null&&t.stateNode!==null&&Uc(t,t.memoizedProps,s.memoizedProps)}break;case 27:we(i,t),Ee(t),r&512&&(ee||s===null||Oi(s,s.return)),s!==null&&r&4&&Uc(t,t.memoizedProps,s.memoizedProps);break;case 5:if(we(i,t),Ee(t),r&512&&(ee||s===null||Oi(s,s.return)),t.flags&32){h=t.stateNode;try{Ga(h,"")}catch(W){Ct(t,t.return,W)}}r&4&&t.stateNode!=null&&(h=t.memoizedProps,Uc(t,h,s!==null?s.memoizedProps:h)),r&1024&&(Bc=!0);break;case 6:if(we(i,t),Ee(t),r&4){if(t.stateNode===null)throw Error(a(162));r=t.memoizedProps,s=t.stateNode;try{s.nodeValue=r}catch(W){Ct(t,t.return,W)}}break;case 3:if(uo=null,h=xi,xi=ro(i.containerInfo),we(i,t),xi=h,Ee(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{ys(i.containerInfo)}catch(W){Ct(t,t.return,W)}Bc&&(Bc=!1,xg(t));break;case 4:r=xi,xi=ro(t.stateNode.containerInfo),we(i,t),Ee(t),xi=r;break;case 12:we(i,t),Ee(t);break;case 31:we(i,t),Ee(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Qr(t,r)));break;case 13:we(i,t),Ee(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Wr=Ne()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Qr(t,r)));break;case 22:h=t.memoizedState!==null;var E=s!==null&&s.memoizedState!==null,D=Qi,L=ee;if(Qi=D||h,ee=L||E,we(i,t),ee=L,Qi=D,Ee(t),r&8192)t:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(s===null||E||Qi||ee||da(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){E=s=i;try{if(p=E.stateNode,h)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=E.stateNode;var X=E.memoizedProps.style,U=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(W){Ct(E,E.return,W)}}}else if(i.tag===6){if(s===null){E=i;try{E.stateNode.nodeValue=h?"":E.memoizedProps}catch(W){Ct(E,E.return,W)}}}else if(i.tag===18){if(s===null){E=i;try{var k=E.stateNode;h?c0(k,!0):c0(E.stateNode,!1)}catch(W){Ct(E,E.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break t;for(;i.sibling===null;){if(i.return===null||i.return===t)break t;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}r&4&&(r=t.updateQueue,r!==null&&(s=r.retryQueue,s!==null&&(r.retryQueue=null,Qr(t,s))));break;case 19:we(i,t),Ee(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Qr(t,r)));break;case 30:break;case 21:break;default:we(i,t),Ee(t)}}function Ee(t){var i=t.flags;if(i&2){try{for(var s,r=t.return;r!==null;){if(fg(r)){s=r;break}r=r.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,p=Rc(t);Pr(t,p,h);break;case 5:var v=s.stateNode;s.flags&32&&(Ga(v,""),s.flags&=-33);var b=Rc(t);Pr(t,b,v);break;case 3:case 4:var E=s.stateNode.containerInfo,D=Rc(t);Nc(t,D,E);break;default:throw Error(a(161))}}catch(L){Ct(t,t.return,L)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function xg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;xg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Wi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)gg(t,i.alternate,i),i=i.sibling}function da(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Tn(4,i,i.return),da(i);break;case 1:Oi(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&cg(i,i.return,s),da(i);break;case 27:Sl(i.stateNode);case 26:case 5:Oi(i,i.return),da(i);break;case 22:i.memoizedState===null&&da(i);break;case 30:da(i);break;default:da(i)}t=t.sibling}}function Ki(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var r=i.alternate,h=t,p=i,v=p.flags;switch(p.tag){case 0:case 11:case 15:Ki(h,p,s),cl(4,p);break;case 1:if(Ki(h,p,s),r=p,h=r.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(D){Ct(r,r.return,D)}if(r=p,h=r.updateQueue,h!==null){var b=r.stateNode;try{var E=h.shared.hiddenCallbacks;if(E!==null)for(h.shared.hiddenCallbacks=null,h=0;h<E.length;h++)Jd(E[h],b)}catch(D){Ct(r,r.return,D)}}s&&v&64&&ug(p),hl(p,p.return);break;case 27:dg(p);case 26:case 5:Ki(h,p,s),s&&r===null&&v&4&&hg(p),hl(p,p.return);break;case 12:Ki(h,p,s);break;case 31:Ki(h,p,s),s&&v&4&&vg(h,p);break;case 13:Ki(h,p,s),s&&v&4&&_g(h,p);break;case 22:p.memoizedState===null&&Ki(h,p,s),hl(p,p.return);break;case 30:break;default:Ki(h,p,s)}i=i.sibling}}function kc(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Fs(s))}function Lc(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Fs(t))}function bi(t,i,s,r){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)bg(t,i,s,r),i=i.sibling}function bg(t,i,s,r){var h=i.flags;switch(i.tag){case 0:case 11:case 15:bi(t,i,s,r),h&2048&&cl(9,i);break;case 1:bi(t,i,s,r);break;case 3:bi(t,i,s,r),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Fs(t)));break;case 12:if(h&2048){bi(t,i,s,r),t=i.stateNode;try{var p=i.memoizedProps,v=p.id,b=p.onPostCommit;typeof b=="function"&&b(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(E){Ct(i,i.return,E)}}else bi(t,i,s,r);break;case 31:bi(t,i,s,r);break;case 13:bi(t,i,s,r);break;case 23:break;case 22:p=i.stateNode,v=i.alternate,i.memoizedState!==null?p._visibility&2?bi(t,i,s,r):fl(t,i):p._visibility&2?bi(t,i,s,r):(p._visibility|=2,ls(t,i,s,r,(i.subtreeFlags&10256)!==0||!1)),h&2048&&kc(v,i);break;case 24:bi(t,i,s,r),h&2048&&Lc(i.alternate,i);break;default:bi(t,i,s,r)}}function ls(t,i,s,r,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=t,v=i,b=s,E=r,D=v.flags;switch(v.tag){case 0:case 11:case 15:ls(p,v,b,E,h),cl(8,v);break;case 23:break;case 22:var L=v.stateNode;v.memoizedState!==null?L._visibility&2?ls(p,v,b,E,h):fl(p,v):(L._visibility|=2,ls(p,v,b,E,h)),h&&D&2048&&kc(v.alternate,v);break;case 24:ls(p,v,b,E,h),h&&D&2048&&Lc(v.alternate,v);break;default:ls(p,v,b,E,h)}i=i.sibling}}function fl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,r=i,h=r.flags;switch(r.tag){case 22:fl(s,r),h&2048&&kc(r.alternate,r);break;case 24:fl(s,r),h&2048&&Lc(r.alternate,r);break;default:fl(s,r)}i=i.sibling}}var dl=8192;function rs(t,i,s){if(t.subtreeFlags&dl)for(t=t.child;t!==null;)Tg(t,i,s),t=t.sibling}function Tg(t,i,s){switch(t.tag){case 26:rs(t,i,s),t.flags&dl&&t.memoizedState!==null&&w_(s,xi,t.memoizedState,t.memoizedProps);break;case 5:rs(t,i,s);break;case 3:case 4:var r=xi;xi=ro(t.stateNode.containerInfo),rs(t,i,s),xi=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=dl,dl=16777216,rs(t,i,s),dl=r):rs(t,i,s));break;default:rs(t,i,s)}}function Mg(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function pl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var r=i[s];re=r,Eg(r,t)}Mg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wg(t),t=t.sibling}function wg(t){switch(t.tag){case 0:case 11:case 15:pl(t),t.flags&2048&&Tn(9,t,t.return);break;case 3:pl(t);break;case 12:pl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Zr(t)):pl(t);break;default:pl(t)}}function Zr(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var r=i[s];re=r,Eg(r,t)}Mg(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Tn(8,i,i.return),Zr(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Zr(i));break;default:Zr(i)}t=t.sibling}}function Eg(t,i){for(;re!==null;){var s=re;switch(s.tag){case 0:case 11:case 15:Tn(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var r=s.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Fs(s.memoizedState.cache)}if(r=s.child,r!==null)r.return=s,re=r;else t:for(s=t;re!==null;){r=re;var h=r.sibling,p=r.return;if(mg(r),r===s){re=null;break t}if(h!==null){h.return=p,re=h;break t}re=p}}}var G1={getCacheForType:function(t){var i=de(Jt),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s},cacheSignal:function(){return de(Jt).controller.signal}},q1=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Dt=null,ut=null,ht=0,At=0,Ye=null,Mn=!1,os=!1,Ic=!1,Fi=0,Qt=0,wn=0,pa=0,Gc=0,Xe=0,us=0,gl=null,Ae=null,qc=!1,Wr=0,Ag=0,Kr=1/0,Fr=null,En=null,ne=0,An=null,cs=null,Ji=0,Yc=0,Xc=null,Cg=null,ml=0,jc=null;function je(){return(Tt&2)!==0&&ht!==0?ht&-ht:R.T!==null?Kc():jf()}function Og(){if(Xe===0)if((ht&536870912)===0||dt){var t=sr;sr<<=1,(sr&3932160)===0&&(sr=262144),Xe=t}else Xe=536870912;return t=Ge.current,t!==null&&(t.flags|=32),Xe}function Ce(t,i,s){(t===Dt&&(At===2||At===9)||t.cancelPendingCommit!==null)&&(hs(t,0),Cn(t,ht,Xe,!1)),ks(t,s),((Tt&2)===0||t!==Dt)&&(t===Dt&&((Tt&2)===0&&(pa|=s),Qt===4&&Cn(t,ht,Xe,!1)),zi(t))}function zg(t,i,s){if((Tt&6)!==0)throw Error(a(327));var r=!s&&(i&127)===0&&(i&t.expiredLanes)===0||Bs(t,i),h=r?j1(t,i):Pc(t,i,!0),p=r;do{if(h===0){os&&!r&&Cn(t,i,0,!1);break}else{if(s=t.current.alternate,p&&!Y1(s)){h=Pc(t,i,!1),p=!1;continue}if(h===2){if(p=i,t.errorRecoveryDisabledLanes&p)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var b=t;h=gl;var E=b.current.memoizedState.isDehydrated;if(E&&(hs(b,v).flags|=256),v=Pc(b,v,!1),v!==2){if(Ic&&!E){b.errorRecoveryDisabledLanes|=p,pa|=p,h=4;break t}p=Ae,Ae=h,p!==null&&(Ae===null?Ae=p:Ae.push.apply(Ae,p))}h=v}if(p=!1,h!==2)continue}}if(h===1){hs(t,0),Cn(t,i,0,!0);break}t:{switch(r=t,p=h,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Cn(r,i,Xe,!Mn);break t;case 2:Ae=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=Wr+300-Ne(),10<h)){if(Cn(r,i,Xe,!Mn),rr(r,0,!0)!==0)break t;Ji=i,r.timeoutHandle=r0(Hg.bind(null,r,s,Ae,Fr,qc,i,Xe,pa,us,Mn,p,"Throttled",-0,0),h);break t}Hg(r,s,Ae,Fr,qc,i,Xe,pa,us,Mn,p,null,-0,0)}}break}while(!0);zi(t)}function Hg(t,i,s,r,h,p,v,b,E,D,L,X,U,k){if(t.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ki},Tg(i,p,X);var W=(p&62914560)===p?Wr-Ne():(p&4194048)===p?Ag-Ne():0;if(W=E_(X,W),W!==null){Ji=p,t.cancelPendingCommit=W(Ig.bind(null,t,i,p,s,r,h,v,b,E,L,X,null,U,k)),Cn(t,p,v,!D);return}}Ig(t,i,p,s,r,h,v,b,E)}function Y1(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var r=0;r<s.length;r++){var h=s[r],p=h.getSnapshot;h=h.value;try{if(!Le(p(),h))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Cn(t,i,s,r){i&=~Gc,i&=~pa,t.suspendedLanes|=i,t.pingedLanes&=~i,r&&(t.warmLanes|=i),r=t.expirationTimes;for(var h=i;0<h;){var p=31-ke(h),v=1<<p;r[p]=-1,h&=~v}s!==0&&qf(t,s,i)}function Jr(){return(Tt&6)===0?(yl(0),!1):!0}function Vc(){if(ut!==null){if(At===0)var t=ut.return;else t=ut,qi=sa=null,rc(t),es=null,$s=0,t=ut;for(;t!==null;)og(t.alternate,t),t=t.return;ut=null}}function hs(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,o_(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Ji=0,Vc(),Dt=t,ut=s=Ii(t.current,null),ht=i,At=0,Ye=null,Mn=!1,os=Bs(t,i),Ic=!1,us=Xe=Gc=pa=wn=Qt=0,Ae=gl=null,qc=!1,(i&8)!==0&&(i|=i&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=i;0<r;){var h=31-ke(r),p=1<<h;i|=t[h],r&=~p}return Fi=i,_r(),s}function Dg(t,i){st=null,R.H=rl,i===ts||i===Ar?(i=Zd(),At=3):i===Wu?(i=Zd(),At=4):At=i===Tc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ye=i,ut===null&&(Qt=1,qr(t,ni(i,t.current)))}function Ug(){var t=Ge.current;return t===null?!0:(ht&4194048)===ht?ri===null:(ht&62914560)===ht||(ht&536870912)!==0?t===ri:!1}function Rg(){var t=R.H;return R.H=rl,t===null?rl:t}function Ng(){var t=R.A;return R.A=G1,t}function $r(){Qt=4,Mn||(ht&4194048)!==ht&&Ge.current!==null||(os=!0),(wn&134217727)===0&&(pa&134217727)===0||Dt===null||Cn(Dt,ht,Xe,!1)}function Pc(t,i,s){var r=Tt;Tt|=2;var h=Rg(),p=Ng();(Dt!==t||ht!==i)&&(Fr=null,hs(t,i)),i=!1;var v=Qt;t:do try{if(At!==0&&ut!==null){var b=ut,E=Ye;switch(At){case 8:Vc(),v=6;break t;case 3:case 2:case 9:case 6:Ge.current===null&&(i=!0);var D=At;if(At=0,Ye=null,fs(t,b,E,D),s&&os){v=0;break t}break;default:D=At,At=0,Ye=null,fs(t,b,E,D)}}X1(),v=Qt;break}catch(L){Dg(t,L)}while(!0);return i&&t.shellSuspendCounter++,qi=sa=null,Tt=r,R.H=h,R.A=p,ut===null&&(Dt=null,ht=0,_r()),v}function X1(){for(;ut!==null;)Bg(ut)}function j1(t,i){var s=Tt;Tt|=2;var r=Rg(),h=Ng();Dt!==t||ht!==i?(Fr=null,Kr=Ne()+500,hs(t,i)):os=Bs(t,i);t:do try{if(At!==0&&ut!==null){i=ut;var p=Ye;e:switch(At){case 1:At=0,Ye=null,fs(t,i,p,1);break;case 2:case 9:if(Pd(p)){At=0,Ye=null,kg(i);break}i=function(){At!==2&&At!==9||Dt!==t||(At=7),zi(t)},p.then(i,i);break t;case 3:At=7;break t;case 4:At=5;break t;case 7:Pd(p)?(At=0,Ye=null,kg(i)):(At=0,Ye=null,fs(t,i,p,7));break;case 5:var v=null;switch(ut.tag){case 26:v=ut.memoizedState;case 5:case 27:var b=ut;if(v?b0(v):b.stateNode.complete){At=0,Ye=null;var E=b.sibling;if(E!==null)ut=E;else{var D=b.return;D!==null?(ut=D,to(D)):ut=null}break e}}At=0,Ye=null,fs(t,i,p,5);break;case 6:At=0,Ye=null,fs(t,i,p,6);break;case 8:Vc(),Qt=6;break t;default:throw Error(a(462))}}V1();break}catch(L){Dg(t,L)}while(!0);return qi=sa=null,R.H=r,R.A=h,Tt=s,ut!==null?0:(Dt=null,ht=0,_r(),Qt)}function V1(){for(;ut!==null&&!pv();)Bg(ut)}function Bg(t){var i=lg(t.alternate,t,Fi);t.memoizedProps=t.pendingProps,i===null?to(t):ut=i}function kg(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=tg(s,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=tg(s,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:rc(i);default:og(s,i),i=ut=Nd(i,Fi),i=lg(s,i,Fi)}t.memoizedProps=t.pendingProps,i===null?to(t):ut=i}function fs(t,i,s,r){qi=sa=null,rc(i),es=null,$s=0;var h=i.return;try{if(U1(t,h,i,s,ht)){Qt=1,qr(t,ni(s,t.current)),ut=null;return}}catch(p){if(h!==null)throw ut=h,p;Qt=1,qr(t,ni(s,t.current)),ut=null;return}i.flags&32768?(dt||r===1?t=!0:os||(ht&536870912)!==0?t=!1:(Mn=t=!0,(r===2||r===9||r===3||r===6)&&(r=Ge.current,r!==null&&r.tag===13&&(r.flags|=16384))),Lg(i,t)):to(i)}function to(t){var i=t;do{if((i.flags&32768)!==0){Lg(i,Mn);return}t=i.return;var s=B1(i.alternate,i,Fi);if(s!==null){ut=s;return}if(i=i.sibling,i!==null){ut=i;return}ut=i=t}while(i!==null);Qt===0&&(Qt=5)}function Lg(t,i){do{var s=k1(t.alternate,t);if(s!==null){s.flags&=32767,ut=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){ut=t;return}ut=t=s}while(t!==null);Qt=6,ut=null}function Ig(t,i,s,r,h,p,v,b,E){t.cancelPendingCommit=null;do eo();while(ne!==0);if((Tt&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=Ru,Mv(t,s,p,v,b,E),t===Dt&&(ut=Dt=null,ht=0),cs=i,An=t,Ji=s,Yc=p,Xc=h,Cg=r,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,W1(nr,function(){return jg(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||r){r=R.T,R.T=null,h=P.p,P.p=2,v=Tt,Tt|=4;try{L1(t,i,s)}finally{Tt=v,P.p=h,R.T=r}}ne=1,Gg(),qg(),Yg()}}function Gg(){if(ne===1){ne=0;var t=An,i=cs,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=R.T,R.T=null;var r=P.p;P.p=2;var h=Tt;Tt|=4;try{Sg(i,t);var p=ah,v=Ed(t.containerInfo),b=p.focusedElem,E=p.selectionRange;if(v!==b&&b&&b.ownerDocument&&wd(b.ownerDocument.documentElement,b)){if(E!==null&&Ou(b)){var D=E.start,L=E.end;if(L===void 0&&(L=D),"selectionStart"in b)b.selectionStart=D,b.selectionEnd=Math.min(L,b.value.length);else{var X=b.ownerDocument||document,U=X&&X.defaultView||window;if(U.getSelection){var k=U.getSelection(),W=b.textContent.length,tt=Math.min(E.start,W),Ht=E.end===void 0?tt:Math.min(E.end,W);!k.extend&&tt>Ht&&(v=Ht,Ht=tt,tt=v);var O=Md(b,tt),A=Md(b,Ht);if(O&&A&&(k.rangeCount!==1||k.anchorNode!==O.node||k.anchorOffset!==O.offset||k.focusNode!==A.node||k.focusOffset!==A.offset)){var H=X.createRange();H.setStart(O.node,O.offset),k.removeAllRanges(),tt>Ht?(k.addRange(H),k.extend(A.node,A.offset)):(H.setEnd(A.node,A.offset),k.addRange(H))}}}}for(X=[],k=b;k=k.parentNode;)k.nodeType===1&&X.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var q=X[b];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}po=!!nh,ah=nh=null}finally{Tt=h,P.p=r,R.T=s}}t.current=i,ne=2}}function qg(){if(ne===2){ne=0;var t=An,i=cs,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=R.T,R.T=null;var r=P.p;P.p=2;var h=Tt;Tt|=4;try{gg(t,i.alternate,i)}finally{Tt=h,P.p=r,R.T=s}}ne=3}}function Yg(){if(ne===4||ne===3){ne=0,gv();var t=An,i=cs,s=Ji,r=Cg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ne=5:(ne=0,cs=An=null,Xg(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(En=null),cu(s),i=i.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Ns,i,void 0,(i.current.flags&128)===128)}catch{}if(r!==null){i=R.T,h=P.p,P.p=2,R.T=null;try{for(var p=t.onRecoverableError,v=0;v<r.length;v++){var b=r[v];p(b.value,{componentStack:b.stack})}}finally{R.T=i,P.p=h}}(Ji&3)!==0&&eo(),zi(t),h=t.pendingLanes,(s&261930)!==0&&(h&42)!==0?t===jc?ml++:(ml=0,jc=t):ml=0,yl(0)}}function Xg(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Fs(i)))}function eo(){return Gg(),qg(),Yg(),jg()}function jg(){if(ne!==5)return!1;var t=An,i=Yc;Yc=0;var s=cu(Ji),r=R.T,h=P.p;try{P.p=32>s?32:s,R.T=null,s=Xc,Xc=null;var p=An,v=Ji;if(ne=0,cs=An=null,Ji=0,(Tt&6)!==0)throw Error(a(331));var b=Tt;if(Tt|=4,wg(p.current),bg(p,p.current,v,s),Tt=b,yl(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Ns,p)}catch{}return!0}finally{P.p=h,R.T=r,Xg(t,i)}}function Vg(t,i,s){i=ni(s,i),i=bc(t.stateNode,i,2),t=Sn(t,i,2),t!==null&&(ks(t,2),zi(t))}function Ct(t,i,s){if(t.tag===3)Vg(t,t,s);else for(;i!==null;){if(i.tag===3){Vg(i,t,s);break}else if(i.tag===1){var r=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(En===null||!En.has(r))){t=ni(s,t),s=Pp(2),r=Sn(i,s,2),r!==null&&(Qp(s,r,i,t),ks(r,2),zi(r));break}}i=i.return}}function Qc(t,i,s){var r=t.pingCache;if(r===null){r=t.pingCache=new q1;var h=new Set;r.set(i,h)}else h=r.get(i),h===void 0&&(h=new Set,r.set(i,h));h.has(s)||(Ic=!0,h.add(s),t=P1.bind(null,t,i,s),i.then(t,t))}function P1(t,i,s){var r=t.pingCache;r!==null&&r.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Dt===t&&(ht&s)===s&&(Qt===4||Qt===3&&(ht&62914560)===ht&&300>Ne()-Wr?(Tt&2)===0&&hs(t,0):Gc|=s,us===ht&&(us=0)),zi(t)}function Pg(t,i){i===0&&(i=Gf()),t=ia(t,i),t!==null&&(ks(t,i),zi(t))}function Q1(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),Pg(t,s)}function Z1(t,i){var s=0;switch(t.tag){case 31:case 13:var r=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(a(314))}r!==null&&r.delete(i),Pg(t,s)}function W1(t,i){return lu(t,i)}var io=null,ds=null,Zc=!1,no=!1,Wc=!1,On=0;function zi(t){t!==ds&&t.next===null&&(ds===null?io=ds=t:ds=ds.next=t),no=!0,Zc||(Zc=!0,F1())}function yl(t,i){if(!Wc&&no){Wc=!0;do for(var s=!1,r=io;r!==null;){if(t!==0){var h=r.pendingLanes;if(h===0)var p=0;else{var v=r.suspendedLanes,b=r.pingedLanes;p=(1<<31-ke(42|t)+1)-1,p&=h&~(v&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,Kg(r,p))}else p=ht,p=rr(r,r===Dt?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(p&3)===0||Bs(r,p)||(s=!0,Kg(r,p));r=r.next}while(s);Wc=!1}}function K1(){Qg()}function Qg(){no=Zc=!1;var t=0;On!==0&&r_()&&(t=On);for(var i=Ne(),s=null,r=io;r!==null;){var h=r.next,p=Zg(r,i);p===0?(r.next=null,s===null?io=h:s.next=h,h===null&&(ds=s)):(s=r,(t!==0||(p&3)!==0)&&(no=!0)),r=h}ne!==0&&ne!==5||yl(t),On!==0&&(On=0)}function Zg(t,i){for(var s=t.suspendedLanes,r=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var v=31-ke(p),b=1<<v,E=h[v];E===-1?((b&s)===0||(b&r)!==0)&&(h[v]=Tv(b,i)):E<=i&&(t.expiredLanes|=b),p&=~b}if(i=Dt,s=ht,s=rr(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,s===0||t===i&&(At===2||At===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&ru(r),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Bs(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(r!==null&&ru(r),cu(s)){case 2:case 8:s=Lf;break;case 32:s=nr;break;case 268435456:s=If;break;default:s=nr}return r=Wg.bind(null,t),s=lu(s,r),t.callbackPriority=i,t.callbackNode=s,i}return r!==null&&r!==null&&ru(r),t.callbackPriority=2,t.callbackNode=null,2}function Wg(t,i){if(ne!==0&&ne!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(eo()&&t.callbackNode!==s)return null;var r=ht;return r=rr(t,t===Dt?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(zg(t,r,i),Zg(t,Ne()),t.callbackNode!=null&&t.callbackNode===s?Wg.bind(null,t):null)}function Kg(t,i){if(eo())return null;zg(t,i,!0)}function F1(){u_(function(){(Tt&6)!==0?lu(kf,K1):Qg()})}function Kc(){if(On===0){var t=Ja;t===0&&(t=ar,ar<<=1,(ar&261888)===0&&(ar=256)),On=t}return On}function Fg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:hr(""+t)}function Jg(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function J1(t,i,s,r,h){if(i==="submit"&&s&&s.stateNode===h){var p=Fg((h[be]||null).action),v=r.submitter;v&&(i=(i=v[be]||null)?Fg(i.formAction):v.getAttribute("formAction"),i!==null&&(p=i,v=null));var b=new gr("action","action",null,r,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(On!==0){var E=v?Jg(h,v):new FormData(h);mc(s,{pending:!0,data:E,method:h.method,action:p},null,E)}}else typeof p=="function"&&(b.preventDefault(),E=v?Jg(h,v):new FormData(h),mc(s,{pending:!0,data:E,method:h.method,action:p},p,E))},currentTarget:h}]})}}for(var Fc=0;Fc<Uu.length;Fc++){var Jc=Uu[Fc],$1=Jc.toLowerCase(),t_=Jc[0].toUpperCase()+Jc.slice(1);Si($1,"on"+t_)}Si(Od,"onAnimationEnd"),Si(zd,"onAnimationIteration"),Si(Hd,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(m1,"onTransitionRun"),Si(y1,"onTransitionStart"),Si(v1,"onTransitionCancel"),Si(Dd,"onTransitionEnd"),La("onMouseEnter",["mouseout","mouseover"]),La("onMouseLeave",["mouseout","mouseover"]),La("onPointerEnter",["pointerout","pointerover"]),La("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function $g(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],h=r.event;r=r.listeners;t:{var p=void 0;if(i)for(var v=r.length-1;0<=v;v--){var b=r[v],E=b.instance,D=b.currentTarget;if(b=b.listener,E!==p&&h.isPropagationStopped())break t;p=b,h.currentTarget=D;try{p(h)}catch(L){vr(L)}h.currentTarget=null,p=E}else for(v=0;v<r.length;v++){if(b=r[v],E=b.instance,D=b.currentTarget,b=b.listener,E!==p&&h.isPropagationStopped())break t;p=b,h.currentTarget=D;try{p(h)}catch(L){vr(L)}h.currentTarget=null,p=E}}}}function ct(t,i){var s=i[hu];s===void 0&&(s=i[hu]=new Set);var r=t+"__bubble";s.has(r)||(t0(i,t,2,!1),s.add(r))}function $c(t,i,s){var r=0;i&&(r|=4),t0(s,t,r,i)}var ao="_reactListening"+Math.random().toString(36).slice(2);function th(t){if(!t[ao]){t[ao]=!0,Qf.forEach(function(s){s!=="selectionchange"&&(e_.has(s)||$c(s,!1,t),$c(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[ao]||(i[ao]=!0,$c("selectionchange",!1,i))}}function t0(t,i,s,r){switch(O0(i)){case 2:var h=O_;break;case 8:h=z_;break;default:h=gh}s=h.bind(null,i,s,t),h=void 0,!Su||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),r?h!==void 0?t.addEventListener(i,s,{capture:!0,passive:h}):t.addEventListener(i,s,!0):h!==void 0?t.addEventListener(i,s,{passive:h}):t.addEventListener(i,s,!1)}function eh(t,i,s,r,h){var p=r;if((i&1)===0&&(i&2)===0&&r!==null)t:for(;;){if(r===null)return;var v=r.tag;if(v===3||v===4){var b=r.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=r.return;v!==null;){var E=v.tag;if((E===3||E===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=Na(b),v===null)return;if(E=v.tag,E===5||E===6||E===26||E===27){r=p=v;continue t}b=b.parentNode}}r=r.return}sd(function(){var D=p,L=vu(s),X=[];t:{var U=Ud.get(t);if(U!==void 0){var k=gr,W=t;switch(t){case"keypress":if(dr(s)===0)break t;case"keydown":case"keyup":k=Zv;break;case"focusin":W="focus",k=Mu;break;case"focusout":W="blur",k=Mu;break;case"beforeblur":case"afterblur":k=Mu;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Bv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=Fv;break;case Od:case zd:case Hd:k=Iv;break;case Dd:k=$v;break;case"scroll":case"scrollend":k=Rv;break;case"wheel":k=e1;break;case"copy":case"cut":case"paste":k=qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=cd;break;case"toggle":case"beforetoggle":k=n1}var tt=(i&4)!==0,Ht=!tt&&(t==="scroll"||t==="scrollend"),O=tt?U!==null?U+"Capture":null:U;tt=[];for(var A=D,H;A!==null;){var q=A;if(H=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||H===null||O===null||(q=Gs(A,O),q!=null&&tt.push(_l(A,q,H))),Ht)break;A=A.return}0<tt.length&&(U=new k(U,W,null,s,L),X.push({event:U,listeners:tt}))}}if((i&7)===0){t:{if(U=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",U&&s!==yu&&(W=s.relatedTarget||s.fromElement)&&(Na(W)||W[Ra]))break t;if((k||U)&&(U=L.window===L?L:(U=L.ownerDocument)?U.defaultView||U.parentWindow:window,k?(W=s.relatedTarget||s.toElement,k=D,W=W?Na(W):null,W!==null&&(Ht=o(W),tt=W.tag,W!==Ht||tt!==5&&tt!==27&&tt!==6)&&(W=null)):(k=null,W=D),k!==W)){if(tt=od,q="onMouseLeave",O="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(tt=cd,q="onPointerLeave",O="onPointerEnter",A="pointer"),Ht=k==null?U:Is(k),H=W==null?U:Is(W),U=new tt(q,A+"leave",k,s,L),U.target=Ht,U.relatedTarget=H,q=null,Na(L)===D&&(tt=new tt(O,A+"enter",W,s,L),tt.target=H,tt.relatedTarget=Ht,q=tt),Ht=q,k&&W)e:{for(tt=i_,O=k,A=W,H=0,q=O;q;q=tt(q))H++;q=0;for(var $=A;$;$=tt($))q++;for(;0<H-q;)O=tt(O),H--;for(;0<q-H;)A=tt(A),q--;for(;H--;){if(O===A||A!==null&&O===A.alternate){tt=O;break e}O=tt(O),A=tt(A)}tt=null}else tt=null;k!==null&&e0(X,U,k,tt,!1),W!==null&&Ht!==null&&e0(X,Ht,W,tt,!0)}}t:{if(U=D?Is(D):window,k=U.nodeName&&U.nodeName.toLowerCase(),k==="select"||k==="input"&&U.type==="file")var St=vd;else if(md(U))if(_d)St=d1;else{St=h1;var J=c1}else k=U.nodeName,!k||k.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?D&&mu(D.elementType)&&(St=vd):St=f1;if(St&&(St=St(t,D))){yd(X,St,s,L);break t}J&&J(t,U,D),t==="focusout"&&D&&U.type==="number"&&D.memoizedProps.value!=null&&gu(U,"number",U.value)}switch(J=D?Is(D):window,t){case"focusin":(md(J)||J.contentEditable==="true")&&(ja=J,zu=D,Zs=null);break;case"focusout":Zs=zu=ja=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,Ad(X,s,L);break;case"selectionchange":if(g1)break;case"keydown":case"keyup":Ad(X,s,L)}var lt;if(Eu)t:{switch(t){case"compositionstart":var ft="onCompositionStart";break t;case"compositionend":ft="onCompositionEnd";break t;case"compositionupdate":ft="onCompositionUpdate";break t}ft=void 0}else Xa?pd(t,s)&&(ft="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ft="onCompositionStart");ft&&(hd&&s.locale!=="ko"&&(Xa||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Xa&&(lt=ld()):(dn=L,xu="value"in dn?dn.value:dn.textContent,Xa=!0)),J=so(D,ft),0<J.length&&(ft=new ud(ft,t,null,s,L),X.push({event:ft,listeners:J}),lt?ft.data=lt:(lt=gd(s),lt!==null&&(ft.data=lt)))),(lt=s1?l1(t,s):r1(t,s))&&(ft=so(D,"onBeforeInput"),0<ft.length&&(J=new ud("onBeforeInput","beforeinput",null,s,L),X.push({event:J,listeners:ft}),J.data=lt)),J1(X,t,D,s,L)}$g(X,i)})}function _l(t,i,s){return{instance:t,listener:i,currentTarget:s}}function so(t,i){for(var s=i+"Capture",r=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=Gs(t,s),h!=null&&r.unshift(_l(t,h,p)),h=Gs(t,i),h!=null&&r.push(_l(t,h,p))),t.tag===3)return r;t=t.return}return[]}function i_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function e0(t,i,s,r,h){for(var p=i._reactName,v=[];s!==null&&s!==r;){var b=s,E=b.alternate,D=b.stateNode;if(b=b.tag,E!==null&&E===r)break;b!==5&&b!==26&&b!==27||D===null||(E=D,h?(D=Gs(s,p),D!=null&&v.unshift(_l(s,D,E))):h||(D=Gs(s,p),D!=null&&v.push(_l(s,D,E)))),s=s.return}v.length!==0&&t.push({event:i,listeners:v})}var n_=/\r\n?/g,a_=/\u0000|\uFFFD/g;function i0(t){return(typeof t=="string"?t:""+t).replace(n_,`
`).replace(a_,"")}function n0(t,i){return i=i0(i),i0(t)===i}function zt(t,i,s,r,h,p){switch(s){case"children":typeof r=="string"?i==="body"||i==="textarea"&&r===""||Ga(t,r):(typeof r=="number"||typeof r=="bigint")&&i!=="body"&&Ga(t,""+r);break;case"className":ur(t,"class",r);break;case"tabIndex":ur(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(t,s,r);break;case"style":nd(t,r,p);break;case"data":if(i!=="object"){ur(t,"data",r);break}case"src":case"href":if(r===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(s);break}r=hr(""+r),t.setAttribute(s,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(i!=="input"&&zt(t,i,"name",h.name,h,null),zt(t,i,"formEncType",h.formEncType,h,null),zt(t,i,"formMethod",h.formMethod,h,null),zt(t,i,"formTarget",h.formTarget,h,null)):(zt(t,i,"encType",h.encType,h,null),zt(t,i,"method",h.method,h,null),zt(t,i,"target",h.target,h,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(s);break}r=hr(""+r),t.setAttribute(s,r);break;case"onClick":r!=null&&(t.onclick=ki);break;case"onScroll":r!=null&&ct("scroll",t);break;case"onScrollEnd":r!=null&&ct("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(s=r.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}s=hr(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,""+r):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":r===!0?t.setAttribute(s,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,r):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(s,r):t.removeAttribute(s);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(s):t.setAttribute(s,r);break;case"popover":ct("beforetoggle",t),ct("toggle",t),or(t,"popover",r);break;case"xlinkActuate":Bi(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Bi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Bi(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Bi(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Bi(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Bi(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Bi(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Bi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Bi(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":or(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Dv.get(s)||s,or(t,s,r))}}function ih(t,i,s,r,h,p){switch(s){case"style":nd(t,r,p);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(s=r.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof r=="string"?Ga(t,r):(typeof r=="number"||typeof r=="bigint")&&Ga(t,""+r);break;case"onScroll":r!=null&&ct("scroll",t);break;case"onScrollEnd":r!=null&&ct("scrollend",t);break;case"onClick":r!=null&&(t.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zf.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),i=s.slice(2,h?s.length-7:void 0),p=t[be]||null,p=p!=null?p[s]:null,typeof p=="function"&&t.removeEventListener(i,p,h),typeof r=="function")){typeof p!="function"&&p!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,r,h);break t}s in t?t[s]=r:r===!0?t.setAttribute(s,""):or(t,s,r)}}}function ge(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",t),ct("load",t);var r=!1,h=!1,p;for(p in s)if(s.hasOwnProperty(p)){var v=s[p];if(v!=null)switch(p){case"src":r=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:zt(t,i,p,v,s,null)}}h&&zt(t,i,"srcSet",s.srcSet,s,null),r&&zt(t,i,"src",s.src,s,null);return;case"input":ct("invalid",t);var b=p=v=h=null,E=null,D=null;for(r in s)if(s.hasOwnProperty(r)){var L=s[r];if(L!=null)switch(r){case"name":h=L;break;case"type":v=L;break;case"checked":E=L;break;case"defaultChecked":D=L;break;case"value":p=L;break;case"defaultValue":b=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(a(137,i));break;default:zt(t,i,r,L,s,null)}}$f(t,p,b,E,D,v,h,!1);return;case"select":ct("invalid",t),r=v=p=null;for(h in s)if(s.hasOwnProperty(h)&&(b=s[h],b!=null))switch(h){case"value":p=b;break;case"defaultValue":v=b;break;case"multiple":r=b;default:zt(t,i,h,b,s,null)}i=p,s=v,t.multiple=!!r,i!=null?Ia(t,!!r,i,!1):s!=null&&Ia(t,!!r,s,!0);return;case"textarea":ct("invalid",t),p=h=r=null;for(v in s)if(s.hasOwnProperty(v)&&(b=s[v],b!=null))switch(v){case"value":r=b;break;case"defaultValue":h=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:zt(t,i,v,b,s,null)}ed(t,r,h,p);return;case"option":for(E in s)s.hasOwnProperty(E)&&(r=s[E],r!=null)&&(E==="selected"?t.selected=r&&typeof r!="function"&&typeof r!="symbol":zt(t,i,E,r,s,null));return;case"dialog":ct("beforetoggle",t),ct("toggle",t),ct("cancel",t),ct("close",t);break;case"iframe":case"object":ct("load",t);break;case"video":case"audio":for(r=0;r<vl.length;r++)ct(vl[r],t);break;case"image":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"embed":case"source":case"link":ct("error",t),ct("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(D in s)if(s.hasOwnProperty(D)&&(r=s[D],r!=null))switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:zt(t,i,D,r,s,null)}return;default:if(mu(i)){for(L in s)s.hasOwnProperty(L)&&(r=s[L],r!==void 0&&ih(t,i,L,r,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(r=s[b],r!=null&&zt(t,i,b,r,s,null))}function s_(t,i,s,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,v=null,b=null,E=null,D=null,L=null;for(k in s){var X=s[k];if(s.hasOwnProperty(k)&&X!=null)switch(k){case"checked":break;case"value":break;case"defaultValue":E=X;default:r.hasOwnProperty(k)||zt(t,i,k,null,r,X)}}for(var U in r){var k=r[U];if(X=s[U],r.hasOwnProperty(U)&&(k!=null||X!=null))switch(U){case"type":p=k;break;case"name":h=k;break;case"checked":D=k;break;case"defaultChecked":L=k;break;case"value":v=k;break;case"defaultValue":b=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(137,i));break;default:k!==X&&zt(t,i,U,k,r,X)}}pu(t,v,b,E,D,L,p,h);return;case"select":k=v=b=U=null;for(p in s)if(E=s[p],s.hasOwnProperty(p)&&E!=null)switch(p){case"value":break;case"multiple":k=E;default:r.hasOwnProperty(p)||zt(t,i,p,null,r,E)}for(h in r)if(p=r[h],E=s[h],r.hasOwnProperty(h)&&(p!=null||E!=null))switch(h){case"value":U=p;break;case"defaultValue":b=p;break;case"multiple":v=p;default:p!==E&&zt(t,i,h,p,r,E)}i=b,s=v,r=k,U!=null?Ia(t,!!s,U,!1):!!r!=!!s&&(i!=null?Ia(t,!!s,i,!0):Ia(t,!!s,s?[]:"",!1));return;case"textarea":k=U=null;for(b in s)if(h=s[b],s.hasOwnProperty(b)&&h!=null&&!r.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:zt(t,i,b,null,r,h)}for(v in r)if(h=r[v],p=s[v],r.hasOwnProperty(v)&&(h!=null||p!=null))switch(v){case"value":U=h;break;case"defaultValue":k=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==p&&zt(t,i,v,h,r,p)}td(t,U,k);return;case"option":for(var W in s)U=s[W],s.hasOwnProperty(W)&&U!=null&&!r.hasOwnProperty(W)&&(W==="selected"?t.selected=!1:zt(t,i,W,null,r,U));for(E in r)U=r[E],k=s[E],r.hasOwnProperty(E)&&U!==k&&(U!=null||k!=null)&&(E==="selected"?t.selected=U&&typeof U!="function"&&typeof U!="symbol":zt(t,i,E,U,r,k));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in s)U=s[tt],s.hasOwnProperty(tt)&&U!=null&&!r.hasOwnProperty(tt)&&zt(t,i,tt,null,r,U);for(D in r)if(U=r[D],k=s[D],r.hasOwnProperty(D)&&U!==k&&(U!=null||k!=null))switch(D){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(a(137,i));break;default:zt(t,i,D,U,r,k)}return;default:if(mu(i)){for(var Ht in s)U=s[Ht],s.hasOwnProperty(Ht)&&U!==void 0&&!r.hasOwnProperty(Ht)&&ih(t,i,Ht,void 0,r,U);for(L in r)U=r[L],k=s[L],!r.hasOwnProperty(L)||U===k||U===void 0&&k===void 0||ih(t,i,L,U,r,k);return}}for(var O in s)U=s[O],s.hasOwnProperty(O)&&U!=null&&!r.hasOwnProperty(O)&&zt(t,i,O,null,r,U);for(X in r)U=r[X],k=s[X],!r.hasOwnProperty(X)||U===k||U==null&&k==null||zt(t,i,X,U,r,k)}function a0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function l_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,s=performance.getEntriesByType("resource"),r=0;r<s.length;r++){var h=s[r],p=h.transferSize,v=h.initiatorType,b=h.duration;if(p&&b&&a0(v)){for(v=0,b=h.responseEnd,r+=1;r<s.length;r++){var E=s[r],D=E.startTime;if(D>b)break;var L=E.transferSize,X=E.initiatorType;L&&a0(X)&&(E=E.responseEnd,v+=L*(E<b?1:(b-D)/(E-D)))}if(--r,i+=8*(p+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var nh=null,ah=null;function lo(t){return t.nodeType===9?t:t.ownerDocument}function s0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l0(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function sh(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lh=null;function r_(){var t=window.event;return t&&t.type==="popstate"?t===lh?!1:(lh=t,!0):(lh=null,!1)}var r0=typeof setTimeout=="function"?setTimeout:void 0,o_=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,u_=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(t){return o0.resolve(null).then(t).catch(c_)}:r0;function c_(t){setTimeout(function(){throw t})}function zn(t){return t==="head"}function u0(t,i){var s=i,r=0;do{var h=s.nextSibling;if(t.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"||s==="/&"){if(r===0){t.removeChild(h),ys(i);return}r--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")r++;else if(s==="html")Sl(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Sl(s);for(var p=s.firstChild;p;){var v=p.nextSibling,b=p.nodeName;p[Ls]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&p.rel.toLowerCase()==="stylesheet"||s.removeChild(p),p=v}}else s==="body"&&Sl(t.ownerDocument.body);s=h}while(s);ys(i)}function c0(t,i){var s=t;t=0;do{var r=s.nextSibling;if(s.nodeType===1?i?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(i?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=r}while(s)}function rh(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":rh(s),fu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function h_(t,i,s,r){for(;t.nodeType===1;){var h=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Ls])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=oi(t.nextSibling),t===null)break}return null}function f_(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=oi(t.nextSibling),t===null))return null;return t}function h0(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=oi(t.nextSibling),t===null))return null;return t}function oh(t){return t.data==="$?"||t.data==="$~"}function uh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function d_(t,i){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||s.readyState!=="loading")i();else{var r=function(){i(),s.removeEventListener("DOMContentLoaded",r)};s.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function oi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var ch=null;function f0(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(i===0)return oi(t.nextSibling);i--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||i++}t=t.nextSibling}return null}function d0(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(i===0)return t;i--}else s!=="/$"&&s!=="/&"||i++}t=t.previousSibling}return null}function p0(t,i,s){switch(i=lo(s),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Sl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);fu(t)}var ui=new Map,g0=new Set;function ro(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $i=P.d;P.d={f:p_,r:g_,D:m_,C:y_,L:v_,m:__,X:x_,S:S_,M:b_};function p_(){var t=$i.f(),i=Jr();return t||i}function g_(t){var i=Ba(t);i!==null&&i.tag===5&&i.type==="form"?Dp(i):$i.r(t)}var ps=typeof document>"u"?null:document;function m0(t,i,s){var r=ps;if(r&&typeof i=="string"&&i){var h=ei(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),g0.has(h)||(g0.add(h),t={rel:t,crossOrigin:s,href:i},r.querySelector(h)===null&&(i=r.createElement("link"),ge(i,"link",t),le(i),r.head.appendChild(i)))}}function m_(t){$i.D(t),m0("dns-prefetch",t,null)}function y_(t,i){$i.C(t,i),m0("preconnect",t,i)}function v_(t,i,s){$i.L(t,i,s);var r=ps;if(r&&t&&i){var h='link[rel="preload"][as="'+ei(i)+'"]';i==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+ei(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+ei(s.imageSizes)+'"]')):h+='[href="'+ei(t)+'"]';var p=h;switch(i){case"style":p=gs(t);break;case"script":p=ms(t)}ui.has(p)||(t=y({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),ui.set(p,t),r.querySelector(h)!==null||i==="style"&&r.querySelector(xl(p))||i==="script"&&r.querySelector(bl(p))||(i=r.createElement("link"),ge(i,"link",t),le(i),r.head.appendChild(i)))}}function __(t,i){$i.m(t,i);var s=ps;if(s&&t){var r=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ei(r)+'"][href="'+ei(t)+'"]',p=h;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ms(t)}if(!ui.has(p)&&(t=y({rel:"modulepreload",href:t},i),ui.set(p,t),s.querySelector(h)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(bl(p)))return}r=s.createElement("link"),ge(r,"link",t),le(r),s.head.appendChild(r)}}}function S_(t,i,s){$i.S(t,i,s);var r=ps;if(r&&t){var h=ka(r).hoistableStyles,p=gs(t);i=i||"default";var v=h.get(p);if(!v){var b={loading:0,preload:null};if(v=r.querySelector(xl(p)))b.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":i},s),(s=ui.get(p))&&hh(t,s);var E=v=r.createElement("link");le(E),ge(E,"link",t),E._p=new Promise(function(D,L){E.onload=D,E.onerror=L}),E.addEventListener("load",function(){b.loading|=1}),E.addEventListener("error",function(){b.loading|=2}),b.loading|=4,oo(v,i,r)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(p,v)}}}function x_(t,i){$i.X(t,i);var s=ps;if(s&&t){var r=ka(s).hoistableScripts,h=ms(t),p=r.get(h);p||(p=s.querySelector(bl(h)),p||(t=y({src:t,async:!0},i),(i=ui.get(h))&&fh(t,i),p=s.createElement("script"),le(p),ge(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(h,p))}}function b_(t,i){$i.M(t,i);var s=ps;if(s&&t){var r=ka(s).hoistableScripts,h=ms(t),p=r.get(h);p||(p=s.querySelector(bl(h)),p||(t=y({src:t,async:!0,type:"module"},i),(i=ui.get(h))&&fh(t,i),p=s.createElement("script"),le(p),ge(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(h,p))}}function y0(t,i,s,r){var h=(h=Ei.current)?ro(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=gs(s.href),s=ka(h).hoistableStyles,r=s.get(i),r||(r={type:"style",instance:null,count:0,state:null},s.set(i,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=gs(s.href);var p=ka(h).hoistableStyles,v=p.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,v),(p=h.querySelector(xl(t)))&&!p._p&&(v.instance=p,v.state.loading=5),ui.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ui.set(t,s),p||T_(h,t,s,v.state))),i&&r===null)throw Error(a(528,""));return v}if(i&&r!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ms(s),s=ka(h).hoistableScripts,r=s.get(i),r||(r={type:"script",instance:null,count:0,state:null},s.set(i,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function gs(t){return'href="'+ei(t)+'"'}function xl(t){return'link[rel="stylesheet"]['+t+"]"}function v0(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function T_(t,i,s,r){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?r.loading=1:(i=t.createElement("link"),r.preload=i,i.addEventListener("load",function(){return r.loading|=1}),i.addEventListener("error",function(){return r.loading|=2}),ge(i,"link",s),le(i),t.head.appendChild(i))}function ms(t){return'[src="'+ei(t)+'"]'}function bl(t){return"script[async]"+t}function _0(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var r=t.querySelector('style[data-href~="'+ei(s.href)+'"]');if(r)return i.instance=r,le(r),r;var h=y({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),le(r),ge(r,"style",h),oo(r,s.precedence,t),i.instance=r;case"stylesheet":h=gs(s.href);var p=t.querySelector(xl(h));if(p)return i.state.loading|=4,i.instance=p,le(p),p;r=v0(s),(h=ui.get(h))&&hh(r,h),p=(t.ownerDocument||t).createElement("link"),le(p);var v=p;return v._p=new Promise(function(b,E){v.onload=b,v.onerror=E}),ge(p,"link",r),i.state.loading|=4,oo(p,s.precedence,t),i.instance=p;case"script":return p=ms(s.src),(h=t.querySelector(bl(p)))?(i.instance=h,le(h),h):(r=s,(h=ui.get(p))&&(r=y({},s),fh(r,h)),t=t.ownerDocument||t,h=t.createElement("script"),le(h),ge(h,"link",r),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(r=i.instance,i.state.loading|=4,oo(r,s.precedence,t));return i.instance}function oo(t,i,s){for(var r=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=r.length?r[r.length-1]:null,p=h,v=0;v<r.length;v++){var b=r[v];if(b.dataset.precedence===i)p=b;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function hh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function fh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var uo=null;function S0(t,i,s){if(uo===null){var r=new Map,h=uo=new Map;h.set(s,r)}else h=uo,r=h.get(s),r||(r=new Map,h.set(s,r));if(r.has(t))return r;for(r.set(t,null),s=s.getElementsByTagName(t),h=0;h<s.length;h++){var p=s[h];if(!(p[Ls]||p[he]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(i)||"";v=t+v;var b=r.get(v);b?b.push(p):r.set(v,[p])}}return r}function x0(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function M_(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function b0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function w_(t,i,s,r){if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=gs(r.href),p=i.querySelector(xl(h));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=co.bind(t),i.then(t,t)),s.state.loading|=4,s.instance=p,le(p);return}p=i.ownerDocument||i,r=v0(r),(h=ui.get(h))&&hh(r,h),p=p.createElement("link"),le(p);var v=p;v._p=new Promise(function(b,E){v.onload=b,v.onerror=E}),ge(p,"link",r),s.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=co.bind(t),i.addEventListener("load",s),i.addEventListener("error",s))}}var dh=0;function E_(t,i){return t.stylesheets&&t.count===0&&fo(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var r=setTimeout(function(){if(t.stylesheets&&fo(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+i);0<t.imgBytes&&dh===0&&(dh=62500*l_());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&fo(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>dh?50:800)+i);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(h)}}:null}function co(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fo(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ho=null;function fo(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ho=new Map,i.forEach(A_,t),ho=null,co.call(t))}function A_(t,i){if(!(i.state.loading&4)){var s=ho.get(t);if(s)var r=s.get(null);else{s=new Map,ho.set(t,s);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var v=h[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(s.set(v.dataset.precedence,v),r=v)}r&&s.set(null,r)}h=i.instance,v=h.getAttribute("data-precedence"),p=s.get(v)||r,p===r&&s.set(null,h),s.set(v,h),this.count++,r=co.bind(this),h.addEventListener("load",r),h.addEventListener("error",r),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Tl={$$typeof:z,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function C_(t,i,s,r,h,p,v,b,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ou(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ou(0),this.hiddenUpdates=ou(null),this.identifierPrefix=r,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function T0(t,i,s,r,h,p,v,b,E,D,L,X){return t=new C_(t,i,s,v,E,D,L,X,b),i=1,p===!0&&(i|=24),p=Ie(3,null,null,i),t.current=p,p.stateNode=t,i=Pu(),i.refCount++,t.pooledCache=i,i.refCount++,p.memoizedState={element:r,isDehydrated:s,cache:i},Ku(p),t}function M0(t){return t?(t=Qa,t):Qa}function w0(t,i,s,r,h,p){h=M0(h),r.context===null?r.context=h:r.pendingContext=h,r=_n(i),r.payload={element:s},p=p===void 0?null:p,p!==null&&(r.callback=p),s=Sn(t,r,i),s!==null&&(Ce(s,t,i),el(s,t,i))}function E0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function ph(t,i){E0(t,i),(t=t.alternate)&&E0(t,i)}function A0(t){if(t.tag===13||t.tag===31){var i=ia(t,67108864);i!==null&&Ce(i,t,67108864),ph(t,67108864)}}function C0(t){if(t.tag===13||t.tag===31){var i=je();i=uu(i);var s=ia(t,i);s!==null&&Ce(s,t,i),ph(t,i)}}var po=!0;function O_(t,i,s,r){var h=R.T;R.T=null;var p=P.p;try{P.p=2,gh(t,i,s,r)}finally{P.p=p,R.T=h}}function z_(t,i,s,r){var h=R.T;R.T=null;var p=P.p;try{P.p=8,gh(t,i,s,r)}finally{P.p=p,R.T=h}}function gh(t,i,s,r){if(po){var h=mh(r);if(h===null)eh(t,i,r,go,s),z0(t,r);else if(D_(h,t,i,s,r))r.stopPropagation();else if(z0(t,r),i&4&&-1<H_.indexOf(t)){for(;h!==null;){var p=Ba(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Fn(p.pendingLanes);if(v!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var E=1<<31-ke(v);b.entanglements[1]|=E,v&=~E}zi(p),(Tt&6)===0&&(Kr=Ne()+500,yl(0))}}break;case 31:case 13:b=ia(p,2),b!==null&&Ce(b,p,2),Jr(),ph(p,2)}if(p=mh(r),p===null&&eh(t,i,r,go,s),p===h)break;h=p}h!==null&&r.stopPropagation()}else eh(t,i,r,null,s)}}function mh(t){return t=vu(t),yh(t)}var go=null;function yh(t){if(go=null,t=Na(t),t!==null){var i=o(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=u(i),t!==null)return t;t=null}else if(s===31){if(t=c(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return go=t,null}function O0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mv()){case kf:return 2;case Lf:return 8;case nr:case yv:return 32;case If:return 268435456;default:return 32}default:return 32}}var vh=!1,Hn=null,Dn=null,Un=null,Ml=new Map,wl=new Map,Rn=[],H_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function z0(t,i){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Ml.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(i.pointerId)}}function El(t,i,s,r,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:i,domEventName:s,eventSystemFlags:r,nativeEvent:p,targetContainers:[h]},i!==null&&(i=Ba(i),i!==null&&A0(i)),t):(t.eventSystemFlags|=r,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function D_(t,i,s,r,h){switch(i){case"focusin":return Hn=El(Hn,t,i,s,r,h),!0;case"dragenter":return Dn=El(Dn,t,i,s,r,h),!0;case"mouseover":return Un=El(Un,t,i,s,r,h),!0;case"pointerover":var p=h.pointerId;return Ml.set(p,El(Ml.get(p)||null,t,i,s,r,h)),!0;case"gotpointercapture":return p=h.pointerId,wl.set(p,El(wl.get(p)||null,t,i,s,r,h)),!0}return!1}function H0(t){var i=Na(t.target);if(i!==null){var s=o(i);if(s!==null){if(i=s.tag,i===13){if(i=u(s),i!==null){t.blockedOn=i,Vf(t.priority,function(){C0(s)});return}}else if(i===31){if(i=c(s),i!==null){t.blockedOn=i,Vf(t.priority,function(){C0(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mo(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=mh(t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);yu=r,s.target.dispatchEvent(r),yu=null}else return i=Ba(s),i!==null&&A0(i),t.blockedOn=s,!1;i.shift()}return!0}function D0(t,i,s){mo(t)&&s.delete(i)}function U_(){vh=!1,Hn!==null&&mo(Hn)&&(Hn=null),Dn!==null&&mo(Dn)&&(Dn=null),Un!==null&&mo(Un)&&(Un=null),Ml.forEach(D0),wl.forEach(D0)}function yo(t,i){t.blockedOn===i&&(t.blockedOn=null,vh||(vh=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,U_)))}var vo=null;function U0(t){vo!==t&&(vo=t,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){vo===t&&(vo=null);for(var i=0;i<t.length;i+=3){var s=t[i],r=t[i+1],h=t[i+2];if(typeof r!="function"){if(yh(r||s)===null)continue;break}var p=Ba(s);p!==null&&(t.splice(i,3),i-=3,mc(p,{pending:!0,data:h,method:s.method,action:r},r,h))}}))}function ys(t){function i(E){return yo(E,t)}Hn!==null&&yo(Hn,t),Dn!==null&&yo(Dn,t),Un!==null&&yo(Un,t),Ml.forEach(i),wl.forEach(i);for(var s=0;s<Rn.length;s++){var r=Rn[s];r.blockedOn===t&&(r.blockedOn=null)}for(;0<Rn.length&&(s=Rn[0],s.blockedOn===null);)H0(s),s.blockedOn===null&&Rn.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(r=0;r<s.length;r+=3){var h=s[r],p=s[r+1],v=h[be]||null;if(typeof p=="function")v||U0(s);else if(v){var b=null;if(p&&p.hasAttribute("formAction")){if(h=p,v=p[be]||null)b=v.formAction;else if(yh(h)!==null)continue}else b=v.action;typeof b=="function"?s[r+1]=b:(s.splice(r,3),r-=3),U0(s)}}}function R0(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),r||setTimeout(s,20)}function s(){if(!r&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(s,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function _h(t){this._internalRoot=t}_o.prototype.render=_h.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,r=je();w0(s,r,t,i,null,null)},_o.prototype.unmount=_h.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;w0(t.current,2,null,t,null,null),Jr(),i[Ra]=null}};function _o(t){this._internalRoot=t}_o.prototype.unstable_scheduleHydration=function(t){if(t){var i=jf();t={blockedOn:null,target:t,priority:i};for(var s=0;s<Rn.length&&i!==0&&i<Rn[s].priority;s++);Rn.splice(s,0,t),s===0&&H0(t)}};var N0=e.version;if(N0!=="19.2.3")throw Error(a(527,N0,"19.2.3"));P.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(i),t=t!==null?m(t):null,t=t===null?null:t.stateNode,t};var R_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{Ns=So.inject(R_),Be=So}catch{}}return Cl.createRoot=function(t,i){if(!l(t))throw Error(a(299));var s=!1,r="",h=Yp,p=Xp,v=jp;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=T0(t,1,!1,null,null,s,r,null,h,p,v,R0),t[Ra]=i.current,th(t),new _h(i)},Cl.hydrateRoot=function(t,i,s){if(!l(t))throw Error(a(299));var r=!1,h="",p=Yp,v=Xp,b=jp,E=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(E=s.formState)),i=T0(t,1,!0,i,s??null,r,h,E,p,v,b,R0),i.context=M0(null),s=i.current,r=je(),r=uu(r),h=_n(r),h.callback=null,Sn(s,h,r),s=r,i.current.lanes=s,ks(i,s),zi(i),t[Ra]=i.current,th(t),new _o(i)},Cl.version="19.2.3",Cl}var q0;function tS(){if(q0)return xh.exports;q0=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(e){console.error(e)}}return d(),xh.exports=$_(),xh.exports}var eS=tS();const iS=Nm(eS);function en(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function km(d,e){d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.__proto__=e}var Fe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Os={duration:.5,overwrite:!1,delay:0},cf,ye,It,mi=1e8,Rt=1/mi,kh=Math.PI*2,nS=kh/4,aS=0,Lm=Math.sqrt,sS=Math.cos,lS=Math.sin,ue=function(e){return typeof e=="string"},Zt=function(e){return typeof e=="function"},on=function(e){return typeof e=="number"},hf=function(e){return typeof e>"u"},Ni=function(e){return typeof e=="object"},ze=function(e){return e!==!1},ff=function(){return typeof window<"u"},xo=function(e){return Zt(e)||ue(e)},Im=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_e=Array.isArray,rS=/random\([^)]+\)/g,oS=/,\s*/g,Y0=/(?:-?\.?\d|\.)+/gi,Gm=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,bs=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Mh=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,qm=/[+-]=-?[.\d]+/,uS=/[^,'"\[\]\s]+/gi,cS=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Xt,Hi,Lh,df,Je={},Uo={},Ym,Xm=function(e){return(Uo=zs(e,Je))&&Re},pf=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},Vl=function(e,n){return!n&&console.warn(e)},jm=function(e,n){return e&&(Je[e]=n)&&Uo&&(Uo[e]=n)||Je},Pl=function(){return 0},hS={suppressEvents:!0,isStart:!0,kill:!1},Ao={suppressEvents:!0,kill:!1},fS={suppressEvents:!0},gf={},jn=[],Ih={},Vm,Pe={},wh={},X0=30,Co=[],mf="",yf=function(e){var n=e[0],a,l;if(Ni(n)||Zt(n)||(e=[e]),!(a=(n._gsap||{}).harness)){for(l=Co.length;l--&&!Co[l].targetTest(n););a=Co[l]}for(l=e.length;l--;)e[l]&&(e[l]._gsap||(e[l]._gsap=new gy(e[l],a)))||e.splice(l,1);return e},Ta=function(e){return e._gsap||yf(yi(e))[0]._gsap},Pm=function(e,n,a){return(a=e[n])&&Zt(a)?e[n]():hf(a)&&e.getAttribute&&e.getAttribute(n)||a},He=function(e,n){return(e=e.split(",")).forEach(n)||e},Ft=function(e){return Math.round(e*1e5)/1e5||0},Yt=function(e){return Math.round(e*1e7)/1e7||0},ws=function(e,n){var a=n.charAt(0),l=parseFloat(n.substr(2));return e=parseFloat(e),a==="+"?e+l:a==="-"?e-l:a==="*"?e*l:e/l},dS=function(e,n){for(var a=n.length,l=0;e.indexOf(n[l])<0&&++l<a;);return l<a},Ro=function(){var e=jn.length,n=jn.slice(0),a,l;for(Ih={},jn.length=0,a=0;a<e;a++)l=n[a],l&&l._lazy&&(l.render(l._lazy[0],l._lazy[1],!0)._lazy=0)},vf=function(e){return!!(e._initted||e._startAt||e.add)},Qm=function(e,n,a,l){jn.length&&!ye&&Ro(),e.render(n,a,!!(ye&&n<0&&vf(e))),jn.length&&!ye&&Ro()},Zm=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(uS).length<2?n:ue(e)?e.trim():e},Wm=function(e){return e},$e=function(e,n){for(var a in n)a in e||(e[a]=n[a]);return e},pS=function(e){return function(n,a){for(var l in a)l in n||l==="duration"&&e||l==="ease"||(n[l]=a[l])}},zs=function(e,n){for(var a in n)e[a]=n[a];return e},j0=function d(e,n){for(var a in n)a!=="__proto__"&&a!=="constructor"&&a!=="prototype"&&(e[a]=Ni(n[a])?d(e[a]||(e[a]={}),n[a]):n[a]);return e},No=function(e,n){var a={},l;for(l in e)l in n||(a[l]=e[l]);return a},Il=function(e){var n=e.parent||Xt,a=e.keyframes?pS(_e(e.keyframes)):$e;if(ze(e.inherit))for(;n;)a(e,n.vars.defaults),n=n.parent||n._dp;return e},gS=function(e,n){for(var a=e.length,l=a===n.length;l&&a--&&e[a]===n[a];);return a<0},Km=function(e,n,a,l,o){var u=e[l],c;if(o)for(c=n[o];u&&u[o]>c;)u=u._prev;return u?(n._next=u._next,u._next=n):(n._next=e[a],e[a]=n),n._next?n._next._prev=n:e[l]=n,n._prev=u,n.parent=n._dp=e,n},Zo=function(e,n,a,l){a===void 0&&(a="_first"),l===void 0&&(l="_last");var o=n._prev,u=n._next;o?o._next=u:e[a]===n&&(e[a]=u),u?u._prev=o:e[l]===n&&(e[l]=o),n._next=n._prev=n.parent=null},Pn=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ma=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var a=e;a;)a._dirty=1,a=a.parent;return e},mS=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},Gh=function(e,n,a,l){return e._startAt&&(ye?e._startAt.revert(Ao):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,l))},yS=function d(e){return!e||e._ts&&d(e.parent)},V0=function(e){return e._repeat?Hs(e._tTime,e=e.duration()+e._rDelay)*e:0},Hs=function(e,n){var a=Math.floor(e=Yt(e/n));return e&&a===e?a-1:a},Bo=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Wo=function(e){return e._end=Yt(e._start+(e._tDur/Math.abs(e._ts||e._rts||Rt)||0))},Ko=function(e,n){var a=e._dp;return a&&a.smoothChildTiming&&e._ts&&(e._start=Yt(a._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),Wo(e),a._dirty||Ma(a,e)),e},Fm=function(e,n){var a;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(a=Bo(e.rawTime(),n),(!n._dur||er(0,n.totalDuration(),a)-n._tTime>Rt)&&n.render(a,!0)),Ma(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(a=e;a._dp;)a.rawTime()>=0&&a.totalTime(a._tTime),a=a._dp;e._zTime=-Rt}},Ui=function(e,n,a,l){return n.parent&&Pn(n),n._start=Yt((on(a)?a:a||e!==Xt?ci(e,a,n):e._time)+n._delay),n._end=Yt(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),Km(e,n,"_first","_last",e._sort?"_start":0),qh(n)||(e._recent=n),l||Fm(e,n),e._ts<0&&Ko(e,e._tTime),e},Jm=function(e,n){return(Je.ScrollTrigger||pf("scrollTrigger",n))&&Je.ScrollTrigger.create(n,e)},$m=function(e,n,a,l,o){if(Sf(e,n,o),!e._initted)return 1;if(!a&&e._pt&&!ye&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Vm!==Qe.frame)return jn.push(e),e._lazy=[o,l],1},vS=function d(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||d(n))},qh=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},_S=function(e,n,a,l){var o=e.ratio,u=n<0||!n&&(!e._start&&vS(e)&&!(!e._initted&&qh(e))||(e._ts<0||e._dp._ts<0)&&!qh(e))?0:1,c=e._rDelay,f=0,g,m,y;if(c&&e._repeat&&(f=er(0,e._tDur,n),m=Hs(f,c),e._yoyo&&m&1&&(u=1-u),m!==Hs(e._tTime,c)&&(o=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==o||ye||l||e._zTime===Rt||!n&&e._zTime){if(!e._initted&&$m(e,n,l,a,f))return;for(y=e._zTime,e._zTime=n||(a?Rt:0),a||(a=n&&!y),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=f,g=e._pt;g;)g.r(u,g.d),g=g._next;n<0&&Gh(e,n,a,!0),e._onUpdate&&!a&&Ze(e,"onUpdate"),f&&e._repeat&&!a&&e.parent&&Ze(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===u&&(u&&Pn(e,1),!a&&!ye&&(Ze(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},SS=function(e,n,a){var l;if(a>n)for(l=e._first;l&&l._start<=a;){if(l.data==="isPause"&&l._start>n)return l;l=l._next}else for(l=e._last;l&&l._start>=a;){if(l.data==="isPause"&&l._start<n)return l;l=l._prev}},Ds=function(e,n,a,l){var o=e._repeat,u=Yt(n)||0,c=e._tTime/e._tDur;return c&&!l&&(e._time*=u/e._dur),e._dur=u,e._tDur=o?o<0?1e10:Yt(u*(o+1)+e._rDelay*o):u,c>0&&!l&&Ko(e,e._tTime=e._tDur*c),e.parent&&Wo(e),a||Ma(e.parent,e),e},P0=function(e){return e instanceof xe?Ma(e):Ds(e,e._dur)},xS={_start:0,endTime:Pl,totalDuration:Pl},ci=function d(e,n,a){var l=e.labels,o=e._recent||xS,u=e.duration()>=mi?o.endTime(!1):e._dur,c,f,g;return ue(n)&&(isNaN(n)||n in l)?(f=n.charAt(0),g=n.substr(-1)==="%",c=n.indexOf("="),f==="<"||f===">"?(c>=0&&(n=n.replace(/=/,"")),(f==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(n.substr(1))||0)*(g?(c<0?o:a).totalDuration()/100:1)):c<0?(n in l||(l[n]=u),l[n]):(f=parseFloat(n.charAt(c-1)+n.substr(c+1)),g&&a&&(f=f/100*(_e(a)?a[0]:a).totalDuration()),c>1?d(e,n.substr(0,c-1),a)+f:u+f)):n==null?u:+n},Gl=function(e,n,a){var l=on(n[1]),o=(l?2:1)+(e<2?0:1),u=n[o],c,f;if(l&&(u.duration=n[1]),u.parent=a,e){for(c=u,f=a;f&&!("immediateRender"in c);)c=f.vars.defaults||{},f=ze(f.vars.inherit)&&f.parent;u.immediateRender=ze(c.immediateRender),e<2?u.runBackwards=1:u.startAt=n[o-1]}return new ie(n[0],u,n[o+1])},Wn=function(e,n){return e||e===0?n(e):n},er=function(e,n,a){return a<e?e:a>n?n:a},ve=function(e,n){return!ue(e)||!(n=cS.exec(e))?"":n[1]},bS=function(e,n,a){return Wn(a,function(l){return er(e,n,l)})},Yh=[].slice,ty=function(e,n){return e&&Ni(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&Ni(e[0]))&&!e.nodeType&&e!==Hi},TS=function(e,n,a){return a===void 0&&(a=[]),e.forEach(function(l){var o;return ue(l)&&!n||ty(l,1)?(o=a).push.apply(o,yi(l)):a.push(l)})||a},yi=function(e,n,a){return It&&!n&&It.selector?It.selector(e):ue(e)&&!a&&(Lh||!Us())?Yh.call((n||df).querySelectorAll(e),0):_e(e)?TS(e,a):ty(e)?Yh.call(e,0):e?[e]:[]},Xh=function(e){return e=yi(e)[0]||Vl("Invalid scope")||{},function(n){var a=e.current||e.nativeElement||e;return yi(n,a.querySelectorAll?a:a===e?Vl("Invalid scope")||df.createElement("div"):e)}},ey=function(e){return e.sort(function(){return .5-Math.random()})},iy=function(e){if(Zt(e))return e;var n=Ni(e)?e:{each:e},a=wa(n.ease),l=n.from||0,o=parseFloat(n.base)||0,u={},c=l>0&&l<1,f=isNaN(l)||c,g=n.axis,m=l,y=l;return ue(l)?m=y={center:.5,edges:.5,end:1}[l]||0:!c&&f&&(m=l[0],y=l[1]),function(_,S,T){var x=(T||n).length,M=u[x],w,C,z,B,N,G,Y,j,I;if(!M){if(I=n.grid==="auto"?0:(n.grid||[1,mi])[1],!I){for(Y=-mi;Y<(Y=T[I++].getBoundingClientRect().left)&&I<x;);I<x&&I--}for(M=u[x]=[],w=f?Math.min(I,x)*m-.5:l%I,C=I===mi?0:f?x*y/I-.5:l/I|0,Y=0,j=mi,G=0;G<x;G++)z=G%I-w,B=C-(G/I|0),M[G]=N=g?Math.abs(g==="y"?B:z):Lm(z*z+B*B),N>Y&&(Y=N),N<j&&(j=N);l==="random"&&ey(M),M.max=Y-j,M.min=j,M.v=x=(parseFloat(n.amount)||parseFloat(n.each)*(I>x?x-1:g?g==="y"?x/I:I:Math.max(I,x/I))||0)*(l==="edges"?-1:1),M.b=x<0?o-x:o,M.u=ve(n.amount||n.each)||0,a=a&&x<0?fy(a):a}return x=(M[_]-M.min)/M.max||0,Yt(M.b+(a?a(x):x)*M.v)+M.u}},jh=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(a){var l=Yt(Math.round(parseFloat(a)/e)*e*n);return(l-l%1)/n+(on(a)?0:ve(a))}},ny=function(e,n){var a=_e(e),l,o;return!a&&Ni(e)&&(l=a=e.radius||mi,e.values?(e=yi(e.values),(o=!on(e[0]))&&(l*=l)):e=jh(e.increment)),Wn(n,a?Zt(e)?function(u){return o=e(u),Math.abs(o-u)<=l?o:u}:function(u){for(var c=parseFloat(o?u.x:u),f=parseFloat(o?u.y:0),g=mi,m=0,y=e.length,_,S;y--;)o?(_=e[y].x-c,S=e[y].y-f,_=_*_+S*S):_=Math.abs(e[y]-c),_<g&&(g=_,m=y);return m=!l||g<=l?e[m]:u,o||m===u||on(u)?m:m+ve(u)}:jh(e))},ay=function(e,n,a,l){return Wn(_e(e)?!n:a===!0?!!(a=0):!l,function(){return _e(e)?e[~~(Math.random()*e.length)]:(a=a||1e-5)&&(l=a<1?Math.pow(10,(a+"").length-2):1)&&Math.floor(Math.round((e-a/2+Math.random()*(n-e+a*.99))/a)*a*l)/l})},MS=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return function(l){return n.reduce(function(o,u){return u(o)},l)}},wS=function(e,n){return function(a){return e(parseFloat(a))+(n||ve(a))}},ES=function(e,n,a){return ly(e,n,0,1,a)},sy=function(e,n,a){return Wn(a,function(l){return e[~~n(l)]})},AS=function d(e,n,a){var l=n-e;return _e(e)?sy(e,d(0,e.length),n):Wn(a,function(o){return(l+(o-e)%l)%l+e})},CS=function d(e,n,a){var l=n-e,o=l*2;return _e(e)?sy(e,d(0,e.length-1),n):Wn(a,function(u){return u=(o+(u-e)%o)%o||0,e+(u>l?o-u:u)})},Ql=function(e){return e.replace(rS,function(n){var a=n.indexOf("[")+1,l=n.substring(a||7,a?n.indexOf("]"):n.length-1).split(oS);return ay(a?l:+l[0],a?0:+l[1],+l[2]||1e-5)})},ly=function(e,n,a,l,o){var u=n-e,c=l-a;return Wn(o,function(f){return a+((f-e)/u*c||0)})},OS=function d(e,n,a,l){var o=isNaN(e+n)?0:function(S){return(1-S)*e+S*n};if(!o){var u=ue(e),c={},f,g,m,y,_;if(a===!0&&(l=1)&&(a=null),u)e={p:e},n={p:n};else if(_e(e)&&!_e(n)){for(m=[],y=e.length,_=y-2,g=1;g<y;g++)m.push(d(e[g-1],e[g]));y--,o=function(T){T*=y;var x=Math.min(_,~~T);return m[x](T-x)},a=n}else l||(e=zs(_e(e)?[]:{},e));if(!m){for(f in n)_f.call(c,e,f,"get",n[f]);o=function(T){return Tf(T,c)||(u?e.p:e)}}}return Wn(a,o)},Q0=function(e,n,a){var l=e.labels,o=mi,u,c,f;for(u in l)c=l[u]-n,c<0==!!a&&c&&o>(c=Math.abs(c))&&(f=u,o=c);return f},Ze=function(e,n,a){var l=e.vars,o=l[n],u=It,c=e._ctx,f,g,m;if(o)return f=l[n+"Params"],g=l.callbackScope||e,a&&jn.length&&Ro(),c&&(It=c),m=f?o.apply(g,f):o.call(g),It=u,m},Rl=function(e){return Pn(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ye),e.progress()<1&&Ze(e,"onInterrupt"),e},Ts,ry=[],oy=function(e){if(e)if(e=!e.name&&e.default||e,ff()||e.headless){var n=e.name,a=Zt(e),l=n&&!a&&e.init?function(){this._props=[]}:e,o={init:Pl,render:Tf,add:_f,kill:VS,modifier:jS,rawVars:0},u={targetTest:0,get:0,getSetter:bf,aliases:{},register:0};if(Us(),e!==l){if(Pe[n])return;$e(l,$e(No(e,o),u)),zs(l.prototype,zs(o,No(e,u))),Pe[l.prop=n]=l,e.targetTest&&(Co.push(l),gf[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}jm(n,l),e.register&&e.register(Re,l,De)}else ry.push(e)},Ut=255,Nl={aqua:[0,Ut,Ut],lime:[0,Ut,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ut],navy:[0,0,128],white:[Ut,Ut,Ut],olive:[128,128,0],yellow:[Ut,Ut,0],orange:[Ut,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ut,0,0],pink:[Ut,192,203],cyan:[0,Ut,Ut],transparent:[Ut,Ut,Ut,0]},Eh=function(e,n,a){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(a-n)*e*6:e<.5?a:e*3<2?n+(a-n)*(2/3-e)*6:n)*Ut+.5|0},uy=function(e,n,a){var l=e?on(e)?[e>>16,e>>8&Ut,e&Ut]:0:Nl.black,o,u,c,f,g,m,y,_,S,T;if(!l){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Nl[e])l=Nl[e];else if(e.charAt(0)==="#"){if(e.length<6&&(o=e.charAt(1),u=e.charAt(2),c=e.charAt(3),e="#"+o+o+u+u+c+c+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return l=parseInt(e.substr(1,6),16),[l>>16,l>>8&Ut,l&Ut,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),l=[e>>16,e>>8&Ut,e&Ut]}else if(e.substr(0,3)==="hsl"){if(l=T=e.match(Y0),!n)f=+l[0]%360/360,g=+l[1]/100,m=+l[2]/100,u=m<=.5?m*(g+1):m+g-m*g,o=m*2-u,l.length>3&&(l[3]*=1),l[0]=Eh(f+1/3,o,u),l[1]=Eh(f,o,u),l[2]=Eh(f-1/3,o,u);else if(~e.indexOf("="))return l=e.match(Gm),a&&l.length<4&&(l[3]=1),l}else l=e.match(Y0)||Nl.transparent;l=l.map(Number)}return n&&!T&&(o=l[0]/Ut,u=l[1]/Ut,c=l[2]/Ut,y=Math.max(o,u,c),_=Math.min(o,u,c),m=(y+_)/2,y===_?f=g=0:(S=y-_,g=m>.5?S/(2-y-_):S/(y+_),f=y===o?(u-c)/S+(u<c?6:0):y===u?(c-o)/S+2:(o-u)/S+4,f*=60),l[0]=~~(f+.5),l[1]=~~(g*100+.5),l[2]=~~(m*100+.5)),a&&l.length<4&&(l[3]=1),l},cy=function(e){var n=[],a=[],l=-1;return e.split(Vn).forEach(function(o){var u=o.match(bs)||[];n.push.apply(n,u),a.push(l+=u.length+1)}),n.c=a,n},Z0=function(e,n,a){var l="",o=(e+l).match(Vn),u=n?"hsla(":"rgba(",c=0,f,g,m,y;if(!o)return e;if(o=o.map(function(_){return(_=uy(_,n,1))&&u+(n?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),a&&(m=cy(e),f=a.c,f.join(l)!==m.c.join(l)))for(g=e.replace(Vn,"1").split(bs),y=g.length-1;c<y;c++)l+=g[c]+(~f.indexOf(c)?o.shift()||u+"0,0,0,0)":(m.length?m:o.length?o:a).shift());if(!g)for(g=e.split(Vn),y=g.length-1;c<y;c++)l+=g[c]+o[c];return l+g[y]},Vn=(function(){var d="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Nl)d+="|"+e+"\\b";return new RegExp(d+")","gi")})(),zS=/hsl[a]?\(/,hy=function(e){var n=e.join(" "),a;if(Vn.lastIndex=0,Vn.test(n))return a=zS.test(n),e[1]=Z0(e[1],a),e[0]=Z0(e[0],a,cy(e[1])),!0},Zl,Qe=(function(){var d=Date.now,e=500,n=33,a=d(),l=a,o=1e3/240,u=o,c=[],f,g,m,y,_,S,T=function x(M){var w=d()-l,C=M===!0,z,B,N,G;if((w>e||w<0)&&(a+=w-n),l+=w,N=l-a,z=N-u,(z>0||C)&&(G=++y.frame,_=N-y.time*1e3,y.time=N=N/1e3,u+=z+(z>=o?4:o-z),B=1),C||(f=g(x)),B)for(S=0;S<c.length;S++)c[S](N,_,G,M)};return y={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(M){return _/(1e3/(M||60))},wake:function(){Ym&&(!Lh&&ff()&&(Hi=Lh=window,df=Hi.document||{},Je.gsap=Re,(Hi.gsapVersions||(Hi.gsapVersions=[])).push(Re.version),Xm(Uo||Hi.GreenSockGlobals||!Hi.gsap&&Hi||{}),ry.forEach(oy)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,f&&y.sleep(),g=m||function(M){return setTimeout(M,u-y.time*1e3+1|0)},Zl=1,T(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(f),Zl=0,g=Pl},lagSmoothing:function(M,w){e=M||1/0,n=Math.min(w||33,e)},fps:function(M){o=1e3/(M||240),u=y.time*1e3+o},add:function(M,w,C){var z=w?function(B,N,G,Y){M(B,N,G,Y),y.remove(z)}:M;return y.remove(M),c[C?"unshift":"push"](z),Us(),z},remove:function(M,w){~(w=c.indexOf(M))&&c.splice(w,1)&&S>=w&&S--},_listeners:c},y})(),Us=function(){return!Zl&&Qe.wake()},gt={},HS=/^[\d.\-M][\d.\-,\s]/,DS=/["']/g,US=function(e){for(var n={},a=e.substr(1,e.length-3).split(":"),l=a[0],o=1,u=a.length,c,f,g;o<u;o++)f=a[o],c=o!==u-1?f.lastIndexOf(","):f.length,g=f.substr(0,c),n[l]=isNaN(g)?g.replace(DS,"").trim():+g,l=f.substr(c+1).trim();return n},RS=function(e){var n=e.indexOf("(")+1,a=e.indexOf(")"),l=e.indexOf("(",n);return e.substring(n,~l&&l<a?e.indexOf(")",a+1):a)},NS=function(e){var n=(e+"").split("("),a=gt[n[0]];return a&&n.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[US(n[1])]:RS(e).split(",").map(Zm)):gt._CE&&HS.test(e)?gt._CE("",e):a},fy=function(e){return function(n){return 1-e(1-n)}},dy=function d(e,n){for(var a=e._first,l;a;)a instanceof xe?d(a,n):a.vars.yoyoEase&&(!a._yoyo||!a._repeat)&&a._yoyo!==n&&(a.timeline?d(a.timeline,n):(l=a._ease,a._ease=a._yEase,a._yEase=l,a._yoyo=n)),a=a._next},wa=function(e,n){return e&&(Zt(e)?e:gt[e]||NS(e))||n},Ha=function(e,n,a,l){a===void 0&&(a=function(f){return 1-n(1-f)}),l===void 0&&(l=function(f){return f<.5?n(f*2)/2:1-n((1-f)*2)/2});var o={easeIn:n,easeOut:a,easeInOut:l},u;return He(e,function(c){gt[c]=Je[c]=o,gt[u=c.toLowerCase()]=a;for(var f in o)gt[u+(f==="easeIn"?".in":f==="easeOut"?".out":".inOut")]=gt[c+"."+f]=o[f]}),o},py=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},Ah=function d(e,n,a){var l=n>=1?n:1,o=(a||(e?.3:.45))/(n<1?n:1),u=o/kh*(Math.asin(1/l)||0),c=function(m){return m===1?1:l*Math.pow(2,-10*m)*lS((m-u)*o)+1},f=e==="out"?c:e==="in"?function(g){return 1-c(1-g)}:py(c);return o=kh/o,f.config=function(g,m){return d(e,g,m)},f},Ch=function d(e,n){n===void 0&&(n=1.70158);var a=function(u){return u?--u*u*((n+1)*u+n)+1:0},l=e==="out"?a:e==="in"?function(o){return 1-a(1-o)}:py(a);return l.config=function(o){return d(e,o)},l};He("Linear,Quad,Cubic,Quart,Quint,Strong",function(d,e){var n=e<5?e+1:e;Ha(d+",Power"+(n-1),e?function(a){return Math.pow(a,n)}:function(a){return a},function(a){return 1-Math.pow(1-a,n)},function(a){return a<.5?Math.pow(a*2,n)/2:1-Math.pow((1-a)*2,n)/2})});gt.Linear.easeNone=gt.none=gt.Linear.easeIn;Ha("Elastic",Ah("in"),Ah("out"),Ah());(function(d,e){var n=1/e,a=2*n,l=2.5*n,o=function(c){return c<n?d*c*c:c<a?d*Math.pow(c-1.5/e,2)+.75:c<l?d*(c-=2.25/e)*c+.9375:d*Math.pow(c-2.625/e,2)+.984375};Ha("Bounce",function(u){return 1-o(1-u)},o)})(7.5625,2.75);Ha("Expo",function(d){return Math.pow(2,10*(d-1))*d+d*d*d*d*d*d*(1-d)});Ha("Circ",function(d){return-(Lm(1-d*d)-1)});Ha("Sine",function(d){return d===1?1:-sS(d*nS)+1});Ha("Back",Ch("in"),Ch("out"),Ch());gt.SteppedEase=gt.steps=Je.SteppedEase={config:function(e,n){e===void 0&&(e=1);var a=1/e,l=e+(n?0:1),o=n?1:0,u=1-Rt;return function(c){return((l*er(0,u,c)|0)+o)*a}}};Os.ease=gt["quad.out"];He("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(d){return mf+=d+","+d+"Params,"});var gy=function(e,n){this.id=aS++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:Pm,this.set=n?n.getSetter:bf},Wl=(function(){function d(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Ds(this,+n.duration,1,1),this.data=n.data,It&&(this._ctx=It,It.data.push(this)),Zl||Qe.wake()}var e=d.prototype;return e.delay=function(a){return a||a===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+a-this._delay),this._delay=a,this):this._delay},e.duration=function(a){return arguments.length?this.totalDuration(this._repeat>0?a+(a+this._rDelay)*this._repeat:a):this.totalDuration()&&this._dur},e.totalDuration=function(a){return arguments.length?(this._dirty=0,Ds(this,this._repeat<0?a:(a-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(a,l){if(Us(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(Ko(this,a),!o._dp||o.parent||Fm(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&a<this._tDur||this._ts<0&&a>0||!this._tDur&&!a)&&Ui(this._dp,this,this._start-this._delay)}return(this._tTime!==a||!this._dur&&!l||this._initted&&Math.abs(this._zTime)===Rt||!this._initted&&this._dur&&a||!a&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=a),Qm(this,a,l)),this},e.time=function(a,l){return arguments.length?this.totalTime(Math.min(this.totalDuration(),a+V0(this))%(this._dur+this._rDelay)||(a?this._dur:0),l):this._time},e.totalProgress=function(a,l){return arguments.length?this.totalTime(this.totalDuration()*a,l):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(a,l){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-a:a)+V0(this),l):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(a,l){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(a-1)*o,l):this._repeat?Hs(this._tTime,o)+1:1},e.timeScale=function(a,l){if(!arguments.length)return this._rts===-Rt?0:this._rts;if(this._rts===a)return this;var o=this.parent&&this._ts?Bo(this.parent._time,this):this._tTime;return this._rts=+a||0,this._ts=this._ps||a===-Rt?0:this._rts,this.totalTime(er(-Math.abs(this._delay),this.totalDuration(),o),l!==!1),Wo(this),mS(this)},e.paused=function(a){return arguments.length?(this._ps!==a&&(this._ps=a,a?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Us(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Rt&&(this._tTime-=Rt)))),this):this._ps},e.startTime=function(a){if(arguments.length){this._start=Yt(a);var l=this.parent||this._dp;return l&&(l._sort||!this.parent)&&Ui(l,this,this._start-this._delay),this}return this._start},e.endTime=function(a){return this._start+(ze(a)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(a){var l=this.parent||this._dp;return l?a&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Bo(l.rawTime(a),this):this._tTime:this._tTime},e.revert=function(a){a===void 0&&(a=fS);var l=ye;return ye=a,vf(this)&&(this.timeline&&this.timeline.revert(a),this.totalTime(-.01,a.suppressEvents)),this.data!=="nested"&&a.kill!==!1&&this.kill(),ye=l,this},e.globalTime=function(a){for(var l=this,o=arguments.length?a:l.rawTime();l;)o=l._start+o/(Math.abs(l._ts)||1),l=l._dp;return!this.parent&&this._sat?this._sat.globalTime(a):o},e.repeat=function(a){return arguments.length?(this._repeat=a===1/0?-2:a,P0(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(a){if(arguments.length){var l=this._time;return this._rDelay=a,P0(this),l?this.time(l):this}return this._rDelay},e.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e.seek=function(a,l){return this.totalTime(ci(this,a),ze(l))},e.restart=function(a,l){return this.play().totalTime(a?-this._delay:0,ze(l)),this._dur||(this._zTime=-Rt),this},e.play=function(a,l){return a!=null&&this.seek(a,l),this.reversed(!1).paused(!1)},e.reverse=function(a,l){return a!=null&&this.seek(a||this.totalDuration(),l),this.reversed(!0).paused(!1)},e.pause=function(a,l){return a!=null&&this.seek(a,l),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(a){return arguments.length?(!!a!==this.reversed()&&this.timeScale(-this._rts||(a?-Rt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Rt,this},e.isActive=function(){var a=this.parent||this._dp,l=this._start,o;return!!(!a||this._ts&&this._initted&&a.isActive()&&(o=a.rawTime(!0))>=l&&o<this.endTime(!0)-Rt)},e.eventCallback=function(a,l,o){var u=this.vars;return arguments.length>1?(l?(u[a]=l,o&&(u[a+"Params"]=o),a==="onUpdate"&&(this._onUpdate=l)):delete u[a],this):u[a]},e.then=function(a){var l=this,o=l._prom;return new Promise(function(u){var c=Zt(a)?a:Wm,f=function(){var m=l.then;l.then=null,o&&o(),Zt(c)&&(c=c(l))&&(c.then||c===l)&&(l.then=m),u(c),l.then=m};l._initted&&l.totalProgress()===1&&l._ts>=0||!l._tTime&&l._ts<0?f():l._prom=f})},e.kill=function(){Rl(this)},d})();$e(Wl.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Rt,_prom:0,_ps:!1,_rts:1});var xe=(function(d){km(e,d);function e(a,l){var o;return a===void 0&&(a={}),o=d.call(this,a)||this,o.labels={},o.smoothChildTiming=!!a.smoothChildTiming,o.autoRemoveChildren=!!a.autoRemoveChildren,o._sort=ze(a.sortChildren),Xt&&Ui(a.parent||Xt,en(o),l),a.reversed&&o.reverse(),a.paused&&o.paused(!0),a.scrollTrigger&&Jm(en(o),a.scrollTrigger),o}var n=e.prototype;return n.to=function(l,o,u){return Gl(0,arguments,this),this},n.from=function(l,o,u){return Gl(1,arguments,this),this},n.fromTo=function(l,o,u,c){return Gl(2,arguments,this),this},n.set=function(l,o,u){return o.duration=0,o.parent=this,Il(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new ie(l,o,ci(this,u),1),this},n.call=function(l,o,u){return Ui(this,ie.delayedCall(0,l,o),u)},n.staggerTo=function(l,o,u,c,f,g,m){return u.duration=o,u.stagger=u.stagger||c,u.onComplete=g,u.onCompleteParams=m,u.parent=this,new ie(l,u,ci(this,f)),this},n.staggerFrom=function(l,o,u,c,f,g,m){return u.runBackwards=1,Il(u).immediateRender=ze(u.immediateRender),this.staggerTo(l,o,u,c,f,g,m)},n.staggerFromTo=function(l,o,u,c,f,g,m,y){return c.startAt=u,Il(c).immediateRender=ze(c.immediateRender),this.staggerTo(l,o,c,f,g,m,y)},n.render=function(l,o,u){var c=this._time,f=this._dirty?this.totalDuration():this._tDur,g=this._dur,m=l<=0?0:Yt(l),y=this._zTime<0!=l<0&&(this._initted||!g),_,S,T,x,M,w,C,z,B,N,G,Y;if(this!==Xt&&m>f&&l>=0&&(m=f),m!==this._tTime||u||y){if(c!==this._time&&g&&(m+=this._time-c,l+=this._time-c),_=m,B=this._start,z=this._ts,w=!z,y&&(g||(c=this._zTime),(l||!o)&&(this._zTime=l)),this._repeat){if(G=this._yoyo,M=g+this._rDelay,this._repeat<-1&&l<0)return this.totalTime(M*100+l,o,u);if(_=Yt(m%M),m===f?(x=this._repeat,_=g):(N=Yt(m/M),x=~~N,x&&x===N&&(_=g,x--),_>g&&(_=g)),N=Hs(this._tTime,M),!c&&this._tTime&&N!==x&&this._tTime-N*M-this._dur<=0&&(N=x),G&&x&1&&(_=g-_,Y=1),x!==N&&!this._lock){var j=G&&N&1,I=j===(G&&x&1);if(x<N&&(j=!j),c=j?0:m%g?g:m,this._lock=1,this.render(c||(Y?0:Yt(x*M)),o,!g)._lock=0,this._tTime=m,!o&&this.parent&&Ze(this,"onRepeat"),this.vars.repeatRefresh&&!Y&&(this.invalidate()._lock=1,N=x),c&&c!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,f=this._tDur,I&&(this._lock=2,c=j?g:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!Y&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;dy(this,Y)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=SS(this,Yt(c),Yt(_)),C&&(m-=_-(_=C._start))),this._tTime=m,this._time=_,this._act=!z,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=l,c=0),!c&&m&&g&&!o&&!N&&(Ze(this,"onStart"),this._tTime!==m))return this;if(_>=c&&l>=0)for(S=this._first;S;){if(T=S._next,(S._act||_>=S._start)&&S._ts&&C!==S){if(S.parent!==this)return this.render(l,o,u);if(S.render(S._ts>0?(_-S._start)*S._ts:(S._dirty?S.totalDuration():S._tDur)+(_-S._start)*S._ts,o,u),_!==this._time||!this._ts&&!w){C=0,T&&(m+=this._zTime=-Rt);break}}S=T}else{S=this._last;for(var F=l<0?l:_;S;){if(T=S._prev,(S._act||F<=S._end)&&S._ts&&C!==S){if(S.parent!==this)return this.render(l,o,u);if(S.render(S._ts>0?(F-S._start)*S._ts:(S._dirty?S.totalDuration():S._tDur)+(F-S._start)*S._ts,o,u||ye&&vf(S)),_!==this._time||!this._ts&&!w){C=0,T&&(m+=this._zTime=F?-Rt:Rt);break}}S=T}}if(C&&!o&&(this.pause(),C.render(_>=c?0:-Rt)._zTime=_>=c?1:-1,this._ts))return this._start=B,Wo(this),this.render(l,o,u);this._onUpdate&&!o&&Ze(this,"onUpdate",!0),(m===f&&this._tTime>=this.totalDuration()||!m&&c)&&(B===this._start||Math.abs(z)!==Math.abs(this._ts))&&(this._lock||((l||!g)&&(m===f&&this._ts>0||!m&&this._ts<0)&&Pn(this,1),!o&&!(l<0&&!c)&&(m||c||!f)&&(Ze(this,m===f&&l>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<f&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(l,o){var u=this;if(on(o)||(o=ci(this,o,l)),!(l instanceof Wl)){if(_e(l))return l.forEach(function(c){return u.add(c,o)}),this;if(ue(l))return this.addLabel(l,o);if(Zt(l))l=ie.delayedCall(0,l);else return this}return this!==l?Ui(this,l,o):this},n.getChildren=function(l,o,u,c){l===void 0&&(l=!0),o===void 0&&(o=!0),u===void 0&&(u=!0),c===void 0&&(c=-mi);for(var f=[],g=this._first;g;)g._start>=c&&(g instanceof ie?o&&f.push(g):(u&&f.push(g),l&&f.push.apply(f,g.getChildren(!0,o,u)))),g=g._next;return f},n.getById=function(l){for(var o=this.getChildren(1,1,1),u=o.length;u--;)if(o[u].vars.id===l)return o[u]},n.remove=function(l){return ue(l)?this.removeLabel(l):Zt(l)?this.killTweensOf(l):(l.parent===this&&Zo(this,l),l===this._recent&&(this._recent=this._last),Ma(this))},n.totalTime=function(l,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Yt(Qe.time-(this._ts>0?l/this._ts:(this.totalDuration()-l)/-this._ts))),d.prototype.totalTime.call(this,l,o),this._forcing=0,this):this._tTime},n.addLabel=function(l,o){return this.labels[l]=ci(this,o),this},n.removeLabel=function(l){return delete this.labels[l],this},n.addPause=function(l,o,u){var c=ie.delayedCall(0,o||Pl,u);return c.data="isPause",this._hasPause=1,Ui(this,c,ci(this,l))},n.removePause=function(l){var o=this._first;for(l=ci(this,l);o;)o._start===l&&o.data==="isPause"&&Pn(o),o=o._next},n.killTweensOf=function(l,o,u){for(var c=this.getTweensOf(l,u),f=c.length;f--;)kn!==c[f]&&c[f].kill(l,o);return this},n.getTweensOf=function(l,o){for(var u=[],c=yi(l),f=this._first,g=on(o),m;f;)f instanceof ie?dS(f._targets,c)&&(g?(!kn||f._initted&&f._ts)&&f.globalTime(0)<=o&&f.globalTime(f.totalDuration())>o:!o||f.isActive())&&u.push(f):(m=f.getTweensOf(c,o)).length&&u.push.apply(u,m),f=f._next;return u},n.tweenTo=function(l,o){o=o||{};var u=this,c=ci(u,l),f=o,g=f.startAt,m=f.onStart,y=f.onStartParams,_=f.immediateRender,S,T=ie.to(u,$e({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:o.duration||Math.abs((c-(g&&"time"in g?g.time:u._time))/u.timeScale())||Rt,onStart:function(){if(u.pause(),!S){var M=o.duration||Math.abs((c-(g&&"time"in g?g.time:u._time))/u.timeScale());T._dur!==M&&Ds(T,M,0,1).render(T._time,!0,!0),S=1}m&&m.apply(T,y||[])}},o));return _?T.render(0):T},n.tweenFromTo=function(l,o,u){return this.tweenTo(o,$e({startAt:{time:ci(this,l)}},u))},n.recent=function(){return this._recent},n.nextLabel=function(l){return l===void 0&&(l=this._time),Q0(this,ci(this,l))},n.previousLabel=function(l){return l===void 0&&(l=this._time),Q0(this,ci(this,l),1)},n.currentLabel=function(l){return arguments.length?this.seek(l,!0):this.previousLabel(this._time+Rt)},n.shiftChildren=function(l,o,u){u===void 0&&(u=0);var c=this._first,f=this.labels,g;for(l=Yt(l);c;)c._start>=u&&(c._start+=l,c._end+=l),c=c._next;if(o)for(g in f)f[g]>=u&&(f[g]+=l);return Ma(this)},n.invalidate=function(l){var o=this._first;for(this._lock=0;o;)o.invalidate(l),o=o._next;return d.prototype.invalidate.call(this,l)},n.clear=function(l){l===void 0&&(l=!0);for(var o=this._first,u;o;)u=o._next,this.remove(o),o=u;return this._dp&&(this._time=this._tTime=this._pTime=0),l&&(this.labels={}),Ma(this)},n.totalDuration=function(l){var o=0,u=this,c=u._last,f=mi,g,m,y;if(arguments.length)return u.timeScale((u._repeat<0?u.duration():u.totalDuration())/(u.reversed()?-l:l));if(u._dirty){for(y=u.parent;c;)g=c._prev,c._dirty&&c.totalDuration(),m=c._start,m>f&&u._sort&&c._ts&&!u._lock?(u._lock=1,Ui(u,c,m-c._delay,1)._lock=0):f=m,m<0&&c._ts&&(o-=m,(!y&&!u._dp||y&&y.smoothChildTiming)&&(u._start+=Yt(m/u._ts),u._time-=m,u._tTime-=m),u.shiftChildren(-m,!1,-1/0),f=0),c._end>o&&c._ts&&(o=c._end),c=g;Ds(u,u===Xt&&u._time>o?u._time:o,1,1),u._dirty=0}return u._tDur},e.updateRoot=function(l){if(Xt._ts&&(Qm(Xt,Bo(l,Xt)),Vm=Qe.frame),Qe.frame>=X0){X0+=Fe.autoSleep||120;var o=Xt._first;if((!o||!o._ts)&&Fe.autoSleep&&Qe._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||Qe.sleep()}}},e})(Wl);$e(xe.prototype,{_lock:0,_hasPause:0,_forcing:0});var BS=function(e,n,a,l,o,u,c){var f=new De(this._pt,e,n,0,1,xy,null,o),g=0,m=0,y,_,S,T,x,M,w,C;for(f.b=a,f.e=l,a+="",l+="",(w=~l.indexOf("random("))&&(l=Ql(l)),u&&(C=[a,l],u(C,e,n),a=C[0],l=C[1]),_=a.match(Mh)||[];y=Mh.exec(l);)T=y[0],x=l.substring(g,y.index),S?S=(S+1)%5:x.substr(-5)==="rgba("&&(S=1),T!==_[m++]&&(M=parseFloat(_[m-1])||0,f._pt={_next:f._pt,p:x||m===1?x:",",s:M,c:T.charAt(1)==="="?ws(M,T)-M:parseFloat(T)-M,m:S&&S<4?Math.round:0},g=Mh.lastIndex);return f.c=g<l.length?l.substring(g,l.length):"",f.fp=c,(qm.test(l)||w)&&(f.e=0),this._pt=f,f},_f=function(e,n,a,l,o,u,c,f,g,m){Zt(l)&&(l=l(o||0,e,u));var y=e[n],_=a!=="get"?a:Zt(y)?g?e[n.indexOf("set")||!Zt(e["get"+n.substr(3)])?n:"get"+n.substr(3)](g):e[n]():y,S=Zt(y)?g?qS:_y:xf,T;if(ue(l)&&(~l.indexOf("random(")&&(l=Ql(l)),l.charAt(1)==="="&&(T=ws(_,l)+(ve(_)||0),(T||T===0)&&(l=T))),!m||_!==l||Vh)return!isNaN(_*l)&&l!==""?(T=new De(this._pt,e,n,+_||0,l-(_||0),typeof y=="boolean"?XS:Sy,0,S),g&&(T.fp=g),c&&T.modifier(c,this,e),this._pt=T):(!y&&!(n in e)&&pf(n,l),BS.call(this,e,n,_,l,S,f||Fe.stringFilter,g))},kS=function(e,n,a,l,o){if(Zt(e)&&(e=ql(e,o,n,a,l)),!Ni(e)||e.style&&e.nodeType||_e(e)||Im(e))return ue(e)?ql(e,o,n,a,l):e;var u={},c;for(c in e)u[c]=ql(e[c],o,n,a,l);return u},my=function(e,n,a,l,o,u){var c,f,g,m;if(Pe[e]&&(c=new Pe[e]).init(o,c.rawVars?n[e]:kS(n[e],l,o,u,a),a,l,u)!==!1&&(a._pt=f=new De(a._pt,o,e,0,1,c.render,c,0,c.priority),a!==Ts))for(g=a._ptLookup[a._targets.indexOf(o)],m=c._props.length;m--;)g[c._props[m]]=f;return c},kn,Vh,Sf=function d(e,n,a){var l=e.vars,o=l.ease,u=l.startAt,c=l.immediateRender,f=l.lazy,g=l.onUpdate,m=l.runBackwards,y=l.yoyoEase,_=l.keyframes,S=l.autoRevert,T=e._dur,x=e._startAt,M=e._targets,w=e.parent,C=w&&w.data==="nested"?w.vars.targets:M,z=e._overwrite==="auto"&&!cf,B=e.timeline,N,G,Y,j,I,F,it,et,nt,Et,ot,R,P;if(B&&(!_||!o)&&(o="none"),e._ease=wa(o,Os.ease),e._yEase=y?fy(wa(y===!0?o:y,Os.ease)):0,y&&e._yoyo&&!e._repeat&&(y=e._yEase,e._yEase=e._ease,e._ease=y),e._from=!B&&!!l.runBackwards,!B||_&&!l.stagger){if(et=M[0]?Ta(M[0]).harness:0,R=et&&l[et.prop],N=No(l,gf),x&&(x._zTime<0&&x.progress(1),n<0&&m&&c&&!S?x.render(-1,!0):x.revert(m&&T?Ao:hS),x._lazy=0),u){if(Pn(e._startAt=ie.set(M,$e({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!x&&ze(f),startAt:null,delay:0,onUpdate:g&&function(){return Ze(e,"onUpdate")},stagger:0},u))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ye||!c&&!S)&&e._startAt.revert(Ao),c&&T&&n<=0&&a<=0){n&&(e._zTime=n);return}}else if(m&&T&&!x){if(n&&(c=!1),Y=$e({overwrite:!1,data:"isFromStart",lazy:c&&!x&&ze(f),immediateRender:c,stagger:0,parent:w},N),R&&(Y[et.prop]=R),Pn(e._startAt=ie.set(M,Y)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ye?e._startAt.revert(Ao):e._startAt.render(-1,!0)),e._zTime=n,!c)d(e._startAt,Rt,Rt);else if(!n)return}for(e._pt=e._ptCache=0,f=T&&ze(f)||f&&!T,G=0;G<M.length;G++){if(I=M[G],it=I._gsap||yf(M)[G]._gsap,e._ptLookup[G]=Et={},Ih[it.id]&&jn.length&&Ro(),ot=C===M?G:C.indexOf(I),et&&(nt=new et).init(I,R||N,e,ot,C)!==!1&&(e._pt=j=new De(e._pt,I,nt.name,0,1,nt.render,nt,0,nt.priority),nt._props.forEach(function(K){Et[K]=j}),nt.priority&&(F=1)),!et||R)for(Y in N)Pe[Y]&&(nt=my(Y,N,e,ot,I,C))?nt.priority&&(F=1):Et[Y]=j=_f.call(e,I,Y,"get",N[Y],ot,C,0,l.stringFilter);e._op&&e._op[G]&&e.kill(I,e._op[G]),z&&e._pt&&(kn=e,Xt.killTweensOf(I,Et,e.globalTime(n)),P=!e.parent,kn=0),e._pt&&f&&(Ih[it.id]=1)}F&&by(e),e._onInit&&e._onInit(e)}e._onUpdate=g,e._initted=(!e._op||e._pt)&&!P,_&&n<=0&&B.render(mi,!0,!0)},LS=function(e,n,a,l,o,u,c,f){var g=(e._pt&&e._ptCache||(e._ptCache={}))[n],m,y,_,S;if(!g)for(g=e._ptCache[n]=[],_=e._ptLookup,S=e._targets.length;S--;){if(m=_[S][n],m&&m.d&&m.d._pt)for(m=m.d._pt;m&&m.p!==n&&m.fp!==n;)m=m._next;if(!m)return Vh=1,e.vars[n]="+=0",Sf(e,c),Vh=0,f?Vl(n+" not eligible for reset"):1;g.push(m)}for(S=g.length;S--;)y=g[S],m=y._pt||y,m.s=(l||l===0)&&!o?l:m.s+(l||0)+u*m.c,m.c=a-m.s,y.e&&(y.e=Ft(a)+ve(y.e)),y.b&&(y.b=m.s+ve(y.b))},IS=function(e,n){var a=e[0]?Ta(e[0]).harness:0,l=a&&a.aliases,o,u,c,f;if(!l)return n;o=zs({},n);for(u in l)if(u in o)for(f=l[u].split(","),c=f.length;c--;)o[f[c]]=o[u];return o},GS=function(e,n,a,l){var o=n.ease||l||"power1.inOut",u,c;if(_e(n))c=a[e]||(a[e]=[]),n.forEach(function(f,g){return c.push({t:g/(n.length-1)*100,v:f,e:o})});else for(u in n)c=a[u]||(a[u]=[]),u==="ease"||c.push({t:parseFloat(e),v:n[u],e:o})},ql=function(e,n,a,l,o){return Zt(e)?e.call(n,a,l,o):ue(e)&&~e.indexOf("random(")?Ql(e):e},yy=mf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",vy={};He(yy+",id,stagger,delay,duration,paused,scrollTrigger",function(d){return vy[d]=1});var ie=(function(d){km(e,d);function e(a,l,o,u){var c;typeof l=="number"&&(o.duration=l,l=o,o=null),c=d.call(this,u?l:Il(l))||this;var f=c.vars,g=f.duration,m=f.delay,y=f.immediateRender,_=f.stagger,S=f.overwrite,T=f.keyframes,x=f.defaults,M=f.scrollTrigger,w=f.yoyoEase,C=l.parent||Xt,z=(_e(a)||Im(a)?on(a[0]):"length"in l)?[a]:yi(a),B,N,G,Y,j,I,F,it;if(c._targets=z.length?yf(z):Vl("GSAP target "+a+" not found. https://gsap.com",!Fe.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=S,T||_||xo(g)||xo(m)){if(l=c.vars,B=c.timeline=new xe({data:"nested",defaults:x||{},targets:C&&C.data==="nested"?C.vars.targets:z}),B.kill(),B.parent=B._dp=en(c),B._start=0,_||xo(g)||xo(m)){if(Y=z.length,F=_&&iy(_),Ni(_))for(j in _)~yy.indexOf(j)&&(it||(it={}),it[j]=_[j]);for(N=0;N<Y;N++)G=No(l,vy),G.stagger=0,w&&(G.yoyoEase=w),it&&zs(G,it),I=z[N],G.duration=+ql(g,en(c),N,I,z),G.delay=(+ql(m,en(c),N,I,z)||0)-c._delay,!_&&Y===1&&G.delay&&(c._delay=m=G.delay,c._start+=m,G.delay=0),B.to(I,G,F?F(N,I,z):0),B._ease=gt.none;B.duration()?g=m=0:c.timeline=0}else if(T){Il($e(B.vars.defaults,{ease:"none"})),B._ease=wa(T.ease||l.ease||"none");var et=0,nt,Et,ot;if(_e(T))T.forEach(function(R){return B.to(z,R,">")}),B.duration();else{G={};for(j in T)j==="ease"||j==="easeEach"||GS(j,T[j],G,T.easeEach);for(j in G)for(nt=G[j].sort(function(R,P){return R.t-P.t}),et=0,N=0;N<nt.length;N++)Et=nt[N],ot={ease:Et.e,duration:(Et.t-(N?nt[N-1].t:0))/100*g},ot[j]=Et.v,B.to(z,ot,et),et+=ot.duration;B.duration()<g&&B.to({},{duration:g-B.duration()})}}g||c.duration(g=B.duration())}else c.timeline=0;return S===!0&&!cf&&(kn=en(c),Xt.killTweensOf(z),kn=0),Ui(C,en(c),o),l.reversed&&c.reverse(),l.paused&&c.paused(!0),(y||!g&&!T&&c._start===Yt(C._time)&&ze(y)&&yS(en(c))&&C.data!=="nested")&&(c._tTime=-Rt,c.render(Math.max(0,-m)||0)),M&&Jm(en(c),M),c}var n=e.prototype;return n.render=function(l,o,u){var c=this._time,f=this._tDur,g=this._dur,m=l<0,y=l>f-Rt&&!m?f:l<Rt?0:l,_,S,T,x,M,w,C,z,B;if(!g)_S(this,l,o,u);else if(y!==this._tTime||!l||u||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(_=y,z=this.timeline,this._repeat){if(x=g+this._rDelay,this._repeat<-1&&m)return this.totalTime(x*100+l,o,u);if(_=Yt(y%x),y===f?(T=this._repeat,_=g):(M=Yt(y/x),T=~~M,T&&T===M?(_=g,T--):_>g&&(_=g)),w=this._yoyo&&T&1,w&&(B=this._yEase,_=g-_),M=Hs(this._tTime,x),_===c&&!u&&this._initted&&T===M)return this._tTime=y,this;T!==M&&(z&&this._yEase&&dy(z,w),this.vars.repeatRefresh&&!w&&!this._lock&&_!==x&&this._initted&&(this._lock=u=1,this.render(Yt(x*T),!0).invalidate()._lock=0))}if(!this._initted){if($m(this,m?l:_,u,o,y))return this._tTime=0,this;if(c!==this._time&&!(u&&this.vars.repeatRefresh&&T!==M))return this;if(g!==this._dur)return this.render(l,o,u)}if(this._tTime=y,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(B||this._ease)(_/g),this._from&&(this.ratio=C=1-C),!c&&y&&!o&&!M&&(Ze(this,"onStart"),this._tTime!==y))return this;for(S=this._pt;S;)S.r(C,S.d),S=S._next;z&&z.render(l<0?l:z._dur*z._ease(_/this._dur),o,u)||this._startAt&&(this._zTime=l),this._onUpdate&&!o&&(m&&Gh(this,l,o,u),Ze(this,"onUpdate")),this._repeat&&T!==M&&this.vars.onRepeat&&!o&&this.parent&&Ze(this,"onRepeat"),(y===this._tDur||!y)&&this._tTime===y&&(m&&!this._onUpdate&&Gh(this,l,!0,!0),(l||!g)&&(y===this._tDur&&this._ts>0||!y&&this._ts<0)&&Pn(this,1),!o&&!(m&&!c)&&(y||c||w)&&(Ze(this,y===f?"onComplete":"onReverseComplete",!0),this._prom&&!(y<f&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(l){return(!l||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(l),d.prototype.invalidate.call(this,l)},n.resetTo=function(l,o,u,c,f){Zl||Qe.wake(),this._ts||this.play();var g=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||Sf(this,g),m=this._ease(g/this._dur),LS(this,l,o,u,c,m,g,f)?this.resetTo(l,o,u,c,1):(Ko(this,0),this.parent||Km(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(l,o){if(o===void 0&&(o="all"),!l&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?Rl(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ye),this;if(this.timeline){var u=this.timeline.totalDuration();return this.timeline.killTweensOf(l,o,kn&&kn.vars.overwrite!==!0)._first||Rl(this),this.parent&&u!==this.timeline.totalDuration()&&Ds(this,this._dur*this.timeline._tDur/u,0,1),this}var c=this._targets,f=l?yi(l):c,g=this._ptLookup,m=this._pt,y,_,S,T,x,M,w;if((!o||o==="all")&&gS(c,f))return o==="all"&&(this._pt=0),Rl(this);for(y=this._op=this._op||[],o!=="all"&&(ue(o)&&(x={},He(o,function(C){return x[C]=1}),o=x),o=IS(c,o)),w=c.length;w--;)if(~f.indexOf(c[w])){_=g[w],o==="all"?(y[w]=o,T=_,S={}):(S=y[w]=y[w]||{},T=o);for(x in T)M=_&&_[x],M&&((!("kill"in M.d)||M.d.kill(x)===!0)&&Zo(this,M,"_pt"),delete _[x]),S!=="all"&&(S[x]=1)}return this._initted&&!this._pt&&m&&Rl(this),this},e.to=function(l,o){return new e(l,o,arguments[2])},e.from=function(l,o){return Gl(1,arguments)},e.delayedCall=function(l,o,u,c){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:l,onComplete:o,onReverseComplete:o,onCompleteParams:u,onReverseCompleteParams:u,callbackScope:c})},e.fromTo=function(l,o,u){return Gl(2,arguments)},e.set=function(l,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(l,o)},e.killTweensOf=function(l,o,u){return Xt.killTweensOf(l,o,u)},e})(Wl);$e(ie.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});He("staggerTo,staggerFrom,staggerFromTo",function(d){ie[d]=function(){var e=new xe,n=Yh.call(arguments,0);return n.splice(d==="staggerFromTo"?5:4,0,0),e[d].apply(e,n)}});var xf=function(e,n,a){return e[n]=a},_y=function(e,n,a){return e[n](a)},qS=function(e,n,a,l){return e[n](l.fp,a)},YS=function(e,n,a){return e.setAttribute(n,a)},bf=function(e,n){return Zt(e[n])?_y:hf(e[n])&&e.setAttribute?YS:xf},Sy=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},XS=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},xy=function(e,n){var a=n._pt,l="";if(!e&&n.b)l=n.b;else if(e===1&&n.e)l=n.e;else{for(;a;)l=a.p+(a.m?a.m(a.s+a.c*e):Math.round((a.s+a.c*e)*1e4)/1e4)+l,a=a._next;l+=n.c}n.set(n.t,n.p,l,n)},Tf=function(e,n){for(var a=n._pt;a;)a.r(e,a.d),a=a._next},jS=function(e,n,a,l){for(var o=this._pt,u;o;)u=o._next,o.p===l&&o.modifier(e,n,a),o=u},VS=function(e){for(var n=this._pt,a,l;n;)l=n._next,n.p===e&&!n.op||n.op===e?Zo(this,n,"_pt"):n.dep||(a=1),n=l;return!a},PS=function(e,n,a,l){l.mSet(e,n,l.m.call(l.tween,a,l.mt),l)},by=function(e){for(var n=e._pt,a,l,o,u;n;){for(a=n._next,l=o;l&&l.pr>n.pr;)l=l._next;(n._prev=l?l._prev:u)?n._prev._next=n:o=n,(n._next=l)?l._prev=n:u=n,n=a}e._pt=o},De=(function(){function d(n,a,l,o,u,c,f,g,m){this.t=a,this.s=o,this.c=u,this.p=l,this.r=c||Sy,this.d=f||this,this.set=g||xf,this.pr=m||0,this._next=n,n&&(n._prev=this)}var e=d.prototype;return e.modifier=function(a,l,o){this.mSet=this.mSet||this.set,this.set=PS,this.m=a,this.mt=o,this.tween=l},d})();He(mf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(d){return gf[d]=1});Je.TweenMax=Je.TweenLite=ie;Je.TimelineLite=Je.TimelineMax=xe;Xt=new xe({sortChildren:!1,defaults:Os,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Fe.stringFilter=hy;var Ea=[],Oo={},QS=[],W0=0,ZS=0,Oh=function(e){return(Oo[e]||QS).map(function(n){return n()})},Ph=function(){var e=Date.now(),n=[];e-W0>2&&(Oh("matchMediaInit"),Ea.forEach(function(a){var l=a.queries,o=a.conditions,u,c,f,g;for(c in l)u=Hi.matchMedia(l[c]).matches,u&&(f=1),u!==o[c]&&(o[c]=u,g=1);g&&(a.revert(),f&&n.push(a))}),Oh("matchMediaRevert"),n.forEach(function(a){return a.onMatch(a,function(l){return a.add(null,l)})}),W0=e,Oh("matchMedia"))},Ty=(function(){function d(n,a){this.selector=a&&Xh(a),this.data=[],this._r=[],this.isReverted=!1,this.id=ZS++,n&&this.add(n)}var e=d.prototype;return e.add=function(a,l,o){Zt(a)&&(o=l,l=a,a=Zt);var u=this,c=function(){var g=It,m=u.selector,y;return g&&g!==u&&g.data.push(u),o&&(u.selector=Xh(o)),It=u,y=l.apply(u,arguments),Zt(y)&&u._r.push(y),It=g,u.selector=m,u.isReverted=!1,y};return u.last=c,a===Zt?c(u,function(f){return u.add(null,f)}):a?u[a]=c:c},e.ignore=function(a){var l=It;It=null,a(this),It=l},e.getTweens=function(){var a=[];return this.data.forEach(function(l){return l instanceof d?a.push.apply(a,l.getTweens()):l instanceof ie&&!(l.parent&&l.parent.data==="nested")&&a.push(l)}),a},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(a,l){var o=this;if(a?(function(){for(var c=o.getTweens(),f=o.data.length,g;f--;)g=o.data[f],g.data==="isFlip"&&(g.revert(),g.getChildren(!0,!0,!1).forEach(function(m){return c.splice(c.indexOf(m),1)}));for(c.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,y){return y.g-m.g||-1/0}).forEach(function(m){return m.t.revert(a)}),f=o.data.length;f--;)g=o.data[f],g instanceof xe?g.data!=="nested"&&(g.scrollTrigger&&g.scrollTrigger.revert(),g.kill()):!(g instanceof ie)&&g.revert&&g.revert(a);o._r.forEach(function(m){return m(a,o)}),o.isReverted=!0})():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),l)for(var u=Ea.length;u--;)Ea[u].id===this.id&&Ea.splice(u,1)},e.revert=function(a){this.kill(a||{})},d})(),WS=(function(){function d(n){this.contexts=[],this.scope=n,It&&It.data.push(this)}var e=d.prototype;return e.add=function(a,l,o){Ni(a)||(a={matches:a});var u=new Ty(0,o||this.scope),c=u.conditions={},f,g,m;It&&!u.selector&&(u.selector=It.selector),this.contexts.push(u),l=u.add("onMatch",l),u.queries=a;for(g in a)g==="all"?m=1:(f=Hi.matchMedia(a[g]),f&&(Ea.indexOf(u)<0&&Ea.push(u),(c[g]=f.matches)&&(m=1),f.addListener?f.addListener(Ph):f.addEventListener("change",Ph)));return m&&l(u,function(y){return u.add(null,y)}),this},e.revert=function(a){this.kill(a||{})},e.kill=function(a){this.contexts.forEach(function(l){return l.kill(a,!0)})},d})(),ko={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];n.forEach(function(l){return oy(l)})},timeline:function(e){return new xe(e)},getTweensOf:function(e,n){return Xt.getTweensOf(e,n)},getProperty:function(e,n,a,l){ue(e)&&(e=yi(e)[0]);var o=Ta(e||{}).get,u=a?Wm:Zm;return a==="native"&&(a=""),e&&(n?u((Pe[n]&&Pe[n].get||o)(e,n,a,l)):function(c,f,g){return u((Pe[c]&&Pe[c].get||o)(e,c,f,g))})},quickSetter:function(e,n,a){if(e=yi(e),e.length>1){var l=e.map(function(m){return Re.quickSetter(m,n,a)}),o=l.length;return function(m){for(var y=o;y--;)l[y](m)}}e=e[0]||{};var u=Pe[n],c=Ta(e),f=c.harness&&(c.harness.aliases||{})[n]||n,g=u?function(m){var y=new u;Ts._pt=0,y.init(e,a?m+a:m,Ts,0,[e]),y.render(1,y),Ts._pt&&Tf(1,Ts)}:c.set(e,f);return u?g:function(m){return g(e,f,a?m+a:m,c,1)}},quickTo:function(e,n,a){var l,o=Re.to(e,$e((l={},l[n]="+=0.1",l.paused=!0,l.stagger=0,l),a||{})),u=function(f,g,m){return o.resetTo(n,f,g,m)};return u.tween=o,u},isTweening:function(e){return Xt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=wa(e.ease,Os.ease)),j0(Os,e||{})},config:function(e){return j0(Fe,e||{})},registerEffect:function(e){var n=e.name,a=e.effect,l=e.plugins,o=e.defaults,u=e.extendTimeline;(l||"").split(",").forEach(function(c){return c&&!Pe[c]&&!Je[c]&&Vl(n+" effect requires "+c+" plugin.")}),wh[n]=function(c,f,g){return a(yi(c),$e(f||{},o),g)},u&&(xe.prototype[n]=function(c,f,g){return this.add(wh[n](c,Ni(f)?f:(g=f)&&{},this),g)})},registerEase:function(e,n){gt[e]=wa(n)},parseEase:function(e,n){return arguments.length?wa(e,n):gt},getById:function(e){return Xt.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var a=new xe(e),l,o;for(a.smoothChildTiming=ze(e.smoothChildTiming),Xt.remove(a),a._dp=0,a._time=a._tTime=Xt._time,l=Xt._first;l;)o=l._next,(n||!(!l._dur&&l instanceof ie&&l.vars.onComplete===l._targets[0]))&&Ui(a,l,l._start-l._delay),l=o;return Ui(Xt,a,0),a},context:function(e,n){return e?new Ty(e,n):It},matchMedia:function(e){return new WS(e)},matchMediaRefresh:function(){return Ea.forEach(function(e){var n=e.conditions,a,l;for(l in n)n[l]&&(n[l]=!1,a=1);a&&e.revert()})||Ph()},addEventListener:function(e,n){var a=Oo[e]||(Oo[e]=[]);~a.indexOf(n)||a.push(n)},removeEventListener:function(e,n){var a=Oo[e],l=a&&a.indexOf(n);l>=0&&a.splice(l,1)},utils:{wrap:AS,wrapYoyo:CS,distribute:iy,random:ay,snap:ny,normalize:ES,getUnit:ve,clamp:bS,splitColor:uy,toArray:yi,selector:Xh,mapRange:ly,pipe:MS,unitize:wS,interpolate:OS,shuffle:ey},install:Xm,effects:wh,ticker:Qe,updateRoot:xe.updateRoot,plugins:Pe,globalTimeline:Xt,core:{PropTween:De,globals:jm,Tween:ie,Timeline:xe,Animation:Wl,getCache:Ta,_removeLinkedListItem:Zo,reverting:function(){return ye},context:function(e){return e&&It&&(It.data.push(e),e._ctx=It),It},suppressOverwrites:function(e){return cf=e}}};He("to,from,fromTo,delayedCall,set,killTweensOf",function(d){return ko[d]=ie[d]});Qe.add(xe.updateRoot);Ts=ko.to({},{duration:0});var KS=function(e,n){for(var a=e._pt;a&&a.p!==n&&a.op!==n&&a.fp!==n;)a=a._next;return a},FS=function(e,n){var a=e._targets,l,o,u;for(l in n)for(o=a.length;o--;)u=e._ptLookup[o][l],u&&(u=u.d)&&(u._pt&&(u=KS(u,l)),u&&u.modifier&&u.modifier(n[l],e,a[o],l))},zh=function(e,n){return{name:e,headless:1,rawVars:1,init:function(l,o,u){u._onInit=function(c){var f,g;if(ue(o)&&(f={},He(o,function(m){return f[m]=1}),o=f),n){f={};for(g in o)f[g]=n(o[g]);o=f}FS(c,o)}}}},Re=ko.registerPlugin({name:"attr",init:function(e,n,a,l,o){var u,c,f;this.tween=a;for(u in n)f=e.getAttribute(u)||"",c=this.add(e,"setAttribute",(f||0)+"",n[u],l,o,0,0,u),c.op=u,c.b=f,this._props.push(u)},render:function(e,n){for(var a=n._pt;a;)ye?a.set(a.t,a.p,a.b,a):a.r(e,a.d),a=a._next}},{name:"endArray",headless:1,init:function(e,n){for(var a=n.length;a--;)this.add(e,a,e[a]||0,n[a],0,0,0,0,0,1)}},zh("roundProps",jh),zh("modifiers"),zh("snap",ny))||ko;ie.version=xe.version=Re.version="3.14.2";Ym=1;ff()&&Us();gt.Power0;gt.Power1;gt.Power2;gt.Power3;gt.Power4;gt.Linear;gt.Quad;gt.Cubic;gt.Quart;gt.Quint;gt.Strong;gt.Elastic;gt.Back;gt.SteppedEase;gt.Bounce;gt.Sine;gt.Expo;gt.Circ;var K0,Ln,Es,Mf,Sa,F0,wf,JS=function(){return typeof window<"u"},un={},ya=180/Math.PI,As=Math.PI/180,vs=Math.atan2,J0=1e8,Ef=/([A-Z])/g,$S=/(left|right|width|margin|padding|x)/i,tx=/[\s,\(]\S/,Ri={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Qh=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},ex=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},ix=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},nx=function(e,n){return n.set(n.t,n.p,e===1?n.e:e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},ax=function(e,n){var a=n.s+n.c*e;n.set(n.t,n.p,~~(a+(a<0?-.5:.5))+n.u,n)},My=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},wy=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},sx=function(e,n,a){return e.style[n]=a},lx=function(e,n,a){return e.style.setProperty(n,a)},rx=function(e,n,a){return e._gsap[n]=a},ox=function(e,n,a){return e._gsap.scaleX=e._gsap.scaleY=a},ux=function(e,n,a,l,o){var u=e._gsap;u.scaleX=u.scaleY=a,u.renderTransform(o,u)},cx=function(e,n,a,l,o){var u=e._gsap;u[n]=a,u.renderTransform(o,u)},Vt="transform",Ue=Vt+"Origin",hx=function d(e,n){var a=this,l=this.target,o=l.style,u=l._gsap;if(e in un&&o){if(this.tfm=this.tfm||{},e!=="transform")e=Ri[e]||e,~e.indexOf(",")?e.split(",").forEach(function(c){return a.tfm[c]=nn(l,c)}):this.tfm[e]=u.x?u[e]:nn(l,e),e===Ue&&(this.tfm.zOrigin=u.zOrigin);else return Ri.transform.split(",").forEach(function(c){return d.call(a,c,n)});if(this.props.indexOf(Vt)>=0)return;u.svg&&(this.svgo=l.getAttribute("data-svg-origin"),this.props.push(Ue,n,"")),e=Vt}(o||n)&&this.props.push(e,n,o[e])},Ey=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},fx=function(){var e=this.props,n=this.target,a=n.style,l=n._gsap,o,u;for(o=0;o<e.length;o+=3)e[o+1]?e[o+1]===2?n[e[o]](e[o+2]):n[e[o]]=e[o+2]:e[o+2]?a[e[o]]=e[o+2]:a.removeProperty(e[o].substr(0,2)==="--"?e[o]:e[o].replace(Ef,"-$1").toLowerCase());if(this.tfm){for(u in this.tfm)l[u]=this.tfm[u];l.svg&&(l.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),o=wf(),(!o||!o.isStart)&&!a[Vt]&&(Ey(a),l.zOrigin&&a[Ue]&&(a[Ue]+=" "+l.zOrigin+"px",l.zOrigin=0,l.renderTransform()),l.uncache=1)}},Ay=function(e,n){var a={target:e,props:[],revert:fx,save:hx};return e._gsap||Re.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(l){return a.save(l)}),a},Cy,Zh=function(e,n){var a=Ln.createElementNS?Ln.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ln.createElement(e);return a&&a.style?a:Ln.createElement(e)},We=function d(e,n,a){var l=getComputedStyle(e);return l[n]||l.getPropertyValue(n.replace(Ef,"-$1").toLowerCase())||l.getPropertyValue(n)||!a&&d(e,Rs(n)||n,1)||""},$0="O,Moz,ms,Ms,Webkit".split(","),Rs=function(e,n,a){var l=n||Sa,o=l.style,u=5;if(e in o&&!a)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);u--&&!($0[u]+e in o););return u<0?null:(u===3?"ms":u>=0?$0[u]:"")+e},Wh=function(){JS()&&window.document&&(K0=window,Ln=K0.document,Es=Ln.documentElement,Sa=Zh("div")||{style:{}},Zh("div"),Vt=Rs(Vt),Ue=Vt+"Origin",Sa.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Cy=!!Rs("perspective"),wf=Re.core.reverting,Mf=1)},tm=function(e){var n=e.ownerSVGElement,a=Zh("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),l=e.cloneNode(!0),o;l.style.display="block",a.appendChild(l),Es.appendChild(a);try{o=l.getBBox()}catch{}return a.removeChild(l),Es.removeChild(a),o},em=function(e,n){for(var a=n.length;a--;)if(e.hasAttribute(n[a]))return e.getAttribute(n[a])},Oy=function(e){var n,a;try{n=e.getBBox()}catch{n=tm(e),a=1}return n&&(n.width||n.height)||a||(n=tm(e)),n&&!n.width&&!n.x&&!n.y?{x:+em(e,["x","cx","x1"])||0,y:+em(e,["y","cy","y1"])||0,width:0,height:0}:n},zy=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Oy(e))},Qn=function(e,n){if(n){var a=e.style,l;n in un&&n!==Ue&&(n=Vt),a.removeProperty?(l=n.substr(0,2),(l==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),a.removeProperty(l==="--"?n:n.replace(Ef,"-$1").toLowerCase())):a.removeAttribute(n)}},In=function(e,n,a,l,o,u){var c=new De(e._pt,n,a,0,1,u?wy:My);return e._pt=c,c.b=l,c.e=o,e._props.push(a),c},im={deg:1,rad:1,turn:1},dx={grid:1,flex:1},Zn=function d(e,n,a,l){var o=parseFloat(a)||0,u=(a+"").trim().substr((o+"").length)||"px",c=Sa.style,f=$S.test(n),g=e.tagName.toLowerCase()==="svg",m=(g?"client":"offset")+(f?"Width":"Height"),y=100,_=l==="px",S=l==="%",T,x,M,w;if(l===u||!o||im[l]||im[u])return o;if(u!=="px"&&!_&&(o=d(e,n,a,"px")),w=e.getCTM&&zy(e),(S||u==="%")&&(un[n]||~n.indexOf("adius")))return T=w?e.getBBox()[f?"width":"height"]:e[m],Ft(S?o/T*y:o/100*T);if(c[f?"width":"height"]=y+(_?u:l),x=l!=="rem"&&~n.indexOf("adius")||l==="em"&&e.appendChild&&!g?e:e.parentNode,w&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===Ln||!x.appendChild)&&(x=Ln.body),M=x._gsap,M&&S&&M.width&&f&&M.time===Qe.time&&!M.uncache)return Ft(o/M.width*y);if(S&&(n==="height"||n==="width")){var C=e.style[n];e.style[n]=y+l,T=e[m],C?e.style[n]=C:Qn(e,n)}else(S||u==="%")&&!dx[We(x,"display")]&&(c.position=We(e,"position")),x===e&&(c.position="static"),x.appendChild(Sa),T=Sa[m],x.removeChild(Sa),c.position="absolute";return f&&S&&(M=Ta(x),M.time=Qe.time,M.width=x[m]),Ft(_?T*o/y:T&&o?y/T*o:0)},nn=function(e,n,a,l){var o;return Mf||Wh(),n in Ri&&n!=="transform"&&(n=Ri[n],~n.indexOf(",")&&(n=n.split(",")[0])),un[n]&&n!=="transform"?(o=Fl(e,l),o=n!=="transformOrigin"?o[n]:o.svg?o.origin:Io(We(e,Ue))+" "+o.zOrigin+"px"):(o=e.style[n],(!o||o==="auto"||l||~(o+"").indexOf("calc("))&&(o=Lo[n]&&Lo[n](e,n,a)||We(e,n)||Pm(e,n)||(n==="opacity"?1:0))),a&&!~(o+"").trim().indexOf(" ")?Zn(e,n,o,a)+a:o},px=function(e,n,a,l){if(!a||a==="none"){var o=Rs(n,e,1),u=o&&We(e,o,1);u&&u!==a?(n=o,a=u):n==="borderColor"&&(a=We(e,"borderTopColor"))}var c=new De(this._pt,e.style,n,0,1,xy),f=0,g=0,m,y,_,S,T,x,M,w,C,z,B,N;if(c.b=a,c.e=l,a+="",l+="",l.substring(0,6)==="var(--"&&(l=We(e,l.substring(4,l.indexOf(")")))),l==="auto"&&(x=e.style[n],e.style[n]=l,l=We(e,n)||l,x?e.style[n]=x:Qn(e,n)),m=[a,l],hy(m),a=m[0],l=m[1],_=a.match(bs)||[],N=l.match(bs)||[],N.length){for(;y=bs.exec(l);)M=y[0],C=l.substring(f,y.index),T?T=(T+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(T=1),M!==(x=_[g++]||"")&&(S=parseFloat(x)||0,B=x.substr((S+"").length),M.charAt(1)==="="&&(M=ws(S,M)+B),w=parseFloat(M),z=M.substr((w+"").length),f=bs.lastIndex-z.length,z||(z=z||Fe.units[n]||B,f===l.length&&(l+=z,c.e+=z)),B!==z&&(S=Zn(e,n,x,z)||0),c._pt={_next:c._pt,p:C||g===1?C:",",s:S,c:w-S,m:T&&T<4||n==="zIndex"?Math.round:0});c.c=f<l.length?l.substring(f,l.length):""}else c.r=n==="display"&&l==="none"?wy:My;return qm.test(l)&&(c.e=0),this._pt=c,c},nm={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},gx=function(e){var n=e.split(" "),a=n[0],l=n[1]||"50%";return(a==="top"||a==="bottom"||l==="left"||l==="right")&&(e=a,a=l,l=e),n[0]=nm[a]||a,n[1]=nm[l]||l,n.join(" ")},mx=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var a=n.t,l=a.style,o=n.u,u=a._gsap,c,f,g;if(o==="all"||o===!0)l.cssText="",f=1;else for(o=o.split(","),g=o.length;--g>-1;)c=o[g],un[c]&&(f=1,c=c==="transformOrigin"?Ue:Vt),Qn(a,c);f&&(Qn(a,Vt),u&&(u.svg&&a.removeAttribute("transform"),l.scale=l.rotate=l.translate="none",Fl(a,1),u.uncache=1,Ey(l)))}},Lo={clearProps:function(e,n,a,l,o){if(o.data!=="isFromStart"){var u=e._pt=new De(e._pt,n,a,0,0,mx);return u.u=l,u.pr=-10,u.tween=o,e._props.push(a),1}}},Kl=[1,0,0,1,0,0],Hy={},Dy=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},am=function(e){var n=We(e,Vt);return Dy(n)?Kl:n.substr(7).match(Gm).map(Ft)},Af=function(e,n){var a=e._gsap||Ta(e),l=e.style,o=am(e),u,c,f,g;return a.svg&&e.getAttribute("transform")?(f=e.transform.baseVal.consolidate().matrix,o=[f.a,f.b,f.c,f.d,f.e,f.f],o.join(",")==="1,0,0,1,0,0"?Kl:o):(o===Kl&&!e.offsetParent&&e!==Es&&!a.svg&&(f=l.display,l.display="block",u=e.parentNode,(!u||!e.offsetParent&&!e.getBoundingClientRect().width)&&(g=1,c=e.nextElementSibling,Es.appendChild(e)),o=am(e),f?l.display=f:Qn(e,"display"),g&&(c?u.insertBefore(e,c):u?u.appendChild(e):Es.removeChild(e))),n&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},Kh=function(e,n,a,l,o,u){var c=e._gsap,f=o||Af(e,!0),g=c.xOrigin||0,m=c.yOrigin||0,y=c.xOffset||0,_=c.yOffset||0,S=f[0],T=f[1],x=f[2],M=f[3],w=f[4],C=f[5],z=n.split(" "),B=parseFloat(z[0])||0,N=parseFloat(z[1])||0,G,Y,j,I;a?f!==Kl&&(Y=S*M-T*x)&&(j=B*(M/Y)+N*(-x/Y)+(x*C-M*w)/Y,I=B*(-T/Y)+N*(S/Y)-(S*C-T*w)/Y,B=j,N=I):(G=Oy(e),B=G.x+(~z[0].indexOf("%")?B/100*G.width:B),N=G.y+(~(z[1]||z[0]).indexOf("%")?N/100*G.height:N)),l||l!==!1&&c.smooth?(w=B-g,C=N-m,c.xOffset=y+(w*S+C*x)-w,c.yOffset=_+(w*T+C*M)-C):c.xOffset=c.yOffset=0,c.xOrigin=B,c.yOrigin=N,c.smooth=!!l,c.origin=n,c.originIsAbsolute=!!a,e.style[Ue]="0px 0px",u&&(In(u,c,"xOrigin",g,B),In(u,c,"yOrigin",m,N),In(u,c,"xOffset",y,c.xOffset),In(u,c,"yOffset",_,c.yOffset)),e.setAttribute("data-svg-origin",B+" "+N)},Fl=function(e,n){var a=e._gsap||new gy(e);if("x"in a&&!n&&!a.uncache)return a;var l=e.style,o=a.scaleX<0,u="px",c="deg",f=getComputedStyle(e),g=We(e,Ue)||"0",m,y,_,S,T,x,M,w,C,z,B,N,G,Y,j,I,F,it,et,nt,Et,ot,R,P,K,vt,mt,bt,yt,at,_t,qt;return m=y=_=x=M=w=C=z=B=0,S=T=1,a.svg=!!(e.getCTM&&zy(e)),f.translate&&((f.translate!=="none"||f.scale!=="none"||f.rotate!=="none")&&(l[Vt]=(f.translate!=="none"?"translate3d("+(f.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(f.rotate!=="none"?"rotate("+f.rotate+") ":"")+(f.scale!=="none"?"scale("+f.scale.split(" ").join(",")+") ":"")+(f[Vt]!=="none"?f[Vt]:"")),l.scale=l.rotate=l.translate="none"),Y=Af(e,a.svg),a.svg&&(a.uncache?(K=e.getBBox(),g=a.xOrigin-K.x+"px "+(a.yOrigin-K.y)+"px",P=""):P=!n&&e.getAttribute("data-svg-origin"),Kh(e,P||g,!!P||a.originIsAbsolute,a.smooth!==!1,Y)),N=a.xOrigin||0,G=a.yOrigin||0,Y!==Kl&&(it=Y[0],et=Y[1],nt=Y[2],Et=Y[3],m=ot=Y[4],y=R=Y[5],Y.length===6?(S=Math.sqrt(it*it+et*et),T=Math.sqrt(Et*Et+nt*nt),x=it||et?vs(et,it)*ya:0,C=nt||Et?vs(nt,Et)*ya+x:0,C&&(T*=Math.abs(Math.cos(C*As))),a.svg&&(m-=N-(N*it+G*nt),y-=G-(N*et+G*Et))):(qt=Y[6],at=Y[7],mt=Y[8],bt=Y[9],yt=Y[10],_t=Y[11],m=Y[12],y=Y[13],_=Y[14],j=vs(qt,yt),M=j*ya,j&&(I=Math.cos(-j),F=Math.sin(-j),P=ot*I+mt*F,K=R*I+bt*F,vt=qt*I+yt*F,mt=ot*-F+mt*I,bt=R*-F+bt*I,yt=qt*-F+yt*I,_t=at*-F+_t*I,ot=P,R=K,qt=vt),j=vs(-nt,yt),w=j*ya,j&&(I=Math.cos(-j),F=Math.sin(-j),P=it*I-mt*F,K=et*I-bt*F,vt=nt*I-yt*F,_t=Et*F+_t*I,it=P,et=K,nt=vt),j=vs(et,it),x=j*ya,j&&(I=Math.cos(j),F=Math.sin(j),P=it*I+et*F,K=ot*I+R*F,et=et*I-it*F,R=R*I-ot*F,it=P,ot=K),M&&Math.abs(M)+Math.abs(x)>359.9&&(M=x=0,w=180-w),S=Ft(Math.sqrt(it*it+et*et+nt*nt)),T=Ft(Math.sqrt(R*R+qt*qt)),j=vs(ot,R),C=Math.abs(j)>2e-4?j*ya:0,B=_t?1/(_t<0?-_t:_t):0),a.svg&&(P=e.getAttribute("transform"),a.forceCSS=e.setAttribute("transform","")||!Dy(We(e,Vt)),P&&e.setAttribute("transform",P))),Math.abs(C)>90&&Math.abs(C)<270&&(o?(S*=-1,C+=x<=0?180:-180,x+=x<=0?180:-180):(T*=-1,C+=C<=0?180:-180)),n=n||a.uncache,a.x=m-((a.xPercent=m&&(!n&&a.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-m)?-50:0)))?e.offsetWidth*a.xPercent/100:0)+u,a.y=y-((a.yPercent=y&&(!n&&a.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-y)?-50:0)))?e.offsetHeight*a.yPercent/100:0)+u,a.z=_+u,a.scaleX=Ft(S),a.scaleY=Ft(T),a.rotation=Ft(x)+c,a.rotationX=Ft(M)+c,a.rotationY=Ft(w)+c,a.skewX=C+c,a.skewY=z+c,a.transformPerspective=B+u,(a.zOrigin=parseFloat(g.split(" ")[2])||!n&&a.zOrigin||0)&&(l[Ue]=Io(g)),a.xOffset=a.yOffset=0,a.force3D=Fe.force3D,a.renderTransform=a.svg?vx:Cy?Uy:yx,a.uncache=0,a},Io=function(e){return(e=e.split(" "))[0]+" "+e[1]},Hh=function(e,n,a){var l=ve(n);return Ft(parseFloat(n)+parseFloat(Zn(e,"x",a+"px",l)))+l},yx=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,Uy(e,n)},ga="0deg",Ol="0px",ma=") ",Uy=function(e,n){var a=n||this,l=a.xPercent,o=a.yPercent,u=a.x,c=a.y,f=a.z,g=a.rotation,m=a.rotationY,y=a.rotationX,_=a.skewX,S=a.skewY,T=a.scaleX,x=a.scaleY,M=a.transformPerspective,w=a.force3D,C=a.target,z=a.zOrigin,B="",N=w==="auto"&&e&&e!==1||w===!0;if(z&&(y!==ga||m!==ga)){var G=parseFloat(m)*As,Y=Math.sin(G),j=Math.cos(G),I;G=parseFloat(y)*As,I=Math.cos(G),u=Hh(C,u,Y*I*-z),c=Hh(C,c,-Math.sin(G)*-z),f=Hh(C,f,j*I*-z+z)}M!==Ol&&(B+="perspective("+M+ma),(l||o)&&(B+="translate("+l+"%, "+o+"%) "),(N||u!==Ol||c!==Ol||f!==Ol)&&(B+=f!==Ol||N?"translate3d("+u+", "+c+", "+f+") ":"translate("+u+", "+c+ma),g!==ga&&(B+="rotate("+g+ma),m!==ga&&(B+="rotateY("+m+ma),y!==ga&&(B+="rotateX("+y+ma),(_!==ga||S!==ga)&&(B+="skew("+_+", "+S+ma),(T!==1||x!==1)&&(B+="scale("+T+", "+x+ma),C.style[Vt]=B||"translate(0, 0)"},vx=function(e,n){var a=n||this,l=a.xPercent,o=a.yPercent,u=a.x,c=a.y,f=a.rotation,g=a.skewX,m=a.skewY,y=a.scaleX,_=a.scaleY,S=a.target,T=a.xOrigin,x=a.yOrigin,M=a.xOffset,w=a.yOffset,C=a.forceCSS,z=parseFloat(u),B=parseFloat(c),N,G,Y,j,I;f=parseFloat(f),g=parseFloat(g),m=parseFloat(m),m&&(m=parseFloat(m),g+=m,f+=m),f||g?(f*=As,g*=As,N=Math.cos(f)*y,G=Math.sin(f)*y,Y=Math.sin(f-g)*-_,j=Math.cos(f-g)*_,g&&(m*=As,I=Math.tan(g-m),I=Math.sqrt(1+I*I),Y*=I,j*=I,m&&(I=Math.tan(m),I=Math.sqrt(1+I*I),N*=I,G*=I)),N=Ft(N),G=Ft(G),Y=Ft(Y),j=Ft(j)):(N=y,j=_,G=Y=0),(z&&!~(u+"").indexOf("px")||B&&!~(c+"").indexOf("px"))&&(z=Zn(S,"x",u,"px"),B=Zn(S,"y",c,"px")),(T||x||M||w)&&(z=Ft(z+T-(T*N+x*Y)+M),B=Ft(B+x-(T*G+x*j)+w)),(l||o)&&(I=S.getBBox(),z=Ft(z+l/100*I.width),B=Ft(B+o/100*I.height)),I="matrix("+N+","+G+","+Y+","+j+","+z+","+B+")",S.setAttribute("transform",I),C&&(S.style[Vt]=I)},_x=function(e,n,a,l,o){var u=360,c=ue(o),f=parseFloat(o)*(c&&~o.indexOf("rad")?ya:1),g=f-l,m=l+g+"deg",y,_;return c&&(y=o.split("_")[1],y==="short"&&(g%=u,g!==g%(u/2)&&(g+=g<0?u:-u)),y==="cw"&&g<0?g=(g+u*J0)%u-~~(g/u)*u:y==="ccw"&&g>0&&(g=(g-u*J0)%u-~~(g/u)*u)),e._pt=_=new De(e._pt,n,a,l,g,ex),_.e=m,_.u="deg",e._props.push(a),_},sm=function(e,n){for(var a in n)e[a]=n[a];return e},Sx=function(e,n,a){var l=sm({},a._gsap),o="perspective,force3D,transformOrigin,svgOrigin",u=a.style,c,f,g,m,y,_,S,T;l.svg?(g=a.getAttribute("transform"),a.setAttribute("transform",""),u[Vt]=n,c=Fl(a,1),Qn(a,Vt),a.setAttribute("transform",g)):(g=getComputedStyle(a)[Vt],u[Vt]=n,c=Fl(a,1),u[Vt]=g);for(f in un)g=l[f],m=c[f],g!==m&&o.indexOf(f)<0&&(S=ve(g),T=ve(m),y=S!==T?Zn(a,f,g,T):parseFloat(g),_=parseFloat(m),e._pt=new De(e._pt,c,f,y,_-y,Qh),e._pt.u=T||0,e._props.push(f));sm(c,l)};He("padding,margin,Width,Radius",function(d,e){var n="Top",a="Right",l="Bottom",o="Left",u=(e<3?[n,a,l,o]:[n+o,n+a,l+a,l+o]).map(function(c){return e<2?d+c:"border"+c+d});Lo[e>1?"border"+d:d]=function(c,f,g,m,y){var _,S;if(arguments.length<4)return _=u.map(function(T){return nn(c,T,g)}),S=_.join(" "),S.split(_[0]).length===5?_[0]:S;_=(m+"").split(" "),S={},u.forEach(function(T,x){return S[T]=_[x]=_[x]||_[(x-1)/2|0]}),c.init(f,S,y)}});var Ry={name:"css",register:Wh,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,a,l,o){var u=this._props,c=e.style,f=a.vars.startAt,g,m,y,_,S,T,x,M,w,C,z,B,N,G,Y,j,I;Mf||Wh(),this.styles=this.styles||Ay(e),j=this.styles.props,this.tween=a;for(x in n)if(x!=="autoRound"&&(m=n[x],!(Pe[x]&&my(x,n,a,l,e,o)))){if(S=typeof m,T=Lo[x],S==="function"&&(m=m.call(a,l,e,o),S=typeof m),S==="string"&&~m.indexOf("random(")&&(m=Ql(m)),T)T(this,e,x,m,a)&&(Y=1);else if(x.substr(0,2)==="--")g=(getComputedStyle(e).getPropertyValue(x)+"").trim(),m+="",Vn.lastIndex=0,Vn.test(g)||(M=ve(g),w=ve(m),w?M!==w&&(g=Zn(e,x,g,w)+w):M&&(m+=M)),this.add(c,"setProperty",g,m,l,o,0,0,x),u.push(x),j.push(x,0,c[x]);else if(S!=="undefined"){if(f&&x in f?(g=typeof f[x]=="function"?f[x].call(a,l,e,o):f[x],ue(g)&&~g.indexOf("random(")&&(g=Ql(g)),ve(g+"")||g==="auto"||(g+=Fe.units[x]||ve(nn(e,x))||""),(g+"").charAt(1)==="="&&(g=nn(e,x))):g=nn(e,x),_=parseFloat(g),C=S==="string"&&m.charAt(1)==="="&&m.substr(0,2),C&&(m=m.substr(2)),y=parseFloat(m),x in Ri&&(x==="autoAlpha"&&(_===1&&nn(e,"visibility")==="hidden"&&y&&(_=0),j.push("visibility",0,c.visibility),In(this,c,"visibility",_?"inherit":"hidden",y?"inherit":"hidden",!y)),x!=="scale"&&x!=="transform"&&(x=Ri[x],~x.indexOf(",")&&(x=x.split(",")[0]))),z=x in un,z){if(this.styles.save(x),I=m,S==="string"&&m.substring(0,6)==="var(--"){if(m=We(e,m.substring(4,m.indexOf(")"))),m.substring(0,5)==="calc("){var F=e.style.perspective;e.style.perspective=m,m=We(e,"perspective"),F?e.style.perspective=F:Qn(e,"perspective")}y=parseFloat(m)}if(B||(N=e._gsap,N.renderTransform&&!n.parseTransform||Fl(e,n.parseTransform),G=n.smoothOrigin!==!1&&N.smooth,B=this._pt=new De(this._pt,c,Vt,0,1,N.renderTransform,N,0,-1),B.dep=1),x==="scale")this._pt=new De(this._pt,N,"scaleY",N.scaleY,(C?ws(N.scaleY,C+y):y)-N.scaleY||0,Qh),this._pt.u=0,u.push("scaleY",x),x+="X";else if(x==="transformOrigin"){j.push(Ue,0,c[Ue]),m=gx(m),N.svg?Kh(e,m,0,G,0,this):(w=parseFloat(m.split(" ")[2])||0,w!==N.zOrigin&&In(this,N,"zOrigin",N.zOrigin,w),In(this,c,x,Io(g),Io(m)));continue}else if(x==="svgOrigin"){Kh(e,m,1,G,0,this);continue}else if(x in Hy){_x(this,N,x,_,C?ws(_,C+m):m);continue}else if(x==="smoothOrigin"){In(this,N,"smooth",N.smooth,m);continue}else if(x==="force3D"){N[x]=m;continue}else if(x==="transform"){Sx(this,m,e);continue}}else x in c||(x=Rs(x)||x);if(z||(y||y===0)&&(_||_===0)&&!tx.test(m)&&x in c)M=(g+"").substr((_+"").length),y||(y=0),w=ve(m)||(x in Fe.units?Fe.units[x]:M),M!==w&&(_=Zn(e,x,g,w)),this._pt=new De(this._pt,z?N:c,x,_,(C?ws(_,C+y):y)-_,!z&&(w==="px"||x==="zIndex")&&n.autoRound!==!1?ax:Qh),this._pt.u=w||0,z&&I!==m?(this._pt.b=g,this._pt.e=I,this._pt.r=nx):M!==w&&w!=="%"&&(this._pt.b=g,this._pt.r=ix);else if(x in c)px.call(this,e,x,g,C?C+m:m);else if(x in e)this.add(e,x,g||e[x],C?C+m:m,l,o);else if(x!=="parseTransform"){pf(x,m);continue}z||(x in c?j.push(x,0,c[x]):typeof e[x]=="function"?j.push(x,2,e[x]()):j.push(x,1,g||e[x])),u.push(x)}}Y&&by(this)},render:function(e,n){if(n.tween._time||!wf())for(var a=n._pt;a;)a.r(e,a.d),a=a._next;else n.styles.revert()},get:nn,aliases:Ri,getSetter:function(e,n,a){var l=Ri[n];return l&&l.indexOf(",")<0&&(n=l),n in un&&n!==Ue&&(e._gsap.x||nn(e,"x"))?a&&F0===a?n==="scale"?ox:rx:(F0=a||{})&&(n==="scale"?ux:cx):e.style&&!hf(e.style[n])?sx:~n.indexOf("-")?lx:bf(e,n)},core:{_removeProperty:Qn,_getMatrix:Af}};Re.utils.checkPrefix=Rs;Re.core.getStyleSaver=Ay;(function(d,e,n,a){var l=He(d+","+e+","+n,function(o){un[o]=1});He(e,function(o){Fe.units[o]="deg",Hy[o]=1}),Ri[l[13]]=d+","+e,He(a,function(o){var u=o.split(":");Ri[u[1]]=l[u[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");He("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(d){Fe.units[d]="px"});Re.registerPlugin(Ry);var pt=Re.registerPlugin(Ry)||Re;pt.core.Tween;var Gn,Go,lm,gi,Yl,Ny,Fh,Fo,By=function(){return typeof window<"u"},ky=function(){return Gn||By()&&(Gn=window.gsap)&&Gn.registerPlugin&&Gn},Jh=function(e){return typeof e=="function"},Ly=function(e){return console.warn(e)},xx=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Ti=.212671,hi=.71516,fi=.072169,Iy=function(e){return Jh(gi[e])?gi[e]:gi.filters[e]},Jo=function(e,n){var a=[],l=0,o=0,u,c;for(u=0;u<4;u++){for(c=0;c<5;c++)o=c===4?e[l+4]:0,a[l+c]=e[l]*n[c]+e[l+1]*n[c+5]+e[l+2]*n[c+10]+e[l+3]*n[c+15]+o;l+=5}return a},rm=function(e,n){var a=1-n,l=a*Ti,o=a*hi,u=a*fi;return Jo([l+n,o,u,0,0,l,o+n,u,0,0,l,o,u+n,0,0,0,0,0,1,0],e)},om=function(e,n,a){var l=Go(n),o=l[0]/255,u=l[1]/255,c=l[2]/255,f=1-a;return Jo([f+a*o*Ti,a*o*hi,a*o*fi,0,0,a*u*Ti,f+a*u*hi,a*u*fi,0,0,a*c*Ti,a*c*hi,f+a*c*fi,0,0,0,0,0,1,0],e)},um=function(e,n){n*=Math.PI/180;var a=Math.cos(n),l=Math.sin(n);return Jo([Ti+a*(1-Ti)+l*-Ti,hi+a*-hi+l*-hi,fi+a*-fi+l*(1-fi),0,0,Ti+a*-Ti+l*.143,hi+a*(1-hi)+l*.14,fi+a*-fi+l*-.283,0,0,Ti+a*-Ti+l*-.787329,hi+a*-hi+l*hi,fi+a*(1-fi)+l*fi,0,0,0,0,0,1,0,0,0,0,0,1],e)},cm=function(e,n){return Jo([n,0,0,0,.5*(1-n),0,n,0,0,.5*(1-n),0,0,n,0,.5*(1-n),0,0,0,1,0],e)},Gy=function(e,n){var a=Iy(n),l=e.filters||[],o=l.length,u;for(a||Ly(n+" not found. PixiPlugin.registerPIXI(PIXI)");--o>-1;)if(l[o]instanceof a)return l[o];return u=new a,n==="BlurFilter"&&(Fo?u.strength=0:u.blur=0),e.filters=[].concat(l,[u]),u},oe=function(e,n,a,l){n.add(a,e,a[e],l[e]),n._props.push(e)},hm=function(e,n){var a=Iy("ColorMatrixFilter"),l=new a;return l.matrix=n,l.brightness(e,!0),l.matrix},bx=function(e){var n={},a;for(a in e)n[a]=e[a];return n},Ve={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},Tx=function(e,n,a){var l=Gy(e,"ColorMatrixFilter"),o=e._gsColorMatrixFilter=e._gsColorMatrixFilter||bx(Ve),u=n.combineCMF&&!("colorMatrixFilter"in n&&!n.colorMatrixFilter),c,f,g;for(g=l.matrix,n.resolution&&(l.resolution=n.resolution),n.matrix&&n.matrix.length===g.length?(f=n.matrix,o.contrast!==1&&oe("contrast",a,o,Ve),o.hue&&oe("hue",a,o,Ve),o.brightness!==1&&oe("brightness",a,o,Ve),o.colorizeAmount&&(oe("colorize",a,o,Ve),oe("colorizeAmount",a,o,Ve)),o.saturation!==1&&oe("saturation",a,o,Ve)):(f=xx.slice(),n.contrast!=null?(f=cm(f,+n.contrast),oe("contrast",a,o,n)):o.contrast!==1&&(u?f=cm(f,o.contrast):oe("contrast",a,o,Ve)),n.hue!=null?(f=um(f,+n.hue),oe("hue",a,o,n)):o.hue&&(u?f=um(f,o.hue):oe("hue",a,o,Ve)),n.brightness!=null?(f=hm(+n.brightness,f),oe("brightness",a,o,n)):o.brightness!==1&&(u?f=hm(o.brightness,f):oe("brightness",a,o,Ve)),n.colorize!=null?(n.colorizeAmount="colorizeAmount"in n?+n.colorizeAmount:1,f=om(f,n.colorize,n.colorizeAmount),oe("colorize",a,o,n),oe("colorizeAmount",a,o,n)):o.colorizeAmount&&(u?f=om(f,o.colorize,o.colorizeAmount):(oe("colorize",a,o,Ve),oe("colorizeAmount",a,o,Ve))),n.saturation!=null?(f=rm(f,+n.saturation),oe("saturation",a,o,n)):o.saturation!==1&&(u?f=rm(f,o.saturation):oe("saturation",a,o,Ve))),c=f.length;--c>-1;)f[c]!==g[c]&&a.add(g,c,g[c],f[c],"colorMatrixFilter");a._props.push("colorMatrixFilter")},Mx=function(e,n){var a=n.t,l=n.p,o=n.color,u=n.set;u(a,l,o[0]<<16|o[1]<<8|o[2])},wx=function(e,n){var a=n.g;Fo?(a.fill(),a.stroke()):a&&(a.dirty++,a.clearDirty++)},Ex=function(e,n){n.t.visible=!!n.t.alpha},fm=function(e,n,a,l){var o=e[n],u=Go(Jh(o)?e[n.indexOf("set")||!Jh(e["get"+n.substr(3)])?n:"get"+n.substr(3)]():o),c=Go(a);l._pt=new Yl(l._pt,e,n,0,0,Mx,{t:e,p:n,color:u,set:Ny(e,n)}),l.add(u,0,u[0],c[0]),l.add(u,1,u[1],c[1]),l.add(u,2,u[2],c[2])},Ax={tint:1,lineColor:1,fillColor:1,strokeColor:1},dm="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),$h={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},Cx={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},qo=Math.PI/180,qy=function(e){return typeof e=="string"},Ox=function(e){return qy(e)&&e.charAt(1)==="="?e.substr(0,2)+parseFloat(e.substr(2))*qo:e*qo},zx=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e5)/1e5,n)},Hx=function(e,n,a,l,o,u){var c=360*(u?qo:1),f=qy(o),g=f&&o.charAt(1)==="="?+(o.charAt(0)+"1"):0,m=parseFloat(g?o.substr(2):o)*(u?qo:1),y=g?m*g:m-l,_=l+y,S,T;return f&&(S=o.split("_")[1],S==="short"&&(y%=c,y!==y%(c/2)&&(y+=y<0?c:-c)),S==="cw"&&y<0?y=(y+c*1e10)%c-~~(y/c)*c:S==="ccw"&&y>0&&(y=(y-c*1e10)%c-~~(y/c)*c)),e._pt=T=new Yl(e._pt,n,a,l,y,zx),T.e=_,T},pm=function(){if(!lm){Gn=ky(),gi=lm=gi||By()&&window.PIXI;var e=gi&&gi.VERSION&&parseFloat(gi.VERSION.split(".")[0])||0;Fh=e===4,Fo=e>=8,Go=function(a){return Gn.utils.splitColor((a+"").substr(0,2)==="0x"?"#"+a.substr(2):a)}}},bo,zl;for(bo=0;bo<dm.length;bo++)zl=dm[bo],$h[zl+"X"]=zl,$h[zl+"Y"]=zl;var Cf={version:"3.14.2",name:"pixi",register:function(e,n,a){Gn=e,Yl=a,Ny=n.getSetter,pm()},headless:!0,registerPIXI:function(e){gi=e},init:function(e,n,a,l,o){if(gi||pm(),!gi)return Ly("PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var u,c,f,g,m,y,_,S,T,x;for(y in n){if(u=$h[y],f=n[y],u)c=~y.charAt(y.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(e[u],c,e[u][c],u==="skew"?Ox(f):f,0,0,0,0,0,1);else if(y==="scale"||y==="anchor"||y==="pivot"||y==="tileScale")this.add(e[y],"x",e[y].x,f),this.add(e[y],"y",e[y].y,f);else if(y==="rotation"||y==="angle")Hx(this,e,y,e[y],f,y==="rotation");else if(Cx[y])g||(Tx(e,n.colorMatrixFilter||n,this),g=!0);else if(y==="blur"||y==="blurX"||y==="blurY"||y==="blurPadding"){if(m=Gy(e,"BlurFilter"),this.add(m,y,m[y],f),n.blurPadding!==0)for(_=n.blurPadding||Math.max(m[y],f)*2,S=e.filters.length;--S>-1;)e.filters[S].padding=Math.max(e.filters[S].padding,_)}else if(Ax[y])if((y==="lineColor"||y==="fillColor"||y==="strokeColor")&&e instanceof gi.Graphics)for(T=("fillStyle"in e)?[e]:(e.geometry||e).graphicsData,x=y.substr(0,y.length-5),Fo&&x==="line"&&(x="stroke"),this._pt=new Yl(this._pt,e,y,0,0,wx,{g:e.geometry||e}),S=T.length;--S>-1;)fm(Fh?T[S]:T[S][x+"Style"],Fh?y:"color",f,this);else fm(e,y,f,this);else y==="autoAlpha"?(this._pt=new Yl(this._pt,e,"visible",0,0,Ex),this.add(e,"alpha",e.alpha,f),this._props.push("alpha","visible")):y!=="resolution"&&this.add(e,y,"get",f);this._props.push(y)}}};ky()&&Gn.registerPlugin(Cf);var Dx=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Ux=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Rx=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,Nx=/(^[#\.][a-z]|[a-y][a-z])/i,Bx=Math.PI/180,kx=180/Math.PI,To=Math.sin,Mo=Math.cos,vi=Math.abs,sn=Math.sqrt,Lx=Math.atan2,tf=1e8,gm=function(e){return typeof e=="string"},Yy=function(e){return typeof e=="number"},Ix=function(e){return typeof e>"u"},Gx={},qx={},Yo=1e5,Xy=function(e){return Math.round((e+tf)%1*Yo)/Yo||(e<0?0:1)},Mt=function(e){return Math.round(e*Yo)/Yo||0},mm=function(e){return Math.round(e*1e10)/1e10||0},ym=function(e){return e.closed=Math.abs(e[0]-e[e.length-2])<.001&&Math.abs(e[1]-e[e.length-1])<.001},vm=function(e,n,a,l){var o=e[n],u=l===1?6:ef(o,a,l);if((u||!l)&&u+a+2<o.length)return e.splice(n,0,o.slice(0,a+u+2)),o.splice(0,a+u),1},jy=function(e,n,a){var l=e.length,o=~~(a*l);if(e[o]>n){for(;--o&&e[o]>n;);o<0&&(o=0)}else for(;e[++o]<n&&o<l;);return o<l?o:l-1},Yx=function(e,n){var a=e.length;for(e.reverse();a--;)e[a].reversed||Vx(e[a])},_m=function(e,n){return n.totalLength=e.totalLength,e.samples?(n.samples=e.samples.slice(0),n.lookup=e.lookup.slice(0),n.minLength=e.minLength,n.resolution=e.resolution):e.totalPoints&&(n.totalPoints=e.totalPoints),n},Xx=function(e,n){var a=e.length,l=e[a-1]||[],o=l.length;a&&n[0]===l[o-2]&&n[1]===l[o-1]&&(n=l.concat(n.slice(2)),a--),e[a]=n};function zo(d){d=gm(d)&&Nx.test(d)&&document.querySelector(d)||d;var e=d.getAttribute?d:0,n;return e&&(d=d.getAttribute("d"))?(e._gsPath||(e._gsPath={}),n=e._gsPath[d],n&&!n._dirty?n:e._gsPath[d]=Xo(d)):d?gm(d)?Xo(d):Yy(d[0])?[d]:d:console.warn("Expecting a <path> element or an SVG path data string")}function jx(d){for(var e=[],n=0;n<d.length;n++)e[n]=_m(d[n],d[n].slice(0));return _m(d,e)}function Vx(d){var e=0,n;for(d.reverse();e<d.length;e+=2)n=d[e],d[e]=d[e+1],d[e+1]=n;d.reversed=!d.reversed}var Px=function(e,n){var a=document.createElementNS("http://www.w3.org/2000/svg","path"),l=[].slice.call(e.attributes),o=l.length,u;for(n=","+n+",";--o>-1;)u=l[o].nodeName.toLowerCase(),n.indexOf(","+u+",")<0&&a.setAttributeNS(null,u,l[o].nodeValue);return a},Qx={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},Zx=function(e,n){for(var a=n?n.split(","):[],l={},o=a.length;--o>-1;)l[a[o]]=+e.getAttribute(a[o])||0;return l};function Wx(d,e){var n=d.tagName.toLowerCase(),a=.552284749831,l,o,u,c,f,g,m,y,_,S,T,x,M,w,C,z,B,N,G,Y,j,I;return n==="path"||!d.getBBox?d:(g=Px(d,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),I=Zx(d,Qx[n]),n==="rect"?(c=I.rx,f=I.ry||c,o=I.x,u=I.y,S=I.width-c*2,T=I.height-f*2,c||f?(x=o+c*(1-a),M=o+c,w=M+S,C=w+c*a,z=w+c,B=u+f*(1-a),N=u+f,G=N+T,Y=G+f*a,j=G+f,l="M"+z+","+N+" V"+G+" C"+[z,Y,C,j,w,j,w-(w-M)/3,j,M+(w-M)/3,j,M,j,x,j,o,Y,o,G,o,G-(G-N)/3,o,N+(G-N)/3,o,N,o,B,x,u,M,u,M+(w-M)/3,u,w-(w-M)/3,u,w,u,C,u,z,B,z,N].join(",")+"z"):l="M"+(o+S)+","+u+" v"+T+" h"+-S+" v"+-T+" h"+S+"z"):n==="circle"||n==="ellipse"?(n==="circle"?(c=f=I.r,y=c*a):(c=I.rx,f=I.ry,y=f*a),o=I.cx,u=I.cy,m=c*a,l="M"+(o+c)+","+u+" C"+[o+c,u+y,o+m,u+f,o,u+f,o-m,u+f,o-c,u+y,o-c,u,o-c,u-y,o-m,u-f,o,u-f,o+m,u-f,o+c,u-y,o+c,u].join(",")+"z"):n==="line"?l="M"+I.x1+","+I.y1+" L"+I.x2+","+I.y2:(n==="polyline"||n==="polygon")&&(_=(d.getAttribute("points")+"").match(Ux)||[],o=_.shift(),u=_.shift(),l="M"+o+","+u+" L"+_.join(","),n==="polygon"&&(l+=","+o+","+u+"z")),g.setAttribute("d",Qy(g._gsRawPath=Xo(l))),e&&d.parentNode&&(d.parentNode.insertBefore(g,d),d.parentNode.removeChild(d)),g)}function Vy(d,e,n){var a=d[e],l=d[e+2],o=d[e+4],u;return a+=(l-a)*n,l+=(o-l)*n,a+=(l-a)*n,u=l+(o+(d[e+6]-o)*n-l)*n-a,a=d[e+1],l=d[e+3],o=d[e+5],a+=(l-a)*n,l+=(o-l)*n,a+=(l-a)*n,Mt(Lx(l+(o+(d[e+7]-o)*n-l)*n-a,u)*kx)}function Py(d,e,n){n=Ix(n)?1:mm(n)||0,e=mm(e)||0;var a=Math.max(0,~~(vi(n-e)-1e-8)),l=jx(d);if(e>n&&(e=1-e,n=1-n,Yx(l),l.totalLength=0),e<0||n<0){var o=Math.abs(~~Math.min(e,n))+1;e+=o,n+=o}l.totalLength||Aa(l);var u=n>1,c=Sm(l,e,Gx,!0),f=Sm(l,n,qx),g=f.segment,m=c.segment,y=f.segIndex,_=c.segIndex,S=f.i,T=c.i,x=_===y,M=S===T&&x,w,C,z,B,N,G,Y,j;if(u||a){for(w=y<_||x&&S<T||M&&f.t<c.t,vm(l,_,T,c.t)&&(_++,w||(y++,M?(f.t=(f.t-c.t)/(1-c.t),S=0):x&&(S-=T))),Math.abs(1-(n-e))<1e-5?y=_-1:!f.t&&y?y--:vm(l,y,S,f.t)&&w&&_++,c.t===1&&(_=(_+1)%l.length),N=[],G=l.length,Y=1+G*a,j=_,Y+=(G-_+y)%G,B=0;B<Y;B++)Xx(N,l[j++%G]);l=N}else if(z=f.t===1?6:ef(g,S,f.t),e!==n)for(C=ef(m,T,M?c.t/f.t:c.t),x&&(z+=C),g.splice(S+z+2),(C||T)&&m.splice(0,T+C),B=l.length;B--;)(B<_||B>y)&&l.splice(B,1);else g.angle=Vy(g,S+z,0),S+=z,c=g[S],f=g[S+1],g.length=g.totalLength=0,g.totalPoints=l.totalPoints=8,g.push(c,f,c,f,c,f,c,f);return l.totalLength=0,l}function Kx(d,e,n){e=e||0,d.samples||(d.samples=[],d.lookup=[]);var a=~~d.resolution||12,l=1/a,o=d.length,u=d[e],c=d[e+1],f=e?e/6*a:0,g=d.samples,m=d.lookup,y=(e?d.minLength:tf)||tf,_=g[f+n*a-1],S=e?g[f-1]:0,T,x,M,w,C,z,B,N,G,Y,j,I,F,it,et,nt,Et;for(g.length=m.length=0,x=e+2;x<o;x+=6){if(M=d[x+4]-u,w=d[x+2]-u,C=d[x]-u,N=d[x+5]-c,G=d[x+3]-c,Y=d[x+1]-c,z=B=j=I=0,vi(M)<.01&&vi(N)<.01&&vi(C)+vi(Y)<.01)d.length>8&&(d.splice(x,6),x-=6,o-=6);else for(T=1;T<=a;T++)it=l*T,F=1-it,z=B-(B=(it*it*M+3*F*(it*w+F*C))*it),j=I-(I=(it*it*N+3*F*(it*G+F*Y))*it),nt=sn(j*j+z*z),nt<y&&(y=nt),S+=nt,g[f++]=S;u+=M,c+=N}if(_)for(_-=S;f<g.length;f++)g[f]+=_;if(g.length&&y){if(d.totalLength=Et=g[g.length-1]||0,d.minLength=y,Et/y<9999)for(nt=et=0,T=0;T<Et;T+=y)m[nt++]=g[et]<T?++et:et}else d.totalLength=g[0]=0;return e?S-g[e/2-1]:S}function Aa(d,e){var n,a,l;for(l=n=a=0;l<d.length;l++)d[l].resolution=~~e||12,n+=Kx(d[l]),a+=d[l].length;return d.totalPoints=a,d.totalLength=n,d}function ef(d,e,n){if(n<=0||n>=1)return 0;var a=d[e],l=d[e+1],o=d[e+2],u=d[e+3],c=d[e+4],f=d[e+5],g=d[e+6],m=d[e+7],y=a+(o-a)*n,_=o+(c-o)*n,S=l+(u-l)*n,T=u+(f-u)*n,x=y+(_-y)*n,M=S+(T-S)*n,w=c+(g-c)*n,C=f+(m-f)*n;return _+=(w-_)*n,T+=(C-T)*n,d.splice(e+2,4,Mt(y),Mt(S),Mt(x),Mt(M),Mt(x+(_-x)*n),Mt(M+(T-M)*n),Mt(_),Mt(T),Mt(w),Mt(C)),d.samples&&d.samples.splice(e/6*d.resolution|0,0,0,0,0,0,0,0),6}function Sm(d,e,n,a){n=n||{},d.totalLength||Aa(d),(e<0||e>1)&&(e=Xy(e));var l=0,o=d[0],u,c,f,g,m,y,_;if(!e)_=y=l=0,o=d[0];else if(e===1)_=1,l=d.length-1,o=d[l],y=o.length-8;else{if(d.length>1){for(f=d.totalLength*e,m=y=0;(m+=d[y++].totalLength)<f;)l=y;o=d[l],g=m-o.totalLength,e=(f-g)/(m-g)||0}u=o.samples,c=o.resolution,f=o.totalLength*e,y=o.lookup.length?o.lookup[~~(f/o.minLength)]||0:jy(u,f,e),g=y?u[y-1]:0,m=u[y],m<f&&(g=m,m=u[++y]),_=1/c*((f-g)/(m-g)+y%c),y=~~(y/c)*6,a&&_===1&&(y+6<o.length?(y+=6,_=0):l+1<d.length&&(y=_=0,o=d[++l]))}return n.t=_,n.i=y,n.path=d,n.segment=o,n.segIndex=l,n}function xm(d,e,n,a){var l=d[0],o=a||{},u,c,f,g,m,y,_,S,T;if((e<0||e>1)&&(e=Xy(e)),l.lookup||Aa(d),d.length>1){for(f=d.totalLength*e,m=y=0;(m+=d[y++].totalLength)<f;)l=d[y];g=m-l.totalLength,e=(f-g)/(m-g)||0}return u=l.samples,c=l.resolution,f=l.totalLength*e,y=l.lookup.length?l.lookup[e<1?~~(f/l.minLength):l.lookup.length-1]||0:jy(u,f,e),g=y?u[y-1]:0,m=u[y],m<f&&(g=m,m=u[++y]),_=1/c*((f-g)/(m-g)+y%c)||0,T=1-_,y=~~(y/c)*6,S=l[y],o.x=Mt((_*_*(l[y+6]-S)+3*T*(_*(l[y+4]-S)+T*(l[y+2]-S)))*_+S),o.y=Mt((_*_*(l[y+7]-(S=l[y+1]))+3*T*(_*(l[y+5]-S)+T*(l[y+3]-S)))*_+S),n&&(o.angle=l.totalLength?Vy(l,y,_>=1?1-1e-9:_||1e-9):l.angle||0),o}function Bl(d,e,n,a,l,o,u){for(var c=d.length,f,g,m,y,_;--c>-1;)for(f=d[c],g=f.length,m=0;m<g;m+=2)y=f[m],_=f[m+1],f[m]=y*e+_*a+o,f[m+1]=y*n+_*l+u;return d._dirty=1,d}function Fx(d,e,n,a,l,o,u,c,f){if(!(d===c&&e===f)){n=vi(n),a=vi(a);var g=l%360*Bx,m=Mo(g),y=To(g),_=Math.PI,S=_*2,T=(d-c)/2,x=(e-f)/2,M=m*T+y*x,w=-y*T+m*x,C=M*M,z=w*w,B=C/(n*n)+z/(a*a);B>1&&(n=sn(B)*n,a=sn(B)*a);var N=n*n,G=a*a,Y=(N*G-N*z-G*C)/(N*z+G*C);Y<0&&(Y=0);var j=(o===u?-1:1)*sn(Y),I=j*(n*w/a),F=j*-(a*M/n),it=(d+c)/2,et=(e+f)/2,nt=it+(m*I-y*F),Et=et+(y*I+m*F),ot=(M-I)/n,R=(w-F)/a,P=(-M-I)/n,K=(-w-F)/a,vt=ot*ot+R*R,mt=(R<0?-1:1)*Math.acos(ot/sn(vt)),bt=(ot*K-R*P<0?-1:1)*Math.acos((ot*P+R*K)/sn(vt*(P*P+K*K)));isNaN(bt)&&(bt=_),!u&&bt>0?bt-=S:u&&bt<0&&(bt+=S),mt%=S,bt%=S;var yt=Math.ceil(vi(bt)/(S/4)),at=[],_t=bt/yt,qt=4/3*To(_t/2)/(1+Mo(_t/2)),Ei=m*n,Da=y*n,Ua=y*-a,cn=m*a,ce;for(ce=0;ce<yt;ce++)l=mt+ce*_t,M=Mo(l),w=To(l),ot=Mo(l+=_t),R=To(l),at.push(M-qt*w,w+qt*M,ot+qt*R,R-qt*ot,ot,R);for(ce=0;ce<at.length;ce+=2)M=at[ce],w=at[ce+1],at[ce]=M*Ei+w*Ua+nt,at[ce+1]=M*Da+w*cn+Et;return at[ce-2]=c,at[ce-1]=f,at}}function Xo(d){var e=(d+"").replace(Rx,function(I){var F=+I;return F<1e-4&&F>-1e-4?0:F}).match(Dx)||[],n=[],a=0,l=0,o=2/3,u=e.length,c=0,f="ERROR: malformed path: "+d,g,m,y,_,S,T,x,M,w,C,z,B,N,G,Y,j=function(F,it,et,nt){C=(et-F)/3,z=(nt-it)/3,x.push(F+C,it+z,et-C,nt-z,et,nt)};if(!d||!isNaN(e[0])||isNaN(e[1]))return console.log(f),n;for(g=0;g<u;g++)if(N=S,isNaN(e[g])?(S=e[g].toUpperCase(),T=S!==e[g]):g--,y=+e[g+1],_=+e[g+2],T&&(y+=a,_+=l),g||(M=y,w=_),S==="M")x&&(x.length<8?n.length-=1:c+=x.length,ym(x)),a=M=y,l=w=_,x=[y,_],n.push(x),g+=2,S="L";else if(S==="C")x||(x=[0,0]),T||(a=l=0),x.push(y,_,a+e[g+3]*1,l+e[g+4]*1,a+=e[g+5]*1,l+=e[g+6]*1),g+=6;else if(S==="S")C=a,z=l,(N==="C"||N==="S")&&(C+=a-x[x.length-4],z+=l-x[x.length-3]),T||(a=l=0),x.push(C,z,y,_,a+=e[g+3]*1,l+=e[g+4]*1),g+=4;else if(S==="Q")C=a+(y-a)*o,z=l+(_-l)*o,T||(a=l=0),a+=e[g+3]*1,l+=e[g+4]*1,x.push(C,z,a+(y-a)*o,l+(_-l)*o,a,l),g+=4;else if(S==="T")C=a-x[x.length-4],z=l-x[x.length-3],x.push(a+C,l+z,y+(a+C*1.5-y)*o,_+(l+z*1.5-_)*o,a=y,l=_),g+=2;else if(S==="H")j(a,l,a=y,l),g+=1;else if(S==="V")j(a,l,a,l=y+(T?l-a:0)),g+=1;else if(S==="L"||S==="Z")S==="Z"&&(y=M,_=w,x.closed=!0),(S==="L"||vi(a-y)>.5||vi(l-_)>.5)&&(j(a,l,y,_),S==="L"&&(g+=2)),a=y,l=_;else if(S==="A"){if(G=e[g+4],Y=e[g+5],C=e[g+6],z=e[g+7],m=7,G.length>1&&(G.length<3?(z=C,C=Y,m--):(z=Y,C=G.substr(2),m-=2),Y=G.charAt(1),G=G.charAt(0)),B=Fx(a,l,+e[g+1],+e[g+2],+e[g+3],+G,+Y,(T?a:0)+C*1,(T?l:0)+z*1),g+=m,B)for(m=0;m<B.length;m++)x.push(B[m]);a=x[x.length-2],l=x[x.length-1]}else console.log(f);return g=x.length,g<6?(n.pop(),g=0):ym(x),n.totalPoints=c+g,n}function Jx(d,e){e===void 0&&(e=1);for(var n=d[0],a=0,l=[n,a],o=2;o<d.length;o+=2)l.push(n,a,d[o],a=(d[o]-n)*e/2,n=d[o],-a);return l}function nf(d,e){vi(d[0]-d[2])<1e-4&&vi(d[1]-d[3])<1e-4&&(d=d.slice(2));var n=d.length-2,a=+d[0],l=+d[1],o=+d[2],u=+d[3],c=[a,l,a,l],f=o-a,g=u-l,m=d.nonSmooth||[],y=Math.abs(d[n]-a)<.001&&Math.abs(d[n+1]-l)<.001,_,S,T,x,M,w,C,z,B,N,G,Y,j,I,F;if(!n)return[a,l,a,l,a,l,a,l];for(y&&(d.push(o,u),o=a,u=l,a=d[n-2],l=d[n-1],d.unshift(a,l),n+=4,m=[0,0].concat(m)),e=e||e===0?+e:1,T=2;T<n;T+=2)if(_=a,S=l,a=o,l=u,o=+d[T+2],u=+d[T+3],!(a===o&&l===u)){if(x=f,M=g,f=o-a,g=u-l,m[T]){c.push(a-(a-_)/4,l-(l-S)/4,a,l,a+(o-a)/4,l+(u-l)/4);continue}w=sn(x*x+M*M),C=sn(f*f+g*g),z=sn(Math.pow(f/C+x/w,2)+Math.pow(g/C+M/w,2)),B=(w+C)*e*.25/z,N=a-(a-_)*(w?B/w:0),G=a+(o-a)*(C?B/C:0),Y=a-(N+((G-N)*(w*3/(w+C)+.5)/4||0)),j=l-(l-S)*(w?B/w:0),I=l+(u-l)*(C?B/C:0),F=l-(j+((I-j)*(w*3/(w+C)+.5)/4||0)),c.push(Mt(N+Y),Mt(j+F),Mt(a),Mt(l),Mt(G+Y),Mt(I+F))}return a!==o||l!==u||c.length<4?c.push(Mt(o),Mt(u),Mt(o),Mt(u)):c.length-=2,c.length===2?c.push(a,l,a,l,a,l):y&&(c.splice(0,6),c.length-=6),c.closed=y,c}function Qy(d){Yy(d[0])&&(d=[d]);var e="",n=d.length,a,l,o,u;for(l=0;l<n;l++){for(u=d[l],e+="M"+Mt(u[0])+","+Mt(u[1])+" C",a=u.length,o=2;o<a;o++)e+=Mt(u[o++])+","+Mt(u[o++])+" "+Mt(u[o++])+","+Mt(u[o++])+" "+Mt(u[o++])+","+Mt(u[o])+" ";u.closed&&(e+="z")}return e}var ln,Ca,Of,$o,kl,Ho,jo,Xl,Mi="transform",af=Mi+"Origin",Zy,Wy=function(e){var n=e.ownerDocument||e;for(!(Mi in e.style)&&("msTransform"in e.style)&&(Mi="msTransform",af=Mi+"Origin");n.parentNode&&(n=n.parentNode););if(Ca=window,jo=new Jl,n){ln=n,Of=n.documentElement,$o=n.body,Xl=ln.createElementNS("http://www.w3.org/2000/svg","g"),Xl.style.transform="none";var a=n.createElement("div"),l=n.createElement("div"),o=n&&(n.body||n.firstElementChild);o&&o.appendChild&&(o.appendChild(a),a.appendChild(l),a.style.position="static",a.style.transform="translate3d(0,0,1px)",Zy=l.offsetParent!==a,o.removeChild(a))}return n},$x=function(e){for(var n,a;e&&e!==$o;)a=e._gsap,a&&a.uncache&&a.get(e,"x"),a&&!a.scaleX&&!a.scaleY&&a.renderTransform&&(a.scaleX=a.scaleY=1e-4,a.renderTransform(1,a),n?n.push(a):n=[a]),e=e.parentNode;return n},Ky=[],Fy=[],tb=function(){return Ca.pageYOffset||ln.scrollTop||Of.scrollTop||$o.scrollTop||0},eb=function(){return Ca.pageXOffset||ln.scrollLeft||Of.scrollLeft||$o.scrollLeft||0},zf=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},ib=function d(e){if(Ca.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return d(e)},Dh=function d(e,n){if(e.parentNode&&(ln||Wy(e))){var a=zf(e),l=a?a.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",o=a?n?"rect":"g":"div",u=n!==2?0:100,c=n===3?100:0,f={position:"absolute",display:"block",pointerEvents:"none",margin:"0",padding:"0"},g=ln.createElementNS?ln.createElementNS(l.replace(/^https/,"http"),o):ln.createElement(o);return n&&(a?(Ho||(Ho=d(e)),g.setAttribute("width",.01),g.setAttribute("height",.01),g.setAttribute("transform","translate("+u+","+c+")"),g.setAttribute("fill","transparent"),Ho.appendChild(g)):(kl||(kl=d(e),Object.assign(kl.style,f)),Object.assign(g.style,f,{width:"0.1px",height:"0.1px",top:c+"px",left:u+"px"}),kl.appendChild(g))),g}throw"Need document and parent."},nb=function(e){for(var n=new Jl,a=0;a<e.numberOfItems;a++)n.multiply(e.getItem(a).matrix);return n},ab=function(e){var n=e.getCTM(),a;return n||(a=e.style[Mi],e.style[Mi]="none",e.appendChild(Xl),n=Xl.getCTM(),e.removeChild(Xl),a?e.style[Mi]=a:e.style.removeProperty(Mi.replace(/([A-Z])/g,"-$1").toLowerCase())),n||jo.clone()},sb=function(e,n){var a=zf(e),l=e===a,o=a?Ky:Fy,u=e.parentNode,c=u&&!a&&u.shadowRoot&&u.shadowRoot.appendChild?u.shadowRoot:u,f,g,m,y,_,S;if(e===Ca)return e;if(o.length||o.push(Dh(e,1),Dh(e,2),Dh(e,3)),f=a?Ho:kl,a)l?(m=ab(e),y=-m.e/m.a,_=-m.f/m.d,g=jo):e.getBBox?(m=e.getBBox(),g=e.transform?e.transform.baseVal:{},g=g.numberOfItems?g.numberOfItems>1?nb(g):g.getItem(0).matrix:jo,y=g.a*m.x+g.c*m.y,_=g.b*m.x+g.d*m.y):(g=new Jl,y=_=0),n&&e.tagName.toLowerCase()==="g"&&(y=_=0),(l||!e.getBoundingClientRect().width?a:u).appendChild(f),f.setAttribute("transform","matrix("+g.a+","+g.b+","+g.c+","+g.d+","+(g.e+y)+","+(g.f+_)+")");else{if(y=_=0,Zy)for(g=e.offsetParent,m=e;m&&(m=m.parentNode)&&m!==g&&m.parentNode;)(Ca.getComputedStyle(m)[Mi]+"").length>4&&(y=m.offsetLeft,_=m.offsetTop,m=0);if(S=Ca.getComputedStyle(e),S.position!=="absolute"&&S.position!=="fixed")for(g=e.offsetParent;u&&u!==g;)y+=u.scrollLeft||0,_+=u.scrollTop||0,u=u.parentNode;m=f.style,m.top=e.offsetTop-_+"px",m.left=e.offsetLeft-y+"px",m[Mi]=S[Mi],m[af]=S[af],m.position=S.position==="fixed"?"fixed":"absolute",c.appendChild(f)}return f},Uh=function(e,n,a,l,o,u,c){return e.a=n,e.b=a,e.c=l,e.d=o,e.e=u,e.f=c,e},Jl=(function(){function d(n,a,l,o,u,c){n===void 0&&(n=1),a===void 0&&(a=0),l===void 0&&(l=0),o===void 0&&(o=1),u===void 0&&(u=0),c===void 0&&(c=0),Uh(this,n,a,l,o,u,c)}var e=d.prototype;return e.inverse=function(){var a=this.a,l=this.b,o=this.c,u=this.d,c=this.e,f=this.f,g=a*u-l*o||1e-10;return Uh(this,u/g,-l/g,-o/g,a/g,(o*f-u*c)/g,-(a*f-l*c)/g)},e.multiply=function(a){var l=this.a,o=this.b,u=this.c,c=this.d,f=this.e,g=this.f,m=a.a,y=a.c,_=a.b,S=a.d,T=a.e,x=a.f;return Uh(this,m*l+_*u,m*o+_*c,y*l+S*u,y*o+S*c,f+T*l+x*u,g+T*o+x*c)},e.clone=function(){return new d(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(a){var l=this.a,o=this.b,u=this.c,c=this.d,f=this.e,g=this.f;return l===a.a&&o===a.b&&u===a.c&&c===a.d&&f===a.e&&g===a.f},e.apply=function(a,l){l===void 0&&(l={});var o=a.x,u=a.y,c=this.a,f=this.b,g=this.c,m=this.d,y=this.e,_=this.f;return l.x=o*c+u*g+y||0,l.y=o*f+u*m+_||0,l},d})();function Cs(d,e,n,a){if(!d||!d.parentNode||(ln||Wy(d)).documentElement===d)return new Jl;var l=$x(d),o=zf(d),u=o?Ky:Fy,c=sb(d,n),f=u[0].getBoundingClientRect(),g=u[1].getBoundingClientRect(),m=u[2].getBoundingClientRect(),y=c.parentNode,_=!a&&ib(d),S=new Jl((g.left-f.left)/100,(g.top-f.top)/100,(m.left-f.left)/100,(m.top-f.top)/100,f.left+(_?0:eb()),f.top+(_?0:tb()));if(y.removeChild(c),l)for(f=l.length;f--;)g=l[f],g.scaleX=g.scaleY=0,g.renderTransform(1,g);return e?S.inverse():S}var lb="x,translateX,left,marginLeft,xPercent".split(","),rb="y,translateY,top,marginTop,yPercent".split(","),ob=Math.PI/180,pi,Jy,Ss,sf,Rh,bm,ub=function(){return pi||typeof window<"u"&&(pi=window.gsap)&&pi.registerPlugin&&pi},Hl=function(e,n,a,l){for(var o=n.length,u=l===2?0:l,c=0;c<o;c++)e[u]=parseFloat(n[c][a]),l===2&&(e[u+1]=0),u+=2;return e},Ms=function(e,n,a){return parseFloat(e._gsap.get(e,n,a||"px"))||0},$y=function(e){var n=e[0],a=e[1],l;for(l=2;l<e.length;l+=2)n=e[l]+=n,a=e[l+1]+=a},Tm=function(e,n,a,l,o,u,c,f,g){if(c.type==="cubic")n=[n];else{c.fromCurrent!==!1&&n.unshift(Ms(a,l,f),o?Ms(a,o,g):0),c.relative&&$y(n);var m=o?nf:Jx;n=[m(n,c.curviness)]}return n=u(tv(n,a,c)),Vo(e,a,l,n,"x",f),o&&Vo(e,a,o,n,"y",g),Aa(n,c.resolution||(c.curviness===0?20:12))},cb=function(e){return e},hb=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,Mm=function(e,n,a){var l=Cs(e),o=0,u=0,c;return(e.tagName+"").toLowerCase()==="svg"?(c=e.viewBox.baseVal,c.width||(c={width:+e.getAttribute("width"),height:+e.getAttribute("height")})):c=n&&e.getBBox&&e.getBBox(),n&&n!=="auto"&&(o=n.push?n[0]*(c?c.width:e.offsetWidth||0):n.x,u=n.push?n[1]*(c?c.height:e.offsetHeight||0):n.y),a.apply(o||u?l.apply({x:o,y:u}):{x:l.e,y:l.f})},lf=function(e,n,a,l){var o=Cs(e.parentNode,!0,!0),u=o.clone().multiply(Cs(n)),c=Mm(e,a,o),f=Mm(n,l,o),g=f.x,m=f.y,y;return u.e=u.f=0,l==="auto"&&n.getTotalLength&&n.tagName.toLowerCase()==="path"&&(y=n.getAttribute("d").match(hb)||[],y=u.apply({x:+y[0],y:+y[1]}),g+=y.x,m+=y.y),y&&(y=u.apply(n.getBBox()),g-=y.x,m-=y.y),u.e=g-c.x,u.f=m-c.y,u},tv=function(e,n,a){var l=a.align,o=a.matrix,u=a.offsetX,c=a.offsetY,f=a.alignOrigin,g=e[0][0],m=e[0][1],y=Ms(n,"x"),_=Ms(n,"y"),S,T,x;return!e||!e.length?zo("M0,0L0,0"):(l&&(l==="self"||(S=sf(l)[0]||n)===n?Bl(e,1,0,0,1,y-g,_-m):(f&&f[2]!==!1?pi.set(n,{transformOrigin:f[0]*100+"% "+f[1]*100+"%"}):f=[Ms(n,"xPercent")/-100,Ms(n,"yPercent")/-100],T=lf(n,S,f,"auto"),x=T.apply({x:g,y:m}),Bl(e,T.a,T.b,T.c,T.d,y+T.e-(x.x-T.e),_+T.f-(x.y-T.f)))),o?Bl(e,o.a,o.b,o.c,o.d,o.e,o.f):(u||c)&&Bl(e,1,0,0,1,u||0,c||0),e)},Vo=function(e,n,a,l,o,u){var c=n._gsap,f=c.harness,g=f&&f.aliases&&f.aliases[a],m=g&&g.indexOf(",")<0?g:a,y=e._pt=new Jy(e._pt,n,m,0,0,cb,0,c.set(n,m,e));y.u=Ss(c.get(n,m,u))||0,y.path=l,y.pp=o,e._props.push(m)},fb=function(e,n){return function(a){return e||n!==1?Py(a,e,n):a}},ev={version:"3.14.2",name:"motionPath",register:function(e,n,a){pi=e,Ss=pi.utils.getUnit,sf=pi.utils.toArray,Rh=pi.core.getStyleSaver,bm=pi.core.reverting||function(){},Jy=a},init:function(e,n,a){if(!pi)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;(!(typeof n=="object"&&!n.style)||!n.path)&&(n={path:n});var l=[],o=n,u=o.path,c=o.autoRotate,f=o.unitX,g=o.unitY,m=o.x,y=o.y,_=u[0],S=fb(n.start,"end"in n?n.end:1),T,x;if(this.rawPaths=l,this.target=e,this.tween=a,this.styles=Rh&&Rh(e,"transform"),(this.rotate=c||c===0)&&(this.rOffset=parseFloat(c)||0,this.radians=!!n.useRadians,this.rProp=n.rotation||"rotation",this.rSet=e._gsap.set(e,this.rProp,this),this.ru=Ss(e._gsap.get(e,this.rProp))||0),Array.isArray(u)&&!("closed"in u)&&typeof _!="number"){for(x in _)!m&&~lb.indexOf(x)?m=x:!y&&~rb.indexOf(x)&&(y=x);m&&y?l.push(Tm(this,Hl(Hl([],u,m,0),u,y,1),e,m,y,S,n,f||Ss(u[0][m]),g||Ss(u[0][y]))):m=y=0;for(x in _)x!==m&&x!==y&&l.push(Tm(this,Hl([],u,x,2),e,x,0,S,n,Ss(u[0][x])))}else T=S(tv(zo(n.path),e,n)),Aa(T,n.resolution),l.push(T),Vo(this,e,n.x||"x",T,"x",n.unitX||"px"),Vo(this,e,n.y||"y",T,"y",n.unitY||"px");a.vars.immediateRender&&this.render(a.progress(),this)},render:function(e,n){var a=n.rawPaths,l=a.length,o=n._pt;if(n.tween._time||!bm()){for(e>1?e=1:e<0&&(e=0);l--;)xm(a[l],e,!l&&n.rotate,a[l]);for(;o;)o.set(o.t,o.p,o.path[o.pp]+o.u,o.d,e),o=o._next;n.rotate&&n.rSet(n.target,n.rProp,a[0].angle*(n.radians?ob:1)+n.rOffset+n.ru,n,e)}else n.styles.revert()},getLength:function(e){return Aa(zo(e)).totalLength},sliceRawPath:Py,getRawPath:zo,pointsToSegment:nf,stringToRawPath:Xo,rawPathToString:Qy,transformRawPath:Bl,getGlobalMatrix:Cs,getPositionOnPath:xm,cacheRawPathMeasurements:Aa,convertToPath:function(e,n){return sf(e).map(function(a){return Wx(a,n!==!1)})},convertCoordinates:function(e,n,a){var l=Cs(n,!0,!0).multiply(Cs(e));return a?l.apply(a):l},getAlignMatrix:lf,getRelativePosition:function(e,n,a,l){var o=lf(e,n,a,l);return{x:o.e,y:o.f}},arrayToRawPath:function(e,n){n=n||{};var a=Hl(Hl([],e,n.x||"x",0),e,n.y||"y",1);return n.relative&&$y(a),[n.type==="cubic"?a:nf(a,n.curviness)]}};ub()&&pi.registerPlugin(ev);var Oa=(d=>(d.World="world",d.Battle="battle",d))(Oa||{});class db{emitter=new B_;emit(e,n){this.emitter.emit(e,n)}on(e,n){this.emitter.on(e,n)}off(e,n){this.emitter.off(e,n)}destroy(){this.emitter.removeAllListeners()}}let rt;const pb=()=>{rt&&rt.destroy(),rt=new db};var gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mb(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var iv={exports:{}};(function(d,e){(function(){var n,a;a=function(l){return d.exports=l},n={linear:function(l,o,u,c){return u*l/c+o},easeInQuad:function(l,o,u,c){return u*(l/=c)*l+o},easeOutQuad:function(l,o,u,c){return-u*(l/=c)*(l-2)+o},easeInOutQuad:function(l,o,u,c){return(l/=c/2)<1?u/2*l*l+o:-u/2*(--l*(l-2)-1)+o},easeInCubic:function(l,o,u,c){return u*(l/=c)*l*l+o},easeOutCubic:function(l,o,u,c){return u*((l=l/c-1)*l*l+1)+o},easeInOutCubic:function(l,o,u,c){return(l/=c/2)<1?u/2*l*l*l+o:u/2*((l-=2)*l*l+2)+o},easeInQuart:function(l,o,u,c){return u*(l/=c)*l*l*l+o},easeOutQuart:function(l,o,u,c){return-u*((l=l/c-1)*l*l*l-1)+o},easeInOutQuart:function(l,o,u,c){return(l/=c/2)<1?u/2*l*l*l*l+o:-u/2*((l-=2)*l*l*l-2)+o},easeInQuint:function(l,o,u,c){return u*(l/=c)*l*l*l*l+o},easeOutQuint:function(l,o,u,c){return u*((l=l/c-1)*l*l*l*l+1)+o},easeInOutQuint:function(l,o,u,c){return(l/=c/2)<1?u/2*l*l*l*l*l+o:u/2*((l-=2)*l*l*l*l+2)+o},easeInSine:function(l,o,u,c){return-u*Math.cos(l/c*(Math.PI/2))+u+o},easeOutSine:function(l,o,u,c){return u*Math.sin(l/c*(Math.PI/2))+o},easeInOutSine:function(l,o,u,c){return-u/2*(Math.cos(Math.PI*l/c)-1)+o},easeInExpo:function(l,o,u,c){return l===0?o:u*Math.pow(2,10*(l/c-1))+o},easeOutExpo:function(l,o,u,c){return l===c?o+u:u*(-Math.pow(2,-10*l/c)+1)+o},easeInOutExpo:function(l,o,u,c){return(l/=c/2)<1?u/2*Math.pow(2,10*(l-1))+o:u/2*(-Math.pow(2,-10*--l)+2)+o},easeInCirc:function(l,o,u,c){return-u*(Math.sqrt(1-(l/=c)*l)-1)+o},easeOutCirc:function(l,o,u,c){return u*Math.sqrt(1-(l=l/c-1)*l)+o},easeInOutCirc:function(l,o,u,c){return(l/=c/2)<1?-u/2*(Math.sqrt(1-l*l)-1)+o:u/2*(Math.sqrt(1-(l-=2)*l)+1)+o},easeInElastic:function(l,o,u,c){var f,g,m;return m=1.70158,g=0,f=u,l===0||(l/=c),g||(g=c*.3),f<Math.abs(u)?(f=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/f),-(f*Math.pow(2,10*(l-=1))*Math.sin((l*c-m)*(2*Math.PI)/g))+o},easeOutElastic:function(l,o,u,c){var f,g,m;return m=1.70158,g=0,f=u,l===0||(l/=c),g||(g=c*.3),f<Math.abs(u)?(f=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/f),f*Math.pow(2,-10*l)*Math.sin((l*c-m)*(2*Math.PI)/g)+u+o},easeInOutElastic:function(l,o,u,c){var f,g,m;return m=1.70158,g=0,f=u,l===0||(l/=c/2),g||(g=c*(.3*1.5)),f<Math.abs(u)?(f=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/f),l<1?-.5*(f*Math.pow(2,10*(l-=1))*Math.sin((l*c-m)*(2*Math.PI)/g))+o:f*Math.pow(2,-10*(l-=1))*Math.sin((l*c-m)*(2*Math.PI)/g)*.5+u+o},easeInBack:function(l,o,u,c,f){return f===void 0&&(f=1.70158),u*(l/=c)*l*((f+1)*l-f)+o},easeOutBack:function(l,o,u,c,f){return f===void 0&&(f=1.70158),u*((l=l/c-1)*l*((f+1)*l+f)+1)+o},easeInOutBack:function(l,o,u,c,f){return f===void 0&&(f=1.70158),(l/=c/2)<1?u/2*(l*l*(((f*=1.525)+1)*l-f))+o:u/2*((l-=2)*l*(((f*=1.525)+1)*l+f)+2)+o},easeInBounce:function(l,o,u,c){var f;return f=n.easeOutBounce(c-l,0,u,c),u-f+o},easeOutBounce:function(l,o,u,c){return(l/=c)<1/2.75?u*(7.5625*l*l)+o:l<2/2.75?u*(7.5625*(l-=1.5/2.75)*l+.75)+o:l<2.5/2.75?u*(7.5625*(l-=2.25/2.75)*l+.9375)+o:u*(7.5625*(l-=2.625/2.75)*l+.984375)+o},easeInOutBounce:function(l,o,u,c){var f;return l<c/2?(f=n.easeInBounce(l*2,0,u,c),f*.5+o):(f=n.easeOutBounce(l*2-c,0,u,c),f*.5+u*.5+o)}},a(n)}).call(gb)})(iv);var yb=iv.exports;const wm=mb(yb);function tu(d,e){if(d){if(typeof d=="function")return d;if(typeof d=="string")return wm[d]}else return wm[e]}class vb{constructor(e){this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new Ll(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var e;(e=this.viewport.options.events.domElement)==null||e.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.visible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),a=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!a||!a.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.visible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const a=e.global.x-this.last.x,l=e.global.y-this.last.y;(this.checkThreshold(a)||this.checkThreshold(l))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.visible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new se;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.visible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const Dl=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class _b{constructor(e){this.viewport=e,this.list=[],this.plugins={}}add(e,n,a=Dl.length){const l=this.plugins[e];l&&l.destroy(),this.plugins[e]=n;const o=Dl.indexOf(e);o!==-1&&Dl.splice(o,1),Dl.splice(a,0,e),this.sort()}get(e,n){var a;return n&&(a=this.plugins[e])!=null&&a.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of Dl)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const a of this.list)a.down(e)&&(n=!0);return n}move(e){let n=!1;for(const a of this.viewport.plugins.list)a.move(e)&&(n=!0);return n}up(e){let n=!1;for(const a of this.list)a.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const a of this.list)a.wheel(e)&&(n=!0);return n}}class _i{constructor(e){this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}const Sb={removeOnInterrupt:!1,ease:"linear",time:1e3};class xb extends _i{constructor(e,n={}){super(e),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},Sb,n),this.options.ease=tu(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new se(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const a=this.parent.width,l=this.parent.height;this.complete(),(a!==this.parent.width||l!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const a=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const l=this.startWidth,o=this.deltaWidth;this.parent.fitWidth(l+o*a,this.keepCenter,this.height===null)}if(this.height!==null){const l=this.startHeight,o=this.deltaHeight;this.parent.fitHeight(l+o*a,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const l=this.startX,o=this.startY,u=this.deltaX,c=this.deltaY,f=new se(this.parent.x,this.parent.y);this.parent.moveCenter(l+u*a,o+c*a),this.parent.emit("moved",{viewport:this.parent,original:f,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const bb={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class Tb extends _i{constructor(e,n={}){super(e),this.options=Object.assign({},bb,n),this.ease=tu(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const a=this.options.underflow.toLowerCase();a==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=a.indexOf("left")!==-1?-1:a.indexOf("right")!==-1?1:0,this.underflowY=a.indexOf("top")!==-1?-1:a.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,a=typeof e.y>"u"?0:e.y,l=typeof e.width>"u"?this.parent.worldWidth:e.width,o=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>l,top:this.parent.top<a,bottom:this.parent.bottom>o,topLeft:new se(n*this.parent.scale.x,a*this.parent.scale.y),bottomRight:new se(l*this.parent.scale.x-this.parent.screenWidth,o*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new se(0,0),bottomRight:new se(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let a,l=this.parent.plugins.get("decelerate",!0);l&&(l.x||l.y)&&(l.x&&l.percentChangeX===((e=l.options)==null?void 0:e.friction)||l.y&&l.percentChangeY===((n=l.options)==null?void 0:n.friction))&&(a=this.oob(),(a.left&&this.left||a.right&&this.right)&&(l.percentChangeX=this.options.friction),(a.top&&this.top||a.bottom&&this.bottom)&&(l.percentChangeY=this.options.friction));const o=this.parent.plugins.get("drag",!0)||{},u=this.parent.plugins.get("pinch",!0)||{};if(l=l||{},!(o!=null&&o.active)&&!(u!=null&&u.active)&&(!this.toX||!this.toY)&&(!l.x||!l.y)){a=a||this.oob();const c=a.topLeft,f=a.bottomRight;if(!this.toX&&!l.x){let g=null;a.left&&this.left?g=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-c.x:a.right&&this.right&&(g=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-f.x),g!==null&&this.parent.x!==g&&(this.toX={time:0,start:this.parent.x,delta:g-this.parent.x,end:g},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!l.y){let g=null;a.top&&this.top?g=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-c.y:a.bottom&&this.bottom&&(g=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-f.y),g!==null&&this.parent.y!==g&&(this.toY={time:0,start:this.parent.y,delta:g-this.parent.y,end:g},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const Mb={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class wb extends _i{constructor(e,n={}){super(e),this.options=Object.assign({},Mb,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new se(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let a=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,a=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,a=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,a=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,a=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,a=!0);a&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let a=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,a=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,a=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,a=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,a=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,a=!0);a&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const Eb={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class Ab extends _i{constructor(e,n={}){super(e),this.options=Object.assign({},Eb,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const a=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/a,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const a=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/a,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const a=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/a,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const a=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/a,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const o=this.options.minScale;e.x=typeof o.x>"u"?null:o.x,e.y=typeof o.y>"u"?null:o.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const o=this.options.maxScale;n.x=typeof o.x>"u"?null:o.x,n.y=typeof o.y>"u"?null:o.y}let a=this.parent.scale.x,l=this.parent.scale.y;e.x!==null&&a<e.x&&(a=e.x),n.x!==null&&a>n.x&&(a=n.x),e.y!==null&&l<e.y&&(l=e.y),n.y!==null&&l>n.y&&(l=n.y),(a!==this.parent.scale.x||l!==this.parent.scale.y)&&(this.parent.scale.set(a,l),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const Cb={friction:.98,bounce:.8,minSpeed:.01},Bn=16;class Ob extends _i{constructor(e,n={}){super(e),this.options=Object.assign({},Cb,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",a=>this.handleMoved(a))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const a=e-n.time;this.x=(this.parent.x-n.x)/a,this.y=(this.parent.y-n.y)/a,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,a=this.timeSinceRelease,l=this.timeSinceRelease+e;if(this.x){const o=this.percentChangeX,u=Math.log(o);this.parent.x+=this.x*Bn/u*(Math.pow(o,l/Bn)-Math.pow(o,a/Bn)),this.x*=Math.pow(this.percentChangeX,e/Bn)}if(this.y){const o=this.percentChangeY,u=Math.log(o);this.parent.y+=this.y*Bn/u*(Math.pow(o,l/Bn)-Math.pow(o,a/Bn)),this.y*=Math.pow(this.percentChangeY,e/Bn)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const zb={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class Hb extends _i{constructor(e,n={}){super(e),this.windowEventHandlers=[],this.options=Object.assign({},zb,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=l=>{e.includes(l.code)&&(this.keyIsPressed=!0)},a=l=>{e.includes(l.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",a),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){typeof window>"u"||(window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",a=this.parent.input.count();return!!((a===1||a>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},(this.parent.parent||this.parent).toLocal(this.last,void 0,this.last),this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,a=e.global.y,l=this.parent.input.count();if(l===1||l>1&&!this.parent.plugins.get("pinch",!0)){const o={x:n,y:a};(this.parent.parent||this.parent).toLocal(o,void 0,o);const u=o.x-this.last.x,c=o.y-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(u)||this.yDirection&&this.parent.input.checkThreshold(c))return this.xDirection&&(this.parent.x+=(o.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(o.y-this.last.y)*this.options.factor),this.last=o,this.moved||this.parent.emit("drag-start",{event:e,screen:new se(this.last.x,this.last.y),world:this.parent.toWorld(new se(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const a=n[0];return a.last&&(this.last={x:a.last.x,y:a.last.y},this.current=a.id),this.moved=!1,!0}else if(this.last&&this.moved){const a=new se(this.last.x,this.last.y);return(this.parent.parent||this.parent).toGlobal(a,a,!0),this.parent.emit("drag-end",{event:e,screen:a,world:this.parent.toWorld(a),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const a=e.deltaMode?this.options.lineHeight:1,l=[e.deltaX,e.deltaY],[o,u]=this.options.wheelSwapAxes?l.reverse():l;return this.xDirection&&(this.parent.x+=o*a*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=u*a*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const Db={speed:0,acceleration:null,radius:null};class Ub extends _i{constructor(e,n,a={}){super(e),this.target=n,this.options=Object.assign({},Db,a),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let a=this.target.x,l=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const c=Math.atan2(this.target.y-n.y,this.target.x-n.x);a=this.target.x-Math.cos(c)*this.options.radius,l=this.target.y-Math.sin(c)*this.options.radius}else return;const o=a-n.x,u=l-n.y;if(o||u)if(this.options.speed)if(this.options.acceleration){const c=Math.atan2(l-n.y,a-n.x),f=Math.sqrt(Math.pow(o,2)+Math.pow(u,2));if(f){const g=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);f>g?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const m=Math.cos(c)*this.velocity.x,y=Math.sin(c)*this.velocity.y,_=Math.abs(m)>Math.abs(o)?a:n.x+m,S=Math.abs(y)>Math.abs(u)?l:n.y+y;this.parent.moveCenter(_,S),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const c=Math.atan2(l-n.y,a-n.x),f=Math.cos(c)*this.options.speed,g=Math.sin(c)*this.options.speed,m=Math.abs(f)>Math.abs(o)?a:n.x+f,y=Math.abs(g)>Math.abs(u)?l:n.y+g;this.parent.moveCenter(m,y),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(a,l),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const Rb={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class Nb extends _i{constructor(e,n={}){super(e),this.options=Object.assign({},Rb,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,a=e.global.y;if(this.radiusSquared){const l=this.parent.toScreen(this.parent.center);if(Math.pow(l.x-n,2)+Math.pow(l.y-a,2)>=this.radiusSquared){const o=Math.atan2(l.y-a,l.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(o))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(o))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(o)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(o)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&a<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&a>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const Bb={noDrag:!1,percent:1,center:null,factor:1,axis:"all"},kb=new se;class Lb extends _i{constructor(e,n={}){super(e),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},Bb,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const{x:n,y:a}=(this.parent.parent||this.parent).toLocal(e.global,void 0,kb),l=this.parent.input.touches;if(l.length>=2){const o=l[0],u=l[1],c=o.last&&u.last?Math.sqrt(Math.pow(u.last.x-o.last.x,2)+Math.pow(u.last.y-o.last.y,2)):null;if(o.id===e.pointerId?o.last={x:n,y:a,data:e}:u.id===e.pointerId&&(u.last={x:n,y:a,data:e}),c){let f;const g=new se(o.last.x+(u.last.x-o.last.x)/2,o.last.y+(u.last.y-o.last.y)/2);this.options.center||(f=this.parent.toLocal(g,this.parent.parent||this.parent));let m=Math.sqrt(Math.pow(u.last.x-o.last.x,2)+Math.pow(u.last.y-o.last.y,2));m=m===0?m=1e-10:m;const y=(1-c/m)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=y),this.isAxisY()&&(this.parent.scale.y+=y),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:g});const _=this.parent.plugins.get("clamp-zoom",!0);if(_&&_.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const S=(this.parent.parent||this.parent).toLocal(f,this.parent);this.parent.x+=(g.x-S.x)*this.options.factor,this.parent.y+=(g.y-S.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(g.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(g.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=g,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const Ib={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class Gb extends _i{constructor(e,n,a,l={}){super(e),this.options=Object.assign({},Ib,l),this.ease=tu(l.ease,"easeInOutSine"),this.x=n,this.y=a,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let a,l,o;const u=this.startX,c=this.startY,f=this.deltaX,g=this.deltaY;if(n.time>this.options.time)a=!0,l=u+f,o=c+g;else{const m=this.ease(n.time,0,1,this.options.time);l=u+f*m,o=c+g*m}this.options.topLeft?this.parent.moveCorner(l,o):this.parent.moveCenter(l,o),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),a&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const qb={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class Yb extends _i{constructor(e,n={}){super(e),this.options=Object.assign({},qb,n),this.ease=tu(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,a=this.parent.screenWidth/this.xScale,l=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:a-e,deltaY:l-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const a=this.snapping;if(a.time+=e,a.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const o=this.snapping,u=this.ease(o.time,o.startX,o.deltaX,this.options.time),c=this.ease(o.time,o.startY,o.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/u,this.parent.scale.y=this.parent.screenHeight/c}const l=this.parent.plugins.get("clamp-zoom",!0);l&&l.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const Xb={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class jb extends _i{constructor(e,n={}){super(e),this.options=Object.assign({},Xb,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){typeof window>"u"||(window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let a;this.options.center||(a=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const l=this.parent.plugins.get("clamp-zoom",!0);if(l&&l.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const o=this.parent.parent||this.parent;o.toLocal(a,this.parent,a);const u=o.toLocal(e);this.parent.x+=u.x-a.x,this.parent.y+=u.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,typeof this.options.smooth=="number"&&this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),a=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,l=Math.pow(2,(1+this.options.percent)*a);let o;this.options.center||(o=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=l),this.isAxisY()&&(this.parent.scale.y*=l),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const u=this.parent.plugins.get("clamp-zoom",!0);if(u&&u.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const c=this.parent.parent||this.parent;c.toLocal(o,this.parent,o);const f=c.toLocal(n);this.parent.x+=f.x-o.x,this.parent.y+=f.y-o.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),a=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,l=Math.pow(2,(1+this.options.percent)*a);if(this.options.smooth){const o={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+o.x)*l-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+o.y)*l-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let o;this.options.center||(o=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=l),this.isAxisY()&&(this.parent.scale.y*=l),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const u=this.parent.plugins.get("clamp-zoom",!0);if(u&&u.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const c=this.parent.parent||this.parent;c.toLocal(o,this.parent,o);const f=c.toLocal(n);this.parent.x+=f.x-o.x,this.parent.y+=f.y-o.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}const Vb={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:k_.shared,allowPreserveDragOutside:!1};class Pb extends jt{constructor(e){super(),this._disableOnContextMenu=n=>n.preventDefault(),this.options={...Vb,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new vb(this),this.plugins=new _b(this)}destroy(e){var n;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((n=this.options.events.domElement)==null||n.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Ll(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=typeof window>"u"?0:window.innerWidth,n=typeof window>"u"?0:window.innerHeight,a,l){this.screenWidth=e,this.screenHeight=n,typeof a<"u"&&(this._worldWidth=a),typeof l<"u"&&(this._worldHeight=l),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new Ll(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new se(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new se(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new se(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,a;typeof e[0]=="number"?(n=e[0],a=e[1]):(n=e[0].x,a=e[0].y);const l=(this.worldScreenWidth/2-n)*this.scale.x,o=(this.worldScreenHeight/2-a)*this.scale.y;return(this.x!==l||this.y!==o)&&(this.position.set(l,o),this.plugins.reset(),this.dirty=!0),this}get corner(){return new se(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,a;return e.length===1?(n=-e[0].x*this.scale.x,a=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,a=-e[1]*this.scale.y),(n!==this.x||a!==this.y)&&(this.position.set(n,a),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const a=this.screenWidth/e,l=this.screenHeight/n;return Math.min(a,l)}findCover(e,n){const a=this.screenWidth/e,l=this.screenHeight/n;return Math.max(a,l)}fitWidth(e=this.worldWidth,n,a=!0,l){let o;n&&(o=this.center),this.scale.x=this.screenWidth/e,a&&(this.scale.y=this.scale.x);const u=this.plugins.get("clamp-zoom",!0);return!l&&u&&u.clamp(),n&&o&&this.moveCenter(o),this}fitHeight(e=this.worldHeight,n,a=!0,l){let o;n&&(o=this.center),this.scale.y=this.screenHeight/e,a&&(this.scale.x=this.scale.y);const u=this.plugins.get("clamp-zoom",!0);return!l&&u&&u.clamp(),n&&o&&this.moveCenter(o),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const a=this.plugins.get("clamp-zoom",!0);return a&&a.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,a=this.worldHeight){let l;e&&(l=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/a,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const o=this.plugins.get("clamp-zoom",!0);return o&&o.clamp(),e&&l&&this.moveCenter(l),this}setZoom(e,n){let a;n&&(a=this.center),this.scale.set(e);const l=this.plugins.get("clamp-zoom",!0);return l&&l.clamp(),n&&a&&this.moveCenter(a),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new Yb(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new se(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new Ll(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new Hb(this,e)),this}clamp(e){return this.plugins.add("clamp",new wb(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new Ob(this,e)),this}bounce(e){return this.plugins.add("bounce",new Tb(this,e)),this}pinch(e){return this.plugins.add("pinch",new Lb(this,e)),this}snap(e,n,a){return this.plugins.add("snap",new Gb(this,e,n,a)),this}follow(e,n){return this.plugins.add("follow",new Ub(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new jb(this,e)),this}animate(e){return this.plugins.add("animate",new xb(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new Ab(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new Nb(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,a,l,o){o&&(a>this.worldScreenWidth||l>this.worldScreenHeight)&&(this.fit(!0,a,l),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let u=!1;e<this.left?(this.left=e,u=!0):e+a>this.right&&(this.right=e+a,u=!0),n<this.top?(this.top=n,u=!0):n+l>this.bottom&&(this.bottom=n+l,u=!0),u&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}class Qb{constructor(e){this.viewport=e,this.initDefaultBehavior()}initDefaultBehavior(){this.viewport.drag({mouseButtons:"left"}).pinch().wheel().clamp({direction:"all",underflow:"center"}).clampZoom({minScale:.4,maxScale:1.35}),this.viewport.decelerate({friction:.85})}updateSize(e,n){this.viewport.screenWidth=e,this.viewport.screenHeight=n,this.viewport.dirty=!0}initConstraints(e){this.viewport.worldWidth=e.x+e.width,this.viewport.worldHeight=e.y+e.height;const n=e.x+e.width/2,a=e.y+e.height/2;this.viewport.moveCenter(n,a),this.viewport.setZoom(1,!0)}applyGridMask(e,n){const a=new Oe().rect(0,0,n.width-180,n.height-180).fill(16777215);return a.eventMode="none",e.addChild(a),e.mask=a,a}lock(){this.viewport.plugins.pause("drag"),this.viewport.plugins.pause("wheel"),this.viewport.plugins.pause("pinch")}unlock(){this.viewport.plugins.resume("drag"),this.viewport.plugins.resume("wheel"),this.viewport.plugins.resume("pinch")}async focusOnBattleCenter(e){if(e.length===0)return;const n=e.reduce((l,o)=>l+o.x,0)/e.length,a=e.reduce((l,o)=>l+o.y,0)/e.length;return new Promise(l=>{this.viewport.snap(n,a,{removeOnInterrupt:!0,time:1e3,ease:"easeInOutExpo"}),this.viewport.animate({scale:.5,time:1e3,ease:"easeInOutExpo",callbackOnComplete:()=>l()})})}async focusOnPoint(e,n=!1,a=!0){this.viewport.plugins.pause("snap");const o=this.viewport.getVisibleBounds(),{width:u,height:c,x:f,y:g}=o;if(e.x>f+100&&e.x<f+u-100&&e.y>g+100&&e.y<g+c-100&&!n)return;let y=f+u/2,_=g+c/2;if(a){e.x<f+100?y=e.x-200+u/2:e.x>f+u-100&&(y=e.x+200-u/2);const T=g+100,x=g+c-100,M=e.y-50;M<T?_=M-200+c/2:M>x&&(_=M+200-c/2)}else y=e.x,_=e.y-50;return new Promise(S=>{this.viewport.animate({position:{x:y,y:_},time:800,ease:"easeInOutCubic",removeOnInterrupt:!0,callbackOnComplete:()=>S()})})}jumpToPoint(e,n){this.viewport.moveCenter(e,n)}}const wt={Player:"player",Enemy:"enemy",Neutral:"neutral"},_s={Idle:"idle",Dead:"dead"},me={Obstacle:"obstacle",Flat:"flat",Hill:"hill",Cliff:"cliff"},Z={Idle:"idle",PlayerMoving:"player_moving",PlayerAttacking:"player_attacking",EnemyTurn:"enemy_turn",SkillTargeting:"skill_targeting",Initializing:"initializing",Ended:"ended"},Gt={Preparing:"preparing",Playing:"playing",Victory:"victory",Defeat:"defeat"},_a=100,Hf=16777215,nv=.85,av=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}],rf={[me.Obstacle]:{id:me.Obstacle,name:"Obstacle",color:"#4b6f44",canPatch:!1,canBeSeed:!0,moveCost:999,defenseBonus:0,blocksMovement:!0,blocksLineOfSight:!0},[me.Flat]:{id:me.Flat,name:"Flat",color:"#7c9a4a",canPatch:!0,canBeSeed:!1,moveCost:10,defenseBonus:0,blocksMovement:!1,blocksLineOfSight:!1},[me.Hill]:{id:me.Hill,name:"Hill",color:"#9a7c4a",canPatch:!0,canBeSeed:!0,moveCost:15,defenseBonus:10,blocksMovement:!1,blocksLineOfSight:!1},[me.Cliff]:{id:me.Cliff,name:"Cliff",color:"#6b6b6b",canPatch:!1,canBeSeed:!1,moveCost:999,defenseBonus:25,blocksMovement:!0,blocksLineOfSight:!0}};function sv(d,e){const n=_a*(1.5*d),a=_a*(Math.sqrt(3)*(e+d/2));return{x:n,y:a}}function rn(d){const[e,n]=d.split(":").map(Number);return{q:e??0,r:n??0}}function Nt({q:d,r:e}){return`${d}:${e}`}function wi(d,e){return Math.max(Math.abs(d.q-e.q),Math.abs(d.r-e.r),Math.abs(-d.q-d.r-(-e.q-e.r)))}function of(d,e){return av.map(n=>({q:d+n.q,r:e+n.r}))}function Em(d,e){return d%2===0?[{q:d+1,r:e-1},{q:d+1,r:e},{q:d,r:e+1},{q:d-1,r:e},{q:d-1,r:e-1},{q:d,r:e-1}]:[{q:d+1,r:e},{q:d+1,r:e+1},{q:d,r:e+1},{q:d-1,r:e+1},{q:d-1,r:e},{q:d,r:e-1}]}class ae{static pathCache=new Map;constructor(){throw new Error("PathCalculator is a static utility class")}static getReachableNodes(e,n,a){const o=new Map,u=new Map,c=Nt(e),f=[{q:e.q,r:e.r,costSoFar:0}];for(o.set(c,0),u.set(c,null);f.length>0;){f.sort((y,_)=>y.costSoFar-_.costSoFar);const g=f.shift(),m=Nt(g);for(const y of av){const _=g.q+y.q,S=g.r+y.r,T=Nt({q:_,r:S}),x=a.get(T);if(x&&!x.isObstacle&&!x.entityId){const w=(rf[x.terrain]?.moveCost??10)*30/n.speed,C=g.costSoFar+w;C<=n.currentStamina&&(!o.has(T)||C<o.get(T))&&(o.set(T,C),u.set(T,m),f.push({q:_,r:S,costSoFar:C}))}}}return{reachableIds:Array.from(o.keys()),reachableMap:o,parentMap:u}}static restorePath(e,n){const a=[];let l=e;for(;l!==null;)a.push(l),l=n.get(l)||null;return a.reverse().slice(1)}static findPath(e,n,a){const l=`${e}->${n}`;if(ae.pathCache.has(l))return ae.pathCache.get(l);const o=ae.computeAStarPath(e,n,a);return ae.pathCache.set(l,o),o}static getPathToHex(e,n,a,l){const o=ae.findPath(e,n,l);if(o.length===0)return{path:[],lastStepId:null,cost:0};const u=[];let c=null,f=0;for(const g of o)if(a.has(g))u.push(g),c=g,f=a.get(g)||f;else break;return{path:u,lastStepId:c,cost:f}}static constructFullPath(e,n,a){const l=[{x:e.x,y:e.y}];return n.forEach(o=>{const u=a.get(o);u&&l.push({x:u.x,y:u.y})}),l}static getRadius(e,n,a,l=!1){const o=new Map,u=[{...e,dist:0}],c=new Set([Nt(e)]);for(;u.length>0;){const{q:f,r:g,dist:m}=u.shift();if(m>0){const y=Nt({q:f,r:g}),_=a.get(y);(!l||_&&!_.entityId)&&o.set(y,m)}if(!(m>=n))for(const y of of(f,g)){const _=Nt(y),S=a.get(_);S&&!S.isObstacle&&!c.has(_)&&(c.add(_),u.push({...y,dist:m+1}))}}return o}static clearCache(){ae.pathCache.clear()}static computeAStarPath(e,n,a,l){const o=rn(e),u=rn(n),c=.15,f=10,g=new Map,m=new Map,y=new Map,_=[e];for(g.set(e,null),m.set(e,0),y.set(e,wi(o,u));_.length>0;){_.sort((M,w)=>(y.get(M)??1/0)-(y.get(w)??1/0));const S=_.shift();if(S===n){const M=[];let w=S;for(;w&&w!==e;)M.push(w),w=g.get(w)||null;return M.reverse()}const{q:T,r:x}=rn(S);for(const M of of(T,x)){const w=Nt(M),C=a.get(w);if(!C||C.isObstacle||C.entityId&&w!==e&&w!==n)continue;const z=rf[C.terrain]?.moveCost??10;let B=0;if(l&&l.has(w)){const Y=l.get(w)||0;B=Math.min(f,Y*c)}const N=z+B,G=(m.get(S)||0)+N;if(!m.has(w)||G<m.get(w)){g.set(w,S),m.set(w,G);const Y=wi(rn(w),u);y.set(w,G+Y),_.includes(w)||_.push(w)}}}return[]}}function Zb(d){return function(){let e=d+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}}function Wb(d){let e=2166136261;for(let n=0;n<d.length;n++)e^=d.charCodeAt(n),e=Math.imul(e,16777619);return e>>>0}const lv=d=>{if(d.length<2)return[...d];const e=[],n=(a,l,o,u,c)=>{const f=c*c,g=f*c;return .5*(2*l+(-a+o)*c+(2*a-5*l+4*o-u)*f+(-a+3*l-3*o+u)*g)};for(let a=0;a<d.length-1;a++){const l=d[a],o=d[a+1],u=d[a-1]??l,c=d[a+2]??o;for(let f=0;f<=1;f+=.05)e.push({x:n(u.x,l.x,o.x,c.x,f),y:n(u.y,l.y,o.y,c.y,f)})}return e};function rv(d){const e=[...d].filter(u=>u.count>0).sort((u,c)=>c.stats.initiative-u.stats.initiative),n=[];if(e.length===0)return n;const a=e[0].faction;let l=1,o={id:`${a}_${l}_${Date.now()}`,faction:a,unitIds:[e[0].unitId]};for(let u=1;u<e.length;u++){const c=e[u];c.faction===o.faction?o.unitIds.push(c.unitId):(n.push(o),l=l+1,o={id:`${c.faction}_${l}_${Date.now()}`,faction:c.faction,unitIds:[c.unitId]})}return n.push(o),n}const ov=(d,e)=>d.finishedPools.some(n=>n.unitIds.includes(e)),Kb=(d,e)=>Po(d)?.unitIds.includes(e)??!1,Po=d=>d.turnQueue[0]||null,Qo={path:[],lastStepId:null,cost:0},Am=()=>({units:new Map,battleMap:new Map,selectedUnitId:null,selectedHexId:null,selectedPath:Qo,round:1,activeFaction:wt.Player,reachableHexes:[],reachableHexesWithCost:new Map,currentPathPoints:[],turnQueue:[],finishedPools:[],selectedSkillId:null,targetHexes:[],status:Gt.Preparing});class qn{static updateHex(e,n,a){const l=e.battleMap.get(n);l&&e.battleMap.set(n,{...l,...a})}static updateUnit(e,n,a){const l=e.units.get(n);l&&e.units.set(n,{...l,...a})}static resetSelectedPath(e){e.selectedPath=Qo}static setReachableHexes(e,n,a){e.reachableHexes=n,e.reachableHexesWithCost=a}}const Cm=d=>{let e;const n=new Set,a=(g,m)=>{const y=typeof g=="function"?g(e):g;if(!Object.is(y,e)){const _=e;e=m??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(S=>S(e,_))}},l=()=>e,c={setState:a,getState:l,getInitialState:()=>f,subscribe:g=>(n.add(g),()=>n.delete(g))},f=e=d(a,l,c);return c},Fb=(d=>d?Cm(d):Cm),Jb=d=>d;function uv(d,e=Jb){const n=xs.useSyncExternalStore(d.subscribe,xs.useCallback(()=>e(d.getState()),[d,e]),xs.useCallback(()=>e(d.getInitialState()),[d,e]));return xs.useDebugValue(n),n}const $b=d=>{const e=Fb(d),n=a=>uv(e,a);return Object.assign(n,e),n},cv=(d=>$b),Om={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},$l=new Map,wo=d=>{const e=$l.get(d);return e?Object.fromEntries(Object.entries(e.stores).map(([n,a])=>[n,a.getState()])):{}},t2=(d,e,n)=>{if(d===void 0)return{type:"untracked",connection:e.connect(n)};const a=$l.get(n.name);if(a)return{type:"tracked",store:d,...a};const l={connection:e.connect(n),stores:{}};return $l.set(n.name,l),{type:"tracked",store:d,...l}},e2=(d,e)=>{if(e===void 0)return;const n=$l.get(d);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&$l.delete(d))},i2=d=>{var e,n;if(!d)return;const a=d.split(`
`),l=a.findIndex(u=>u.includes("api.setState"));if(l<0)return;const o=((e=a[l+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(o))==null?void 0:n[1]},n2=(d,e={})=>(n,a,l)=>{const{enabled:o,anonymousActionType:u,store:c,...f}=e;let g;try{g=(o??(Om?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!g)return d(n,a,l);const{connection:m,...y}=t2(c,g,f);let _=!0;l.setState=((x,M,w)=>{const C=n(x,M);if(!_)return C;const z=w===void 0?{type:u||i2(new Error().stack)||"anonymous"}:typeof w=="string"?{type:w}:w;return c===void 0?(m?.send(z,a()),C):(m?.send({...z,type:`${c}/${z.type}`},{...wo(f.name),[c]:l.getState()}),C)}),l.devtools={cleanup:()=>{m&&typeof m.unsubscribe=="function"&&m.unsubscribe(),e2(f.name,c)}};const S=(...x)=>{const M=_;_=!1,n(...x),_=M},T=d(l.setState,a,l);if(y.type==="untracked"?m?.init(T):(y.stores[y.store]=l,m?.init(Object.fromEntries(Object.entries(y.stores).map(([x,M])=>[x,x===y.store?T:M.getState()])))),l.dispatchFromDevtools&&typeof l.dispatch=="function"){let x=!1;const M=l.dispatch;l.dispatch=(...w)=>{(Om?"production":void 0)!=="production"&&w[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),M(...w)}}return m.subscribe(x=>{var M;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Nh(x.payload,w=>{if(w.type==="__setState"){if(c===void 0){S(w.state);return}Object.keys(w.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const C=w.state[c];if(C==null)return;JSON.stringify(l.getState())!==JSON.stringify(C)&&S(C);return}l.dispatchFromDevtools&&typeof l.dispatch=="function"&&l.dispatch(w)});case"DISPATCH":switch(x.payload.type){case"RESET":return S(T),c===void 0?m?.init(l.getState()):m?.init(wo(f.name));case"COMMIT":if(c===void 0){m?.init(l.getState());return}return m?.init(wo(f.name));case"ROLLBACK":return Nh(x.state,w=>{if(c===void 0){S(w),m?.init(l.getState());return}S(w[c]),m?.init(wo(f.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Nh(x.state,w=>{if(c===void 0){S(w);return}JSON.stringify(l.getState())!==JSON.stringify(w[c])&&S(w[c])});case"IMPORT_STATE":{const{nextLiftedState:w}=x.payload,C=(M=w.computedStates.slice(-1)[0])==null?void 0:M.state;if(!C)return;S(c===void 0?C:C[c]),m?.send(null,w);return}case"PAUSE_RECORDING":return _=!_}return}}),T},a2=n2,Nh=(d,e)=>{let n;try{n=JSON.parse(d)}catch(a){console.error("[zustand devtools middleware] Could not parse the received json",a)}n!==void 0&&e(n)},s2=d=>(e,n,a)=>{const l=a.subscribe;return a.subscribe=((u,c,f)=>{let g=u;if(c){const m=f?.equalityFn||Object.is;let y=u(a.getState());g=_=>{const S=u(_);if(!m(y,S)){const T=y;c(y=S,T)}},f?.fireImmediately&&c(y,y)}return l(g)}),d(e,n,a)},hv=s2,V=cv()(a2(hv((d,e)=>({...Am(),apply:n=>d(a=>(n(a),{...a})),updateHex:(n,a)=>d(l=>(qn.updateHex(l,n,a),{...l})),updateUnit:(n,a)=>d(l=>(qn.updateUnit(l,n,a),{...l})),resetSelectedPath:()=>d(n=>(qn.resetSelectedPath(n),{...n})),setReachableHexes:(n,a)=>d(l=>(qn.setReachableHexes(l,n,a),{...l})),setStatus:n=>d({status:n}),setSelectedUnit:n=>d({selectedUnitId:n}),setSelectedHex:n=>d({selectedHexId:n}),setSelectedSkill:n=>d({selectedSkillId:n}),setSelectedPath:n=>d({selectedPath:n}),setTargetHexes:n=>d({targetHexes:n}),addUnit:n=>d(a=>{const l=new Map(a.units);return l.set(n.unitId,n),{units:l}}),setUnits:n=>{const a=new Map;n.forEach(l=>a.set(l.unitId,l)),d({units:a})},removeUnit:n=>d(a=>{const l=new Map(a.units);return l.delete(n),{units:l}}),setBattleMap:n=>d({battleMap:n}),applyUnitDeath:n=>d(a=>{const{unitId:l,hexId:o,newQueue:u}=n,c=new Map(a.units),f=c.get(l);f&&c.set(l,{...f,isDead:!0,count:0,currentUnitHp:0});const g=new Map(a.battleMap),m=g.get(o);return m&&g.set(o,{...m,entityId:void 0}),{units:c,battleMap:g,turnQueue:u,selectedUnitId:a.selectedUnitId===l?null:a.selectedUnitId}}),setTurnQueue:n=>d({turnQueue:n}),setRound:n=>d({round:n}),setActiveFaction:n=>d({activeFaction:n}),reset:()=>d(Am())})),{name:"BattleGame",enabled:!0})),l2=.3;class r2{constructor(e,n,a,l,o,u,c,f,g){this.pathRenderer=e,this.inputController=n,this.skillManager=a,this.cameraManager=l,this.highlightManager=o,this.entityRegistry=u,this.stateMachine=c,this.turnManager=f,this.aiTurnManager=g,this.setupStoreSubscriptions()}unsubscribers=[];setupStoreSubscriptions(){this.unsubscribers.push(V.subscribe(e=>e.targetHexes,()=>this.skillRangeHexHighlights()),V.subscribe(e=>e.reachableHexes,()=>this.reachableHexesHighlight()),V.subscribe(e=>e.selectedHexId,e=>this.handleHexSelection(e)),V.subscribe(e=>e.selectedUnitId,(e,n)=>{e!==n&&this.handleUnitSelection(e)})),this.stateMachine.onStateChange((e,n)=>{if(this.stateMachine.isBlocking()&&(this.highlightManager.clearHoverState(),this.highlightManager.resetAllHexes()),n===Z.Idle||n===Z.SkillTargeting){this.highlightManager.updateSkillRangeHighlights(),V.getState().resetSelectedPath(),V.getState().setSelectedHex(null);const a=this.inputController.getLastMousePosition();a&&V.getState().status===Gt.Playing&&this.highlightManager.restoreHoverHighlightsAfterAnimation(a.x,a.y)}if(e===Z.PlayerMoving&&n===Z.Idle){const a=V.getState().selectedUnitId;a&&this.handleStaminaChange(a)}if(e===Z.PlayerAttacking&&n===Z.Idle){const a=V.getState().selectedUnitId,l=V.getState().selectedSkillId;l&&a&&this.checkSkillAffordability(a,l),a&&this.handleStaminaChange(a)}})}checkSkillAffordability(e,n){const a=V.getState().units.get(e);if(!a)return;const l=a.skills.find(o=>o.id===n)||null;l&&(a.currentStamina<l.cost?this.skillManager.deselectSkill():this.skillManager.selectSkill(n))}handleUnitSelection(e){if(this.resetSelection(),!e){V.getState().setReachableHexes([],new Map);return}if(V.getState().status!==Gt.Playing){V.getState().setSelectedUnit(null);return}const a=V.getState(),l=a.units.get(e);if(l&&l.faction===wt.Player){const c=ae.getReachableNodes(l,{currentStamina:l.currentStamina,speed:l.stats.speed},a.battleMap);a.setReachableHexes(c.reachableIds,c.reachableMap)}const o=this.entityRegistry.getUnit(e);o&&(this.cameraManager.focusOnPoint({x:o.x,y:o.y}),o.startIdle());const u=Po(V.getState());u&&(u.faction===wt.Enemy?(this.stateMachine.setState(Z.EnemyTurn),this.handleEnemyTurn()):this.stateMachine.setState(Z.Idle))}handleStaminaChange(e){const n=V.getState(),a=n.units.get(e);if(!(!a||a.faction!==wt.Player))if(!this.turnManager.canUnitStillAct(e))console.log("nextSameFactionIdx 4"),this.turnManager.endUnitTurn(e);else{const l=ae.getReachableNodes(a,{currentStamina:a.currentStamina,speed:a.stats.speed},n.battleMap);n.setReachableHexes(l.reachableIds,l.reachableMap),n.selectedSkillId&&this.highlightManager.updateSkillRangeHighlights()}}skillRangeHexHighlights(){const{units:e,selectedUnitId:n}=V.getState();n&&e.get(n)?.faction===wt.Player&&this.highlightManager.updateSkillRangeHighlights()}reachableHexesHighlight(){const{units:e,selectedUnitId:n}=V.getState();n&&e.get(n)?.faction===wt.Player&&this.highlightManager.updateReachableHighlights()}handleHexSelection(e){if(!e){this.pathRenderer.clear();return}const n=V.getState();if(!n.selectedUnitId)return;const a=n.units.get(n.selectedUnitId);if(!a)return;const l=Nt(a),o=ae.getPathToHex(l,e,n.reachableHexesWithCost,n.battleMap);V.getState().setSelectedPath(o),this.showUnitPath(a.unitId,o.path)}resetSelection(){const e=this.stateMachine.getState();console.log("selectedUnitId resetSelection",e),(e===Z.Idle||e===Z.EnemyTurn)&&(V.getState().setSelectedHex(null),ae.clearCache(),this.pathRenderer.clear(),this.highlightManager.resetAllHexes(),this.highlightManager.resetAllUnits(),this.highlightManager.clearHoverState())}showUnitPath(e,n){const a=this.entityRegistry.getUnit(e);if(!a)return;const l=ae.constructFullPath(a,n,this.entityRegistry.getAllHexes()),o=this.pathRenderer.smoothPath(l,l2),u=lv(o);this.pathRenderer.drawPathFromPoints(u)}async handleEnemyTurn(){const e=V.getState(),n=Po(e);if(!e.selectedUnitId||!n||n.faction!==wt.Enemy)return;const a=e.units.get(e.selectedUnitId);!a||a.isDead||a.faction!==wt.Enemy||(console.log("[EnemyTurn] Starting with:",a.unitId),await this.aiTurnManager.executeUnitTurn(a.unitId),console.log("[EnemyTurn] Completed"))}destroy(){console.warn("BattleManager: ..."),this.unsubscribers.forEach(e=>e()),this.unsubscribers=[],pt.killTweensOf(this),this.pathRenderer.clear(),console.log("BattleManager: ' .")}}class o2{element;displayTimeout=null;mousePos={x:0,y:0};currentUnitId=null;HOVER_DELAY=400;storeUnsubscribe;constructor(){this.element=this.initElement(),this.setupListeners(),this.storeUnsubscribe=V.subscribe(e=>e.selectedSkillId,e=>this.handleSelectionChange(e))}setupListeners(){rt.on("UNIT_HOVER",this.handleUnitHover),rt.on("UNIT_MOUSEMOVE",this.handleMouseMove),rt.on("UNIT_OUT",this.handleUnitOut),rt.on("TOOLTIP_UPDATE",this.handleTooltipUpdate)}handleUnitHover=({id:e,position:n})=>{this.currentUnitId=e,this.mousePos=n,this.startIdlingTimer()};handleMouseMove=({position:e})=>{this.mousePos=e,this.element.style.display==="block"?this.updatePosition():this.startIdlingTimer()};handleUnitOut=()=>{this.currentUnitId=null,this.clearTimer(),this.hide()};handleTooltipUpdate=()=>{this.currentUnitId&&(V.getState().units.get(this.currentUnitId)?.isDead?(this.currentUnitId=null,this.hide()):this.render())};handleSelectionChange(e){this.element.style.display==="block"&&e&&this.handleUnitOut()}initElement(){let e=document.getElementById("game-tooltip");return e||(e=document.createElement("div"),e.id="game-tooltip",document.body.appendChild(e)),e}startIdlingTimer(){this.clearTimer(),this.displayTimeout=setTimeout(()=>{if(this.currentUnitId){const{selectedSkillId:e,units:n}=V.getState(),a=n.get(this.currentUnitId);!e&&a&&this.show()}},this.HOVER_DELAY)}show(){this.render(),this.element.style.display="block",this.updatePosition()}updatePosition(){this.element.style.left=`${this.mousePos.x+15}px`,this.element.style.top=`${this.mousePos.y+15}px`}hide(){this.element.style.display="none"}clearTimer(){this.displayTimeout&&(clearTimeout(this.displayTimeout),this.displayTimeout=null)}render(){if(!this.currentUnitId)return;const{units:e,selectedUnitId:n,activeFaction:a}=V.getState(),l=e.get(this.currentUnitId);if(!l)return;const o=l.faction===wt.Player,u=n===l.unitId,c=l.stats.hp*l.count,f=(l.count-1)*l.stats.hp+l.currentUnitHp;this.element.innerHTML=`
            ${u?'<div class="tooltip-status selected"></div>':""}
            <div class="tooltip-title ${o?"friend":"enemy"}">${l.unitId.split("_")[0]}</div>
            <div class="tooltip-stat">HP: ${f} / ${c}</div>
            <div class="tooltip-footer">
                ${a===l.faction?" ":" "}
            </div>
        `}destroy(){this.clearTimer(),rt.off("UNIT_HOVER",this.handleUnitHover),rt.off("UNIT_MOUSEMOVE",this.handleMouseMove),rt.off("UNIT_OUT",this.handleUnitOut),rt.off("TOOLTIP_UPDATE",this.handleTooltipUpdate),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),console.log("TooltipManager: Cleaned up.")}}class u2{container;footprints=[];STEP_DISTANCE=45;ASSET_URL="/assets/footsteps.png";constructor(e){this.container=new jt,this.container.eventMode="none",this.container.interactiveChildren=!1,e.addChild(this.container),Yn.load(this.ASSET_URL)}drawPathFromPoints(e){if(e.length<2){this.clear();return}this.clear();const n=this.smoothPath(e,.5,2);let a=0;for(let l=0;l<n.length-1;l++){const[o,u]=[n[l],n[l+1]],c=u.x-o.x,f=u.y-o.y,g=Math.hypot(c,f);if(a+=g,a>=this.STEP_DISTANCE){const m=Math.atan2(f,c);this.createFootprintStep(o.x,o.y,m),a=0}}}createFootprintStep(e,n,a){const l=Yn.get(this.ASSET_URL);if(!l)return;const o=new Do(l);o.anchor.set(.5),o.scale.set(.6),o.rotation=a+Math.PI/2,o.x=e,o.y=n,o.alpha=.4,this.container.addChild(o),this.footprints.push(o)}smoothPath(e,n=.4,a=1){if(e.length<3)return e;let l=e.map(o=>({...o}));for(let o=0;o<a;o++){const u=l.map(c=>({...c}));for(let c=1;c<l.length-1;c++){const f=l[c-1],g=l[c],m=l[c+1],y=u[c],_=(f.x+m.x)/2,S=(f.y+m.y)/2;y.x=g.x+(_-g.x)*n,y.y=g.y+(S-g.y)*n}l=u}return l}clear(){for(const e of this.footprints)e.destroy({children:!0,texture:!1});this.footprints=[]}destroy(){this.clear(),this.container.destroy({children:!0})}}const c2=new uf({type:"linear",colorStops:[{offset:0,color:15133164},{offset:.4,color:10989752},{offset:1,color:6252140}]}),h2=new uf({type:"linear",colorStops:[{offset:0,color:16773830},{offset:.4,color:14723130},{offset:1,color:7225104}]}),f2=new uf({type:"linear",colorStops:[{offset:0,color:6252140},{offset:.5,color:10989752},{offset:1,color:6252140}]}),d2=new Xn({fontFamily:"CinzelBold, Trajan Pro, serif",fontSize:48,fontWeight:"700",letterSpacing:2,fill:c2,stroke:{color:1777185,width:6,join:"round",miterLimit:2},dropShadow:{alpha:.6,angle:Math.PI/4,blur:6,color:0,distance:4}}),p2=new Xn({fontFamily:"CinzelBold, Trajan Pro, serif",fontSize:58,fontWeight:"700",letterSpacing:2,fill:h2,stroke:{color:2824715,width:7,join:"round",miterLimit:2},dropShadow:{alpha:.6,angle:Math.PI/4,blur:10,color:0,distance:6}}),g2=new Xn({fontSize:42,fontFamily:"CinzelBold, Trajan Pro, serif",fontWeight:"400",letterSpacing:2,fill:f2,stroke:{color:1777185,width:4,join:"round",miterLimit:2},dropShadow:{alpha:.4,angle:Math.PI/4,blur:6,color:0,distance:4}});class m2 extends jt{constructor(e){super(),this.getUnitContainer=e,this.setupEventListeners()}showDamangeBound=e=>this.showDamage(e);setupEventListeners(){rt.on("SKILL_EXECUTED",this.showDamangeBound)}showDamage(e){const n=this.getUnitContainer(e.targetId);if(!n){console.warn(`[DamageText] Unit not found: ${e.targetId}`);return}const a=this.createDamageText(e.result);a.position.set(n.x,n.y-170),this.addChild(a),this.animateDamageText(a,e.result.isCrit||!1,e.result.isMiss||!1)}createDamageText(e){let n,a;e.isMiss?(n="MISS",a=g2):e.isCrit?(n=`${e.damage}`,a=p2):(n=`${e.damage}`,a=d2);const l=new ba(n,a);return l.anchor.set(.5),l}animateDamageText(e,n,a){const l=pt.timeline();a?l.from(e.scale,{x:.9,y:.9,duration:.1}).to(e,{y:e.y-40,alpha:0,duration:1.1,ease:"sine.out"}):n?l.from(e.scale,{x:2.4,y:.4,duration:.05}).to(e.scale,{x:1,y:1,duration:.15}).to(e,{x:"+=5",yoyo:!0,repeat:6,duration:.025}).to(e,{y:e.y-120,alpha:0,duration:1.7}):l.from(e.scale,{x:1.4,y:.6,duration:.08}).to(e.scale,{x:1,y:1,duration:.1}).to(e,{y:e.y+6,duration:.05}).to(e,{y:e.y-70,alpha:0,duration:1.4,ease:"power1.out"}),l.call(()=>{this.removeChild(e),e.destroy()})}destroy(e){rt.on("SKILL_EXECUTED",this.showDamangeBound),super.destroy(e)}}const y2=.035,v2=.02;class _2{map;rng;size;rows;constructor(e){const{size:n,seed:a}=e;this.size=n,this.rows=Math.floor(n-n*.4),this.rng=Zb(Wb(a)),this.map=new Map}generate(){return this.initializeGrid(),this.applyTerrainFeatures(),this.promoteCliffs(),this.map}initializeGrid(){for(let e=0;e<this.size;e++){const n=Math.floor(e/2);for(let a=-n;a<this.rows-n;a++){const l=Nt({q:e,r:a});this.map.set(l,{id:l,q:e,r:a,x:0,y:0,terrain:me.Flat,isCliff:!1,isObstacle:!1})}}}applyTerrainFeatures(){for(const e of this.map.values())this.maybePlaceObstacle(e),e.terrain===me.Flat&&this.rng()<this.calculateHillSeedChance(e.q)&&this.growHillPatch(e.q,e.r)}promoteCliffs(){for(const e of this.map.values()){if(e.terrain!==me.Hill)continue;const n=Em(e.q,e.r);let a=0;for(const l of n)this.getHex(l.q,l.r)?.terrain===me.Hill&&a++;a>=3&&this.rng()<.15&&(e.terrain=me.Cliff,e.isCliff=!0)}}maybePlaceObstacle(e){this.rng()<y2&&(e.terrain=me.Obstacle,e.isObstacle=!0)}calculateHillSeedChance(e){const n=(this.size-1)/2,a=Math.abs(e-n)/n;return v2+a*.02}growHillPatch(e,n){const a=[{q:e,r:n,strength:1}];for(;a.length;){const l=a.pop(),o=this.getHex(l.q,l.r);if(!o||o.terrain!==me.Flat)continue;o.terrain=me.Hill;const u=Em(l.q,l.r);for(const c of u){const f=this.getHex(c.q,c.r);f&&f.terrain===me.Flat&&this.rng()<.25*l.strength&&a.push({q:c.q,r:c.r,strength:l.strength*.5})}}}getHex(e,n){return this.map.get(Nt({q:e,r:n}))}}class S2 extends jt{data;id;background;highlightOverlay;constructor(e){super(),this.data=e,this.id=this.data.id;const n=sv(this.data.q,this.data.r);this.x=n.x,this.y=n.y,this.background=new Oe,this.highlightOverlay=new Oe,this.drawBackground(),this.drawOverlay(),this.addChild(this.background),this.addChild(this.highlightOverlay),this.setupInteraction()}drawBackground(){const e=rf[this.data.terrain],n=this.data.isCliff?5592405:parseInt(e.color.replace("#","0x"));this.background.clear(),this.background.lineStyle(1,16777215,.1),this.background.beginFill(n);for(let a=0;a<6;a++){const l=Math.PI/180*(60*a),o=_a*Math.cos(l),u=_a*Math.sin(l);a===0?this.background.moveTo(o,u):this.background.lineTo(o,u)}this.background.closePath(),this.background.endFill(),this.data.isObstacle&&(this.background.beginFill(0,.2),this.background.drawCircle(0,0,_a*.5),this.background.endFill())}drawOverlay(){this.highlightOverlay.clear(),this.highlightOverlay.beginFill(16777215);for(let e=0;e<6;e++){const n=Math.PI/180*(60*e),a=_a*Math.cos(n),l=_a*Math.sin(n);e===0?this.highlightOverlay.moveTo(a,l):this.highlightOverlay.lineTo(a,l)}this.highlightOverlay.closePath(),this.highlightOverlay.endFill(),this.highlightOverlay.alpha=0}setupInteraction(){this.eventMode="static",this.cursor="pointer",this.on("pointerover",e=>{rt.emit("HEX_HOVER",{id:this.id,position:{x:e.global.x,y:e.global.y}})}),this.on("pointerout",e=>{rt.emit("HEX_OUT",{id:this.id})}),this.on("pointertap",()=>{rt.emit("HEX_CLICK",{id:this.id})})}setHighlight(e,n=.2,a=1){e===null?this.highlightOverlay.alpha=0:(this.highlightOverlay.tint=e,this.highlightOverlay.alpha=n,this.highlightOverlay.scale.set(a))}flashHighlight(e,n=1){this.highlightOverlay.tint=e,this.highlightOverlay.alpha=.2,pt.to(this.highlightOverlay,{alpha:.1,duration:n,ease:"power2.in",onComplete:()=>{this.setHighlight(Hf,.1)}})}containsPoint(e,n){const a=this.toLocal(new se(e,n));return this.background.containsPoint(a)}destroy(){this.removeAllListeners(),super.destroy({children:!0})}}var x2=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,b2=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}`,T2=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uThickness;
uniform vec3 uColor;
uniform float uAlpha;
uniform float uKnockout;

uniform vec4 uInputClamp;

const float DOUBLE_PI = 2. * 3.14159265358979323846264;
const float ANGLE_STEP = \${ANGLE_STEP};

float outlineMaxAlphaAtPos(vec2 pos) {
    if (uThickness.x == 0. || uThickness.y == 0.) {
        return 0.;
    }

    vec4 displacedColor;
    vec2 displacedPos;
    float maxAlpha = 0.;

    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {
        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);
        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);
        displacedColor = texture(uTexture, clamp(displacedPos, uInputClamp.xy, uInputClamp.zw));
        maxAlpha = max(maxAlpha, displacedColor.a);
    }

    return maxAlpha;
}

void main(void) {
    vec4 sourceColor = texture(uTexture, vTextureCoord);
    vec4 contentColor = sourceColor * float(uKnockout < 0.5);
    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);
    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);
    finalColor = contentColor + outlineColor;
}
`,M2=`struct OutlineUniforms {
  uThickness:vec2<f32>,
  uColor:vec3<f32>,
  uAlpha:f32,
  uAngleStep:f32,
  uKnockout:f32,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> outlineUniforms : OutlineUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let sourceColor: vec4<f32> = textureSample(uTexture, uSampler, uv);
  let contentColor: vec4<f32> = sourceColor * (1. - outlineUniforms.uKnockout);
  
  let outlineAlpha: f32 = outlineUniforms.uAlpha * outlineMaxAlphaAtPos(uv) * (1. - sourceColor.a);
  let outlineColor: vec4<f32> = vec4<f32>(vec3<f32>(outlineUniforms.uColor) * outlineAlpha, outlineAlpha);
  
  return contentColor + outlineColor;
}

fn outlineMaxAlphaAtPos(uv: vec2<f32>) -> f32 {
  let thickness = outlineUniforms.uThickness;

  if (thickness.x == 0. || thickness.y == 0.) {
    return 0.;
  }
  
  let angleStep = outlineUniforms.uAngleStep;

  var displacedColor: vec4<f32>;
  var displacedPos: vec2<f32>;

  var maxAlpha: f32 = 0.;
  var displaced: vec2<f32>;
  var curColor: vec4<f32>;

  for (var angle = 0.; angle <= DOUBLE_PI; angle += angleStep)
  {
    displaced.x = uv.x + thickness.x * cos(angle);
    displaced.y = uv.y + thickness.y * sin(angle);
    curColor = textureSample(uTexture, uSampler, clamp(displaced, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
    maxAlpha = max(maxAlpha, curColor.a);
  }

  return maxAlpha;
}

const DOUBLE_PI: f32 = 3.14159265358979323846264 * 2.;`,w2=Object.defineProperty,E2=(d,e,n)=>e in d?w2(d,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[e]=n,xa=(d,e,n)=>(E2(d,typeof e!="symbol"?e+"":e,n),n);const eu=class va extends L_{constructor(...e){let n=e[0]??{};typeof n=="number"&&(I_("6.0.0","OutlineFilter constructor params are now options object. See params: { thickness, color, quality, alpha, knockout }"),n={thickness:n},e[1]!==void 0&&(n.color=e[1]),e[2]!==void 0&&(n.quality=e[2]),e[3]!==void 0&&(n.alpha=e[3]),e[4]!==void 0&&(n.knockout=e[4])),n={...va.DEFAULT_OPTIONS,...n};const a=n.quality??.1,l=G_.from({vertex:{source:b2,entryPoint:"mainVertex"},fragment:{source:M2,entryPoint:"mainFragment"}}),o=q_.from({vertex:x2,fragment:T2.replace(/\$\{ANGLE_STEP\}/,va.getAngleStep(a).toFixed(7)),name:"outline-filter"});super({gpuProgram:l,glProgram:o,resources:{outlineUniforms:{uThickness:{value:new Float32Array(2),type:"vec2<f32>"},uColor:{value:new Float32Array(3),type:"vec3<f32>"},uAlpha:{value:n.alpha,type:"f32"},uAngleStep:{value:0,type:"f32"},uKnockout:{value:n.knockout?1:0,type:"f32"}}}}),xa(this,"uniforms"),xa(this,"_thickness"),xa(this,"_quality"),xa(this,"_color"),this.uniforms=this.resources.outlineUniforms.uniforms,this.uniforms.uAngleStep=va.getAngleStep(a),this._color=new Y_,this.color=n.color??0,Object.assign(this,n)}apply(e,n,a,l){this.uniforms.uThickness[0]=this.thickness/n.source.width,this.uniforms.uThickness[1]=this.thickness/n.source.height,e.applyFilter(this,n,a,l)}static getAngleStep(e){return parseFloat((Math.PI*2/Math.max(e*va.MAX_SAMPLES,va.MIN_SAMPLES)).toFixed(7))}get thickness(){return this._thickness}set thickness(e){this._thickness=this.padding=e}get color(){return this._color.value}set color(e){this._color.setValue(e);const[n,a,l]=this._color.toArray();this.uniforms.uColor[0]=n,this.uniforms.uColor[1]=a,this.uniforms.uColor[2]=l}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}get quality(){return this._quality}set quality(e){this._quality=e,this.uniforms.uAngleStep=va.getAngleStep(e)}get knockout(){return this.uniforms.uKnockout===1}set knockout(e){this.uniforms.uKnockout=e?1:0}};xa(eu,"DEFAULT_OPTIONS",{thickness:1,color:0,alpha:1,quality:.1,knockout:!1});xa(eu,"MIN_SAMPLES",1);xa(eu,"MAX_SAMPLES",100);let Bh=eu;const A2=.015;class C2 extends jt{unitId;faction;config;q;r;visual;view;badgeContainer;countText;badgeBg;_state=_s.Idle;unsubStore;filtersMap={selected:new Bh(3,16753920),hover:new Bh(2,16777215),enemy:new Bh(2,16711680)};isHighlighted=!1;FORWARD_PX=22;WINDUP_MS=170;STRIKE_MS=65;RECOVER_MS=240;KNOCKBACK_PX=18;CRIT_KNOCKBACK_MULT=2;impactPromise=null;resolveImpact=null;constructor(e,n,a,l,o,u,c,f){super(),this.x=c,this.y=f,this.zIndex=f,this.unitId=a,this.faction=l,this.config=n,this.q=o,this.r=u,this.sortableChildren=!0,this.visual=new jt,this.visual.zIndex=0,this.addChild(this.visual),this.view=new Do(e);const g=n.anchor?.x??.5,m=n.anchor?.y??.7;if(this.view.anchor.set(g,m),this.view.zIndex=0,this.faction===wt.Enemy&&(this.view.scale.x=-1),this.visual.addChild(this.view),n.hitArea){const _=n.hitArea.map((S,T)=>T%2===0?S-256*g:S-256*m);this.view.hitArea=new X_(_)}this.badgeContainer=new jt,this.badgeContainer.zIndex=10,this.badgeContainer.position.set(70,50),this.countText=new ba("",{fontFamily:'Georgia, "Times New Roman", serif',fontSize:16,fill:15393232,fontWeight:"bold",dropShadow:{color:0,blur:2,distance:1,angle:Math.PI/6,alpha:.5},align:"center"}),this.countText.anchor.set(.4,.55),this.badgeBg=new Oe,this.drawBadgeBackground(),this.badgeContainer.addChild(this.badgeBg),this.badgeContainer.addChild(this.countText),this.addChild(this.badgeContainer),this.eventMode="static",this.cursor="pointer",this.on("pointerover",this.onPointerOver,this),this.on("pointerout",this.onPointerOut,this),this.on("pointermove",this.onPointerMove,this),this.on("pointertap",this.onPointerTap,this),this.unsubStore=V.subscribe(_=>{const S=_.units.get(this.unitId);this.refreshVisuals(S)});const y=V.getState();this.refreshVisuals(y.units.get(this.unitId))}drawBadgeBackground(){const e=this.badgeBg,l=Math.max(this.countText.width,10)+8*2,o=22;e.clear(),e.beginFill(0,.5),e.drawRoundedRect(2,2,l,o,6),e.endFill(),e.beginFill(2827810),e.lineStyle(1.5,6511178),e.drawRoundedRect(0,0,l,o,5),e.endFill(),this.countText.position.set(l/2,o/2)}refreshVisuals(e){if(!e){console.warn(`No data for unit ${this.unitId}`);return}if(this.countText.text=e.count.toString(),this.drawBadgeBackground(),this.badgeContainer.visible=e.count>0,e.count<=0&&this._state!==_s.Dead){this._state=_s.Dead,this.alpha=.5,this.eventMode="none",this.view.filters=[];return}this._state!==_s.Dead&&this.updateFilters()}onPointerOver(e){this._state!==_s.Dead&&rt?.emit("UNIT_HOVER",{id:this.unitId,position:{x:e.global.x,y:e.global.y}})}onPointerOut(){rt?.emit("UNIT_OUT",{id:this.unitId})}onPointerMove(e){rt?.emit("UNIT_MOUSEMOVE",{position:{x:e.global.x,y:e.global.y}})}onPointerTap(){this._state!==_s.Dead&&rt?.emit("UNIT_CLICK",{id:this.unitId})}updateGridPos(e,n,a,l){this.q=e,this.r=n,this.x=a,this.y=l,this.zIndex=l}setHighlighted(e){this.isHighlighted=e,this.updateFilters()}updateFilters(){const n=V.getState().selectedUnitId===this.unitId,a=this.faction===wt.Enemy,l=[];n?l.push(a?this.filtersMap.enemy:this.filtersMap.selected):this.isHighlighted&&l.push(a?this.filtersMap.enemy:this.filtersMap.hover),this.view.filters=l.length>0?l:null}triggerImpact(){this.resolveImpact?.(),this.resolveImpact=null,this.impactPromise=null}waitForImpact(e){return this.impactPromise||(this.impactPromise=new Promise(n=>{this.resolveImpact=n})),e&&e.addEventListener("abort",()=>{this.resolveImpact?.()},{once:!0}),this.impactPromise}waitForIdle(e){return new Promise((n,a)=>{if(e?.aborted)return a(new Error("Aborted"));const l=pt.delayedCall(.05,n);e?.addEventListener("abort",()=>{l.kill(),a(new Error("Aborted"))},{once:!0})})}prepareForAction(){return this.stopIdle(),this.resetPose()}async finishAction(e){return await this.resetPose(),this.waitForIdle(e)}startIdle(){pt.killTweensOf(this.visual),pt.to(this.visual,{y:-8,duration:.9,ease:"sine.inOut",yoyo:!0,repeat:-1})}stopIdle(){pt.killTweensOf(this.visual),this.visual.y=0}startBreathing(){this.startIdle()}stopBreathing(){this.stopIdle()}norm(e,n){const a=Math.hypot(e,n)||1;return{x:e/a,y:n/a,dist:a}}async animateMovement(e){return new Promise(n=>{pt.to(this,{duration:e.length*A2,ease:"power1.inOut",motionPath:{path:e,autoRotate:!1},onUpdate:()=>{this.zIndex=Math.floor(this.y)},onComplete:n})})}resetPose(e=220){return new Promise(n=>{if(pt.killTweensOf([this.visual,this.visual.scale,this.view]),Math.abs(this.visual.x)<.01&&this.visual.rotation===0)return this.visual.x=0,this.visual.y=0,this.rotation=0,n();pt.to(this.visual,{x:0,y:0,rotation:0,duration:e/1e3,ease:"power2.out",onComplete:n,onInterrupt:n}),pt.to(this.visual.scale,{x:1,y:1,duration:e/1e3,ease:"power2.out"})})}playAttackTowards(e){return new Promise(n=>{pt.killTweensOf([this.visual,this.visual.scale,this.view]),this.stopIdle(),this.impactPromise=new Promise(g=>{this.resolveImpact=g});const a=e.x-this.x,l=e.y-this.y,o=Math.hypot(a,l)||1,u=a/o,c=this.FORWARD_PX??14,f=pt.timeline();f.to(this.visual,{x:`-=${u*6}`,y:2,duration:(this.WINDUP_MS??120)/1e3,ease:"power3.in"}),f.to(this.visual,{x:`+=${u*c}`,y:-6,duration:(this.STRIKE_MS??80)/1e3,ease:"expo.out"}),f.call(()=>{this.triggerImpact()}),f.to(this.visual,{x:0,y:0,duration:.16,ease:"elastic.out(1, 0.5)",onComplete:()=>{this.resetPose(120).then(n)}})})}flashRed(){const e=new j_;this.visual.filters=[e],e.matrix=[0,0,0,0,.5,0,0,0,0,0,0,0,0,0,0,0,0,0,.5,0],setTimeout(()=>{this.visual.filters=[]},50)}playHitReaction(e){return new Promise(async n=>{pt.killTweensOf([this.visual,this.visual.scale,this.view]),this.stopIdle();const a=(this.x??0)-(e.x??0),l=(this.y??0)-(e.y??0),o=Math.hypot(a,l)||1,u=a/o,c=this.KNOCKBACK_PX*1.6,f=-4,g=.92,m=1.06,y=pt.timeline();y.to(this.visual,{x:`+=${u*c}`,y:`+=${f}`,duration:.06,ease:"power1.out"},0),pt.to(this.visual,{pixi:{tint:"#ff3333"},duration:.06,yoyo:!0,repeat:1,onComplete:()=>{this.visual.tint=16777215}}),y.to(this.visual.scale,{x:g,y:m,duration:.06,ease:"power1.out"},0),y.to(this.visual,{x:0,y:0,duration:(this.RECOVER_MS??300)/1e3,ease:"elastic.out(1, 0.5)"},"+=0.02"),y.to(this.visual.scale,{x:1,y:1,duration:(this.RECOVER_MS??300)/1e3,ease:"elastic.out(1, 0.5)"},"<"),y.to(this.visual,{x:0,y:0,duration:.16,ease:"elastic.out(1, 0.5)",onComplete:()=>{this.resetPose(120).then(n)}})})}playCritReaction(e){return new Promise(async n=>{pt.killTweensOf([this.visual,this.visual.scale,this.view]),this.stopIdle();const a=(this.x??0)-(e.x??0),l=(this.y??0)-(e.y??0),o=Math.hypot(a,l)||1,u=a/o,c=18,f=-10,g=16,m=.02,y=pt.timeline();y.to(this.visual,{x:`+=${u*c}`,y:`+=${f}`,duration:.09,ease:"power3.out"},0),pt.to(this.visual,{pixi:{tint:"#ff3333"},duration:m,yoyo:!0,repeat:1,onComplete:()=>{this.visual.tint=16777215}}),y.to({},{duration:m}),y.to(this.visual,{y:`+=${g}`,duration:.12,ease:"power2.in"}),y.to(this.visual.scale,{x:1,y:1,duration:.22,ease:"elastic.out(1, 0.5)"}),y.to(this.visual,{x:0,y:0,duration:.22,ease:"elastic.out(1, 0.5)"},"<"),y.to(this.visual,{x:0,y:0,duration:.16,ease:"elastic.out(1, 0.5)",onComplete:()=>{this.resetPose(120).then(n)}})})}playMissReaction(e){return new Promise(async n=>{pt.killTweensOf([this.visual,this.visual.scale,this.view]),this.stopIdle();const a=(this.x??0)-(e.x??0),l=(this.y??0)-(e.y??0),o=Math.hypot(a,l)||1,u=a/o,c=pt.timeline();c.to(this.visual,{x:`+=${u*10}`,rotation:u>0?.06:-.06,duration:.1,ease:"power2.out"}),c.to(this.visual,{x:0,rotation:0,duration:.22,ease:"back.out(2)"}),c.to(this.visual,{x:0,y:0,duration:.16,ease:"elastic.out(1, 0.5)",onComplete:()=>{this.resetPose(120).then(n)}})})}playDeath(){return new Promise(e=>{pt.killTweensOf(this.visual),pt.timeline({onComplete:()=>e()}).to(this.visual,{y:20,alpha:0,duration:.45,ease:"power2.in"})})}destroy(e){this.unsubStore&&this.unsubStore(),pt.killTweensOf(this.visual),pt.killTweensOf(this.view),super.destroy(e)}}class tn{static configCache=new Map;static async createUnit(e,n,a,l,o=wt.Player){const u=`assets/units/${e}.json`,c=`assets/units/${e}.png`;let f=this.configCache.get(e);f||(f=await Yn.load(u),this.configCache.set(e,f));const g=await Yn.load(c),m=`${e}_${Date.now()}_${Math.floor(Math.random()*1e3)}`,y=sv(n,a);return V.getState().addUnit({unitId:m,unitType:e,count:l,currentUnitHp:f.stats.hp,currentStamina:f.stats.stamina,q:n,r:a,isDead:!1,faction:o,stats:{...f.stats},skills:[...f.skills]}),new C2(g,f,m,o,n,a,y.x,y.y)}}class O2{queue=[];running=!1;playSkillAnimation(e,n,a,l){return this.enqueue(async()=>{await this.executeCombatSequence(e,n,a,l?.signal)},l?.signal,"combat")}playMovement(e,n,a){return this.enqueue(async()=>{await this.animateUnitMovement(e,n,a?.signal)},a?.signal,"move")}enqueue(e,n,a="combat"){return new Promise((l,o)=>{this.queue.push({task:e,resolve:l,reject:o,signal:n,type:a}),this.running||this.processQueue()})}async processQueue(){if(!this.running){for(this.running=!0;this.queue.length>0;){const e=this.queue.shift();if(e.signal?.aborted){e.reject(new Error("animation aborted via signal"));continue}try{await e.task(),e.resolve()}catch(n){console.error("Animation error:",n),e.reject(n)}}this.running=!1}}async executeCombatSequence(e,n,a,l){if(!(!n||!a))try{await Promise.all([n.prepareForAction(),a.prepareForAction()]);const o=n.playAttackTowards(a);await n.waitForImpact(l);const u=(async()=>{if(rt.emit("SKILL_EXECUTED",{attackerId:n.unitId,targetId:a.unitId,result:e}),e.isMiss?await a.playMissReaction(n):e.isCrit?await a.playCritReaction(n):await a.playHitReaction(n),e.isDead){await a.playDeath();return}await a.finishAction(l),await n.resetPose(),n.startIdle()})();await Promise.all([o,u]),await n.waitForIdle(l)}catch(o){console.log("Animation sequence stopped:",o.message),n.startIdle(),a&&!e.isDead&&a.startIdle()}}async animateUnitMovement(e,n,a){if(!(!e||!n))try{await e.animateMovement(n)}catch(l){console.log("Animation sequence stopped:",l.message)}}cancelAll(e="cancelled"){this.queue.forEach(n=>n.reject(new Error(e))),this.queue=[],this.running=!1}}class z2{hexes=new Map;units=new Map;registerHex(e,n){this.hexes.set(e,n)}getHex(e){return this.hexes.get(e)}getAllHexes(){return this.hexes}hasHex(e){return this.hexes.has(e)}removeHex(e){const n=this.hexes.get(e);n&&(n.destroy(),this.hexes.delete(e))}registerUnit(e,n){this.units.set(e,n)}getUnit(e){return this.units.get(e)}getAllUnits(){return this.units}hasUnit(e){return this.units.has(e)}removeUnit(e){const n=this.units.get(e);n&&(n.destroy(),this.units.delete(e))}clearHexes(){this.hexes.forEach(e=>e.destroy()),this.hexes.clear()}clearUnits(){this.units.forEach(e=>e.destroy()),this.units.clear()}destroy(){this.clearHexes(),this.clearUnits()}getCounts(){return{hexes:this.hexes.size,units:this.units.size}}}class H2{constructor(e,n){this.registry=e,this.stateMachine=n}currentHoverState={hexId:null,unitId:null};updateHoverState(e,n,a=!1){if(!this.stateMachine.allowsHover()&&!a){(this.currentHoverState.hexId||this.currentHoverState.unitId)&&this.clearHoverState();return}!a&&this.currentHoverState.hexId===e&&this.currentHoverState.unitId===n||(this.clearPreviousHoverHighlights(),this.currentHoverState={hexId:e,unitId:n},e&&this.highlightHex(e),n&&this.highlightUnit(n))}clearHoverState(){this.clearPreviousHoverHighlights(),this.currentHoverState={hexId:null,unitId:null}}clearPreviousHoverHighlights(){if(this.currentHoverState.hexId&&this.restoreHexHighlight(this.currentHoverState.hexId),this.currentHoverState.unitId){const e=this.registry.getUnit(this.currentHoverState.unitId);e&&e.setHighlighted(!1)}}highlightHex(e){const n=this.registry.getHex(e);if(!n)return;const{selectedSkillId:a,battleMap:l,units:o,targetHexes:u,reachableHexesWithCost:c}=V.getState();if(a){const f=l.get(e);if(!f)return;const g=u.includes(e),y=(f.entityId?o.get(f.entityId):null)?.faction===wt.Enemy;n.setHighlight(y&&g?16711680:16777215,y&&g?.4:.2)}else c.has(e)?n.setHighlight(0,.1):n.setHighlight(Hf,.1)}highlightUnit(e){const n=this.registry.getUnit(e);if(!n)return;const a=n.faction===wt.Player,l=V.getState(),{finishedPools:o,targetHexes:u}=l;if(a){const c=Kb(l,n.unitId),f=!ov(l,n.unitId);c&&f&&n.setHighlighted(!0)}else{const c=Nt(n);u.includes(c)&&n.setHighlighted(!0)}}restoreHexHighlight(e){const{selectedSkillId:n,targetHexes:a,reachableHexesWithCost:l,units:o,battleMap:u}=V.getState(),c=this.registry.getHex(e);if(c){if(n){if(a.includes(e)){const f=u.get(e),m=(f?.entityId?o.get(f.entityId):null)?.faction===wt.Enemy;c.setHighlight(m?16711680:16777215,.2,m?1:.4)}else c.setHighlight(null);return}l.has(e)?c.setHighlight(0,.2):c.setHighlight(null)}}updateSkillRangeHighlights(){this.registry.getAllHexes().forEach((n,a)=>{this.updateHexBaseHighlight(a)})}updateReachableHighlights(){this.registry.getAllHexes().forEach((n,a)=>{this.updateHexBaseHighlight(a)})}updateHexBaseHighlight(e){const{selectedSkillId:n,targetHexes:a,reachableHexes:l,units:o,battleMap:u}=V.getState(),c=this.registry.getHex(e);if(c){if(n){if(a.includes(e)){const f=u.get(e),m=(f?.entityId?o.get(f.entityId):null)?.faction===wt.Enemy;c.setHighlight(m?16711680:16777215,.2,m?1:.4)}else c.setHighlight(null);return}l.includes(e)?c.setHighlight(0,.2):c.setHighlight(null)}}resetAllHexes(){this.registry.getAllHexes().forEach(n=>n.setHighlight(null))}resetAllUnits(){this.registry.getAllUnits().forEach(n=>n.stopIdle())}findHexAtPosition(e,n){const a=this.registry.getAllHexes();for(const[l,o]of a)if(o.containsPoint(e,n))return o;return null}restoreHoverHighlightsAfterAnimation(e,n,a=!1){if(e===null||n===null){this.clearHoverState();return}const l=this.findHexAtPosition(e,n);if(!l){this.clearHoverState();return}const o=l.id,c=V.getState().battleMap.get(o)?.entityId??null;this.updateHoverState(o,c,a)}}class D2{constructor(e,n,a,l,o,u){this.highlightManager=e,this.movementExecutor=n,this.combatExecutor=a,this.entityRegistry=l,this.stateMachine=o,this.skillManager=u,this.setupEventHandlers()}hotkeysInitialized=!1;lastMousePosition=null;initializeHotkeys(){this.hotkeysInitialized||(this.setupHotkeys(),this.hotkeysInitialized=!0)}setupHotkeys(){this.onKeyDown=this.onKeyDown.bind(this),window.addEventListener("keydown",this.onKeyDown)}handleHexHoverBound=e=>this.handleHexHover(e.id);handleHexClickBound=e=>this.handleHexClick(e.id);handleHexOutBound=e=>this.handleHexOut(e.id);handleUnitHoverBound=e=>this.handleUnitHover(e.id);handleUnitClickBound=e=>this.handleUnitClick(e.id);handleUnitOutBound=e=>this.handleUnitOut(e.id);handleMouseMoveBound=e=>this.handleMouseMove(e);setupEventHandlers(){rt.on("HEX_HOVER",this.handleHexHoverBound),rt.on("HEX_CLICK",this.handleHexClickBound),rt.on("HEX_OUT",this.handleHexOutBound),rt.on("UNIT_HOVER",this.handleUnitHoverBound),rt.on("UNIT_OUT",this.handleUnitOutBound),rt.on("UNIT_CLICK",this.handleUnitClickBound),rt.on("MOUSE_MOVE",this.handleMouseMoveBound)}getLastMousePosition(){return this.lastMousePosition}canHandleHover(){return this.stateMachine.canHandleInput(V.getState().status)}canHandleClick(){return this.stateMachine.canHandleInput(V.getState().status)}handleHexHover(e){if(!this.canHandleHover())return;const a=V.getState().battleMap.get(e)?.entityId??null;this.highlightManager.updateHoverState(e,a)}handleHexOut(e){this.canHandleHover()&&this.highlightManager.clearHoverState()}handleUnitHover(e){if(!this.canHandleHover())return;const n=V.getState().units.get(e);if(!n)return;const a=Nt(n);this.highlightManager.updateHoverState(a,e)}handleUnitOut(e){this.canHandleHover()&&this.highlightManager.clearHoverState()}handleMouseMove(e){this.lastMousePosition={x:e.x,y:e.y}}handleHexClick(e){if(!this.canHandleClick())return;const n=this.entityRegistry.getHex(e);if(!n)return;const{selectedUnitId:a,selectedSkillId:l,selectedHexId:o,selectedPath:u,battleMap:c}=V.getState();if(!a)return;const f=c.get(e);if(f){if(f.entityId){this.handleUnitClick(f.entityId);return}if(!l){if(u.lastStepId===f.id){this.movementExecutor.execute(a,u);return}n.flashHighlight(Hf,.1),V.getState().setSelectedHex(e)}}}handleUnitClick(e){if(!this.canHandleClick())return;const n=V.getState(),{selectedUnitId:a,selectedSkillId:l}=n;if(a&&l){this.combatExecutor.execute(a,e,l);return}const o=Po(n);o?.faction===wt.Player&&o.unitIds.includes(e)&&!ov(n,e)&&n.setSelectedUnit(e)}onKeyDown(e){if(e.key>="1"&&e.key<="9"){const n=parseInt(e.key)-1;this.selectSkillByIndex(n)}if(e.key==="Escape"){e.preventDefault();const n=V.getState();if(!this.canHandleClick())return;n.selectedSkillId?this.skillManager.deselectSkill():n.selectedHexId&&n.setSelectedHex(null)}}selectSkillByIndex(e){const n=V.getState().selectedUnitId;if(!n)return;const a=V.getState().units.get(n);if(!a||!a.skills[e])return;const l=a.skills[e].id;this.skillManager.toggleSkill(l),this.lastMousePosition&&this.highlightManager.restoreHoverHighlightsAfterAnimation(this.lastMousePosition.x,this.lastMousePosition.y,!0)}destroy(){window.removeEventListener("keydown",this.onKeyDown),rt.off("HEX_HOVER",this.handleHexHoverBound),rt.off("HEX_CLICK",this.handleHexClickBound),rt.off("HEX_OUT",this.handleHexOutBound),rt.off("UNIT_HOVER",this.handleUnitHoverBound),rt.off("UNIT_CLICK",this.handleUnitClickBound),rt.off("UNIT_OUT",this.handleUnitOutBound),rt.off("MOUSE_MOVE",this.handleMouseMoveBound)}}class U2{constructor(e,n,a,l,o){this.animationController=e,this.pathRendeder=n,this.entityRegistry=a,this.turnManager=l,this.stateMachine=o}currentAbortController=null;async execute(e,n){this.currentAbortController=new AbortController;const a=this.currentAbortController.signal,o=V.getState().units.get(e),u=this.entityRegistry.getUnit(e);if(!o||!u){console.warn("[MovementExecutor] Unit or visual not found");return}const c=o.faction===wt.Player;if(Nt(o),o.currentStamina<n.cost){console.warn("[MovementExecutor] Not enough stamina");return}if(n.path.length===0){console.warn("[MovementExecutor] No valid path found");return}if(!n.lastStepId){console.warn("[MovementExecutor] No valid path found");return}c&&this.stateMachine.is(Z.Idle)&&this.stateMachine.setState(Z.PlayerMoving);try{const f=this.prepareForMovement(u,n.path);rt.emit("STAMINA_DRAIN",{unitId:e,amount:n.cost}),await this.animationController.playMovement(u,f,{signal:a}),a.aborted||this.updateUnitPosition(u,n.lastStepId,n.cost)}catch(f){a.aborted||f.message?.includes("aborted")?console.log("[MovementExecutor] Movement cancelled"):console.error("[MovementExecutor] Movement failed:",f)}finally{this.pathRendeder.clear(),this.currentAbortController=null,this.stateMachine.is(Z.PlayerMoving)&&this.stateMachine.setState(Z.Idle)}}cancelCurrentMovement(){this.currentAbortController&&(this.currentAbortController.abort(),this.currentAbortController=null)}prepareForMovement(e,n){this.pathRendeder.clear();const a=ae.constructFullPath(e,n,this.entityRegistry.getAllHexes());return lv(a)}updateUnitPosition(e,n,a){const l=this.entityRegistry.getHex(n),o=V.getState().units.get(e.unitId);if(!l||!o)return;e.q=l.data.q,e.r=l.data.r;const u=Nt(o),c=o.currentStamina-a;V.getState().apply(f=>{qn.updateHex(f,u,{entityId:void 0}),qn.updateHex(f,n,{entityId:o.unitId}),qn.resetSelectedPath(f),qn.updateUnit(f,o.unitId,{q:l.data.q,r:l.data.r,currentStamina:c})})}}class R2{constructor(e=!0){this.enableLogging=e}state=Z.Initializing;previousState=null;stateHistory=[];MAX_HISTORY=20;onStateChangeCallbacks=[];setState(e){if(this.state===e)return;if(!this.isValidTransition(this.state,e)){console.warn(`[ControlStateMachine] Invalid transition: ${this.state}  ${e}`);return}const n=this.state;this.previousState=n,this.state=e,this.stateHistory.push({from:n,to:e,timestamp:Date.now()}),this.stateHistory.length>this.MAX_HISTORY&&this.stateHistory.shift(),this.enableLogging&&console.log(`[ControlState] ${n}  ${e}`),this.onStateChangeCallbacks.forEach(a=>{a(n,e)})}isValidTransition(e,n){return{[Z.Initializing]:[Z.Idle,Z.EnemyTurn,Z.Ended],[Z.Idle]:[Z.PlayerMoving,Z.PlayerAttacking,Z.SkillTargeting,Z.EnemyTurn,Z.Ended],[Z.SkillTargeting]:[Z.Idle,Z.PlayerAttacking,Z.EnemyTurn,Z.Ended],[Z.PlayerMoving]:[Z.Idle,Z.EnemyTurn,Z.Ended],[Z.PlayerAttacking]:[Z.Idle,Z.EnemyTurn,Z.Ended],[Z.EnemyTurn]:[Z.Idle,Z.Ended],[Z.Ended]:[]}[e]?.includes(n)??!1}revertToPreviousState(){this.previousState&&this.setState(this.previousState)}getState(){return this.state}is(e){return this.state===e}isAnyOf(...e){return e.includes(this.state)}allowsInput(){return this.state===Z.Idle||this.state===Z.SkillTargeting}allowsHover(){return this.allowsInput()}allowsClick(){return this.allowsInput()}allowsMovement(){return this.state===Z.Idle}allowsAttack(){return this.state===Z.Idle||this.state===Z.SkillTargeting}allowsSkillSelection(){return this.state===Z.Idle||this.state===Z.SkillTargeting}isBlocking(){return this.state===Z.PlayerMoving||this.state===Z.PlayerAttacking||this.state===Z.EnemyTurn}isBattleActive(){return this.state!==Z.Initializing&&this.state!==Z.Ended}canHandleInput(e){return e!==Gt.Playing?!1:this.allowsInput()}syncWithBattleStatus(e){switch(e){case Gt.Preparing:this.setState(Z.Initializing);break;case Gt.Playing:this.is(Z.Initializing)&&this.setState(Z.Idle);break;case Gt.Victory:case Gt.Defeat:this.setState(Z.Ended);break}}onStateChange(e){return this.onStateChangeCallbacks.push(e),()=>{const n=this.onStateChangeCallbacks.indexOf(e);n!==-1&&this.onStateChangeCallbacks.splice(n,1)}}getHistory(){return[...this.stateHistory]}getHistoryString(){return this.stateHistory.map(({from:e,to:n,timestamp:a})=>`[${new Date(a).toLocaleTimeString()}] ${e}  ${n}`).join(`
`)}debugPrint(){console.log("=== ControlStateMachine State ==="),console.log("Current:",this.state),console.log("Previous:",this.previousState),console.log("Allows Input:",this.allowsInput()),console.log("Is Blocking:",this.isBlocking()),console.log(`
Recent History:`),console.log(this.getHistoryString())}reset(){this.state=Z.Initializing,this.previousState=null,this.stateHistory=[],this.enableLogging&&console.log("[ControlStateMachine] Reset")}}class za{static getHitChance(e,n,a){const o=a.range>2?e.stats.rangedSkill:e.stats.meleeSkill,u=e.currentStamina<e.stats.stamina*.2?-5:0;let c=o+(a.hitChanceBonus||0)-n.stats.evasion+u;return Math.max(5,Math.min(95,c))}static getEffectiveCount(e){return Math.pow(e.count,nv)}static calculateSkillRawDamage(e,n,a,l=!0){return this.calculateRawDamage(e,n,a.powerMult,a.armorPenetration,l)}static calculateOpportunityRawDamage(e,n,a=!0){return this.calculateRawDamage(e,n,.5,.1,a)}static calculateRawDamage(e,n,a,l,o=!0){const u=this.getEffectiveCount(e),f=(o?(e.stats.damageMin+e.stats.damageMax)/2:e.stats.damageMin+Math.random()*(e.stats.damageMax-e.stats.damageMin))*u*(a||1),g=l||0,m=f*g;let y=f*(1-g);const _=Math.min(.8,n.stats.armor/100);return y=y*(1-_),Math.round(m+y)}static calculateAttack(e,n,a){const l=this.getHitChance(e,n,a);if(Math.random()*100>l)return this.emptyResult(n,!0,"Miss!");const u=this.calculateSkillRawDamage(e,n,a,!1),c=Math.random()<e.stats.meleeSkill/1e3,f=c?Math.round(u*1.5):u;return this.applyDamageToStack(n,f,c)}static checkOpportunityAttackersOnHex(e,n,a){const l=a.get(e);if(!l)return[];const o=rn(n),u=[];for(const[c,f]of a.entries()){if(f.faction===l.faction||f.isDead||f.opportunityAttackUsed)continue;wi(o,f)<=1&&u.push({attackerId:c})}return u}static applyDamageToStack(e,n,a){const l=(e.count-1)*e.stats.hp+e.currentUnitHp,o=Math.max(0,l-n),u=Math.ceil(o/e.stats.hp),c=o%e.stats.hp||(o>0?e.stats.hp:0);return{targetId:e.unitId,damage:n,isCrit:a,isMiss:!1,finalDefenderHp:c,finalDefenderCount:u,isDead:o<=0,details:`${a?"CRIT! ":""}Dealt ${n} damage.`}}static emptyResult(e,n,a){return{targetId:e.unitId,damage:0,isCrit:!1,isMiss:n,finalDefenderHp:e.currentUnitHp,finalDefenderCount:e.count,isDead:!1,details:a}}}class N2{constructor(e,n,a,l){this.animationController=e,this.registry=n,this.turnManager=a,this.stateMachine=l}currentAbortController=null;async execute(e,n,a){this.currentAbortController=new AbortController;const l=this.currentAbortController.signal,o=V.getState(),u=o.units.get(e),c=o.units.get(n);if(!u||!c){console.warn("[CombatExecutor] Attacker or target not found");return}const f=u.skills.find(m=>m.id===a);if(!f){console.warn("[CombatExecutor] Skill not found");return}if(u.currentStamina<f.cost){console.warn("[CombatExecutor] Not enough stamina");return}const g=u.faction===wt.Player;if(g){const m=Nt(c);if(!o.targetHexes.includes(m)){console.warn("[CombatExecutor] Unit not in range");return}}g&&this.stateMachine.is(Z.SkillTargeting)&&this.stateMachine.setState(Z.PlayerAttacking);try{const m=za.calculateAttack(u,c,f),y=this.registry.getUnit(e),_=this.registry.getUnit(n);if(!y||!_){console.warn("[CombatExecutor] Visual not found");return}rt.emit("STAMINA_DRAIN",{unitId:e,amount:f.cost}),await this.animationController.playSkillAnimation(m,y,_,{signal:l}),l.aborted||this.applySkillResult(e,n,f,m)}catch(m){l.aborted||m.message?.includes("aborted")?console.log("[CombatExecutor] Combat cancelled"):console.error("[CombatExecutor] Combat failed:",m)}finally{this.currentAbortController=null,this.stateMachine.is(Z.PlayerAttacking)&&this.stateMachine.setState(Z.Idle)}}cancelCurrentCombat(){this.currentAbortController&&(this.currentAbortController.abort(),this.currentAbortController=null)}applySkillResult(e,n,a,l){const o=V.getState(),u=o.units.get(e),c=o.units.get(n);if(!u||!c)return;l.isDead?this.turnManager.handleUnitDeath(n):o.updateUnit(n,{count:l.finalDefenderCount,currentUnitHp:l.finalDefenderHp});const f=u.currentStamina-a.cost;o.updateUnit(e,{currentStamina:f})}}class B2{endUnitTurn(e){const n=V.getState(),a=n.units.get(e);if(!a)return;const l=this.removeUnitFromActive(n.turnQueue,e),o=this.addToFinished(n.finishedPools,e,a.faction);this.applyQueueUpdate(l,o)}deferUnit(e){const n=V.getState(),a=n.units.get(e);if(!a||!n.turnQueue[0])return;const o=n.turnQueue.findIndex((u,c)=>c>0&&u.faction===a.faction);if(o!==-1){const u=this.moveToNextPool(n.turnQueue,e,o);this.applyQueueUpdate(u,n.finishedPools);return}this.endUnitTurn(e)}canUnitStillAct(e){const n=V.getState(),a=n.units.get(e);if(!a||a.currentStamina<=0)return!1;if(a.skills.some(f=>a.currentStamina>=f.cost))return!0;const o=Array.from(n.reachableHexesWithCost.values()).filter(f=>f>0),u=o.length>0?Math.min(...o):1/0;return a.currentStamina>=u}handleUnitDeath(e){const n=V.getState(),a=n.units.get(e);if(!a||a.isDead)return;const l=this.removeUnitFromActive(n.turnQueue,e);V.getState().applyUnitDeath({unitId:e,hexId:Nt(a),newQueue:l}),this.checkBattleEnd(),e===n.selectedUnitId&&this.advanceTurn(l,n.finishedPools)}removeUnitFromActive(e,n){return e.map(a=>({...a,unitIds:a.unitIds.filter(l=>l!==n)})).filter(a=>a.unitIds.length>0)}moveToNextPool(e,n,a){return e.map((l,o)=>o===0?{...l,unitIds:l.unitIds.filter(u=>u!==n)}:o===a?{...l,unitIds:[...l.unitIds,n]}:l).filter(l=>l.unitIds.length>0)}addToFinished(e,n,a){const l=e.findIndex(o=>o.faction===a);return l!==-1?e.map((o,u)=>u===l?{...o,unitIds:[...o.unitIds,n]}:o):[...e,{id:`finished-${a}`,faction:a,unitIds:[n]}]}applyQueueUpdate(e,n){const a=V.getState(),l=e[0];if(!l){this.startNewRound();return}const o=l.unitIds.find(u=>u!==a.selectedUnitId)||l.unitIds[0];V.setState({turnQueue:e,finishedPools:n,selectedUnitId:o||null,selectedSkillId:null})}advanceTurn(e,n){const a=e[0];if(!a){this.startNewRound();return}V.setState({turnQueue:e,finishedPools:n,selectedUnitId:a.unitIds[0]||null,selectedSkillId:null})}startNewRound(){const e=V.getState(),n=new Map,a=[];for(const[u,c]of e.units){const f=c.currentStamina===c.stats.stamina?c:{...c,currentStamina:c.stats.stamina};n.set(u,f),a.push(f)}const l=rv(a),o=l[0];V.setState({units:n,turnQueue:l,finishedPools:[],round:e.round+1,selectedUnitId:o?.unitIds[0]||null,selectedSkillId:null})}checkBattleEnd(){const e=V.getState().units;let n=0,a=0;for(const l of e.values())if(!l.isDead&&(l.faction===wt.Enemy?n++:a++,n>0&&a>0))break;n===0?V.setState({status:Gt.Victory,selectedUnitId:null,selectedPath:Qo,reachableHexes:[],targetHexes:[]}):a===0&&V.setState({status:Gt.Defeat,selectedUnitId:null,selectedPath:Qo,reachableHexes:[],targetHexes:[]})}}class k2{constructor(e,n){this.stateMachine=e,this.pathRenderer=n}selectSkill(e){const n=this.validateSkillSelection(e);if(!n.isValid)return console.log("[SkillManager] Cannot select skill:",n.reason),!1;this.pathRenderer.clear();const{unit:a,skill:l}=n,o=this.calculateSkillRange(a,l);return V.setState({selectedSkillId:e,targetHexes:o}),this.stateMachine.is(Z.Idle)&&this.stateMachine.setState(Z.SkillTargeting),console.log(`[SkillManager] Skill selected: ${e}, targets: ${o.length}`),!0}deselectSkill(){V.setState({selectedSkillId:null,targetHexes:[]}),this.stateMachine.is(Z.SkillTargeting)&&this.stateMachine.setState(Z.Idle),console.log("[SkillManager] Skill deselected")}toggleSkill(e){return V.getState().selectedSkillId===e?(this.deselectSkill(),!1):this.selectSkill(e)}canSelectSkill(e){const n=this.validateSkillSelection(e);return{canSelect:n.isValid,reason:n.reason}}getSelectedSkill(){const{selectedUnitId:e,selectedSkillId:n}=V.getState();if(!e||!n)return null;const a=V.getState().units.get(e);return a&&a.skills.find(l=>l.id===n)||null}isValidTarget(e){const{targetHexes:n}=V.getState();return n.includes(e)}validateSkillSelection(e){if(V.getState().status!==Gt.Playing)return{isValid:!1,reason:"Battle is not active"};if(!this.stateMachine.allowsSkillSelection())return{isValid:!1,reason:`Cannot select skill in state: ${this.stateMachine.getState()}`};const a=V.getState().selectedUnitId;if(!a)return{isValid:!1,reason:"No unit selected"};const l=V.getState().units.get(a);if(!l)return{isValid:!1,reason:"Selected unit not found"};if(l.isDead)return{isValid:!1,reason:"Unit is dead"};if(V.getState().finishedPools.some(f=>f.unitIds.includes(a)))return{isValid:!1,reason:"Unit has finished turn"};const c=l.skills.find(f=>f.id===e);return c?l.currentStamina<c.cost?{isValid:!1,reason:`Not enough stamina (need ${c.cost}, have ${l.currentStamina})`}:{isValid:!0,unit:l,skill:c}:{isValid:!1,reason:"Skill not found"}}calculateSkillRange(e,n){const a=V.getState().battleMap,l={q:e.q,r:e.r},o=n.range,u=ae.getRadius(l,o,a,!1);return Array.from(u.keys())}}class di{static instance=null;skillManager;stateMachine;turnManager;constructor(){}static initialize(e,n,a){di.instance||(di.instance=new di);const l=di.instance;l.stateMachine=e,l.skillManager=n,l.turnManager=a,console.log("[ManagerRegistry] Initialized")}static getInstance(){if(!di.instance)throw new Error("ManagerRegistry not initialized. Create BattleScene first.");return di.instance}static destroy(){di.instance=null,console.log("[ManagerRegistry] Destroyed")}static isInitialized(){return di.instance!==null}}const L2={ELIMINATE:"ELIMINATE"};class I2{state={goals:[],assignments:new Map,goalProgress:new Map,goalsCreated:0,goalsCompleted:0,goalsFailed:0};currentTurn=0;onTurnStart(e,n,a,l,o){this.currentTurn=l,this.state.goals=[],this.state.assignments.clear(),this.state.goals=this.generateGoals(e,n,a),this.assignGoalsToAll(e,n,o),console.log(`[AIManager] Turn ${l}: Generated goals`,this.state.goals)}getGoalForUnit(e,n,a,l){const o=this.state.assignments.get(e.unitId);if(o){const c=this.state.goals.find(f=>f.id===o);if(c&&this.isGoalValid(c,a))return console.log(`[AIManager] Unit ${e.unitId}: Keeping existing goal ${c.type} - ${c.targetId}`),c}const u=this.assignBestGoal(e,n,a,l);return u.goal?(this.state.assignments.set(e.unitId,u.goal.id),u.goal.assignedUnits.push(e.unitId),console.log(`[AIManager] Unit ${e.unitId}: Assigned ${u.goal.type} (score: ${u.score.toFixed(1)})`,this.state.goals)):console.log(`[AIManager] Unit ${e.unitId}: No suitable goal, going OPPORTUNISTIC`),u.goal}markGoalCompleted(e){const n=this.state.goals.find(a=>a.id===e);n&&(n.isActive=!1,this.state.goalsCompleted++)}getState(){return this.state}generateGoals(e,n,a){const l=[];for(const o of n){const u=this.findClosestAllyDistance(o,e),c=Math.max(1,Math.min(10,11-u)),f={id:`eliminate_${o.unitId}_t${this.currentTurn}`,type:L2.ELIMINATE,priority:c,targetId:o.unitId,assignedUnits:[],isActive:!0,maxUnits:1,reason:`Closest ally distance: ${u}`};l.push(f)}return l.sort((o,u)=>u.priority-o.priority),this.state.goalsCreated+=l.length,l}assignGoalsToAll(e,n,a){const l=[];for(const c of e)for(const f of this.state.goals){const g=n.find(y=>y.unitId===f.targetId);if(!g||g.isDead)continue;const m=this.calculateWeight(c,g,a);l.push({u:c.unitId,g:f,score:m})}l.sort((c,f)=>f.score-c.score);const o=new Set,u=new Map;for(const c of l){if(o.has(c.u))continue;const f=u.get(c.g.id)??0,g=c.g.maxUnits??1/0;f<g&&(this.state.assignments.set(c.u,c.g.id),c.g.assignedUnits.push(c.u),o.add(c.u),u.set(c.g.id,f+1))}}calculateWeight(e,n,a){const l=a.pathsToEnemies.get(n.unitId)?.length||5,o=e.skills[0]?.armorPenetration??0,u=n.skills[0]?.armorPenetration??0,c=Math.max(0,n.stats.armor-o),f=Math.max(0,e.stats.damageMin-c),g=n.stats.damageMin*(1+u/20);let m=0;if(o>0&&n.stats.armor>0){const _=n.stats.armor/o;m=_>.5&&_<=1.2?20:0}const y=Math.pow(l,1.5)*2;return f*(g/10)+m-y}assignBestGoal(e,n,a,l){const o={allies:n,enemies:a,battleMap:l,getDistance:wi,getTarget:f=>a.find(g=>g.unitId===f)},u=this.state.goals.filter(f=>f.isActive).filter(f=>this.canUnitPursueGoal(e,f,o)).map(f=>({goal:f,score:this.evaluateGoalSuitability(e,f,o)})).sort((f,g)=>g.score-f.score),c=u[0];return c?{unitId:e.unitId,goal:c.goal,score:c.score,alternatives:u.slice(1,3).map(f=>f.goal)}:{unitId:e.unitId,goal:null,score:0}}canUnitPursueGoal(e,n,a){return!(n.maxUnits&&n.assignedUnits.length>=n.maxUnits||n.targetId&&!a.getTarget(n.targetId))}evaluateGoalSuitability(e,n,a){const l=n.priority*10;if(n.targetId){const o=a.getTarget(n.targetId);if(!o)return 0;const c=100/(a.getDistance({q:e.q,r:e.r},{q:o.q,r:o.r})+1);return l*(c/100)}return l}isGoalValid(e,n){return e.isActive?e.targetId&&!n.some(l=>l.unitId===e.targetId)?(e.isActive=!1,e.reason="Target eliminated",!1):!0:!1}findClosestAllyDistance(e,n){let a=1/0;for(const l of n){const o=wi({q:l.q,r:l.r},{q:e.q,r:e.r});o<a&&(a=o)}return a}customEvaluators=new Map;setEvaluator(e,n){this.customEvaluators.set(e,n)}getCurrentTurn(){return this.currentTurn}}const zm={AGGRESSIVE_RATIO:1.5,DEFENSIVE_RATIO:.7},Di={CREATURE_VALUE:10,ONESHOT_BONUS:3,STRONG_TARGET_BONUS:1.5,WEAK_TARGET_BONUS:.5,NORMAL_TARGET_BONUS:1,WOUNDED_BONUS_MAX:2,INTERRUPT_PENALTY_BASE:5,PATH_LOG_BASE:11},G2={DAMAGE_WEIGHT:1.4,TARGET_VALUE_WEIGHT:1.2,FOCUS_FIRE_BONUS:1.5,CLOSING_WEIGHT:2,PATH_ALIGNMENT_BONUS:1.15,ENTERING_RANGE_WEIGHT:1.5,REPOSITIONING_WEIGHT:.8,RISK_WEIGHT:.5,THREAT_ZONE_WEIGHT:.3,OPPORTUNITY_RISK_WEIGHT:.5,MOVE_COST_WEIGHT:.3,KITING_WEIGHT:.5,THREAT_ZONE_TARGET:1.5},q2={DAMAGE_WEIGHT:1.3,TARGET_VALUE_WEIGHT:.8,FOCUS_FIRE_BONUS:1,CLOSING_WEIGHT:1.2,PATH_ALIGNMENT_BONUS:1.1,ENTERING_RANGE_WEIGHT:.2,REPOSITIONING_WEIGHT:.5,RISK_WEIGHT:.8,THREAT_ZONE_WEIGHT:.7,OPPORTUNITY_RISK_WEIGHT:.8,MOVE_COST_WEIGHT:1,KITING_WEIGHT:1,THREAT_ZONE_TARGET:.5},Y2={DAMAGE_WEIGHT:1,TARGET_VALUE_WEIGHT:.8,FOCUS_FIRE_BONUS:1,CLOSING_WEIGHT:.7,PATH_ALIGNMENT_BONUS:1.05,ENTERING_RANGE_WEIGHT:1,REPOSITIONING_WEIGHT:.3,RISK_WEIGHT:1.5,THREAT_ZONE_WEIGHT:2,OPPORTUNITY_RISK_WEIGHT:1,MOVE_COST_WEIGHT:1.5,KITING_WEIGHT:1.5,THREAT_ZONE_TARGET:.3};function X2(d){switch(d){case"AGGRESSIVE":return G2;case"DEFENSIVE":return Y2;default:return q2}}const Ul={MELEE_THRESHOLD:2,RANGED_MIN_DISTANCE:4,RANGED_PREFERRED_DISTANCE:6},tr={pruneThreshold:.5,debug:!0};class fv{static analyzeBehavior(e){const n=e.skills;return n.length===0?this.createMeleeStrategy():n.filter(l=>l.range>Ul.MELEE_THRESHOLD).length>0?this.createRangedStrategy():this.createMeleeStrategy()}static createMeleeStrategy(){return{type:"MELEE",preferredDistance:1,minDistance:0,maxDistance:2,shouldKite:!1}}static createRangedStrategy(){return{type:"RANGED",preferredDistance:Ul.RANGED_PREFERRED_DISTANCE,minDistance:Ul.RANGED_MIN_DISTANCE,maxDistance:6,shouldKite:!0}}static createHybridStrategy(){return{type:"HYBRID",preferredDistance:4,minDistance:1,maxDistance:12,shouldKite:!0}}static getMaxSkillRange(e){return e.skills.length===0?1:Math.max(...e.skills.map(n=>n.range))}static canPerformMelee(e){return e.skills.some(n=>n.range<=Ul.MELEE_THRESHOLD)}static canPerformRanged(e){return e.skills.some(n=>n.range>Ul.MELEE_THRESHOLD)}}class j2{static calculate(e,n){const a=rn(e),l=new Map;let o=1/0,u=null;for(const c of n){const f=wi(a,c);l.set(c.unitId,f),f<o&&(o=f,u=c.unitId)}return{distances:l,minDist:o,closestEnemyId:u}}}const V2=.75;class P2{static calculate(e,n,a,l,o){const u=n.get(e);if(!u)return 0;const c=Nt(a),f=ae.findPath(c,l,o);if(f.length===0)return 0;let g=0;const m=[c,...f],y=new Set;let _=null;for(const S of m){if(_){const T=za.checkOpportunityAttackersOnHex(e,_,n);for(const{attackerId:x}of T){const M=n.get(x);if(!M||M.isDead)continue;y.add(x);const w=za.calculateOpportunityRawDamage(M,u,!0);g+=w}}_=S}if(y.size>0){const S=g/Math.max(y.size,1),T=y.size*S*V2;g+=T}return g}}class Q2{static calculate(e,n,a,l,o,u){const c=new Map,f=new Map;if(a.length===0)return{pathHexes:c,pathsToEnemies:f};const g=Nt(n),m=[];let y=1/0;for(const _ of a){const S=Nt(_),T=ae.findPath(g,S,o);if(T&&T.length>0){T.length<y&&(y=T.length);const x=za.calculateRawDamage(e,_,1,0,!0),M=Math.max(0,(_.count-1)*_.stats.hp+_.currentUnitHp),w=x>=M*1.5,C=Math.min(x,M*1.5),z=Math.pow(e.count,nv),B=(_.stats.damageMin+_.stats.damageMax)/2*z;m.push({path:T,weight:C,enemyDmg:B,isKillable:w}),f.set(_.unitId,T)}}if(m.length===0)return{pathHexes:c,pathsToEnemies:f};for(const{path:_,weight:S,enemyDmg:T,isKillable:x}of m)for(const M of _)if(l.has(M)){const w=c.get(M)||{maxDmg:0,sumDmg:0,enemyMaxDmg:0,enemySumDmg:0,dist:1/0,hasKill:!1},C=x||w.hasKill;c.set(M,{maxDmg:Math.max(w.maxDmg,S),sumDmg:w.sumDmg+S,enemyMaxDmg:Math.max(w.enemyMaxDmg,T),enemySumDmg:w.enemySumDmg+T,hasKill:C,dist:Math.min(w.dist,_.length)})}return{pathHexes:c,pathsToEnemies:f}}}class Z2{static calculate(e,n,a,l){const o=new Map,u=n.map(c=>({instance:c,damageTable:this.precomputeDamageKnapsack(c,a),reachableMap:ae.getReachableNodes({q:c.q,r:c.r},{currentStamina:c.currentStamina,speed:c.stats.speed},l).reachableMap}));for(const c of e){const f=this.evaluateSingleHex(c,u,l);f>0&&o.set(c[0],f)}return o}static evaluateSingleHex(e,n,a){const l=[];for(const c of n){const f=[],g=c.damageTable.maxRange,m=rn(e[0]);ae.getRadius(m,g,a,!0).forEach((_,S)=>{const T=c.reachableMap.get(S);if(T===void 0)return;const x=c.instance.currentStamina-T;if(x<0)return;const M=c.damageTable.tables.get(_);if(!M)return;const w=this.getMaxDamageForStamina(M,x);w>0&&f.push({slot:S,damage:w})}),f.length>0&&(f.sort((_,S)=>S.damage-_.damage),l.push({enemy:c,options:f}))}l.sort((c,f)=>{const g=c.options[0],m=f.options[0];return!g||!m?0:c.options.length!==f.options.length?c.options.length-f.options.length:m.damage-g.damage});let o=0;const u=new Set;for(const c of l){const f=c.options.find(g=>!u.has(g.slot));f&&(o+=f.damage,u.add(f.slot))}return o}static precomputeDamageKnapsack(e,n){const l=Math.floor(e.currentStamina/5),o=new Map,u=e.skills.reduce((m,y)=>{m[y.range]||(m[y.range]=[]);const _=Math.ceil(y.cost/5);return m[y.range].push({stepCost:_,damage:za.calculateRawDamage(e,n,y.powerMult||1,y.armorPenetration||0,!0)}),m},{}),c=Object.keys(u).map(Number).sort((m,y)=>y-m);if(c.length===0)return{tables:o,maxRange:0};const f=c[0];let g=new Array(l+1).fill(0);for(let m=f;m>=1;m--){if(u[m]){const y=[...g];for(const _ of u[m])for(let S=_.stepCost;S<=l;S++){const T=y[S-_.stepCost]+_.damage;T>y[S]&&(y[S]=T)}for(let _=1;_<=l;_++)y[_]=Math.max(y[_],y[_-1]);g=y}o.set(m,g)}return{tables:o,maxRange:f,step:5}}static getMaxDamageForStamina(e,n,a=5){const l=Math.floor(n/a);return l<0?0:l>=e.length?e[e.length-1]||0:e[l]||0}}class W2{static calculate(e,n){const a=new Map;for(const l of e){if(l.isDead)continue;const o=(l.stats.damageMin+l.stats.damageMax)*l.count/2,u=of(l.q,l.r);for(const c of u){const f=Nt(c),g=n.get(f);if(g&&!g.isObstacle){const m=a.get(f)||0;a.set(f,m+o)}}}return a}}class K2{static create(e,n,a,l,o){const u=X2(l),c=fv.analyzeBehavior(e),f=[],g=[];for(const B of n.values())B.isDead||(B.faction===e.faction?g.push(B):f.push(B));const m=f.find(B=>B.unitId===o?.targetId),{reachableIds:y,reachableMap:_,parentMap:S}=ae.getReachableNodes(e,{currentStamina:e.currentStamina,speed:e.stats.speed},a),T=W2.calculate(f,a),{pathHexes:x,pathsToEnemies:M}=Q2.calculate(e,e,f,_,a,T),w=Z2.calculate(_,f,e,a),{distanceMatrix:C,oppRiskCache:z}=this.precomputeHexData(e,n,f,y,a);return{unit:e,goal:o,allies:g,enemies:f,target:m,battleMap:a,reachableMap:_,parentMap:S,stance:l,weights:u,behavior:c,threatMap:w,zocMap:T,distanceMatrix:C,oppRiskCache:z,pathHexes:x,pathsToEnemies:M}}static precomputeHexData(e,n,a,l,o){const u=new Map,c=new Map;return l.forEach(f=>{const g=j2.calculate(f,a),m=P2.calculate(e.unitId,n,e,f,o);c.set(f,m),u.set(f,g)}),{distanceMatrix:u,oppRiskCache:c}}}class F2{evaluate(e,n,a,l){const o=za.calculateSkillRawDamage(n.unit,a,l,!0),u=Math.max(n.unit.stats.rangedSkill,n.unit.stats.meleeSkill),f=Math.max(5,u+(l.hitChanceBonus||0)-a.stats.evasion)/100,g=o*f,m=Di.CREATURE_VALUE,y=Math.min(g/a.stats.hp,a.count),_=y*m,S=_*n.weights.DAMAGE_WEIGHT;let T=0;y>=a.count&&(T+=Di.ONESHOT_BONUS*m*n.weights.TARGET_VALUE_WEIGHT);const x=a.stats.hp*a.count,M=n.unit.stats.hp*n.unit.count,w=x/M;w>1.5?T+=Di.STRONG_TARGET_BONUS*m*n.weights.TARGET_VALUE_WEIGHT:w<.5?T+=Di.WEAK_TARGET_BONUS*m*n.weights.TARGET_VALUE_WEIGHT:T+=Di.NORMAL_TARGET_BONUS*m*n.weights.TARGET_VALUE_WEIGHT;let C=0;const z=a.currentUnitHp/a.stats.hp;z<.5&&(C=(1-z)*Di.WOUNDED_BONUS_MAX*m*n.weights.FOCUS_FIRE_BONUS);const B=S+T+C;return{utility:B,components:{baseDamage:_,damageWeight:S-_,targetBonus:T,woundedBonus:C,total:B}}}}class J2{evaluate(e,n,a){if(!a.lastStepId)return{utility:0};const l=Di.CREATURE_VALUE,o=n.unit.stats.hp*n.unit.count,u=rn(a.lastStepId),c=n.oppRiskCache.get(a.lastStepId)||0,f=n.distanceMatrix.get(a.lastStepId),g=n.pathHexes.get(a.lastStepId),m=this.calculateComponents(e,n,u,a.cost,f,g,c,o,l);let y=Object.values(m).reduce((_,S)=>_+(S||0),0);return n.goal?.type==="ELIMINATE"&&(y+=1),m.total=y,{utility:y,components:m}}calculateComponents(e,n,a,l,o,u,c,f,g){const{unit:m,enemies:y,weights:_,threatMap:S}=n,{minDistBefore:T,minDistAfter:x}=this.calculateDistances(e.position,a,y,o),M=this.evaluateMovement(m,e.position,a,l,T,x,g,u),w=this.evaluatePathAlignment(m,l,g,_,u),C=this.evaluateRangeEntry(m,T,x,g,_),z=this.evaluateRisk(e.position,a,c,S,f,g,_);return{progress:M.progress,moveCost:M.cost,pathAlignment:w,enteringRange:C,threatDelta:z.threatDelta,threatZone:z.threatZone,oppRisk:z.oppRisk,total:0}}calculateDistances(e,n,a,l){if(l){const c=l.minDist;let f=1/0;for(const g of a){const m=wi(e,{q:g.q,r:g.r});f=Math.min(f,m)}return{minDistBefore:f,minDistAfter:c}}let o=1/0,u=1/0;for(const c of a){const f={q:c.q,r:c.r},g=wi(e,f),m=wi(n,f);o=Math.min(o,g),u=Math.min(u,m)}return{minDistBefore:o,minDistAfter:u}}evaluateMovement(e,n,a,l,o,u,c,f){const g=e.stats.stamina,m=c/g,y=-l*m,_=wi(n,a);let S=Math.max(0,o-u);S<=0&&f&&(S=_*.9);const T=S>0?l/S:30;return{progress:S*T*m,cost:y}}evaluatePathAlignment(e,n,a,l,o){if(!o)return 0;const u=o.maxDmg-Math.sqrt(o.enemyMaxDmg*a),c=Math.log(1+Math.max(0,u)/a)/Math.log(Di.PATH_LOG_BASE),f=1+o.dist*.08*l.PATH_ALIGNMENT_BONUS,g=c/f;let m=0;const y=(o.sumDmg-o.enemySumDmg)/a;y>0&&(m=Math.log(1+y)/Math.log(Di.PATH_LOG_BASE)*.3);const _=o.dist>0&&n>0?n/o.dist:30,S=a/e.stats.stamina,T=_*S;return(g+m)*T}evaluateRangeEntry(e,n,a,l,o){const u=fv.getMaxSkillRange(e),c=n>u,f=a<=u;return c&&f?1.5*l*o.ENTERING_RANGE_WEIGHT:0}evaluateRisk(e,n,a,l,o,u,c){const f=l.get(Nt(e))||0,g=l.get(Nt(n))||0,y=(g-f)/o,_=-Math.tanh(y*2)*c.RISK_WEIGHT,T=-(g/o)*u*c.THREAT_ZONE_WEIGHT;let x=0;if(a>0){const M=a/o,w=Di.INTERRUPT_PENALTY_BASE;x=-(M+w)*u*c.OPPORTUNITY_RISK_WEIGHT}return{threatDelta:_,threatZone:T,oppRisk:x}}}const Ke={Attack:"attack",Move:"move",Wait:"wait"};class $2{generatorType=Ke.Attack;generate(e,n,a){const l=[];for(const o of n.enemies)for(const u of n.unit.skills){const c=u.cost;if(e.stamina<c||wi(e.position,o)>u.range)continue;const g=a.evaluate(e,n,o,u);l.push({action:{type:Ke.Attack,unitId:n.unit.unitId,targetUnitId:o.unitId,skillId:u.id},utility:g.utility,staminaAfter:e.stamina-c,position:e.position,components:g.components,metadata:{type:"attack",targetEnemy:o.unitId}})}return l}}class tT{generatorType=Ke.Move;generate(e,n,a){const l=[],o=Nt(e.position),{battleMap:u,reachableMap:c}=n;for(const[f,g]of c.entries()){if(f===Nt(e.position))continue;const m=u.get(f);if(!m||m.isObstacle||m.entityId&&f!==o)continue;const y=n.pathHexes.get(f),_=[];let S=f;for(;S!==null&&S!==o;)_.push(S),S=n.parentMap.get(S)||null;const x={path:_.reverse(),lastStepId:f,cost:g},M=a.evaluate(e,n,x),w=rn(f);l.push({action:{type:Ke.Move,unitId:n.unit.unitId,targetHexId:f,targetPath:x},utility:M.utility,staminaAfter:e.stamina-g,position:w,components:{...M.components,total:M.utility},metadata:{type:y?"path-based":"opportunistic",pathAlignment:!!y}})}return l}}class eT{generatorType=Ke.Wait;generate(e,n,a){Nt(e.position);const l=a.evaluate(e,n,"wait");return[{action:{type:Ke.Wait,unitId:n.unit.unitId},utility:l.utility,staminaAfter:n.unit.currentStamina,position:{q:n.unit.q,r:n.unit.r},components:{...l.components,total:l.utility},metadata:{type:"wait"}}]}}class iT{prune(e,n,a){const l=e.length;if(l<=1||l<=3)return e;const o=e[0].utility,u=e[1].utility;let f=(o+u)/2*tr.pruneThreshold;return f=Math.min(f,u),o<0&&(f=Math.min(f,o*1.5)),n===0&&tr.debug&&this.logPruning(e,f),e.filter(g=>g.utility>=f)}logPruning(e,n){const a=e.filter(l=>l.utility>=n);console.log("[Pruning]",{before:e.length,after:a.length,threshold:n.toFixed(2),bestUtility:e[0]?.utility.toFixed(2),worstKept:a[a.length-1]?.utility.toFixed(2)}),console.log("[Pruning] Top candidates:",e.slice(0,40).map(l=>({type:l.action.type,subtype:l.metadata?.type,target:l.action.type==="move"?l.action.targetHexId:l.metadata?.targetEnemy,utility:l.utility.toFixed(1),components:l.components})))}}class nT{constructor(e,n){this.stateSimulator=e,this.pruningStrategy=n}currentMetadata={candidatesGenerated:0,topCandidates:[],prunedCount:0,remainingCount:0};planBestSequence(e,n,a,l=3){return this.currentMetadata={candidatesGenerated:0,topCandidates:[],prunedCount:0,remainingCount:0},{sequence:this.planRecursive(e,n,a,0,l),metadata:this.currentMetadata}}planRecursive(e,n,a,l,o){if(l>=o||e.stamina<=0)return null;const u=e.actionsUsed[e.actionsUsed.length-1];if(u?.type===Ke.Wait)return null;let c=[];for(const{generator:y,evaluator:_}of a){if(u?.type===Ke.Move&&y.generatorType===Ke.Move)continue;const S=y.generate(e,n,_);c.push(...S)}if(c.length===0)return null;c.sort((y,_)=>_.utility-y.utility),l===0&&tr.debug&&(this.currentMetadata.candidatesGenerated=c.length,this.currentMetadata.topCandidates=c.slice(0,10));const f=this.pruningStrategy.prune(c,l,n);l===0&&tr.debug&&(this.currentMetadata.prunedCount=c.length-f.length,this.currentMetadata.remainingCount=f.length);let g=null,m=-1/0;for(const y of f){const _=this.stateSimulator.simulate(e,y);if(y.action.type===Ke.Wait){const x={actions:[y.action],totalUtility:y.utility,finalStamina:_.stamina};x.totalUtility>m&&(m=x.totalUtility,g=x);continue}const S=this.planRecursive(_,n,a,l+1,o),T=S?y.utility+S.totalUtility:y.utility;T>m&&(m=T,g={actions:S?[y.action,...S.actions]:[y.action],totalUtility:T,finalStamina:S?.finalStamina??_.stamina})}return g}}class aT{simulate(e,n){return n.action.type===Ke.Move?this.simulateMove(e,n):n.action.type===Ke.Attack?this.simulateAttack(e,n):n.action.type===Ke.Wait?this.simulateWait(e,n):e}simulateMove(e,n){return{position:n.position,stamina:n.staminaAfter,actionsUsed:[...e.actionsUsed,n.action],totalUtility:e.totalUtility,depth:e.depth+1}}simulateAttack(e,n){return{position:n.position,stamina:n.staminaAfter,actionsUsed:[...e.actionsUsed,n.action],totalUtility:e.totalUtility,depth:e.depth+1}}simulateWait(e,n){return{position:n.position,stamina:n.staminaAfter,actionsUsed:[...e.actionsUsed,n.action],totalUtility:e.totalUtility,depth:e.depth+1}}}class sT{logs=[];enabled;maxLogs=50;constructor(e=!1){this.enabled=e}enable(){this.enabled=!0}disable(){this.enabled=!1}logDecision(e){this.enabled&&(this.logs.push(e),this.logs.length>this.maxLogs&&this.logs.shift(),this.prettyPrint(e))}prettyPrint(e){console.group(` AI Decision: ${e.context.unitName} (${e.context.stance})`),console.log(` Position: ${e.context.position}, Stamina: ${e.context.currentStamina}, HP: ${e.context.currentHp}`),console.log(` Evaluated ${e.candidatesCount} candidates, showing top ${e.topCandidates.length}:`),console.table(e.topCandidates.map(n=>({Action:n.description,Utility:n.utility.toFixed(1),"Stamina After":n.staminaAfter,"Key Component":this.getKeyComponent(n.components)}))),e.finalDecision?(console.log(` Final Decision: ${e.finalDecision.description} (utility: ${e.finalDecision.utility.toFixed(1)})`),e.planDepth>1&&console.log(`    Part of ${e.planDepth}-action sequence`),e.finalDecision.type==="move"?console.log("   Components:",{pos:e.finalDecision.components.progress?.toFixed(1),path:e.finalDecision.components.pathAlignment?.toFixed(1),threat:e.finalDecision.components.threatZone?.toFixed(1),opp:e.finalDecision.components.oppRisk?.toFixed(1),cost:e.finalDecision.components.moveCost?.toFixed(1)}):e.finalDecision.type==="attack"&&console.log("   Components:",{base:e.finalDecision.components.baseDamage?.toFixed(1),weight:e.finalDecision.components.damageWeight?.toFixed(1),target:e.finalDecision.components.targetBonus?.toFixed(1),wounded:e.finalDecision.components.woundedBonus?.toFixed(1)})):console.log(" No valid decision"),console.groupEnd()}getKeyComponent(e){const n=Object.entries(e).filter(([a,l])=>a!=="total"&&l!==void 0&&l!==0).map(([a,l])=>({key:a,val:Math.abs(l)})).sort((a,l)=>l.val-a.val);return n.length>0?n[0].key:"-"}getLastLog(){return this.logs[this.logs.length-1]||null}getAllLogs(){return[...this.logs]}getLogsForUnit(e){return this.logs.filter(n=>n.context.unitId===e)}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}}class lT{evaluate(e,n,a){return{utility:-3,components:{total:-3,waiting:-3}}}}class Df{constructor(e,n,a){this.strategicManager=e,this.sequencePlanner=n,this.decisionLogger=a}currentContext=null;generators={attack:new $2,move:new tT,wait:new eT};static create(e){const n=new iT,a=new aT,l=new nT(a,n),o=new sT(tr.debug);return new Df(e,l,o)}getNextAction(e){const n=V.getState(),a=n.units.get(e);if(!a)return null;const l=[],o=[];for(const y of n.units.values())y.isDead||(y.faction===a.faction?o.push(y):l.push(y));const u=this.getOrCreateContext(a,o,l);this.strategicManager.getCurrentTurn()!==n.round&&(this.strategicManager.onTurnStart(o,l,n.battleMap,n.round,u),this.currentContext=null);const c=this.strategicManager.getGoalForUnit(a,o,l,n.battleMap);u.goal=c;const f=this.getComponentsForUnit(a,n),g={position:{q:a.q,r:a.r},stamina:a.currentStamina,actionsUsed:[],totalUtility:0,depth:0},m=this.sequencePlanner.planBestSequence(g,u,f,5);return this.logDecision(a,u,m),!m.sequence||m.sequence.actions.length===0?{type:"wait",unitId:a.unitId}:m.sequence.actions[0]}candidateToLogEntry(e,n){const a=e.action;let l="",o=0;switch(a.type){case"attack":{const u=n.enemies.find(f=>f.unitId===a.targetUnitId),c=n.unit.skills.find(f=>f.id===a.skillId);l=`Attack ${u?.unitId||"unknown"} with ${c?.name||"skill"}`,o=c?.cost||0;break}case"move":{const u=e.metadata?.type||"move";l=`Move to ${a.targetHexId} (${u})`,o=n.unit.currentStamina-e.staminaAfter;break}case"wait":{l="Wait",o=0;break}default:l=`Unknown action: ${a.type}`,o=0}return{type:a.type,description:l,position:a.type==="move"?a.targetHexId:void 0,targetId:a.type==="attack"?a.targetUnitId:void 0,skillId:a.type==="attack"?a.skillId:void 0,staminaCost:o,staminaAfter:e.staminaAfter,utility:e.utility,components:e.components||{total:e.utility}}}getOrCreateContext(e,n,a){const l=V.getState(),o=this.strategicManager.getGoalForUnit(e,n,a,l.battleMap);console.log(`[AIPlanner] Recreating context for ${e.unitId}. Reason: composition or goal change.`);const u=this.determineStance();return this.currentContext=K2.create(e,l.units,l.battleMap,u,o),this.currentContext}getComponentsForUnit(e,n){const a=[];return a.push({generator:this.generators.move,evaluator:new J2}),a.push({generator:this.generators.attack,evaluator:new F2}),a.push({generator:this.generators.wait,evaluator:new lT}),a}determineStance(){const e=Array.from(V.getState().units.values()).filter(o=>!o.isDead),n=e.filter(o=>o.faction===wt.Enemy).reduce((o,u)=>o+u.stats.hp*u.count,0),a=e.filter(o=>o.faction===wt.Player).reduce((o,u)=>o+u.stats.hp*u.count,0),l=n/(a||1);return l>zm.AGGRESSIVE_RATIO||l<.2?"AGGRESSIVE":l<zm.DEFENSIVE_RATIO?"DEFENSIVE":"BALANCED"}logDecision(e,n,a){const l={unitId:e.unitId,unitName:e.unitId.split("_")[0]||"-",stance:n.stance,position:`${e.q}:${e.r}`,currentHp:`${e.currentUnitHp}/${e.stats.hp}`,currentStamina:e.currentStamina},o=a.metadata.topCandidates.slice(0,5).map(c=>this.candidateToLogEntry(c,n));let u=null;if(a.sequence&&a.sequence.actions.length>0){const c=a.sequence.actions[0],f=a.metadata.topCandidates.find(g=>this.actionsMatch(g.action,c));f?u=this.candidateToLogEntry(f,n):u=this.actionToLogEntry(c,n,a.sequence.totalUtility)}this.decisionLogger.logDecision({context:l,candidatesCount:a.metadata.candidatesGenerated,topCandidates:o,finalDecision:u,planDepth:a.sequence?.actions.length||0,timestamp:Date.now()})}actionsMatch(e,n){if(e.type!==n.type)return!1;switch(e.type){case"attack":return e.targetUnitId===n.targetUnitId&&e.skillId===n.skillId;case"move":return e.targetHexId===n.targetHexId;case"wait":return!0;default:return!1}}actionToLogEntry(e,n,a){let l="",o=0;switch(e.type){case"attack":{const u=n.enemies.find(f=>f.unitId===e.targetUnitId),c=n.unit.skills.find(f=>f.id===e.skillId);l=`Attack ${u?.unitId||"unknown"} with ${c?.name||"skill"}`,o=c?.cost||0;break}case"move":{l=`Move to ${e.targetHexId}`,o=n.unit.currentStamina-(n.reachableMap.get(e.targetHexId)||0);break}case"wait":{l="Wait",o=0;break}}return{type:e.type,description:l,position:e.type==="move"?e.targetHexId:void 0,targetId:e.type==="attack"?e.targetUnitId:void 0,skillId:e.type==="attack"?e.skillId:void 0,staminaCost:o,staminaAfter:n.unit.currentStamina-o,utility:a,components:{total:a}}}}class jl{constructor(e,n,a,l,o){this.aiSystem=e,this.movementExecutor=n,this.combatExecutor=a,this.turnManager=l,this.controlStateMachine=o}static MAX_ITERATIONS=5;static ACTION_DELAY=400;async executeUnitTurn(e){console.log(`[AITurnManager] ===== Starting turn for ${e} =====`);const n=V.getState().units.get(e);if(!n){console.warn(`[AITurnManager] Unit ${e} not found`);return}this.logUnitState("Initial",n);let a=0;const l=[];for(;a<jl.MAX_ITERATIONS;){a++;const o=V.getState().units.get(e);if(!o||this.shouldStopTurn(o,e))break;const u=this.aiSystem.getNextAction(e);if(!u||u.type==="wait"){console.log(`[AITurnManager] Unit ${e} chose to wait`);break}if(l.push(u.type),this.detectLoop(l,e,u))break;console.log(`[AITurnManager] Iteration ${a}/${jl.MAX_ITERATIONS}:`,{action:u.type,position:`${o.q}:${o.r}`,stamina:o.currentStamina},u);const c=o.currentStamina;if(await this.executeAction(u),!this.verifyStaminaChanged(e,c))break;await this.delay(jl.ACTION_DELAY)}this.finishUnitTurn(e,n,l),await this.delay(500)}async executeAction(e){switch(this.controlStateMachine.is(Z.EnemyTurn)||this.controlStateMachine.setState(Z.EnemyTurn),e.type){case"move":if(!e.targetPath){console.error("[AITurnManager] Invalid move - missing hex");return}await this.movementExecutor.execute(e.unitId,e.targetPath);break;case"attack":if(!e.targetUnitId||!e.skillId){console.error("[AITurnManager] Invalid attack - missing target or skill");return}await this.combatExecutor.execute(e.unitId,e.targetUnitId,e.skillId);break;case"wait":console.log("[AITurnManager] Wait action executed");break;default:console.error("[AITurnManager] Unknown action type:",e)}}shouldStopTurn(e,n){return!e||e.isDead?(console.log(`[AITurnManager] Unit ${n} is dead or missing`),!0):e.currentStamina<=0?(console.log(`[AITurnManager] Unit ${n} out of stamina`),!0):V.getState().status!==Gt.Playing?(console.log("[AITurnManager] Battle ended"),!0):!1}detectLoop(e,n,a){if(e.length<4)return!1;const l=e.slice(-3);return l[0]===l[1]&&l[1]===l[2]?(console.error(`[AITurnManager] LOOP DETECTED! Unit ${n} repeating:`,l[0]),console.error("[AITurnManager] Action history:",e),console.error("[AITurnManager] Current action:",a),!0):!1}verifyStaminaChanged(e,n){const a=V.getState().units.get(e);return a?a.currentStamina===n?(console.error("[AITurnManager] WARNING: Stamina didn't change!"),console.error("[AITurnManager] This will cause infinite loop. Breaking."),!1):!0:!1}finishUnitTurn(e,n,a){const l=V.getState().units.get(e);console.log(`[AITurnManager] ===== Finished turn for ${e} =====`,{iterations:a.length,staminaUsed:(n?.currentStamina||0)-(l?.currentStamina||0),finalPosition:`${l?.q}:${l?.r}`,actions:a}),V.getState().status===Gt.Playing&&(l&&this.turnManager.canUnitStillAct(e)?(console.log(`[AITurnManager nextSameFactionIdx] Unit ${e} can still act - deferring`),this.turnManager.deferUnit(e)):(console.log(`[AITurnManager nextSameFactionIdx] Unit ${e} cannot act - ending turn`),this.turnManager.endUnitTurn(e)))}delay(e){return new Promise(n=>setTimeout(n,e))}logUnitState(e,n){n&&console.log(`[AITurnManager] ${e} state:`,{position:`${n.q}:${n.r}`,stamina:n.currentStamina,hp:`${n.currentUnitHp}/${n.stats.hp}`,id:n.unitId})}}const Hm=d=>Symbol.iterator in d,Dm=d=>"entries"in d,Um=(d,e)=>{const n=d instanceof Map?d:new Map(d.entries()),a=e instanceof Map?e:new Map(e.entries());if(n.size!==a.size)return!1;for(const[l,o]of n)if(!a.has(l)||!Object.is(o,a.get(l)))return!1;return!0},rT=(d,e)=>{const n=d[Symbol.iterator](),a=e[Symbol.iterator]();let l=n.next(),o=a.next();for(;!l.done&&!o.done;){if(!Object.is(l.value,o.value))return!1;l=n.next(),o=a.next()}return!!l.done&&!!o.done};function Uf(d,e){return Object.is(d,e)?!0:typeof d!="object"||d===null||typeof e!="object"||e===null||Object.getPrototypeOf(d)!==Object.getPrototypeOf(e)?!1:Hm(d)&&Hm(e)?Dm(d)&&Dm(e)?Um(d,e):rT(d,e):Um({entries:()=>Object.entries(d)},{entries:()=>Object.entries(e)})}function oT(d){const e=xs.useRef(void 0);return n=>{const a=d(n);return Uf(e.current,a)?e.current:e.current=a}}const uT={direction:"vertical",portraitSize:64,portraitGap:8,poolGap:12,colors:{player:{primary:12091649,accent:14463309},enemy:{primary:9047296,accent:16745347},neutral:{primary:4868682,accent:2763306},finished:8421504,background:1775378,text:14206880,border:9202219},portraitOpacity:1,activePoolGlow:1.2};class cT extends jt{config;portraits=new Map;layoutHeight=0;layoutWidth=0;unsubscribe=null;onLayoutChange;onUnitClick=null;constructor(e={}){super(),this.config={...uT,...e},this.setupStoreSubscription()}setupStoreSubscription(){this.unsubscribe=V.subscribe(e=>[e.selectedUnitId,e.turnQueue,e.finishedPools,e.status],([e,n,a,l])=>{this.render(e,n,a,l)},{equalityFn:Uf})}render(e,n,a,l){if(this.clearPortraits(),l!==Gt.Playing)return;let o=0;n.forEach((c,f)=>{const g=c.unitIds.filter(S=>S!==e);if(g.length===0)return;const m=f===0,y={...c,unitIds:g},_=this.renderPool(y,m,!1,o);o+=_+this.config.poolGap}),a.forEach(c=>{const f=this.renderPool(c,!1,!0,o);o+=f+this.config.poolGap});const u=o>0?o-this.config.poolGap:0;this.layoutHeight=this.config.direction==="vertical"?u:this.config.portraitSize,this.layoutWidth=this.config.direction==="vertical"?this.config.portraitSize:u,this.onLayoutChange?.()}renderPool(e,n,a,l){const{portraitSize:o,direction:u}=this.config,c=e.unitIds.length;return e.unitIds.forEach((f,g)=>{const m={isFirst:g===0,isLast:g===c-1,isSingle:c===1};let y=[0,0,0,0];m.isSingle?y=[1,1,1,1]:u==="vertical"?m.isFirst?y=[0,0,1,1]:m.isLast&&(y=[1,1,0,0]):m.isFirst?y=[1,0,0,1]:m.isLast&&(y=[0,1,1,0]);const _=this.createPortrait(f,e.faction,a,!a,y,n,m);this.portraits.set(f,_);const S=g*o;u==="vertical"?(_.container.x=0,_.container.y=-(l+S+o)):(_.container.x=l+S,_.container.y=0),this.addChild(_.container)}),c*o}createPortrait(e,n,a,l,o,u,c){const f=new jt,{portraitSize:g,portraitGap:m,direction:y}=this.config,_=this.getUnitData(e),S=this.getPortraitBorderColor(n,u),T=m/2,x=a?S:this.brightenColor(S,this.config.activePoolGlow),M=new Oe,w=8;this.drawComplexRect(M,g,g,w,o,x,c,y),f.addChild(M);const C=T,z=g-C*2,B=Math.max(0,w-C),N=new Oe;N.roundRect(C,C,z,z,B),N.fill(this.config.colors.background),N.stroke({width:1,color:this.config.colors.border,alpha:.8,alignment:.5});const G=this.createPortraitPlaceholder(e,_),Y=new jt;return Y.addChild(N),Y.addChild(G),Y.pivot.set(g/2,g/2),Y.position.set(g/2,g/2),f.addChild(Y),a?(f.alpha=.4,f.tint=this.config.colors.finished):f.alpha=this.config.portraitOpacity,l&&!a&&(f.eventMode="static",f.cursor="pointer",f.on("pointerdown",()=>this.handlePortraitClick(e)),f.on("pointerover",()=>{Y.scale.set(1.1)}),f.on("pointerout",()=>{Y.scale.set(1)})),{container:f,background:N,border:M,label:G,unitId:e}}createPortraitPlaceholder(e,n){const{portraitSize:a}=this.config,l=n?.unitId.substring(0,2).toUpperCase()||e.charAt(0).toUpperCase(),o=new Xn({fontFamily:"CinzelBold, sans-serif",fontSize:18,fontWeight:"bold",fill:this.config.colors.text,stroke:{color:657930,width:1}}),u=new ba({text:l,style:o});return u.anchor.set(.5),u.position.set(a/2,a/2),u}drawComplexRect(e,n,a,l,o,u,c,f){let y=0,_=0,S=n,T=a;f==="vertical"?(y=-4,S=n+8,c.isSingle?(_=-4,T=a+8):c.isFirst?(_=0,T=a+4):c.isLast&&(_=-4,T=a+4)):(_=-4,T=a+8,c.isSingle?(y=-4,S=n+8):c.isFirst?(y=-4,S=n+4):c.isLast&&(y=0,S=n+4));const[x,M,w,C]=o.map(z=>z*l);e.clear(),e.moveTo(y+x,_),e.lineTo(y+S-M,_),M>0&&e.arcTo(y+S,_,y+S,_+M,M),e.lineTo(y+S,_+T-w),w>0&&e.arcTo(y+S,_+T,y+S-w,_+T,w),e.lineTo(y+C,_+T),C>0&&e.arcTo(y,_+T,y,_+T-C,C),e.lineTo(y,_+x),x>0&&e.arcTo(y,_,y+x,_,x),e.fill({color:u,alpha:.65})}getPortraitBorderColor(e,n){switch(e){case wt.Player:return n?this.config.colors.player.accent:this.config.colors.player.primary;case wt.Enemy:return this.config.colors.enemy.primary;case wt.Neutral:return this.config.colors.neutral.primary;default:return this.config.colors.neutral.primary}}brightenColor(e,n){const a=Math.min(255,(e>>16&255)*n),l=Math.min(255,(e>>8&255)*n),o=Math.min(255,(e&255)*n);return a<<16|l<<8|o}getUnitData(e){return V.getState().units.get(e)||null}handlePortraitClick(e){this.onUnitClick?this.onUnitClick(e):console.warn(`TurnQueueRenderer: onUnitClick not assigned. UnitId: ${e}`)}clearPortraits(){this.portraits.forEach(e=>{e.container.destroy({children:!0})}),this.portraits.clear(),this.removeChildren()}destroy(e){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.clearPortraits(),super.destroy(e)}}const hT={iconSize:56,gap:12,borderWidth:3,direction:"horizontal",colors:{borderDefault:9202219,borderSelected:13936186,borderDisabled:2760470,background:1775378,text:14206880},assets:{atlasUrl:"/assets/skills.png",iconSizeInAtlas:64}};class fT extends jt{constructor(e,n,a,l={}){super(),this.skillManager=e,this.turnManager=n,this.stateMachine=a,this.config={...hT,...l},this.loadAssets(),this.setupStoreSubscription()}config;icons=new Map;unsubscribe=null;skillAtlasTexture=null;layoutHeight=0;getLayoutHeight(){return this.layoutHeight}onLayoutChange;async loadAssets(){try{Yn.cache.has(this.config.assets.atlasUrl)?this.skillAtlasTexture=Yn.get(this.config.assets.atlasUrl):this.skillAtlasTexture=await Yn.load(this.config.assets.atlasUrl),this.refreshRender()}catch(e){console.warn("SkillBarRenderer: Could not load skill atlas",e)}}setupStoreSubscription(){this.stateMachine.onStateChange((e,n)=>{if(e===Z.PlayerMoving||e===Z.PlayerAttacking||e===Z.EnemyTurn||n===Z.EnemyTurn){const{selectedUnitId:a,selectedSkillId:l}=V.getState();this.render(a,l)}}),this.unsubscribe=V.subscribe(e=>[e.selectedUnitId,e.selectedSkillId],([e,n])=>{this.render(e,n)},{equalityFn:Uf})}refreshRender(){const e=V.getState();this.render(e.selectedUnitId,e.selectedSkillId)}render(e,n){if(!e||this.stateMachine.is(Z.EnemyTurn)){this.clearIcons();return}const a=V.getState().units.get(e);if(!a)return;this.clearIcons();let l=0;const{gap:o,iconSize:u,direction:c}=this.config;[...a.skills].sort((y,_)=>y.sort-_.sort).forEach(y=>{const _=a.currentStamina>=y.cost,S=y.id===n,T=this.createSkillIcon(y,S,_);c==="vertical"?T.container.position.set(0,l):T.container.position.set(l,0),this.addChild(T.container),l+=u+o}),l+=o*.5;const g=this.createSkipButton(a.unitId),m=this.createEndTurnButton(a.unitId);if(this.addChild(g),this.addChild(m),c==="vertical")g.position.set(0,l),m.position.set(u+o,l),this.layoutHeight=l+u*.8;else{g.position.set(l,0);const y=l+u+o;m.position.set(y,0),this.layoutHeight=u}this.onLayoutChange?.()}createSkillIcon(e,n,a){const l=new jt,{iconSize:o,borderWidth:u,colors:c}=this.config,f=new Oe;f.roundRect(0,0,o,o,6),f.fill(c.background);let g;if(this.skillAtlasTexture){const T=this.config.assets.iconSizeInAtlas,x=e.iconCol||0,M=e.iconRow||0,w=new Ll(x*T,M*T,T,T),C=new V_({source:this.skillAtlasTexture.source,frame:w}),z=new Do(C);z.width=o-u*2,z.height=o-u*2,z.position.set(u,u),g=z,!a&&g instanceof Do&&(g.tint=7827558,g.alpha=.6)}else{const T=new Xn({fontFamily:"Arial",fontSize:24,fontWeight:"bold",fill:a?c.text:8947848});g=new ba({text:e.name[0],style:T}),g.anchor.set(.5),g.position.set(o/2,o/2)}const m=new Oe,y=n?c.borderSelected:a?c.borderDefault:c.borderDisabled;if(m.roundRect(0,0,o,o,6),m.stroke({width:u,color:y,alpha:a?1:.6}),m.stroke({width:u,color:9202219,alpha:.9}),n){const T=new Oe;T.roundRect(2,2,o-4,o-4,5),T.stroke({width:2,color:c.borderSelected,alpha:.9}),l.addChild(T)}const _=new jt;_.addChild(f),_.addChild(g),_.addChild(m),_.pivot.set(o/2,o/2),_.position.set(o/2,o/2),l.addChild(_),l.eventMode="static",l.cursor=a?"pointer":"not-allowed",a&&(l.on("pointerdown",()=>{this.handleSkillClick(e.id)}),l.on("pointerover",T=>{n||_.scale.set(1.1)}),l.on("pointerout",()=>{_.scale.set(1)}));const S={container:l,background:f,sprite:g,border:m,skillId:e.id};return this.icons.set(e.id,S),S}createSkipButton(e){const{iconSize:n,borderWidth:a,colors:l}=this.config,o=new jt,u=n*.8,c=n,f=new Oe;f.roundRect(0,0,c,u,6),f.fill(2760726),o.addChild(f);const g=new Oe;g.roundRect(0,0,c,u,6),g.stroke({width:a,color:9202219,alpha:.9}),o.addChild(g);const m=new Xn({fontFamily:"CinzelBold",fontSize:14,fontWeight:"bold",fill:13936186,align:"center"}),y=new ba({text:"SKIP",style:m});return y.anchor.set(.5),y.position.set(n/2,u/2),o.addChild(y),o.eventMode="static",o.cursor="pointer",o.on("pointerdown",()=>{this.handleSkipClick(e)}),o}createEndTurnButton(e){const{iconSize:n,borderWidth:a,colors:l}=this.config,o=new jt,u=n*.8,c=n,f=new Oe;f.roundRect(0,0,c,u,6),f.fill(2760726),o.addChild(f);const g=new Oe;g.roundRect(0,0,c,u,6),g.stroke({width:a,color:9202219,alpha:.9}),o.addChild(g);const m=new Xn({fontFamily:"CinzelBold",fontSize:14,fontWeight:"bold",fill:13936186,align:"center"}),y=new ba({text:"END",style:m});return y.anchor.set(.5),y.position.set(n/2,u/2),o.addChild(y),o.eventMode="static",o.cursor="pointer",o.on("pointerdown",()=>{this.handleEndTurnClick(e)}),o}handleSkillClick(e){V.getState().selectedSkillId===e?this.skillManager.deselectSkill():this.skillManager.selectSkill(e)}handleSkipClick(e){this.stateMachine.canHandleInput(V.getState().status)&&this.turnManager.deferUnit(e)}handleEndTurnClick(e){this.stateMachine.canHandleInput(V.getState().status)&&this.turnManager.endUnitTurn(e)}clearIcons(){this.icons.forEach(e=>{e.container.destroy({children:!0})}),this.icons.clear(),this.removeChildren()}destroy(e){this.unsubscribe&&this.unsubscribe(),this.clearIcons(),super.destroy(e)}}class dT extends jt{constructor(e){super(),this.app=e,this.app.renderer.on("resize",()=>{this.cameraManager.updateSize(this.app.screen.width,this.app.screen.height),this.positionTurnQueue(),this.positionSkillBar()}),this.viewport=new Pb({screenWidth:this.app.screen.width,screenHeight:this.app.screen.height,worldWidth:2e3,worldHeight:2e3,events:this.app.renderer.events}),this.addChild(this.viewport),this.addChild(this.uiLayer),this.viewport.addChild(this.mapLayer),this.viewport.addChild(this.groundLayer),this.viewport.addChild(this.unitLayer),this.viewport.addChild(this.vfxLayer),this.unitLayer.sortableChildren=!0,this.vfxLayer.sortableChildren=!0,this.entityRegistry=new z2,this.pathRenderer=new u2(this.groundLayer),this.tooltipManager=new o2,this.animationController=new O2,this.controlStateMachine=new R2,this.turnManager=new B2,this.highlightManager=new H2(this.entityRegistry,this.controlStateMachine),this.skillManager=new k2(this.controlStateMachine,this.pathRenderer),this.turnQueueRenderer=new cT({portraitSize:52}),this.turnQueueRenderer.onLayoutChange=()=>{this.positionTurnQueue()},this.skillBarRenderer=new fT(this.skillManager,this.turnManager,this.controlStateMachine,{direction:"vertical",gap:8,iconSize:64}),this.skillBarRenderer.onLayoutChange=()=>{this.positionSkillBar()},this.movementExecutor=new U2(this.animationController,this.pathRenderer,this.entityRegistry,this.turnManager,this.controlStateMachine),this.combatExecutor=new N2(this.animationController,this.entityRegistry,this.turnManager,this.controlStateMachine),this.inputController=new D2(this.highlightManager,this.movementExecutor,this.combatExecutor,this.entityRegistry,this.controlStateMachine,this.skillManager),this.aiStrategicManager=new I2,this.aiSystem=Df.create(this.aiStrategicManager),this.aiTurnManager=new jl(this.aiSystem,this.movementExecutor,this.combatExecutor,this.turnManager,this.controlStateMachine),this.cameraManager=new Qb(this.viewport),this.battleManager=new r2(this.pathRenderer,this.inputController,this.skillManager,this.cameraManager,this.highlightManager,this.entityRegistry,this.controlStateMachine,this.turnManager,this.aiTurnManager),di.initialize(this.controlStateMachine,this.skillManager,this.turnManager),this.damageText=new m2(n=>this.entityRegistry.getUnit(n)),this.vfxLayer.addChild(this.damageText),this.uiLayer.addChild(this.turnQueueRenderer),this.uiLayer.addChild(this.skillBarRenderer)}viewport;mapLayer=new jt;groundLayer=new jt;unitLayer=new jt;vfxLayer=new jt;cameraManager;entityRegistry;tooltipManager;pathRenderer;turnQueueRenderer;skillBarRenderer;animationController;damageText;highlightManager;controlStateMachine;inputController;movementExecutor;combatExecutor;skillManager;aiStrategicManager;aiSystem;aiTurnManager;turnManager;battleManager;uiLayer=new jt;endText=null;statusUnsubscribe=null;async init(){console.log("[BattleScene] Init start"),V.getState().reset(),this.initializeBattleMap(),console.log("[BattleScene] Map initialized"),await this.initializeUnits(),console.log("[BattleScene] Units initialized");const e=this.mapLayer.getLocalBounds().rectangle;this.cameraManager.initConstraints(e),this.cameraManager.applyGridMask(this.mapLayer,e),await this.loadGameAssets();const n=this.getUnitPositions();await this.cameraManager.focusOnBattleCenter(n),this.statusUnsubscribe=V.subscribe(a=>a.status,a=>this.showEndGameVisuals(a)),this.initializeBattle(),this.inputController.initializeHotkeys(),console.log("[BattleScene] Hotkeys initialized - scene ready"),this.viewport.on("pointermove",a=>{const l=a.data.global;rt.emit("MOUSE_MOVE",{x:l.x,y:l.y})})}initializeBattleMap=()=>{const n=new _2({size:24,seed:"battle-of-kyi187"}).generate();V.getState().setBattleMap(n);for(const[a,l]of n){const o=new S2(l);this.mapLayer.addChild(o),this.entityRegistry.registerHex(a,o)}};async initializeUnits(){(await Promise.all([tn.createUnit("archer",16,-2,10,wt.Enemy),tn.createUnit("peasant",15,-2,10,wt.Enemy),tn.createUnit("swordmen",15,-3,10,wt.Enemy),tn.createUnit("axewarrior",15,-1,10,wt.Enemy),tn.createUnit("archer",7,3,10),tn.createUnit("peasant",8,1,10),tn.createUnit("peasant",8,4,10),tn.createUnit("swordmen",8,2,10),tn.createUnit("axewarrior",8,3,10)])).forEach(n=>{this.unitLayer.addChild(n),this.entityRegistry.registerUnit(n.unitId,n),V.getState().updateHex(Nt(n),{entityId:n.unitId})}),this.unitLayer.sortChildren()}initializeBattle(){const e=V.getState(),n=Array.from(e.units.values()),a=rv(n),l=a[0];l&&(e.setTurnQueue(a),e.setStatus(Gt.Playing),e.setActiveFaction(l.faction),e.setSelectedUnit(l.unitIds[0]||null))}getUnitPositions=()=>Array.from(V.getState().units.values()).map(a=>{const l=this.entityRegistry.getUnit(a.unitId);return{x:l?.x||0,y:l?.y||0}});positionTurnQueue(){console.log("Global Y:",this.turnQueueRenderer.getGlobalPosition().y),this.turnQueueRenderer.position.set(this.app.screen.width-this.turnQueueRenderer.width-20,this.app.screen.height-20)}positionSkillBar(){this.skillBarRenderer.getLayoutHeight(),this.skillBarRenderer.position.set(20,this.app.screen.height-this.skillBarRenderer.height-20)}async showEndGameVisuals(e){if(e===Gt.Playing||e===Gt.Preparing)return;this.unitLayer.eventMode="none",this.cameraManager.lock(),this.tooltipManager.destroy();const n=this.getUnitPositions();await Promise.all([this.cameraManager.focusOnBattleCenter(n)]);const a=e===Gt.Victory,l=a?"VICTORY":"DEFEAT",o=a?"#FFD700":"#FF3333";this.viewport.animate({scale:.5,time:2e3,ease:"easeInOutExpo"}),await new Promise(f=>setTimeout(f,1500));const u=new Xn({fontFamily:"Arial Black",fontSize:100,fill:o,stroke:{color:"#000000",width:10},dropShadow:{color:"#000000",blur:5,distance:12}});this.endText=new ba({text:l,style:u}),this.endText.anchor.set(.5),this.endText.x=this.app.screen.width/2,this.endText.y=this.app.screen.height/2,this.endText.alpha=0,this.endText.scale.set(5),this.uiLayer.addChild(this.endText),pt.timeline().to(this.endText,{alpha:1,scale:1,duration:1.2,ease:"elastic.out(1, 0.75)"})}async loadGameAssets(){await Yn.load([{alias:"Cinzel",src:"assets/fonts/cinzel/cinzel-regular.ttf"},{alias:"CinzelBold",src:"assets/fonts/cinzel/cinzel-bold.ttf"}])}_destroy(e){console.warn("[BattleScene]  ..."),this.statusUnsubscribe&&this.statusUnsubscribe(),this.battleManager&&this.battleManager.destroy(),this.inputController&&this.inputController.destroy(),this.tooltipManager&&this.tooltipManager.destroy(),di.destroy(),pt.killTweensOf(this.viewport),pt.killTweensOf(this.viewport.scale),this.endText&&pt.killTweensOf(this.endText),this.viewport&&this.viewport.destroy({children:!0});const n={children:!0,texture:!1};typeof e=="object"&&e!==null?Object.assign(n,e):typeof e=="boolean"&&(n.children=e),this.pathRenderer.destroy(),this.damageText.destroy(),super.destroy(n),console.log("[BattleScene] Pixi ' .")}destroy(e){console.warn("[BattleScene]  ..."),this.statusUnsubscribe&&(this.statusUnsubscribe(),this.statusUnsubscribe=null),this.viewport.off("pointermove"),this.app.renderer.off("resize"),this.battleManager?.destroy(),this.inputController?.destroy(),this.tooltipManager?.destroy(),di.destroy(),pt.killTweensOf(this),pt.killTweensOf(this.viewport),pt.killTweensOf(this.viewport.scale),this.endText&&pt.killTweensOf(this.endText),this.animationController?.cancelAll?.(),this.pathRenderer?.destroy(),this.damageText?.destroy(),this.turnQueueRenderer?.destroy(),this.skillBarRenderer?.destroy(),this.entityRegistry?.destroy?.();const n={children:!0,texture:!1};typeof e=="object"&&e!==null?Object.assign(n,e):typeof e=="boolean"&&(n.children=e),this.viewport&&this.viewport.destroy({children:!0}),super.destroy(n),console.log("[BattleScene]   .")}}class pT extends jt{constructor(e){super(),this.app=e,this.addChild(this.uiLayer)}uiLayer=new jt;background=null;titleText=null;async init(){console.log("WorldScene: ..."),this.background=new Oe().rect(0,0,this.app.screen.width,this.app.screen.height).fill(1714714),this.addChildAt(this.background,0)}destroy(e){console.log("WorldScene: ...");const n={children:!0,texture:!1};typeof e=="object"&&e!==null&&Object.assign(n,e),super.destroy(n)}}const gT=()=>({currentScene:Oa.World}),Rf=cv()(hv(d=>({...gT(),setScene:e=>d({currentScene:e})}))),mT=()=>{const d=Rf(e=>e.setScene);return Q.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Q.jsxs("div",{className:"flex flex-col items-center gap-12 -translate-y-1/4",children:[Q.jsx("img",{src:"/public/assets/rw_logo.png",alt:"Ruthenian Warlords logo",className:"w-[clamp(220px,50vw,600px)] -mt-25vh h-auto max-h-[70vh] object-contain pointer-events-none"}),Q.jsxs("button",{onClick:()=>d(Oa.Battle),className:`
        relative px-10 py-3
        
        bg-slate-900/80 backdrop-blur-md
        border-2 border-amber-600/50
        text-amber-200 font-bold uppercase tracking-widest text-lg
        rounded-sm
        shadow-[0_0_15px_rgba(0,0,0,0.5)]
        hover:bg-amber-900/40 hover:border-amber-400 hover:text-white hover:shadow-[0_0_20px_rgba(217,119,6,0.3)]
        active:scale-95
        transition-all duration-300 ease-out
        pointer-events-auto cursor-pointer
      `,children:[Q.jsx("span",{className:"absolute top-0 left-0 w-2 h-2 border-t-2 border-l-2 border-amber-400"}),Q.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 border-t-2 border-r-2 border-amber-400"}),Q.jsx("span",{className:"absolute bottom-0 left-0 w-2 h-2 border-b-2 border-l-2 border-amber-400"}),Q.jsx("span",{className:"absolute bottom-0 right-0 w-2 h-2 border-b-2 border-r-2 border-amber-400"})," !"]}),Q.jsx("style",{children:`
                .world-hud-container {
                    position: absolute;
                    inset: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    pointer-events: none; /*         Pixi */
                }
                .attack-btn {
                    pointer-events: auto; /*      */
                    padding: 15px 40px;
                    background: #cc3333;
                    color: white;
                    font-weight: bold;
                    border: 2px solid #000;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: transform 0.2s;
                }
                .attack-btn:hover {
                    transform: scale(1.1) rotate(-2deg);
                    background: #ff4444;
                }
            `})]})})};function yT({unit:d,skill:e}){if(!e)return Q.jsx("div",{className:"smart-block",children:Q.jsx("div",{className:"idle-state",children:Q.jsx("div",{className:"idle-text"})})});const n=za.getEffectiveCount(d),a=Math.round(d?.stats.damageMin*n*(e.powerMult||1)),l=Math.round(d?.stats.damageMax*n*(e.powerMult||1));return Q.jsx("div",{className:"smart-block",children:Q.jsxs("div",{className:"skill-display",children:[Q.jsx("div",{className:"skill-icon",children:e.icon?Q.jsx("img",{src:e.icon,alt:e.name}):Q.jsx("div",{className:"skill-icon-placeholder",children:e.name.charAt(0).toUpperCase()})}),Q.jsxs("div",{className:"skill-stats",children:[Q.jsx("div",{className:"skill-name",children:e.name}),a!==void 0&&Q.jsxs("div",{className:"skill-stat",children:[Q.jsx("span",{className:"stat-label",children:"Dmg:"})," ",a," - ",l]}),e.range!==void 0&&Q.jsxs("div",{className:"skill-stat",children:[Q.jsx("span",{className:"stat-label",children:"Range:"})," ",e.range]}),e.cost!==void 0&&Q.jsxs("div",{className:"skill-stat stamina-cost",children:[Q.jsx("span",{className:"stat-label",children:"Cost:"})," ",e.cost]}),e.armorPenetration!==void 0&&Q.jsxs("div",{className:"skill-stat",children:[Q.jsx("span",{className:"stat-label",children:"Armor Pen:"})," ",e.armorPenetration*100,"%"]})]})]})})}const vT=({currentPercent:d,drainStartPercent:e=0,drainWidthPercent:n=0,previewWidthPercent:a=0,isDraining:l=!1,height:o=12})=>{const u=Math.max(0,Math.min(100,d));let c,f;l?(c=Math.max(0,Math.min(u,n)),f=u):(c=Math.max(0,Math.min(u,a)),f=u-c);const g=f;return console.log("[StaminaCore] Rendering with-:",{currentPercent:d,drainWidthPercent:n,previewWidthPercent:a,solidW:f,fill:u,drainX:g,drainW:c}),Q.jsxs("svg",{className:"stamina-svg",viewBox:`0 0 100 ${o}`,preserveAspectRatio:"none",style:{display:"block",width:"100%",height:"100%"},children:[Q.jsxs("defs",{children:[Q.jsx("clipPath",{id:"barRadius",children:Q.jsx("rect",{x:"0",y:"0",width:"100",height:o,rx:"1",ry:"1"})}),Q.jsxs("linearGradient",{id:"staminaVert",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[Q.jsx("stop",{offset:"0%",stopColor:"#e0b85a"}),Q.jsx("stop",{offset:"50%",stopColor:"#b8862a"}),Q.jsx("stop",{offset:"100%",stopColor:"#e0b85a"})]}),Q.jsxs("linearGradient",{id:"shadeGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[Q.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.15)"}),Q.jsx("stop",{offset:"50%",stopColor:"rgba(0,0,0,0)"}),Q.jsx("stop",{offset:"100%",stopColor:"rgba(255,255,255,0.15)"})]})]}),Q.jsxs("g",{clipPath:"url(#barRadius)",children:[Q.jsx("rect",{width:"100",height:o,fill:"#151510"}),Q.jsx("rect",{width:u,height:o,fill:"url(#staminaVert)",opacity:"0.08"}),Q.jsx("rect",{x:"0",width:f+.1,height:o,fill:"url(#staminaVert)"}),Q.jsx("rect",{x:g,width:c,height:o,fill:"url(#staminaVert)",className:"stamina-drain",style:{transition:l?"width 0.4s ease-out":""}}),Q.jsx("rect",{width:"100",height:o,fill:"url(#shadeGrad)",pointerEvents:"none"})]})]})};function _T({unitName:d,unitId:e,currentStamina:n,maxStamina:a,previewCost:l}){const[o,u]=an.useState(0),[c,f]=an.useState(0),[g,m]=an.useState(null),[y,_]=an.useState(!1);an.useEffect(()=>{const C=z=>{if(z.unitId!==e)return;const B=Math.max(0,n-z.amount);m(B),f(l),u(z.amount),_(!0),setTimeout(()=>{console.log("[StaminaCore] Drain animation start"),u(0)},0),setTimeout(()=>{console.log("[StaminaCore] Drain complete - unfreezing"),f(0),m(null),_(!1)},900)};return rt.on("STAMINA_DRAIN",C),()=>rt.off("STAMINA_DRAIN",C)},[e,n,l]);const S=g!==null?g:n,T=a>0?S/a*100:0,x=a>0?o/a*100:0,M=c>0?c:l,w=a>0?M/a*100:0;return console.log("[StaminaCore] Rendering with:",{predictedStamina:g,currentStamina:n,maxStamina:a,animatedDrain:o,effectiveStamina:S,activePreviewCost:M,currentPercent:T,previewPercent:w,drainPercent:x,isDraining:y}),Q.jsxs("div",{className:"unit-name-stamina",children:[Q.jsx("div",{className:"unit-name",children:d.split("_")[0]||"-"}),Q.jsx("div",{className:"stamina-bar-container",children:Q.jsx(vT,{currentPercent:T,drainWidthPercent:x,previewWidthPercent:w,isDraining:y,height:20})}),Q.jsxs("div",{className:"stamina-values",children:[Q.jsx("span",{className:"current",children:S}),Q.jsx("span",{className:"separator",children:"/"}),Q.jsx("span",{className:"max",children:a}),Q.jsx("span",{className:"preview",children:l>0?` >> ${Math.max(n-l,0)}`:""})]})]})}function ST({unit:d}){const e=d.currentUnitHp/d.stats.hp*100;return xT(d.faction),Q.jsxs("div",{className:"unit-stats-portrait",children:[Q.jsxs("div",{className:"stats-column",children:[Q.jsxs("div",{className:"stat-row",children:[Q.jsx("span",{className:"label",children:"Armor"}),Q.jsx("span",{className:"value",children:d.stats.armor})]}),Q.jsxs("div",{className:"stat-row",children:[Q.jsx("span",{className:"label",children:"Dmg"}),Q.jsxs("span",{className:"value",children:[d.stats.damageMin,"-",d.stats.damageMax]})]}),Q.jsxs("div",{className:"stat-row",children:[Q.jsx("span",{className:"label",children:"Speed"}),Q.jsx("span",{className:"value",children:d.stats.initiative||10})]})]}),Q.jsx("div",{className:"hp-bar-vertical",children:Q.jsx("div",{className:"hp-bar-container-vertical",children:Q.jsx("div",{className:"hp-bar-fill-vertical",style:{height:`${e}%`}})})}),Q.jsx("div",{className:"portrait-wrapper",children:Q.jsx("div",{className:"portrait-border",children:Q.jsx("div",{className:"portrait-background",children:Q.jsx("div",{className:"portrait-placeholder",children:d.unitId.substring(0,2).toUpperCase()})})})})]})}function xT(d){switch(d){case"PLAYER":return"#4a90e2";case"ENEMY":return"#e74c3c";case"NEUTRAL":return"#95a5a6";default:return"#95a5a6"}}function bT(){const{unit:d,skill:e,previewCost:n}=V(oT(a=>{const l=a.selectedUnitId,o=l?a.units.get(l):null;if(!o)return{unit:null,skill:null,previewCost:0};let u=null,c=0;return a.selectedSkillId?(u=o.skills.find(f=>f.id===a.selectedSkillId)||null,c=u?.cost||0):a.selectedHexId&&a.selectedPath&&(c=a.selectedPath.cost||0),{unit:o,skill:u,previewCost:c}}));return!d||d.faction!==wt.Player?Q.jsx("div",{className:"bottom-panel"}):Q.jsxs("div",{className:"bottom-panel",children:[Q.jsx(yT,{skill:e,unit:d}),Q.jsx(_T,{unitName:d.unitId,unitId:d.unitId,currentStamina:d.currentStamina,maxStamina:d.stats.stamina,previewCost:n}),Q.jsx(ST,{unit:d})]})}const TT=()=>{const{status:d}=uv(V),e=Rf(l=>l.setScene),[n,a]=an.useState(!1);return an.useEffect(()=>{if(d===Gt.Victory||d===Gt.Defeat){const l=setTimeout(()=>a(!0),2500);return()=>clearTimeout(l)}else a(!1)},[d]),d===Gt.Victory||d===Gt.Defeat?Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"ui-full-overlay",children:n&&Q.jsxs("button",{onClick:()=>e(Oa.World),className:`
                            self-end mb-5 mx-auto
                            /*   Pointer Events */
                            pointer-events-auto cursor-pointer
                            
                            /*    */
                            px-12 py-4 text-xl font-medium tracking-widest text-slate-200
                            
                            /*      (   ) */
                            bg-slate-900/60 backdrop-blur-md
                            
                            /* :      */
                            border-2 border-slate-400/40
                            
                            /* :   ,   ,     */
                            rounded-md
                            
                            /* :        */
                            shadow-[0_0_20px_rgba(30,41,59,0.5)]
                            
                            /* :   ,    */
                            hover:bg-slate-800/80
                            hover:border-slate-200
                            hover:text-white
                            hover:shadow-[0_0_25px_rgba(148,163,184,0.3)]
                            
                            /*    */
                            transition-all duration-500
                            active:scale-95
                            animate-fade-in
                        `,children:[Q.jsx("span",{className:"opacity-40 mr-3",children:""}),"RETURN TO WORLD MAP",Q.jsx("span",{className:"opacity-40 ml-3",children:""})]})}),Q.jsx("div",{className:"bottom-panel-container",children:Q.jsx("div",{className:"bottom-panel"})})]}):d!==Gt.Playing&&d!==Gt.Preparing?null:Q.jsx("div",{className:"bottom-panel-container",children:Q.jsx(bT,{})})},MT=({onReady:d})=>{const e=Rf(n=>n.currentScene);return an.useLayoutEffect(()=>{d(e)},[e]),Q.jsxs(Q.Fragment,{children:[e===Oa.World&&Q.jsx(mT,{}),e===Oa.Battle&&Q.jsx(TT,{})]})};pt.registerPlugin(ev,Cf);Cf.registerPIXI(P_);let Rm=null,Eo=null;async function wT(){if(Rm)return;let d=document.getElementById("app-container"),e=document.getElementById("pixi-wrapper"),n=document.getElementById("ui-root");d||(d=document.createElement("div"),d.id="app-container",e=document.createElement("div"),e.id="pixi-wrapper",n=document.createElement("div"),n.id="ui-root",d.appendChild(e),d.appendChild(n),document.body.appendChild(d));const a=new Q_;Rm=a,await a.init({resizeTo:e,resolution:window.devicePixelRatio||1,autoDensity:!0,backgroundColor:328965});const l=e.querySelector("canvas");l&&l.remove(),e.appendChild(a.canvas);let o=null;const u=async c=>{o&&(console.info("[Scene] Destroying old scene"),o.destroy({children:!0}),a.stage.removeChild(o),o=null),a.resize(),console.log(`[Scene] Init ${c}. Screen: ${a.screen.width}x${a.screen.height}`),c===Oa.Battle?(pb(),o=new dT(a)):o=new pT(a),a.stage.addChild(o),o.init&&await o.init()};!Eo&&n&&(Eo=iS.createRoot(n)),Eo&&Eo.render(Q.jsx(xs.StrictMode,{children:Q.jsx(MT,{onReady:u})})),window.app=a}wT().catch(console.error);
//# sourceMappingURL=index-DthU6JjB.js.map
